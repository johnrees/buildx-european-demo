(function () {function ma(a){return a&&a.__esModule?{d:a.default}:{d:a}}var gc=this;var je,bf,Dh={},M=Dh={};function co(){throw new Error("setTimeout has not been defined")}function Jn(){throw new Error("clearTimeout has not been defined")}function Cv($){if(je===setTimeout)return setTimeout($,0);if((je===co||!je)&&setTimeout)return je=setTimeout,setTimeout($,0);try{return je($,0)}catch(e){try{return je.call(null,$,0)}catch(e){return je.call(this,$,0)}}}function tP($){if(bf===clearTimeout)return clearTimeout($);if((bf===Jn||!bf)&&clearTimeout)return bf=clearTimeout,clearTimeout($);try{return bf($)}catch(e){try{return bf.call(null,$)}catch(e){return bf.call(this,$)}}}!function(){try{je="function"==typeof setTimeout?setTimeout:co}catch($){je=co}try{bf="function"==typeof clearTimeout?clearTimeout:Jn}catch($){bf=Jn}}();var mg,od=[],un=!1,bp=-1;function aP(){un&&mg&&(un=!1,mg.length?od=mg.concat(od):bp=-1,od.length&&hp())}function hp(){if(!un){var $=Cv(aP);un=!0;for(var e=od.length;e;){for(mg=od,od=[];++bp<e;)mg&&mg[bp].run();bp=-1,e=od.length}mg=null,un=!1,tP($)}}function sp($,e){this.fun=$,this.array=e}function ac(){}M.nextTick=function($){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];od.push(new sp($,e)),1!==od.length||un||Cv(hp)},sp.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=ac,M.addListener=ac,M.once=ac,M.off=ac,M.removeListener=ac,M.removeAllListeners=ac,M.emit=ac,M.prependListener=ac,M.prependOnceListener=ac,M.listeners=function($){return[]},M.binding=function($){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function($){throw new Error("process.chdir is not supported")},M.umask=function(){return 0};var TO={},yQ=arguments[0];!function(e,t){if(!e.setImmediate){var n,a,s,r,o,c=1,i={},l=!1,f=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){Dh.nextTick(function(){g(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){g(e.data)},n=function(e){s.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(a=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){g(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(g,0,e)}:(r="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&g(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(r+t,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var s={callback:e,args:t};return i[c]=s,n(c),c++},u.clearImmediate=p}function p(e){delete i[e]}function g(e){if(l)setTimeout(g,0,e);else{var n=i[e];if(n){l=!0;try{!function(e){var n=e.callback,a=e.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(t,a);}}(n)}finally{p(e),l=!1}}}}}("undefined"==typeof self?"undefined"==typeof gc?TO:gc:self);var m,QO=false;function yb(){if(QO)return;QO=true;m={};m=React}var Ff={};function jq(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jq)}catch(c){console.error(c)}}}var FO,kq,AO,yO,wO=false;function vO(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function hO(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(r){return e[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}function ZN(){if(wO)return;wO=true;FO={};kq=Object.getOwnPropertySymbols;AO=Object.prototype.hasOwnProperty;yO=Object.prototype.propertyIsEnumerable;FO=hO()?Object.assign:function(r,e){for(var t,n,o=vO(r),a=1;a<arguments.length;a++){for(var $ in t=Object(arguments[a]))AO.call(t,$)&&(o[$]=t[$]);if(kq){n=kq(t);for(var s=0;s<n.length;s++)yO.call(t,n[s])&&(o[n[s]]=t[n[s]])}}return o}}var t,n,Lr,Tc,Ng,Rr,VN,TN,fN,eN,Ot,WM,iu,zM,TL,EL,zw,Bw,FJ,zJ,YI,II,GI,zI,xI,mI,kI,iI,PH,NG=false;function Fg(){if(!VN){var $=n.expirationTime;TN?WM():TN=!0,Ot(rG,$)}}function Cl(){var $=n,v=n.next;if(n===v)n=null;else{var r=n.previous;n=r.next=v,v.previous=r}$.next=$.previous=null,r=$.callback,v=$.expirationTime,$=$.priorityLevel;var a=Tc,e=Rr;Tc=$,Rr=v;try{var t=r()}finally{Tc=a,Rr=e}if("function"==typeof t)if(t={callback:t,priorityLevel:$,expirationTime:v,next:null,previous:null},null===n)n=t.next=t.previous=t;else{r=null,$=n;do{if($.expirationTime>=v){r=$;break}$=$.next}while($!==n);null===r?r=n:r===n&&(n=t,Fg()),(v=r.previous).next=r.previous=t,t.next=r,t.previous=v}}function El(){if(-1===Ng&&null!==n&&1===n.priorityLevel){VN=!0;try{do{Cl()}while(null!==n&&1===n.priorityLevel)}finally{VN=!1,null!==n?Fg():TN=!1}}}function rG($){VN=!0;var v=Lr;Lr=$;try{if($)for(;null!==n;){var r=t.unstable_now();if(!(n.expirationTime<=r))break;do{Cl()}while(null!==n&&n.expirationTime<=r)}else if(null!==n)do{Cl()}while(null!==n&&!iu())}finally{VN=!1,Lr=v,null!==n?Fg():TN=!1,El()}}function Gl($){fN=zw(function(v){EL(eN),$(v)}),eN=TL(function(){Bw(fN),$(t.unstable_now())},100)}function iG(){if(NG)return;NG=true;t={};Object.defineProperty(t,"__esModule",{value:!0});n=null;Lr=!1;Tc=3;Ng=-1;Rr=-1;VN=!1;TN=!1;zM=Date;TL="function"==typeof setTimeout?setTimeout:void 0;EL="function"==typeof clearTimeout?clearTimeout:void 0;zw="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0;Bw="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;if("object"==typeof performance&&"function"==typeof performance.now){var $IvP$var$F=performance,$IvP$export$unstable_now=function(){return $IvP$var$F.now()};t.unstable_now=$IvP$export$unstable_now}else $IvP$export$unstable_now=function(){return zM.now()},t.unstable_now=$IvP$export$unstable_now;if("undefined"!=typeof window&&window._schedMock){var $IvP$var$G=window._schedMock;Ot=$IvP$var$G[0],WM=$IvP$var$G[1],iu=$IvP$var$G[2]}else if("undefined"==typeof window||"function"!=typeof window.addEventListener){var $IvP$var$H=null,$IvP$var$I=-1,$IvP$var$J=function($,v){if(null!==$IvP$var$H){var r=$IvP$var$H;$IvP$var$H=null;try{$IvP$var$I=v,r($)}finally{$IvP$var$I=-1}}};Ot=function($,v){-1!==$IvP$var$I?setTimeout(Ot,0,$,v):($IvP$var$H=$,setTimeout($IvP$var$J,v,!0,v),setTimeout($IvP$var$J,1073741823,!1,1073741823))},WM=function(){$IvP$var$H=null},iu=function(){return!1},$IvP$export$unstable_now=function(){return-1===$IvP$var$I?0:$IvP$var$I},t.unstable_now=$IvP$export$unstable_now}else{"undefined"!=typeof console&&("function"!=typeof zw&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof Bw&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var $IvP$var$K=null,$IvP$var$L=!1,$IvP$var$M=-1,$IvP$var$N=!1,$IvP$var$O=!1,$IvP$var$P=0,$IvP$var$R=33,$IvP$var$S=33;iu=function(){return $IvP$var$P<=t.unstable_now()};var $IvP$var$T="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function($){if($.source===window&&$.data===$IvP$var$T){$IvP$var$L=!1,$=$IvP$var$K;var v=$IvP$var$M;$IvP$var$K=null,$IvP$var$M=-1;var r=t.unstable_now(),a=!1;if(0>=$IvP$var$P-r){if(!(-1!==v&&v<=r))return $IvP$var$N||($IvP$var$N=!0,Gl($IvP$var$U)),$IvP$var$K=$,void($IvP$var$M=v);a=!0}if(null!==$){$IvP$var$O=!0;try{$(a)}finally{$IvP$var$O=!1}}}},!1);var $IvP$var$U=function($){if(null!==$IvP$var$K){Gl($IvP$var$U);var v=$-$IvP$var$P+$IvP$var$S;v<$IvP$var$S&&$IvP$var$R<$IvP$var$S?(8>v&&(v=8),$IvP$var$S=v<$IvP$var$R?$IvP$var$R:v):$IvP$var$R=v,$IvP$var$P=$+$IvP$var$S,$IvP$var$L||($IvP$var$L=!0,window.postMessage($IvP$var$T,"*"))}else $IvP$var$N=!1};Ot=function($,v){$IvP$var$K=$,$IvP$var$M=v,$IvP$var$O||0>v?window.postMessage($IvP$var$T,"*"):$IvP$var$N||($IvP$var$N=!0,Gl($IvP$var$U))},WM=function(){$IvP$var$K=null,$IvP$var$L=!1,$IvP$var$M=-1}}FJ=1;t.unstable_ImmediatePriority=FJ;zJ=2;t.unstable_UserBlockingPriority=zJ;YI=3;t.unstable_NormalPriority=YI;II=5;t.unstable_IdlePriority=II;GI=4;t.unstable_LowPriority=GI;zI=function($,v){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3;}var r=Tc,a=Ng;Tc=$,Ng=t.unstable_now();try{return v()}finally{Tc=r,Ng=a,El()}};t.unstable_runWithPriority=zI;xI=function($,v){var r=-1!==Ng?Ng:t.unstable_now();if("object"==typeof v&&null!==v&&"number"==typeof v.timeout)v=r+v.timeout;else switch(Tc){case 1:v=r+-1;break;case 2:v=r+250;break;case 5:v=r+1073741823;break;case 4:v=r+1e4;break;default:v=r+5e3;}if($={callback:$,priorityLevel:Tc,expirationTime:v,next:null,previous:null},null===n)n=$.next=$.previous=$,Fg();else{r=null;var a=n;do{if(a.expirationTime>v){r=a;break}a=a.next}while(a!==n);null===r?r=n:r===n&&(n=$,Fg()),(v=r.previous).next=r.previous=$,$.next=r,$.previous=v}return $};t.unstable_scheduleCallback=xI;mI=function($){var v=$.next;if(null!==v){if(v===$)n=null;else{$===n&&(n=v);var r=$.previous;r.next=v,v.previous=r}$.next=$.previous=null}};t.unstable_cancelCallback=mI;kI=function($){var v=Tc;return function(){var r=Tc,a=Ng;Tc=v,Ng=t.unstable_now();try{return $.apply(this,arguments)}finally{Tc=r,Ng=a,El()}}};t.unstable_wrapCallback=kI;iI=function(){return Tc};t.unstable_getCurrentPriorityLevel=iI;PH=function(){return!Lr&&(null!==n&&n.expirationTime<Rr||iu())};t.unstable_shouldYield=PH}var eG,dG=false;function UF(){if(dG)return;dG=true;eG={};eG=(iG(),t)}var nF,zj,la,Zc,it,zE,st,nE,mE,Wl,_d,vj,Zl,Ud,_l,Kt,UD,SD,cm,fm,Zt,Ub,lj,lc,ff,Fm,WB,Xu,Yu,Zu,$u,Yf,Zf,gB,_u,eB,dB,bB,Km,Yi,$A,dv,fv,ec,WA,Xi,GA,Qv,Ti,Oi,Yz,Uz,Bn,Rz,_a,oi,Pd,nc,En,ai,jx,lx,Pn,Vn,Uh,$n,Hx,Ix,wz,Px,Qx,Sx,oa,jo,by,dy,no,my,az,wg,_y,Zy,Xy,Uy,Sy,Sg,Fy,Wg,Py,Ny,My,Ly,Ky,Jy,Iy,MH,Hy,Qy,Ry,Ty,Vy,By,vo,zy,yy,Ch,wy,uy,Wy,Gh,Yy,qy,Nh,$y,ny,dz,ez,mo,hy,ey,$f,hz,jz,lz,mz,Hz,Fx,Yn,gg,Ic,za,Va,Me,Bx,Ax,Yh,Wn,xx,wx,Jz,Eg,sb,Gg,Ig,Zh,tx,$h,_h,Md,Rn,Qn,ox,nx,Kz,Lz,kx,Mz,Nz,Oz,ci,ex,Kn,gi,Ha,ii,Wa,li,Pz,A,Xw,Qz,Vw,ne,Vc,Gc,Uw,Tw,ub,cd,Ua,De,Cn,Sz,ed,Kw,ri,vi,wn,bc,Gw,Xz,Aw,iA,$v,sv,rv,qv,VA=false;function XA(t,e,$,r,a,i,n,l){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=[$,r,a,i,n,l],v=0;(t=Error(e.replace(/%s/g,function(){return o[v++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}function j(t){for(var e=arguments.length-1,$="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)$+="&args[]="+encodeURIComponent(arguments[r+1]);XA(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",$)}function IB(t,e,$,r,a,i,n,l,o){var v=Array.prototype.slice.call(arguments,3);try{e.apply($,v)}catch(u){this.onError(u)}}function JB(t,e,$,r,a,i,n,l,o){it=!1,zE=null,IB.apply(mE,arguments)}function XB(t,e,$,r,a,i,n,l,o){if(JB.apply(this,arguments),it){if(it){var v=zE;it=!1,zE=null}else j("198"),v=void 0;st||(st=!0,nE=v)}}function Su(){if(Wl)for(var t in _d){var e=_d[t],$=Wl.indexOf(t);if(-1<$||j("96",t),!vj[$])for(var r in e.extractEvents||j("97",t),vj[$]=e,$=e.eventTypes){var a=void 0,i=$[r],n=e,l=r;Zl.hasOwnProperty(l)&&j("99",l),Zl[l]=i;var o=i.phasedRegistrationNames;if(o){for(a in o)o.hasOwnProperty(a)&&Ru(o[a],n,l);a=!0}else i.registrationName?(Ru(i.registrationName,n,l),a=!0):a=!1;a||j("98",r,t)}}}function Ru(t,e,$){Ud[t]&&j("100",t),Ud[t]=e,_l[t]=e.eventTypes[$].dependencies}function Qu(t,e,$){var r=t.type||"unknown-event";t.currentTarget=SD($),XB(r,e,void 0,t),t.currentTarget=null}function Wd(t,e){return null==e&&j("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function Gm(t,e,$){Array.isArray(t)?t.forEach(e,$):t&&e.call($,t)}function _B(t){if(t){var e=t._dispatchListeners,$=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)Qu(t,e[r],$[r]);else e&&Qu(t,e,$);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function Mu(t,e){var $=t.stateNode;if(!$)return null;var r=Kt($);if(!r)return null;$=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1;}return t?null:($&&"function"!=typeof $&&j("231",e,typeof $),$)}function Em(t){if(null!==t&&(cm=Wd(cm,t)),t=cm,cm=null,t&&(Gm(t,_B),cm&&j("95"),st))throw t=nE,st=!1,nE=null,t}function bj(t){if(t[Ub])return t[Ub];for(;!t[Ub];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[Ub]).tag||6===t.tag?t:null}function Hu(t){return!(t=t[Ub])||5!==t.tag&&6!==t.tag?null:t}function Sc(t){if(5===t.tag||6===t.tag)return t.stateNode;j("33")}function Cm(t){return t[lj]||null}function Mb(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Fu(t,e,$){(e=Mu(t,$.dispatchConfig.phasedRegistrationNames[e]))&&($._dispatchListeners=Wd($._dispatchListeners,e),$._dispatchInstances=Wd($._dispatchInstances,t))}function aC(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,$=[];e;)$.push(e),e=Mb(e);for(e=$.length;0<e--;)Fu($[e],"captured",t);for(e=0;e<$.length;e++)Fu($[e],"bubbled",t)}}function Bm(t,e,$){t&&$&&$.dispatchConfig.registrationName&&(e=Mu(t,$.dispatchConfig.registrationName))&&($._dispatchListeners=Wd($._dispatchListeners,e),$._dispatchInstances=Wd($._dispatchInstances,t))}function bC(t){t&&t.dispatchConfig.registrationName&&Bm(t._targetInst,null,t)}function he(t){Gm(t,aC)}function dj(t,e){var $={};return $[t.toLowerCase()]=e.toLowerCase(),$["Webkit"+t]="webkit"+e,$["Moz"+t]="moz"+e,$}function ej(t){if(Fm[t])return Fm[t];if(!ff[t])return t;var e,$=ff[t];for(e in $)if($.hasOwnProperty(e)&&e in WB)return Fm[t]=$[e];return t}function zu(){if(_u)return _u;var t,e,$=gB,r=$.length,a="value"in Zf?Zf.value:Zf.textContent,i=a.length;for(t=0;t<r&&$[t]===a[t];t++);var n=r-t;for(e=1;e<=n&&$[r-e]===a[i-e];e++);return _u=a.slice(t,1<e?1-e:void 0)}function hj(){return!0}function ij(){return!1}function Ja(t,e,$,r){for(var a in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=$,t=this.constructor.Interface)t.hasOwnProperty(a)&&((e=t[a])?this[a]=e($):"target"===a?this.target=r:this[a]=$[a]);return this.isDefaultPrevented=(null!=$.defaultPrevented?$.defaultPrevented:!1===$.returnValue)?hj:ij,this.isPropagationStopped=ij,this}function cC(t,e,$,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,t,e,$,r),a}return new this(t,e,$,r)}function kC(t){t instanceof this||j("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function su(t){t.eventPool=[],t.getPooled=cC,t.release=kC}function pu(t,e){switch(t){case"keyup":return-1!==bB.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1;}}function ou(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}function nC(t,e){switch(t){case"compositionend":return ou(e);case"keypress":return 32!==e.which?null:(WA=!0,fv);case"textInput":return(t=e.data)===fv&&WA?null:t;default:return null;}}function pC(t,e){if(Xi)return"compositionend"===t||!Km&&pu(t,e)?(t=zu(),_u=gB=Zf=null,Xi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dv&&"ko"!==e.locale?null:e.data;default:return null;}}function ku(t){if(t=UD(t)){"function"!=typeof Qv&&j("280");var e=Kt(t.stateNode);Qv(t.stateNode,t.type,e)}}function Zr(t){Ti?Oi?Oi.push(t):Oi=[t]:Ti=t}function Yr(){if(Ti){var t=Ti,e=Oi;if(Oi=Ti=null,ku(t),e)for(t=0;t<e.length;t++)ku(e[t])}}function UH(t,e){return t(e)}function VH(t,e,$){return t(e,$)}function cI(){}function Ur(t,e){if(Yz)return t(e);Yz=!0;try{return UH(t,e)}finally{Yz=!1,(null!==Ti||null!==Oi)&&(cI(),Yr())}}function Tr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Uz[t.type]:"textarea"===e}function vl(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Qr(t){if(!lc)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function Pr(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function eI(t){var e=Pr(t)?"checked":"value",$=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==$&&"function"==typeof $.get&&"function"==typeof $.set){var a=$.get,i=$.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(t){r=""+t,i.call(this,t)}}),Object.defineProperty(t,e,{enumerable:$.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mj(t){t._valueTracker||(t._valueTracker=eI(t))}function Mr(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var $=e.getValue(),r="";return t&&(r=Pr(t)?t.checked?"true":"false":t.value),(t=r)!==$&&(e.setValue(t),!0)}function dh(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=Ix&&t[Ix]||t["@@iterator"])?t:null}function Lc(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case Pn:return"ConcurrentMode";case nc:return"Fragment";case Pd:return"Portal";case ai:return"Profiler";case En:return"StrictMode";case Uh:return"Suspense";}if("object"==typeof t)switch(t.$$typeof){case lx:return"Context.Consumer";case jx:return"Context.Provider";case Vn:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case $n:return Lc(t.type);case Hx:if(t=1===t._status?t._result:null)return Lc(t);}return null}function rl(t){var e="";do{t:switch(t.tag){case 2:case 16:case 0:case 1:case 5:case 8:case 13:var $=t._debugOwner,r=t._debugSource,a=Lc(t.type),i=null;$&&(i=Lc($.type)),$=a,a="",r?a=" (at "+r.fileName.replace(Rz,"")+":"+r.lineNumber+")":i&&(a=" (created by "+i+")"),i="\n    in "+($||"Unknown")+a;break t;default:i="";}e+=i,t=t.return}while(t);return e}function hI(t){return!!Px.call(Sx,t)||!Px.call(Qx,t)&&(wz.test(t)?Sx[t]=!0:(Qx[t]=!0,!1))}function jI(t,e,$,r){if(null!==$&&0===$.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==$?!$.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1;}}function DI(t,e,$,r){if(null==e||jI(t,e,$,r))return!0;if(r)return!1;if(null!==$)switch($.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e;}return!1}function Sa(t,e,$,r,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=$,this.propertyName=t,this.type=e}function nl(t){return t[1].toUpperCase()}function ml(t,e,$,r){var a=oa.hasOwnProperty(e)?oa[e]:null;(null!==a?0===a.type:!r&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(DI(e,$,a,r)&&($=null),r||null===a?hI(e)&&(null===$?t.removeAttribute(e):t.setAttribute(e,""+$)):a.mustUseProperty?t[a.propertyName]=null===$?3!==a.type&&"":$:(e=a.attributeName,r=a.attributeNamespace,null===$?t.removeAttribute(e):($=3===(a=a.type)||4===a&&!0===$?"":""+$,r?t.setAttributeNS(r,e,$):t.setAttribute(e,$))))}function wc(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return"";}}function ll(t,e){var $=e.checked;return la({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=$?$:t._wrapperState.initialChecked})}function qr(t,e){var $=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;$=wc(null!=e.value?e.value:$),t._wrapperState={initialChecked:r,initialValue:$,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function pr(t,e){null!=(e=e.checked)&&ml(t,"checked",e,!1)}function bl(t,e){pr(t,e);var $=wc(e.value),r=e.type;if(null!=$)"number"===r?(0===$&&""===t.value||t.value!=$)&&(t.value=""+$):t.value!==""+$&&(t.value=""+$);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?al(t,e.type,$):e.hasOwnProperty("defaultValue")&&al(t,e.type,wc(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Oq(t,e,$){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,$||e===t.value||(t.value=e),t.defaultValue=e}""!==($=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==$&&(t.name=$)}function al(t,e,$){"number"===e&&t.ownerDocument.activeElement===t||(null==$?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+$&&(t.defaultValue=""+$))}function Jq(t,e,$){return(t=Ja.getPooled(by.change,t,e,$)).type="change",Zr($),he(t),t}function FI(t){Em(t)}function Qj(t){if(Mr(Sc(t)))return t}function HI(t,e){if("change"===t)return e}function vq(){dy&&(dy.detachEvent("onpropertychange",tq),no=dy=null)}function tq(t){"value"===t.propertyName&&Qj(no)&&Ur(FI,t=Jq(no,t,vl(t)))}function KI(t,e,$){"focus"===t?(vq(),no=$,(dy=e).attachEvent("onpropertychange",tq)):"blur"===t&&vq()}function LI(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Qj(no)}function MI(t,e){if("click"===t)return Qj(e)}function OI(t,e){if("input"===t||"change"===t)return Qj(e)}function UI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=_y[t])&&!!e[t]}function Ek(){return UI}function wp(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function Gf(t,e){if(wp(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var $=Object.keys(t),r=Object.keys(e);if($.length!==r.length)return!1;for(r=0;r<$.length;r++)if(!Ny.call(e,$[r])||!wp(t[$[r]],e[$[r]]))return!1;return!0}function Hf(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function vp(t){2!==Hf(t)&&j("188")}function WI(t){var e=t.alternate;if(!e)return 3===(e=Hf(t))&&j("188"),1===e?null:t;for(var $=t,r=e;;){var a=$.return,i=a?a.alternate:null;if(!a||!i)break;if(a.child===i.child){for(var n=a.child;n;){if(n===$)return vp(a),t;if(n===r)return vp(a),e;n=n.sibling}j("188")}if($.return!==r.return)$=a,r=i;else{n=!1;for(var l=a.child;l;){if(l===$){n=!0,$=a,r=i;break}if(l===r){n=!0,r=a,$=i;break}l=l.sibling}if(!n){for(l=i.child;l;){if(l===$){n=!0,$=i,r=a;break}if(l===r){n=!0,r=i,$=a;break}l=l.sibling}n||j("189")}}$.alternate!==r&&j("190")}return 3!==$.tag&&j("188"),$.stateNode.current===$?t:e}function pp(t){if(!(t=WI(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function sk(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function np(t,e){var $=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[$],isInteractive:e},By[t]=e,vo[$]=e}function nJ(t){var e=t.targetInst,$=e;do{if(!$){t.ancestors.push($);break}var r;for(r=$;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push($),$=bj(r)}while($);for($=0;$<t.ancestors.length;$++){e=t.ancestors[$];var a=vl(t.nativeEvent);r=t.topLevelType;for(var i=t.nativeEvent,n=null,l=0;l<vj.length;l++){var o=vj[l];o&&(o=o.extractEvents(r,e,i,a))&&(n=Wd(n,o))}Em(n)}}function I(t,e){if(!e)return null;var $=(yy(t)?Uo:kk).bind(null,t);e.addEventListener(t,$,!1)}function ok(t,e){if(!e)return null;var $=(yy(t)?Uo:kk).bind(null,t);e.addEventListener(t,$,!0)}function Uo(t,e){VH(kk,t,e)}function kk(t,e){if(wy){var $=vl(e);if(null===($=bj($))||"number"!=typeof $.tag||2===Hf($)||($=null),Ch.length){var r=Ch.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=$,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:$,ancestors:[]};try{Ur(nJ,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Ch.length&&Ch.push(t)}}}function zo(t){return Object.prototype.hasOwnProperty.call(t,Gh)||(t[Gh]=Wy++,uy[t[Gh]]={}),uy[t[Gh]]}function Gk(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function ry(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ly(t,e){var $,r=ry(t);for(t=0;r;){if(3===r.nodeType){if($=t+r.textContent.length,t<=e&&$>=e)return{node:r,offset:e-t};t=$}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ry(r)}}function Mx(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?Mx(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function qx(){for(var t=window,e=Gk();e instanceof t.HTMLIFrameElement;){try{t=e.contentDocument.defaultView}catch($){break}e=Gk(t.document)}return e}function Uk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Dv(t,e){var $=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return dz||null==Nh||Nh!==Gk($)?null:("selectionStart"in($=Nh)&&Uk($)?$={start:$.selectionStart,end:$.selectionEnd}:$={anchorNode:($=($.ownerDocument&&$.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:$.anchorOffset,focusNode:$.focusNode,focusOffset:$.focusOffset},ny&&Gf(ny,$)?null:(ny=$,(t=Ja.getPooled(qy.select,$y,t,e)).type="select",t.target=Nh,he(t),t))}function yM(t){var e="";return zj.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}function _k(t,e){return t=la({children:void 0},e),(e=yM(e.children))&&(t.children=e),t}function ie(t,e,$,r){if(t=t.options,e){e={};for(var a=0;a<$.length;a++)e["$"+$[a]]=!0;for($=0;$<t.length;$++)a=e.hasOwnProperty("$"+t[$].value),t[$].selected!==a&&(t[$].selected=a),a&&r&&(t[$].defaultSelected=!0)}else{for($=""+wc($),e=null,a=0;a<t.length;a++){if(t[a].value===$)return t[a].selected=!0,void(r&&(t[a].defaultSelected=!0));null!==e||t[a].disabled||(e=t[a])}null!==e&&(e.selected=!0)}}function wl(t,e){return null!=e.dangerouslySetInnerHTML&&j("91"),la({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nu(t,e){var $=e.value;null==$&&($=e.defaultValue,null!=(e=e.children)&&(null!=$&&j("92"),Array.isArray(e)&&(1>=e.length||j("93"),e=e[0]),$=e),null==$&&($="")),t._wrapperState={initialValue:wc($)}}function Gu(t,e){var $=wc(e.value),r=wc(e.defaultValue);null!=$&&(($=""+$)!==t.value&&(t.value=$),null==e.defaultValue&&t.defaultValue!==$&&(t.defaultValue=$)),null!=r&&(t.defaultValue=""+r)}function xu(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function uu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function Pl(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?uu(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function hg(t,e){if(e){var $=t.firstChild;if($&&$===t.lastChild&&3===$.nodeType)return void($.nodeValue=e)}t.textContent=e}function lu(t,e,$){return null==e||"boolean"==typeof e||""===e?"":$||"number"!=typeof e||0===e||$f.hasOwnProperty(t)&&$f[t]?(""+e).trim():e+"px"}function bu(t,e){for(var $ in t=t.style,e)if(e.hasOwnProperty($)){var r=0===$.indexOf("--"),a=lu($,e[$],r);"float"===$&&($="cssFloat"),r?t.setProperty($,a):t[$]=a}}function Sl(t,e){e&&(jz[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&j("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&j("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||j("61")),null!=e.style&&"object"!=typeof e.style&&j("62",""))}function $l(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function _b(t,e){var $=zo(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=_l[e];for(var r=0;r<e.length;r++){var a=e[r];if(!$.hasOwnProperty(a)||!$[a]){switch(a){case"scroll":ok("scroll",t);break;case"focus":case"blur":ok("focus",t),ok("blur",t),$.blur=!0,$.focus=!0;break;case"cancel":case"close":Qr(a)&&ok(a,t);break;case"invalid":case"submit":case"reset":break;default:-1===Yf.indexOf(a)&&I(a,t);}$[a]=!0}}}function pj(){}function Ar(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus;}return!1}function zm(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}function Hm(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function rq(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Ca(t){0>gg||(t.current=Yn[gg],Yn[gg]=null,gg--)}function La(t,e){Yn[++gg]=t.current,t.current=e}function Ae(t,e){var $=t.type.contextTypes;if(!$)return Ic;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in $)i[a]=e[a];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ea(t){return null!=(t=t.childContextTypes)}function Zi(t){Ca(Va,t),Ca(za,t)}function Mm(t){Ca(Va,t),Ca(za,t)}function Kp(t,e,$){za.current!==Ic&&j("168"),La(za,e,t),La(Va,$,t)}function Bp(t,e,$){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return $;for(var a in r=r.getChildContext())a in t||j("108",Lc(e)||"Unknown",a);return la({},$,r)}function Ui(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Ic,Me=za.current,La(za,e,t),La(Va,Va.current,t),!0}function zp(t,e,$){var r=t.stateNode;r||j("169"),$?(e=Bp(t,e,Me),r.__reactInternalMemoizedMergedChildContext=e,Ca(Va,t),Ca(za,t),La(za,e,t)):Ca(Va,t),La(Va,$,t)}function op(t){return function(e){try{return t(e)}catch($){}}}function $O(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var $=e.inject(t);Bx=op(function(t){return e.onCommitFiberRoot($,t)}),Ax=op(function(t){return e.onCommitFiberUnmount($,t)})}catch(r){}return!0}function _O(t,e,$,r){this.tag=t,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function tb(t,e,$,r){return new _O(t,e,$,r)}function ln(t){return!(!(t=t.prototype)||!t.isReactComponent)}function dP(t){if("function"==typeof t)return ln(t)?1:0;if(null!=t){if((t=t.$$typeof)===Vn)return 11;if(t===$n)return 14}return 2}function sd(t,e){var $=t.alternate;return null===$?(($=tb(t.tag,e,t.key,t.mode)).elementType=t.elementType,$.type=t.type,$.stateNode=t.stateNode,$.alternate=t,t.alternate=$):($.pendingProps=e,$.effectTag=0,$.nextEffect=null,$.firstEffect=null,$.lastEffect=null),$.childExpirationTime=t.childExpirationTime,$.expirationTime=t.expirationTime,$.child=t.child,$.memoizedProps=t.memoizedProps,$.memoizedState=t.memoizedState,$.updateQueue=t.updateQueue,$.firstContextDependency=t.firstContextDependency,$.sibling=t.sibling,$.index=t.index,$.ref=t.ref,$}function Ni(t,e,$,r,a,i){var n=2;if(r=t,"function"==typeof t)ln(t)&&(n=1);else if("string"==typeof t)n=5;else t:switch(t){case nc:return Dc($.children,a,i,e);case Pn:return Wo($,3|a,i,e);case En:return Wo($,2|a,i,e);case ai:return(t=tb(12,$,e,4|a)).elementType=ai,t.type=ai,t.expirationTime=i,t;case Uh:return(t=tb(13,$,e,a)).elementType=Uh,t.type=Uh,t.expirationTime=i,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case jx:n=10;break t;case lx:n=9;break t;case Vn:n=11;break t;case $n:n=14;break t;case Hx:n=16,r=null;break t;}j("130",null==t?t:typeof t,"");}return(e=tb(n,$,e,a)).elementType=t,e.type=r,e.expirationTime=i,e}function Dc(t,e,$,r){return(t=tb(7,t,r,e)).expirationTime=$,t}function Wo(t,e,$,r){return t=tb(8,t,r,e),e=0==(1&e)?En:Pn,t.elementType=e,t.type=e,t.expirationTime=$,t}function qn(t,e,$){return(t=tb(6,t,null,e)).expirationTime=$,t}function rn(t,e,$){return(e=tb(4,null!==t.children?t.children:[],t.key,e)).expirationTime=$,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jf(t,e){t.didError=!1;var $=t.earliestPendingTime;0===$?t.earliestPendingTime=t.latestPendingTime=e:$<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),ui(e,t)}function fw(t,e){t.didError=!1;var $=t.latestPingedTime;0!==$&&$>=e&&(t.latestPingedTime=0),$=t.earliestPendingTime;var r=t.latestPendingTime;$===e?t.earliestPendingTime=r===e?t.latestPendingTime=0:r:r===e&&(t.latestPendingTime=$),$=t.earliestSuspendedTime,r=t.latestSuspendedTime,0===$?t.earliestSuspendedTime=t.latestSuspendedTime=e:$<e?t.earliestSuspendedTime=e:r>e&&(t.latestSuspendedTime=e),ui(e,t)}function Uu(t,e){var $=t.earliestPendingTime;return $>e&&(e=$),(t=t.earliestSuspendedTime)>e&&(e=t),e}function ui(t,e){var $=e.earliestSuspendedTime,r=e.latestSuspendedTime,a=e.earliestPendingTime,i=e.latestPingedTime;0===(a=0!==a?a:i)&&(0===t||r<t)&&(a=r),0!==(t=a)&&$>t&&(t=$),e.nextExpirationTimeToWorkOn=a,e.expirationTime=t}function si(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Dn(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Hc(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function ni(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function hc(t,e){var $=t.alternate;if(null===$){var r=t.updateQueue,a=null;null===r&&(r=t.updateQueue=si(t.memoizedState))}else r=t.updateQueue,a=$.updateQueue,null===r?null===a?(r=t.updateQueue=si(t.memoizedState),a=$.updateQueue=si($.memoizedState)):r=t.updateQueue=Dn(a):null===a&&(a=$.updateQueue=Dn(r));null===a||r===a?ni(r,e):null===r.lastUpdate||null===a.lastUpdate?(ni(r,e),ni(a,e)):(ni(r,e),a.lastUpdate=e)}function Nt(t,e){var $=t.updateQueue;null===($=null===$?t.updateQueue=si(t.memoizedState):Ft(t,$)).lastCapturedUpdate?$.firstCapturedUpdate=$.lastCapturedUpdate=e:($.lastCapturedUpdate.next=e,$.lastCapturedUpdate=e)}function Ft(t,e){var $=t.alternate;return null!==$&&e===$.updateQueue&&(e=t.updateQueue=Dn(e)),e}function vt(t,e,$,r,a,i){switch($.tag){case 1:return"function"==typeof(t=$.payload)?t.call(i,r,a):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null==(a="function"==typeof(t=$.payload)?t.call(i,r,a):t))break;return la({},r,a);case 2:Yh=!0;}return r}function $g(t,e,$,r,a){Yh=!1;for(var i=(e=Ft(t,e)).baseState,n=null,l=0,o=e.firstUpdate,v=i;null!==o;){var u=o.expirationTime;u<a?(null===n&&(n=o,i=v),l<u&&(l=u)):(v=vt(t,e,o,v,$,r),null!==o.callback&&(t.effectTag|=32,o.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=o:(e.lastEffect.nextEffect=o,e.lastEffect=o))),o=o.next}for(u=null,o=e.firstCapturedUpdate;null!==o;){var c=o.expirationTime;c<a?(null===u&&(u=o,null===n&&(i=v)),l<c&&(l=c)):(v=vt(t,e,o,v,$,r),null!==o.callback&&(t.effectTag|=32,o.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=o:(e.lastCapturedEffect.nextEffect=o,e.lastCapturedEffect=o))),o=o.next}null===n&&(e.lastUpdate=null),null===u?e.lastCapturedUpdate=null:t.effectTag|=32,null===n&&null===u&&(i=v),e.baseState=i,e.firstUpdate=n,e.firstCapturedUpdate=u,t.expirationTime=l,t.memoizedState=v}function kt(t,e,$){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),Or(e.firstEffect,$),e.firstEffect=e.lastEffect=null,Or(e.firstCapturedEffect,$),e.firstCapturedEffect=e.lastCapturedEffect=null}function Or(t,e){for(;null!==t;){var $=t.callback;if(null!==$){t.callback=null;var r=e;"function"!=typeof $&&j("191",$),$.call(r)}t=t.nextEffect}}function fi(t,e){return{value:t,source:e,stack:rl(e)}}function vr(t,e){var $=t.type._context;La(Wn,$._currentValue,t),$._currentValue=e}function Mn(t){var e=Wn.current;Ca(Wn,t),t.type._context._currentValue=e}function df(t){xx=t,Jz=wx=null,t.firstContextDependency=null}function dp(t,e){return Jz!==t&&!1!==e&&0!==e&&("number"==typeof e&&1073741823!==e||(Jz=t,e=1073741823),e={context:t,observedBits:e,next:null},null===wx?(null===xx&&j("293"),xx.firstContextDependency=wx=e):wx=wx.next=e),t._currentValue}function Fd(t){return t===Eg&&j("174"),t}function Zn(t,e){La(Ig,e,t),La(Gg,t,t),La(sb,Eg,t);var $=e.nodeType;switch($){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pl(null,"");break;default:e=Pl(e=($=8===$?e.parentNode:e).namespaceURI||null,$=$.tagName);}Ca(sb,t),La(sb,e,t)}function gf(t){Ca(sb,t),Ca(Gg,t),Ca(Ig,t)}function vx(t){Fd(Ig.current);var e=Fd(sb.current),$=Pl(e,t.type);e!==$&&(La(Gg,t,t),La(sb,$,t))}function go(t){Gg.current===t&&(Ca(sb,t),Ca(Gg,t))}function rb(t,e){if(t&&t.defaultProps)for(var $ in e=la({},e),t=t.defaultProps)void 0===e[$]&&(e[$]=t[$]);return e}function YP(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:throw t._status=0,(e=(e=t._ctor)()).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)}),t._result=e,e;}}function Kh(t,e,$,r){$=null==($=$(r,e=t.memoizedState))?e:la({},e,$),t.memoizedState=$,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=$)}function At(t,e,$,r,a,i,n){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,i,n):!e.prototype||!e.prototype.isPureReactComponent||!Gf($,r)||!Gf(a,i)}function rs(t,e,$){var r=!1,a=Ic,i=e.contextType;return"object"==typeof i&&null!==i?i=Zh.currentDispatcher.readContext(i):(a=Ea(e)?Me:za.current,i=(r=null!=(r=e.contextTypes))?Ae(t,a):Ic),e=new e($,i),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Nr(t,e,$,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps($,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps($,r),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function to(t,e,$,r){var a=t.stateNode;a.props=$,a.state=t.memoizedState,a.refs=tx;var i=e.contextType;"object"==typeof i&&null!==i?a.context=Zh.currentDispatcher.readContext(i):(i=Ea(e)?Me:za.current,a.context=Ae(t,i)),null!==(i=t.updateQueue)&&($g(t,i,$,a,r),a.state=t.memoizedState),"function"==typeof(i=e.getDerivedStateFromProps)&&(Kh(t,e,i,$),a.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(e=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),e!==a.state&&$h.enqueueReplaceState(a,a.state,null),null!==(i=t.updateQueue)&&($g(t,i,$,a,r),a.state=t.memoizedState)),"function"==typeof a.componentDidMount&&(t.effectTag|=4)}function sh(t,e,$){if(null!==(t=$.ref)&&"function"!=typeof t&&"object"!=typeof t){if($._owner){$=$._owner;var r=void 0;$&&(1!==$.tag&&j("289"),r=$.stateNode),r||j("147",t);var a=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===a?e.ref:((e=function(t){var e=r.refs;e===tx&&(e=r.refs={}),null===t?delete e[a]:e[a]=t})._stringRef=a,e)}"string"!=typeof t&&j("284"),$._owner||j("290",t)}return t}function Eh(t,e){"textarea"!==t.type&&j("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function qp(t){function e(e,$){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=$,e.lastEffect=$):e.firstEffect=e.lastEffect=$,$.nextEffect=null,$.effectTag=8}}function $($,r){if(!t)return null;for(;null!==r;)e($,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(t,e,$){return(t=sd(t,e,$)).index=0,t.sibling=null,t}function i(e,$,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<$?(e.effectTag=2,$):r:(e.effectTag=2,$):$}function n(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,$,r){return null===e||6!==e.tag?((e=qn($,t.mode,r)).return=t,e):((e=a(e,$,r)).return=t,e)}function o(t,e,$,r){return null!==e&&e.elementType===$.type?((r=a(e,$.props,r)).ref=sh(t,e,$),r.return=t,r):((r=Ni($.type,$.key,$.props,null,t.mode,r)).ref=sh(t,e,$),r.return=t,r)}function v(t,e,$,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==$.containerInfo||e.stateNode.implementation!==$.implementation?((e=rn($,t.mode,r)).return=t,e):((e=a(e,$.children||[],r)).return=t,e)}function u(t,e,$,r,i){return null===e||7!==e.tag?((e=Dc($,t.mode,r,i)).return=t,e):((e=a(e,$,r)).return=t,e)}function c(t,e,$){if("string"==typeof e||"number"==typeof e)return(e=qn(""+e,t.mode,$)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case oi:return($=Ni(e.type,e.key,e.props,null,t.mode,$)).ref=sh(t,null,e),$.return=t,$;case Pd:return(e=rn(e,t.mode,$)).return=t,e;}if(_h(e)||dh(e))return(e=Dc(e,t.mode,$,null)).return=t,e;Eh(t,e)}return null}function f(t,e,$,r){var a=null!==e?e.key:null;if("string"==typeof $||"number"==typeof $)return null!==a?null:l(t,e,""+$,r);if("object"==typeof $&&null!==$){switch($.$$typeof){case oi:return $.key===a?$.type===nc?u(t,e,$.props.children,r,a):o(t,e,$,r):null;case Pd:return $.key===a?v(t,e,$,r):null;}if(_h($)||dh($))return null!==a?null:u(t,e,$,r,null);Eh(t,$)}return null}function s(t,e,$,r,a){if("string"==typeof r||"number"==typeof r)return l(e,t=t.get($)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case oi:return t=t.get(null===r.key?$:r.key)||null,r.type===nc?u(e,t,r.props.children,a,r.key):o(e,t,r,a);case Pd:return v(e,t=t.get(null===r.key?$:r.key)||null,r,a);}if(_h(r)||dh(r))return u(e,t=t.get($)||null,r,a,null);Eh(e,r)}return null}function d(a,n,l,o){for(var v=null,u=null,d=n,p=n=0,h=null;null!==d&&p<l.length;p++){d.index>p?(h=d,d=null):h=d.sibling;var m=f(a,d,l[p],o);if(null===m){null===d&&(d=h);break}t&&d&&null===m.alternate&&e(a,d),n=i(m,n,p),null===u?v=m:u.sibling=m,u=m,d=h}if(p===l.length)return $(a,d),v;if(null===d){for(;p<l.length;p++)(d=c(a,l[p],o))&&(n=i(d,n,p),null===u?v=d:u.sibling=d,u=d);return v}for(d=r(a,d);p<l.length;p++)(h=s(d,a,p,l[p],o))&&(t&&null!==h.alternate&&d.delete(null===h.key?p:h.key),n=i(h,n,p),null===u?v=h:u.sibling=h,u=h);return t&&d.forEach(function(t){return e(a,t)}),v}function p(a,n,l,o){var v=dh(l);"function"!=typeof v&&j("150"),null==(l=v.call(l))&&j("151");for(var u=v=null,d=n,p=n=0,h=null,m=l.next();null!==d&&!m.done;p++,m=l.next()){d.index>p?(h=d,d=null):h=d.sibling;var g=f(a,d,m.value,o);if(null===g){d||(d=h);break}t&&d&&null===g.alternate&&e(a,d),n=i(g,n,p),null===u?v=g:u.sibling=g,u=g,d=h}if(m.done)return $(a,d),v;if(null===d){for(;!m.done;p++,m=l.next())null!==(m=c(a,m.value,o))&&(n=i(m,n,p),null===u?v=m:u.sibling=m,u=m);return v}for(d=r(a,d);!m.done;p++,m=l.next())null!==(m=s(d,a,p,m.value,o))&&(t&&null!==m.alternate&&d.delete(null===m.key?p:m.key),n=i(m,n,p),null===u?v=m:u.sibling=m,u=m);return t&&d.forEach(function(t){return e(a,t)}),v}return function(t,r,i,l){var o="object"==typeof i&&null!==i&&i.type===nc&&null===i.key;o&&(i=i.props.children);var v="object"==typeof i&&null!==i;if(v)switch(i.$$typeof){case oi:t:{for(v=i.key,o=r;null!==o;){if(o.key===v){if(7===o.tag?i.type===nc:o.elementType===i.type){$(t,o.sibling),(r=a(o,i.type===nc?i.props.children:i.props,l)).ref=sh(t,o,i),r.return=t,t=r;break t}$(t,o);break}e(t,o),o=o.sibling}i.type===nc?((r=Dc(i.props.children,t.mode,l,i.key)).return=t,t=r):((l=Ni(i.type,i.key,i.props,null,t.mode,l)).ref=sh(t,r,i),l.return=t,t=l)}return n(t);case Pd:t:{for(o=i.key;null!==r;){if(r.key===o){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){$(t,r.sibling),(r=a(r,i.children||[],l)).return=t,t=r;break t}$(t,r);break}e(t,r),r=r.sibling}(r=rn(i,t.mode,l)).return=t,t=r}return n(t);}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?($(t,r.sibling),(r=a(r,i,l)).return=t,t=r):($(t,r),(r=qn(i,t.mode,l)).return=t,t=r),n(t);if(_h(i))return d(t,r,i,l);if(dh(i))return p(t,r,i,l);if(v&&Eh(t,i),void 0===i&&!o)switch(t.tag){case 1:case 0:j("152",(l=t.type).displayName||l.name||"Component");}return $(t,r)}}function Au(t,e){var $=tb(5,null,null,0);$.elementType="DELETED",$.type="DELETED",$.stateNode=e,$.return=t,$.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=$,t.lastEffect=$):t.firstEffect=t.lastEffect=$}function vu(t,e){switch(t.tag){case 5:var $=t.type;return null!==(e=1!==e.nodeType||$.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1;}}function Wt(t){if(nx){var e=ox;if(e){var $=e;if(!vu(t,e)){if(!(e=Hm($))||!vu(t,e))return t.effectTag|=2,nx=!1,void(Qn=t);Au(Qn,$)}Qn=t,ox=rq(e)}else t.effectTag|=2,nx=!1,Qn=t}}function rr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;Qn=t}function xn(t){if(t!==Qn)return!1;if(!nx)return rr(t),nx=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!zm(e,t.memoizedProps))for(e=ox;e;)Au(t,e),e=Hm(e);return rr(t),ox=Qn?Hm(t.stateNode):null,!0}function Yk(){ox=Qn=null,nx=!1}function cb(t,e,$,r){e.child=null===t?Rn(e,null,$,r):Md(e,t.child,$,r)}function No(t,e,$,r,a){$=$.render;var i=e.ref;return df(e,a),r=$(r,i),e.effectTag|=1,cb(t,e,r,a),e.child}function fp(t,e,$,r,a,i){if(null===t){var n=$.type;return"function"!=typeof n||ln(n)||void 0!==n.defaultProps||null!==$.compare?((t=Ni($.type,null,r,null,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=n,Kq(t,e,n,r,a,i))}return n=t.child,a<i&&(a=n.memoizedProps,($=null!==($=$.compare)?$:Gf)(a,r)&&t.ref===e.ref)?Kd(t,e,i):(e.effectTag|=1,(t=sd(n,r,i)).ref=e.ref,t.return=e,e.child=t)}function Kq(t,e,$,r,a,i){return null!==t&&a<i&&Gf(t.memoizedProps,r)&&t.ref===e.ref?Kd(t,e,i):xo(t,e,$,r,i)}function Uq(t,e){var $=e.ref;(null===t&&null!==$||null!==t&&t.ref!==$)&&(e.effectTag|=128)}function xo(t,e,$,r,a){var i=Ea($)?Me:za.current;return i=Ae(e,i),df(e,a),$=$(r,i),e.effectTag|=1,cb(t,e,$,a),e.child}function Ss(t,e,$,r,a){if(Ea($)){var i=!0;Ui(e)}else i=!1;if(df(e,a),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),rs(e,$,r,a),to(e,$,r,a),r=!0;else if(null===t){var n=e.stateNode,l=e.memoizedProps;n.props=l;var o=n.context,v=$.contextType;"object"==typeof v&&null!==v?v=Zh.currentDispatcher.readContext(v):v=Ae(e,v=Ea($)?Me:za.current);var u=$.getDerivedStateFromProps,c="function"==typeof u||"function"==typeof n.getSnapshotBeforeUpdate;c||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(l!==r||o!==v)&&Nr(e,n,r,v),Yh=!1;var f=e.memoizedState;o=n.state=f;var s=e.updateQueue;null!==s&&($g(e,s,r,n,a),o=e.memoizedState),l!==r||f!==o||Va.current||Yh?("function"==typeof u&&(Kh(e,$,u,r),o=e.memoizedState),(l=Yh||At(e,$,l,r,f,o,v))?(c||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||("function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"==typeof n.componentDidMount&&(e.effectTag|=4)):("function"==typeof n.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=o),n.props=r,n.state=o,n.context=v,r=l):("function"==typeof n.componentDidMount&&(e.effectTag|=4),r=!1)}else n=e.stateNode,l=e.memoizedProps,n.props=e.type===e.elementType?l:rb(e.type,l),o=n.context,"object"==typeof(v=$.contextType)&&null!==v?v=Zh.currentDispatcher.readContext(v):v=Ae(e,v=Ea($)?Me:za.current),(c="function"==typeof(u=$.getDerivedStateFromProps)||"function"==typeof n.getSnapshotBeforeUpdate)||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(l!==r||o!==v)&&Nr(e,n,r,v),Yh=!1,o=e.memoizedState,f=n.state=o,null!==(s=e.updateQueue)&&($g(e,s,r,n,a),f=e.memoizedState),l!==r||o!==f||Va.current||Yh?("function"==typeof u&&(Kh(e,$,u,r),f=e.memoizedState),(u=Yh||At(e,$,l,r,o,f,v))?(c||"function"!=typeof n.UNSAFE_componentWillUpdate&&"function"!=typeof n.componentWillUpdate||("function"==typeof n.componentWillUpdate&&n.componentWillUpdate(r,f,v),"function"==typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(r,f,v)),"function"==typeof n.componentDidUpdate&&(e.effectTag|=4),"function"==typeof n.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof n.componentDidUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=4),"function"!=typeof n.getSnapshotBeforeUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),n.props=r,n.state=f,n.context=v,r=u):("function"!=typeof n.componentDidUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=4),"function"!=typeof n.getSnapshotBeforeUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=256),r=!1);return wo(t,e,$,r,i,a)}function wo(t,e,$,r,a,i){Uq(t,e);var n=0!=(64&e.effectTag);if(!r&&!n)return a&&zp(e,$,!1),Kd(t,e,i);r=e.stateNode,Kz.current=e;var l=n&&"function"!=typeof $.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&n?(e.child=Md(e,t.child,null,i),e.child=Md(e,null,l,i)):cb(t,e,l,i),e.memoizedState=r.state,a&&zp(e,$,!0),e.child}function Xt(t){var e=t.stateNode;e.pendingContext?Kp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kp(t,e.context,!1),Zn(t,e.containerInfo)}function gu(t,e,$){var r=e.mode,a=e.pendingProps,i=e.memoizedState;if(0==(64&e.effectTag)){i=null;var n=!1}else i={timedOutAt:null!==i?i.timedOutAt:0},n=!0,e.effectTag&=-65;return null===t?n?(n=a.fallback,a=Dc(null,r,0,null),0==(1&e.mode)&&(a.child=null!==e.memoizedState?e.child.child:e.child),r=Dc(n,r,$,null),a.sibling=r,($=a).return=r.return=e):$=r=Rn(e,null,a.children,$):null!==t.memoizedState?(t=(r=t.child).sibling,n?($=a.fallback,a=sd(r,r.pendingProps,0),0==(1&e.mode)&&(n=null!==e.memoizedState?e.child.child:e.child)!==r.child&&(a.child=n),r=a.sibling=sd(t,$,t.expirationTime),$=a,a.childExpirationTime=0,$.return=r.return=e):$=r=Md(e,r.child,a.children,$)):(t=t.child,n?(n=a.fallback,(a=Dc(null,r,0,null)).child=t,0==(1&e.mode)&&(a.child=null!==e.memoizedState?e.child.child:e.child),(r=a.sibling=Dc(n,r,$,null)).effectTag|=2,$=a,a.childExpirationTime=0,$.return=r.return=e):r=$=Md(e,t,a.children,$)),e.memoizedState=i,e.child=$,r}function Kd(t,e,$){if(null!==t&&(e.firstContextDependency=t.firstContextDependency),e.childExpirationTime<$)return null;if(null!==t&&e.child!==t.child&&j("153"),null!==e.child){for($=sd(t=e.child,t.pendingProps,t.expirationTime),e.child=$,$.return=e;null!==t.sibling;)t=t.sibling,($=$.sibling=sd(t,t.pendingProps,t.expirationTime)).return=e;$.sibling=null}return e.child}function mF(t,e,$){var r=e.expirationTime;if(null!==t&&t.memoizedProps===e.pendingProps&&!Va.current&&r<$){switch(e.tag){case 3:Xt(e),Yk();break;case 5:vx(e);break;case 1:Ea(e.type)&&Ui(e);break;case 4:Zn(e,e.stateNode.containerInfo);break;case 10:vr(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=$?gu(t,e,$):null!==(e=Kd(t,e,$))?e.sibling:null;}return Kd(t,e,$)}switch(e.expirationTime=0,e.tag){case 2:r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var a=Ae(e,za.current);if(df(e,$),a=r(t,a),e.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(e.tag=1,Ea(r)){var i=!0;Ui(e)}else i=!1;e.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;var n=r.getDerivedStateFromProps;"function"==typeof n&&Kh(e,r,n,t),a.updater=$h,e.stateNode=a,a._reactInternalFiber=e,to(e,r,t,$),e=wo(null,e,r,!0,i,$)}else e.tag=0,cb(null,e,a,$),e=e.child;return e;case 16:switch(a=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),i=e.pendingProps,t=YP(a),e.type=t,a=e.tag=dP(t),i=rb(t,i),n=void 0,a){case 0:n=xo(null,e,t,i,$);break;case 1:n=Ss(null,e,t,i,$);break;case 11:n=No(null,e,t,i,$);break;case 14:n=fp(null,e,t,rb(t.type,i),r,$);break;default:j("283",t);}return n;case 0:return r=e.type,a=e.pendingProps,xo(t,e,r,a=e.elementType===r?a:rb(r,a),$);case 1:return r=e.type,a=e.pendingProps,Ss(t,e,r,a=e.elementType===r?a:rb(r,a),$);case 3:return Xt(e),null===(r=e.updateQueue)&&j("282"),a=null!==(a=e.memoizedState)?a.element:null,$g(e,r,e.pendingProps,null,$),(r=e.memoizedState.element)===a?(Yk(),e=Kd(t,e,$)):(a=e.stateNode,(a=(null===t||null===t.child)&&a.hydrate)&&(ox=rq(e.stateNode.containerInfo),Qn=e,a=nx=!0),a?(e.effectTag|=2,e.child=Rn(e,null,r,$)):(cb(t,e,r,$),Yk()),e=e.child),e;case 5:return vx(e),null===t&&Wt(e),r=e.type,a=e.pendingProps,i=null!==t?t.memoizedProps:null,n=a.children,zm(r,a)?n=null:null!==i&&zm(r,i)&&(e.effectTag|=16),Uq(t,e),1!==$&&1&e.mode&&a.hidden?(e.expirationTime=1,e=null):(cb(t,e,n,$),e=e.child),e;case 6:return null===t&&Wt(e),null;case 13:return gu(t,e,$);case 4:return Zn(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Md(e,null,r,$):cb(t,e,r,$),e.child;case 11:return r=e.type,a=e.pendingProps,No(t,e,r,a=e.elementType===r?a:rb(r,a),$);case 7:return cb(t,e,e.pendingProps,$),e.child;case 8:case 12:return cb(t,e,e.pendingProps.children,$),e.child;case 10:t:{if(r=e.type._context,a=e.pendingProps,n=e.memoizedProps,vr(e,i=a.value),null!==n){var l=n.value;if(0===(i=l===i&&(0!==l||1/l==1/i)||l!=l&&i!=i?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(n.children===a.children&&!Va.current){e=Kd(t,e,$);break t}}else for(null!==(n=e.child)&&(n.return=e);null!==n;){if(null!==(l=n.firstContextDependency))do{if(l.context===r&&0!=(l.observedBits&i)){if(1===n.tag){var o=Hc($);o.tag=2,hc(n,o)}n.expirationTime<$&&(n.expirationTime=$),null!==(o=n.alternate)&&o.expirationTime<$&&(o.expirationTime=$);for(var v=n.return;null!==v;){if(o=v.alternate,v.childExpirationTime<$)v.childExpirationTime=$,null!==o&&o.childExpirationTime<$&&(o.childExpirationTime=$);else{if(!(null!==o&&o.childExpirationTime<$))break;o.childExpirationTime=$}v=v.return}}o=n.child,l=l.next}while(null!==l);else o=10===n.tag&&n.type===e.type?null:n.child;if(null!==o)o.return=n;else for(o=n;null!==o;){if(o===e){o=null;break}if(null!==(n=o.sibling)){n.return=o.return,o=n;break}o=o.return}n=o}}cb(t,e,a.children,$),e=e.child}return e;case 9:return a=e.type,r=(i=e.pendingProps).children,df(e,$),r=r(a=dp(a,i.unstable_observedBits)),e.effectTag|=1,cb(t,e,r,$),e.child;case 14:return fp(t,e,a=e.type,i=rb(a.type,e.pendingProps),r,$);case 15:return Kq(t,e,e.type,e.pendingProps,r,$);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:rb(r,a),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Ea(r)?(t=!0,Ui(e)):t=!1,df(e,$),rs(e,r,a,$),to(e,r,a,$),wo(null,e,r,!0,t,$);default:j("156");}}function vh(t){t.effectTag|=4}function Pv(t,e){var $=e.source,r=e.stack;null===r&&null!==$&&(r=rl($)),null!==$&&Lc($.type),e=e.value,null!==t&&1===t.tag&&Lc(t.type);try{console.error(e)}catch(a){setTimeout(function(){throw a})}}function Zv(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch($){of(t,$)}else e.current=null}function Qw(t){switch("function"==typeof Ax&&Ax(t),t.tag){case 0:case 11:case 14:case 15:var e=t.updateQueue;if(null!==e&&null!==(e=e.lastEffect)){var $=e=e.next;do{var r=$.destroy;if(null!==r){var a=t;try{r()}catch(i){of(a,i)}}$=$.next}while($!==e)}break;case 1:if(Zv(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){of(t,i)}break;case 5:Zv(t);break;case 4:oy(t);}}function Dx(t){return 5===t.tag||3===t.tag||4===t.tag}function cy(t){t:{for(var e=t.return;null!==e;){if(Dx(e)){var $=e;break t}e=e.return}j("160"),$=void 0}var r=e=void 0;switch($.tag){case 5:e=$.stateNode,r=!1;break;case 3:case 4:e=$.stateNode.containerInfo,r=!0;break;default:j("161");}16&$.effectTag&&(hg(e,""),$.effectTag&=-17);t:e:for($=t;;){for(;null===$.sibling;){if(null===$.return||Dx($.return)){$=null;break t}$=$.return}for($.sibling.return=$.return,$=$.sibling;5!==$.tag&&6!==$.tag;){if(2&$.effectTag)continue e;if(null===$.child||4===$.tag)continue e;$.child.return=$,$=$.child}if(!(2&$.effectTag)){$=$.stateNode;break t}}for(var a=t;;){if(5===a.tag||6===a.tag){if($){if(r){var i=e,n=a.stateNode,l=$;8===i.nodeType?i.parentNode.insertBefore(n,l):i.insertBefore(n,l)}else e.insertBefore(a.stateNode,$);}else r?(n=e,l=a.stateNode,8===n.nodeType?(i=n.parentNode).insertBefore(l,n):(i=n).appendChild(l),null!=(n=n._reactRootContainer)||null!==i.onclick||(i.onclick=pj)):e.appendChild(a.stateNode);}else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function oy(t){for(var e=t,$=!1,r=void 0,a=void 0;;){if(!$){$=e.return;t:for(;;){switch(null===$&&j("160"),$.tag){case 5:r=$.stateNode,a=!1;break t;case 3:case 4:r=$.stateNode.containerInfo,a=!0;break t;}$=$.return}$=!0}if(5===e.tag||6===e.tag){t:for(var i=e,n=i;;)if(Qw(n),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===i)break;for(;null===n.sibling;){if(null===n.return||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}a?(i=r,n=e.stateNode,8===i.nodeType?i.parentNode.removeChild(n):i.removeChild(n)):r.removeChild(e.stateNode)}else if(4===e.tag?(r=e.stateNode.containerInfo,a=!0):Qw(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&($=!1)}e.sibling.return=e.return,e=e.sibling}}function Lo(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var $=e.stateNode;if(null!=$){var r=e.memoizedProps,a=null!==t?t.memoizedProps:r;t=e.type;var i=e.updateQueue;if(e.updateQueue=null,null!==i){for($[lj]=r,"input"===t&&"radio"===r.type&&null!=r.name&&pr($,r),$l(t,a),e=$l(t,r),a=0;a<i.length;a+=2){var n=i[a],l=i[a+1];"style"===n?bu($,l):"dangerouslySetInnerHTML"===n?ey($,l):"children"===n?hg($,l):ml($,n,l,e)}switch(t){case"input":bl($,r);break;case"textarea":Gu($,r);break;case"select":e=$._wrapperState.wasMultiple,$._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?ie($,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?ie($,!!r.multiple,r.defaultValue,!0):ie($,!!r.multiple,r.multiple?[]:"",!1));}}}break;case 6:null===e.stateNode&&j("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(t=e,null===($=e.memoizedState)?r=!1:(r=!0,t=e.child,0===$.timedOutAt&&($.timedOutAt=rc())),null!==t)t:for(e=$=t;;){if(5===e.tag)t=e.stateNode,r?t.style.display="none":(t=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,t.style.display=lu("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){(t=e.child.sibling).return=e,e=t;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===$)break t;for(;null===e.sibling;){if(null===e.return||e.return===$)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}break;case 17:break;default:j("163");}}function uo(t,e,$){($=Hc($)).tag=3,$.payload={element:null};var r=e.value;return $.callback=function(){qo(r),Pv(t,e)},$}function Xo(t,e,$){($=Hc($)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var a=e.value;$.payload=function(){return r(a)}}var i=t.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&($.callback=function(){"function"!=typeof r&&(null===ne?ne=new Set([this]):ne.add(this));var $=e.value,a=e.stack;Pv(t,e),this.componentDidCatch($,{componentStack:null!==a?a:""})}),$}function $K(t){switch(t.tag){case 1:Ea(t.type)&&Zi(t);var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return gf(t),Mm(t),0!=(64&(e=t.effectTag))&&j("285"),t.effectTag=-2049&e|64,t;case 5:return go(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 4:return gf(t),null;case 10:return Mn(t),null;default:return null;}}function lp(){if(null!==Ha)for(var t=Ha.return;null!==t;){var e=t;switch(e.tag){case 1:var $=e.type.childContextTypes;null!=$&&Zi(e);break;case 3:gf(e),Mm(e);break;case 5:go(e);break;case 4:gf(e);break;case 10:Mn(e);}t=t.return}ii=null,Wa=0,li=-1,Pz=!1,Ha=null}function uh(){null!==Vw&&(Zc.unstable_cancelCallback(Qz),Vw())}function Ap(t){for(;;){var e=t.alternate,$=t.return,r=t.sibling;if(0==(1024&t.effectTag)){Ha=t;t:{var a=e,i=Wa,n=(e=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Ea(e.type)&&Zi(e);break;case 3:gf(e),Mm(e),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==a&&null!==a.child||(xn(e),e.effectTag&=-3),kx(e);break;case 5:go(e);var l=Fd(Ig.current);if(i=e.type,null!==a&&null!=e.stateNode)Mz(a,e,i,n,l),a.ref!==e.ref&&(e.effectTag|=128);else if(n){var o=Fd(sb.current);if(xn(e)){a=(n=e).stateNode;var v=n.type,u=n.memoizedProps,c=l;switch(a[Ub]=n,a[lj]=u,i=void 0,l=v){case"iframe":case"object":I("load",a);break;case"video":case"audio":for(v=0;v<Yf.length;v++)I(Yf[v],a);break;case"source":I("error",a);break;case"img":case"image":case"link":I("error",a),I("load",a);break;case"form":I("reset",a),I("submit",a);break;case"details":I("toggle",a);break;case"input":qr(a,u),I("invalid",a),_b(c,"onChange");break;case"select":a._wrapperState={wasMultiple:!!u.multiple},I("invalid",a),_b(c,"onChange");break;case"textarea":Nu(a,u),I("invalid",a),_b(c,"onChange");}for(i in Sl(l,u),v=null,u)u.hasOwnProperty(i)&&(o=u[i],"children"===i?"string"==typeof o?a.textContent!==o&&(v=["children",o]):"number"==typeof o&&a.textContent!==""+o&&(v=["children",""+o]):Ud.hasOwnProperty(i)&&null!=o&&_b(c,i));switch(l){case"input":Mj(a),Oq(a,u,!0);break;case"textarea":Mj(a),xu(a,u);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(a.onclick=pj);}i=v,n.updateQueue=i,(n=null!==i)&&vh(e)}else{u=e,a=i,c=n,v=9===l.nodeType?l:l.ownerDocument,o===mo.html&&(o=uu(a)),o===mo.html?"script"===a?((a=v.createElement("div")).innerHTML="<script></script>",v=a.removeChild(a.firstChild)):"string"==typeof c.is?v=v.createElement(a,{is:c.is}):(v=v.createElement(a),"select"===a&&c.multiple&&(v.multiple=!0)):v=v.createElementNS(o,a),(a=v)[Ub]=u,a[lj]=n,Lz(a,e,!1,!1),c=a;var f=l,s=$l(v=i,u=n);switch(v){case"iframe":case"object":I("load",c),l=u;break;case"video":case"audio":for(l=0;l<Yf.length;l++)I(Yf[l],c);l=u;break;case"source":I("error",c),l=u;break;case"img":case"image":case"link":I("error",c),I("load",c),l=u;break;case"form":I("reset",c),I("submit",c),l=u;break;case"details":I("toggle",c),l=u;break;case"input":qr(c,u),l=ll(c,u),I("invalid",c),_b(f,"onChange");break;case"option":l=_k(c,u);break;case"select":c._wrapperState={wasMultiple:!!u.multiple},l=la({},u,{value:void 0}),I("invalid",c),_b(f,"onChange");break;case"textarea":Nu(c,u),l=wl(c,u),I("invalid",c),_b(f,"onChange");break;default:l=u;}Sl(v,l),o=void 0;var d=v,p=c,h=l;for(o in h)if(h.hasOwnProperty(o)){var m=h[o];"style"===o?bu(p,m):"dangerouslySetInnerHTML"===o?null!=(m=m?m.__html:void 0)&&ey(p,m):"children"===o?"string"==typeof m?("textarea"!==d||""!==m)&&hg(p,m):"number"==typeof m&&hg(p,""+m):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(Ud.hasOwnProperty(o)?null!=m&&_b(f,o):null!=m&&ml(p,o,m,s))}switch(v){case"input":Mj(c),Oq(c,u,!1);break;case"textarea":Mj(c),xu(c,u);break;case"option":null!=u.value&&c.setAttribute("value",""+wc(u.value));break;case"select":(l=c).multiple=!!u.multiple,null!=(c=u.value)?ie(l,!!u.multiple,c,!1):null!=u.defaultValue&&ie(l,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof l.onClick&&(c.onclick=pj);}(n=Ar(i,n))&&vh(e),e.stateNode=a}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&j("166");break;case 6:a&&null!=e.stateNode?Nz(a,e,a.memoizedProps,n):("string"!=typeof n&&null===e.stateNode&&j("166"),a=Fd(Ig.current),Fd(sb.current),xn(e)?(i=(n=e).stateNode,a=n.memoizedProps,i[Ub]=n,(n=i.nodeValue!==a)&&vh(e)):(i=e,(n=(9===a.nodeType?a:a.ownerDocument).createTextNode(n))[Ub]=e,i.stateNode=n));break;case 11:break;case 13:if(n=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=i,Ha=e;break t}n=null!==n,i=null!==a&&null!==a.memoizedState,null!==a&&!n&&i&&null!==(a=a.child.sibling)&&(null!==(l=e.firstEffect)?(e.firstEffect=a,a.nextEffect=l):(e.firstEffect=e.lastEffect=a,a.nextEffect=null),a.effectTag=8),(n!==i||0==(1&e.effectTag)&&n)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:gf(e),kx(e);break;case 10:Mn(e);break;case 9:case 14:break;case 17:Ea(e.type)&&Zi(e);break;default:j("156");}Ha=null}if(e=t,1===Wa||1!==e.childExpirationTime){for(n=0,i=e.child;null!==i;)(a=i.expirationTime)>n&&(n=a),(l=i.childExpirationTime)>n&&(n=l),i=i.sibling;e.childExpirationTime=n}if(null!==Ha)return Ha;null!==$&&0==(1024&$.effectTag)&&(null===$.firstEffect&&($.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==$.lastEffect&&($.lastEffect.nextEffect=t.firstEffect),$.lastEffect=t.lastEffect),1<t.effectTag&&(null!==$.lastEffect?$.lastEffect.nextEffect=t:$.firstEffect=t,$.lastEffect=t))}else{if(null!==(t=$K(t,Wa)))return t.effectTag&=1023,t;null!==$&&($.firstEffect=$.lastEffect=null,$.effectTag|=1024)}if(null!==r)return r;if(null===$)break;t=$}return null}function aq(t){var e=mF(t.alternate,t,Wa);return t.memoizedProps=t.pendingProps,null===e&&(e=Ap(t)),ci.current=null,e}function wq(t,e){gi&&j("243"),uh(),gi=!0,ci.currentDispatcher=Oz;var $=t.nextExpirationTimeToWorkOn;$===Wa&&t===ii&&null!==Ha||(lp(),Wa=$,Ha=sd((ii=t).current,null,Wa),t.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(e)for(;null!==Ha&&!Jh();)Ha=aq(Ha);else for(;null!==Ha;)Ha=aq(Ha)}catch(d){if(Jz=wx=xx=null,null===Ha)r=!0,qo(d);else{null===Ha&&j("271");var a=Ha,i=a.return;if(null!==i){t:{var n=t,l=i,o=a,v=d;if(i=Wa,o.effectTag|=1024,o.firstEffect=o.lastEffect=null,null!==v&&"object"==typeof v&&"function"==typeof v.then){var u=v;v=l;var c=-1,f=-1;do{if(13===v.tag){var s=v.alternate;if(null!==s&&null!==(s=s.memoizedState)){f=10*(1073741822-s.timedOutAt);break}"number"==typeof(s=v.pendingProps.maxDuration)&&(0>=s?c=0:(-1===c||s<c)&&(c=s))}v=v.return}while(null!==v);v=l;do{if((s=13===v.tag)&&(s=void 0!==v.memoizedProps.fallback&&null===v.memoizedState),s){if(l=wL.bind(null,n,v,o,0==(1&v.mode)?1073741823:i),u.then(l,l),0==(1&v.mode)){v.effectTag|=64,o.effectTag&=-1957,1===o.tag&&null===o.alternate&&(o.tag=17),o.expirationTime=i;break t}-1===c?n=1073741823:(-1===f&&(f=10*(1073741822-Uu(n,i))-5e3),n=f+c),0<=n&&li<n&&(li=n),v.effectTag|=2048,v.expirationTime=i;break t}v=v.return}while(null!==v);v=Error((Lc(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+rl(o))}Pz=!0,v=fi(v,o),n=l;do{switch(n.tag){case 3:o=v,n.effectTag|=2048,n.expirationTime=i,Nt(n,i=uo(n,o,i));break t;case 1:if(o=v,l=n.type,u=n.stateNode,0==(64&n.effectTag)&&("function"==typeof l.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===ne||!ne.has(u)))){n.effectTag|=2048,n.expirationTime=i,Nt(n,i=Xo(n,o,i));break t}}n=n.return}while(null!==n)}Ha=Ap(a);continue}r=!0,qo(d)}}break}if(gi=!1,Jz=wx=xx=ci.currentDispatcher=null,r)ii=null,t.finishedWork=null;else if(null!==Ha)t.finishedWork=null;else{if(null===(r=t.current.alternate)&&j("281"),ii=null,Pz){if(a=t.latestPendingTime,i=t.latestSuspendedTime,n=t.latestPingedTime,0!==a&&a<$||0!==i&&i<$||0!==n&&n<$)return fw(t,$),void ro(t,r,$,t.expirationTime,-1);if(!t.didError&&e)return t.didError=!0,$=t.nextExpirationTimeToWorkOn=$,e=t.expirationTime=1073741823,void ro(t,r,$,e,-1)}e&&-1!==li?(fw(t,$),(e=10*(1073741822-Uu(t,$)))<li&&(li=e),e=10*(1073741822-rc()),e=li-e,ro(t,r,$,t.expirationTime,0>e?0:e)):(t.pendingCommitExpirationTime=$,t.finishedWork=r)}}function of(t,e){for(var $=t.return;null!==$;){switch($.tag){case 1:var r=$.stateNode;if("function"==typeof $.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ne||!ne.has(r)))return hc($,t=Xo($,t=fi(e,t),1073741823)),void Jd($,1073741823);break;case 3:return hc($,t=uo($,t=fi(e,t),1073741823)),void Jd($,1073741823);}$=$.return}3===t.tag&&(hc(t,$=uo(t,$=fi(e,t),1073741823)),Jd(t,1073741823))}function rh(t,e){return 0!==Kn?t=Kn:gi?t=Xw?1073741823:Wa:1&e.mode?(t=ri?1073741822-10*(1+((1073741822-t+15)/10|0)):1073741822-25*(1+((1073741822-t+500)/25|0)),null!==ii&&t===Wa&&--t):t=1073741823,ri&&(0===De||t<De)&&(De=t),t}function wL(t,e,$,r){var a=t.earliestSuspendedTime,i=t.latestSuspendedTime;if(0!==a&&r<=a&&r>=i){i=a=r,t.didError=!1;var n=t.latestPingedTime;(0===n||n>i)&&(t.latestPingedTime=i),ui(i,t)}else Jf(t,a=rh(a=rc(),e));0!=(1&e.mode)&&t===ii&&Wa===r&&(ii=null),so(e,a),0==(1&e.mode)&&(so($,a),1===$.tag&&null!==$.stateNode&&((e=Hc(a)).tag=2,hc($,e))),0!==($=t.expirationTime)&&Pt(t,$)}function so(t,e){t.expirationTime<e&&(t.expirationTime=e);var $=t.alternate;null!==$&&$.expirationTime<e&&($.expirationTime=e);var r=t.return,a=null;if(null===r&&3===t.tag)a=t.stateNode;else for(;null!==r;){if($=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==$&&$.childExpirationTime<e&&($.childExpirationTime=e),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return a}function Jd(t,e){null!==(t=so(t,e))&&(!gi&&0!==Wa&&e>Wa&&lp(),Jf(t,e),gi&&!Xw&&ii===t||Pt(t,t.expirationTime),Aw>Xz&&(Aw=0,j("185")))}function fs(t,e,$,r,a){var i=Kn;Kn=1073741823;try{return t(e,$,r,a)}finally{Kn=i}}function ph(){bc=1073741822-((Zc.unstable_now()-wn)/10|0)}function Ps(t,e){if(0!==Uw){if(e<Uw)return;null!==Tw&&Zc.unstable_cancelCallback(Tw)}Uw=e,t=Zc.unstable_now()-wn,Tw=Zc.unstable_scheduleCallback(lM,{timeout:10*(1073741822-e)-t})}function ro(t,e,$,r,a){t.expirationTime=r,0!==a||Jh()?0<a&&(t.timeoutHandle=Hz(VL.bind(null,t,e,$),a)):(t.pendingCommitExpirationTime=$,t.finishedWork=e)}function VL(t,e,$){t.pendingCommitExpirationTime=$,t.finishedWork=e,ph(),Gw=bc,qu(t,$)}function rc(){return ub?Gw:(Ih(),0!==Ua&&1!==Ua||(ph(),Gw=bc),Gw)}function Pt(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===Gc?(Vc=Gc=t,t.nextScheduledRoot=t):(Gc=Gc.nextScheduledRoot=t).nextScheduledRoot=Vc):e>t.expirationTime&&(t.expirationTime=e),ub||(ed?Kw&&(cd=t,Ua=1073741823,Lh(t,1073741823,!1)):1073741823===e?jc(1073741823,!1):Ps(t,e))}function Ih(){var t=0,e=null;if(null!==Gc)for(var $=Gc,r=Vc;null!==r;){var a=r.expirationTime;if(0===a){if((null===$||null===Gc)&&j("244"),r===r.nextScheduledRoot){Vc=Gc=r.nextScheduledRoot=null;break}if(r===Vc)Vc=a=r.nextScheduledRoot,Gc.nextScheduledRoot=a,r.nextScheduledRoot=null;else{if(r===Gc){(Gc=$).nextScheduledRoot=Vc,r.nextScheduledRoot=null;break}$.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=$.nextScheduledRoot}else{if(a>t&&(t=a,e=r),r===Gc)break;if(1073741823===t)break;$=r,r=r.nextScheduledRoot}}cd=e,Ua=t}function Jh(){return!!$v||!!Zc.unstable_shouldYield()&&($v=!0)}function lM(){try{if(!Jh()&&null!==Vc){ph();var t=Vc;do{var e=t.expirationTime;0!==e&&bc<=e&&(t.nextExpirationTimeToWorkOn=bc),t=t.nextScheduledRoot}while(t!==Vc)}jc(0,!0)}finally{$v=!1}}function jc(t,e){if(Ih(),e)for(ph(),Gw=bc;null!==cd&&0!==Ua&&t<=Ua&&!($v&&bc>Ua);)Lh(cd,Ua,bc>Ua),Ih(),ph(),Gw=bc;else for(;null!==cd&&0!==Ua&&t<=Ua;)Lh(cd,Ua,!1),Ih();if(e&&(Uw=0,Tw=null),0!==Ua&&Ps(cd,Ua),Aw=0,iA=null,null!==vi)for(t=vi,vi=null,e=0;e<t.length;e++){var $=t[e];try{$._onComplete()}catch(r){Cn||(Cn=!0,Sz=r)}}if(Cn)throw t=Sz,Sz=null,Cn=!1,t}function qu(t,e){ub&&j("253"),cd=t,Ua=e,Lh(t,e,!1),jc(1073741823,!1)}function Lh(t,e,$){if(ub&&j("245"),ub=!0,$){var r=t.finishedWork;null!==r?Mh(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,Fx(r)),wq(t,$),null!==(r=t.finishedWork)&&(Jh()?t.finishedWork=r:Mh(t,r,e)))}else null!==(r=t.finishedWork)?Mh(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,Fx(r)),wq(t,$),null!==(r=t.finishedWork)&&Mh(t,r,e));ub=!1}function Mh(t,e,$){var r=t.firstBatch;if(null!==r&&r._expirationTime>=$&&(null===vi?vi=[r]:vi.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===iA?Aw++:(iA=t,Aw=0),Xw=gi=!0,t.current===e&&j("177"),0===($=t.pendingCommitExpirationTime)&&j("261"),t.pendingCommitExpirationTime=0,r=e.expirationTime;var a=e.childExpirationTime;if(r=a>r?a:r,t.didError=!1,0===r?(t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0):(0!==(a=t.latestPendingTime)&&(a>r?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>r&&(t.earliestPendingTime=t.latestPendingTime)),0===(a=t.earliestSuspendedTime)?Jf(t,r):r<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Jf(t,r)):r>a&&Jf(t,r)),ui(0,t),ci.current=null,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,r=e.firstEffect):r=e:r=e.firstEffect,lz=wy,Uk(a=qx())){if("selectionStart"in a)var i={start:a.selectionStart,end:a.selectionEnd};else t:{var n=(i=(i=a.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var l=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{i.nodeType,o.nodeType}catch(F){i=null;break t}var v=0,u=-1,c=-1,f=0,s=0,d=a,p=null;e:for(;;){for(var h;d!==i||0!==l&&3!==d.nodeType||(u=v+l),d!==o||0!==n&&3!==d.nodeType||(c=v+n),3===d.nodeType&&(v+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===a)break e;if(p===i&&++f===l&&(u=v),p===o&&++s===n&&(c=v),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}i=-1===u||-1===c?null:{start:u,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(mz={focusedElem:a,selectionRange:i},wy=!1,A=r;null!==A;){a=!1,i=void 0;try{for(;null!==A;){if(256&A.effectTag)t:{var m=A.alternate;switch((l=A).tag){case 0:case 11:case 15:break t;case 1:if(256&l.effectTag&&null!==m){var g=m.memoizedProps,y=m.memoizedState,b=l.stateNode,k=b.getSnapshotBeforeUpdate(l.elementType===l.type?g:rb(l.type,g),y);b.__reactInternalSnapshotBeforeUpdate=k}break t;case 3:case 5:case 6:case 4:case 17:break t;default:j("163");}}A=A.nextEffect}}catch(F){a=!0,i=F}a&&(null===A&&j("178"),of(A,i),null!==A&&(A=A.nextEffect))}for(A=r;null!==A;){m=!1,g=void 0;try{for(;null!==A;){var T=A.effectTag;if(16&T&&hg(A.stateNode,""),128&T){var x=A.alternate;if(null!==x){var w=x.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(14&T){case 2:cy(A),A.effectTag&=-3;break;case 6:cy(A),A.effectTag&=-3,Lo(A.alternate,A);break;case 4:Lo(A.alternate,A);break;case 8:oy(y=A),y.return=null,y.child=null,y.alternate&&(y.alternate.child=null,y.alternate.return=null);}A=A.nextEffect}}catch(F){m=!0,g=F}m&&(null===A&&j("178"),of(A,g),null!==A&&(A=A.nextEffect))}if(w=mz,x=qx(),T=w.focusedElem,g=w.selectionRange,x!==T&&T&&T.ownerDocument&&Mx(T.ownerDocument.documentElement,T)){null!==g&&Uk(T)&&(x=g.start,void 0===(w=g.end)&&(w=x),"selectionStart"in T?(T.selectionStart=x,T.selectionEnd=Math.min(w,T.value.length)):(w=(x=T.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),y=T.textContent.length,m=Math.min(g.start,y),g=void 0===g.end?m:Math.min(g.end,y),!w.extend&&m>g&&(y=g,g=m,m=y),y=ly(T,m),b=ly(T,g),y&&b&&(1!==w.rangeCount||w.anchorNode!==y.node||w.anchorOffset!==y.offset||w.focusNode!==b.node||w.focusOffset!==b.offset)&&((x=x.createRange()).setStart(y.node,y.offset),w.removeAllRanges(),m>g?(w.addRange(x),w.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),w.addRange(x))))),x=[];for(w=T;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof T.focus&&T.focus(),T=0;T<x.length;T++)(w=x[T]).element.scrollLeft=w.left,w.element.scrollTop=w.top}for(mz=null,wy=!!lz,lz=null,t.current=e,A=r;null!==A;){r=!1,T=void 0;try{for(x=$;null!==A;){var E=A.effectTag;if(36&E){var C=A.alternate;switch(m=x,(w=A).tag){case 0:case 11:case 15:break;case 1:var S=w.stateNode;if(4&w.effectTag)if(null===C)S.componentDidMount();else{var P=w.elementType===w.type?C.memoizedProps:rb(w.type,C.memoizedProps);S.componentDidUpdate(P,C.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var _=w.updateQueue;null!==_&&kt(w,_,S,m);break;case 3:var N=w.updateQueue;if(null!==N){if(g=null,null!==w.child)switch(w.child.tag){case 5:g=w.child.stateNode;break;case 1:g=w.child.stateNode;}kt(w,N,g,m)}break;case 5:var U=w.stateNode;null===C&&4&w.effectTag&&Ar(w.type,w.memoizedProps)&&U.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:j("163");}}if(128&E){var I=A.ref;if(null!==I){var M=A.stateNode;switch(A.tag){case 5:var D=M;break;default:D=M;}"function"==typeof I?I(D):I.current=D}}A=A.nextEffect}}catch(F){r=!0,T=F}r&&(null===A&&j("178"),of(A,T),null!==A&&(A=A.nextEffect))}gi=Xw=!1,"function"==typeof Bx&&Bx(e.stateNode),E=e.expirationTime,0===(e=(e=e.childExpirationTime)>E?e:E)&&(ne=null),t.expirationTime=e,t.finishedWork=null}function qo(t){null===cd&&j("246"),cd.expirationTime=0,Cn||(Cn=!0,Sz=t)}function Lu(t,e){var $=ed;ed=!0;try{return t(e)}finally{(ed=$)||ub||jc(1073741823,!1)}}function Tu(t,e){if(ed&&!Kw){Kw=!0;try{return t(e)}finally{Kw=!1}}return t(e)}function Bv(t,e,$){if(ri)return t(e,$);ed||ub||0===De||(jc(De,!1),De=0);var r=ri,a=ed;ed=ri=!0;try{return t(e,$)}finally{ri=r,(ed=a)||ub||jc(1073741823,!1)}}function Ev(t,e,$,r,a){var i=e.current;t:if($){e:{2===Hf($=$._reactInternalFiber)&&1===$.tag||j("170");var n=$;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ea(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);j("171"),n=void 0}if(1===$.tag){var l=$.type;if(Ea(l)){$=Bp($,l,n);break t}}$=n}else $=Ic;return null===e.context?e.context=$:e.pendingContext=$,e=a,(a=Hc(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(a.callback=e),uh(),hc(i,a),Jd(i,r),r}function po(t,e,$,r){var a=e.current;return Ev(t,e,$,a=rh(rc(),a),r)}function ho(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode;}}function oM(t,e,$){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Pd,key:null==r?null:""+r,children:t,containerInfo:e,implementation:$}}function mh(t){var e=1073741822-25*(1+((1073741822-rc()+500)/25|0));e>=ex&&(e=ex-1),this._expirationTime=ex=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function jf(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function hf(t,e,$){t={current:e=tb(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:$,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function Rh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function lQ(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var $;$=t.lastChild;)t.removeChild($);return new hf(t,!1,e)}function Th(t,e,$,r,a){Rh($)||j("200");var i=$._reactRootContainer;if(i){if("function"==typeof a){var n=a;a=function(){var t=ho(i._internalRoot);n.call(t)}}null!=t?i.legacy_renderSubtreeIntoContainer(t,e,a):i.render(e,a)}else{if(i=$._reactRootContainer=lQ($,r),"function"==typeof a){var l=a;a=function(){var t=ho(i._internalRoot);l.call(t)}}Tu(function(){null!=t?i.legacy_renderSubtreeIntoContainer(t,e,a):i.render(e,a)})}return ho(i._internalRoot)}function xy(t,e){var $=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Rh(e)||j("200"),oM(t,e,null,$)}function kQ(){if(VA)return;VA=true;nF={};zj=(yb(),m);la=(ZN(),FO);Zc=(UF(),eG);zj||j("227");it=!1;zE=null;st=!1;nE=null;mE={onError:function(t){it=!0,zE=t}};Wl=null;_d={};vj=[];Zl={};Ud={};_l={};Kt=null;UD=null;SD=null;cm=null;fm={injectEventPluginOrder:function(t){Wl&&j("101"),Wl=Array.prototype.slice.call(t),Su()},injectEventPluginsByName:function(t){var e,$=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];_d.hasOwnProperty(e)&&_d[e]===r||(_d[e]&&j("102",e),_d[e]=r,$=!0)}$&&Su()}};Zt=Math.random().toString(36).slice(2);Ub="__reactInternalInstance$"+Zt;lj="__reactEventHandlers$"+Zt;lc=!("undefined"==typeof window||!window.document||!window.document.createElement);ff={animationend:dj("Animation","AnimationEnd"),animationiteration:dj("Animation","AnimationIteration"),animationstart:dj("Animation","AnimationStart"),transitionend:dj("Transition","TransitionEnd")};Fm={};WB={};lc&&(WB=document.createElement("div").style,"AnimationEvent"in window||(delete ff.animationend.animation,delete ff.animationiteration.animation,delete ff.animationstart.animation),"TransitionEvent"in window||delete ff.transitionend.transition);Xu=ej("animationend");Yu=ej("animationiteration");Zu=ej("animationstart");$u=ej("transitionend");Yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");Zf=null;gB=null;_u=null;la(Ja.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=hj)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=hj)},persist:function(){this.isPersistent=hj},isPersistent:ij,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ij,this._dispatchInstances=this._dispatchListeners=null}}),Ja.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ja.extend=function(t){function e(){}function $(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var a=new e;return la(a,$.prototype),$.prototype=a,$.prototype.constructor=$,$.Interface=la({},r.Interface,t),$.extend=r.extend,su($),$},su(Ja);eB=Ja.extend({data:null});dB=Ja.extend({data:null});bB=[9,13,27,32];Km=lc&&"CompositionEvent"in window;Yi=null;lc&&"documentMode"in document&&(Yi=document.documentMode);$A=lc&&"TextEvent"in window&&!Yi;dv=lc&&(!Km||Yi&&8<Yi&&11>=Yi);fv=String.fromCharCode(32);ec={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}};WA=!1;Xi=!1;GA={eventTypes:ec,extractEvents:function(t,e,$,r){var a=void 0,i=void 0;if(Km)t:{switch(t){case"compositionstart":a=ec.compositionStart;break t;case"compositionend":a=ec.compositionEnd;break t;case"compositionupdate":a=ec.compositionUpdate;break t;}a=void 0}else Xi?pu(t,$)&&(a=ec.compositionEnd):"keydown"===t&&229===$.keyCode&&(a=ec.compositionStart);return a?(dv&&"ko"!==$.locale&&(Xi||a!==ec.compositionStart?a===ec.compositionEnd&&Xi&&(i=zu()):(gB="value"in(Zf=r)?Zf.value:Zf.textContent,Xi=!0)),a=eB.getPooled(a,e,$,r),i?a.data=i:null!==(i=ou($))&&(a.data=i),he(a),i=a):i=null,(t=$A?nC(t,$):pC(t,$))?((e=dB.getPooled(ec.beforeInput,e,$,r)).data=t,he(e)):e=null,null===i?e:null===e?i:[i,e]}};Qv=null;Ti=null;Oi=null;Yz=!1;Uz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};Bn=zj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Rz=/^(.*)[\\\/]/;_a="function"==typeof Symbol&&Symbol.for;oi=_a?Symbol.for("react.element"):60103;Pd=_a?Symbol.for("react.portal"):60106;nc=_a?Symbol.for("react.fragment"):60107;En=_a?Symbol.for("react.strict_mode"):60108;ai=_a?Symbol.for("react.profiler"):60114;jx=_a?Symbol.for("react.provider"):60109;lx=_a?Symbol.for("react.context"):60110;Pn=_a?Symbol.for("react.concurrent_mode"):60111;Vn=_a?Symbol.for("react.forward_ref"):60112;Uh=_a?Symbol.for("react.suspense"):60113;$n=_a?Symbol.for("react.memo"):60115;Hx=_a?Symbol.for("react.lazy"):60116;Ix="function"==typeof Symbol&&Symbol.iterator;wz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/;Px=Object.prototype.hasOwnProperty;Qx={};Sx={};oa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){oa[t]=new Sa(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];oa[e]=new Sa(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){oa[t]=new Sa(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){oa[t]=new Sa(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){oa[t]=new Sa(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){oa[t]=new Sa(t,3,!0,t,null)}),["capture","download"].forEach(function(t){oa[t]=new Sa(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){oa[t]=new Sa(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){oa[t]=new Sa(t,5,!1,t.toLowerCase(),null)});jo=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jo,nl);oa[e]=new Sa(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jo,nl);oa[e]=new Sa(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jo,nl);oa[e]=new Sa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),oa.tabIndex=new Sa("tabIndex",1,!1,"tabindex",null);by={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};dy=null;no=null;my=!1;lc&&(my=Qr("input")&&(!document.documentMode||9<document.documentMode));az={eventTypes:by,_isInputEventSupported:my,extractEvents:function(t,e,$,r){var a=e?Sc(e):window,i=void 0,n=void 0,l=a.nodeName&&a.nodeName.toLowerCase();if("select"===l||"input"===l&&"file"===a.type?i=HI:Tr(a)?my?i=OI:(i=LI,n=KI):(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(i=MI),i&&(i=i(t,e)))return Jq(i,$,r);n&&n(t,a,e),"blur"===t&&(t=a._wrapperState)&&t.controlled&&"number"===a.type&&al(a,"number",a.value)}};wg=Ja.extend({view:null,detail:null});_y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};Zy=0;Xy=0;Uy=!1;Sy=!1;Sg=wg.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ek,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Zy;return Zy=t.screenX,Uy?"mousemove"===t.type?t.screenX-e:0:(Uy=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Xy;return Xy=t.screenY,Sy?"mousemove"===t.type?t.screenY-e:0:(Sy=!0,0)}});Fy=Sg.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null});Wg={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}};Py={eventTypes:Wg,extractEvents:function(t,e,$,r){var a="mouseover"===t||"pointerover"===t,i="mouseout"===t||"pointerout"===t;if(a&&($.relatedTarget||$.fromElement)||!i&&!a)return null;if(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,i?(i=e,e=(e=$.relatedTarget||$.toElement)?bj(e):null):i=null,i===e)return null;var n=void 0,l=void 0,o=void 0,v=void 0;"mouseout"===t||"mouseover"===t?(n=Sg,l=Wg.mouseLeave,o=Wg.mouseEnter,v="mouse"):"pointerout"!==t&&"pointerover"!==t||(n=Fy,l=Wg.pointerLeave,o=Wg.pointerEnter,v="pointer");var u=null==i?a:Sc(i);if(a=null==e?a:Sc(e),(t=n.getPooled(l,i,$,r)).type=v+"leave",t.target=u,t.relatedTarget=a,($=n.getPooled(o,e,$,r)).type=v+"enter",$.target=a,$.relatedTarget=u,r=e,i&&r)t:{for(a=r,v=0,n=e=i;n;n=Mb(n))v++;for(n=0,o=a;o;o=Mb(o))n++;for(;0<v-n;)e=Mb(e),v--;for(;0<n-v;)a=Mb(a),n--;for(;v--;){if(e===a||e===a.alternate)break t;e=Mb(e),a=Mb(a)}e=null}else e=null;for(a=e,e=[];i&&i!==a&&(null===(v=i.alternate)||v!==a);)e.push(i),i=Mb(i);for(i=[];r&&r!==a&&(null===(v=r.alternate)||v!==a);)i.push(r),r=Mb(r);for(r=0;r<e.length;r++)Bm(e[r],"bubbled",t);for(r=i.length;0<r--;)Bm(i[r],"captured",$);return[t,$]}};Ny=Object.prototype.hasOwnProperty;My=Ja.extend({animationName:null,elapsedTime:null,pseudoElement:null});Ly=Ja.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}});Ky=wg.extend({relatedTarget:null});Jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};Iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};MH=wg.extend({key:function(t){if(t.key){var e=Jy[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=sk(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Iy[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ek,charCode:function(t){return"keypress"===t.type?sk(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?sk(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}});Hy=Sg.extend({dataTransfer:null});Qy=wg.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ek});Ry=Ja.extend({propertyName:null,elapsedTime:null,pseudoElement:null});Ty=Sg.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null});Vy=[["abort","abort"],[Xu,"animationEnd"],[Yu,"animationIteration"],[Zu,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[$u,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]];By={};vo={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){np(t,!0)}),Vy.forEach(function(t){np(t,!1)});zy={eventTypes:By,isInteractiveTopLevelEventType:function(t){return void 0!==(t=vo[t])&&!0===t.isInteractive},extractEvents:function(t,e,$,r){var a=vo[t];if(!a)return null;switch(t){case"keypress":if(0===sk($))return null;case"keydown":case"keyup":t=MH;break;case"blur":case"focus":t=Ky;break;case"click":if(2===$.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=Hy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=Qy;break;case Xu:case Yu:case Zu:t=My;break;case $u:t=Ry;break;case"scroll":t=wg;break;case"wheel":t=Ty;break;case"copy":case"cut":case"paste":t=Ly;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Fy;break;default:t=Ja;}return he(e=t.getPooled(a,e,$,r)),e}};yy=zy.isInteractiveTopLevelEventType;Ch=[];wy=!0;uy={};Wy=0;Gh="_reactListenersID"+(""+Math.random()).slice(2);Yy=lc&&"documentMode"in document&&11>=document.documentMode;qy={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}};Nh=null;$y=null;ny=null;dz=!1;ez={eventTypes:qy,extractEvents:function(t,e,$,r){var a,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(a=!i)){t:{i=zo(i),a=_l.onSelect;for(var n=0;n<a.length;n++){var l=a[n];if(!i.hasOwnProperty(l)||!i[l]){i=!1;break t}}i=!0}a=!i}if(a)return null;switch(i=e?Sc(e):window,t){case"focus":(Tr(i)||"true"===i.contentEditable)&&(Nh=i,$y=e,ny=null);break;case"blur":ny=$y=Nh=null;break;case"mousedown":dz=!0;break;case"contextmenu":case"mouseup":case"dragend":return dz=!1,Dv($,r);case"selectionchange":if(Yy)break;case"keydown":case"keyup":return Dv($,r);}return null}};fm.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Kt=Cm,UD=Hu,SD=Sc,fm.injectEventPluginsByName({SimpleEventPlugin:zy,EnterLeaveEventPlugin:Py,ChangeEventPlugin:az,SelectEventPlugin:ez,BeforeInputEventPlugin:GA});mo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};hy=void 0;ey=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,$,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,$)})}:t}(function(t,e){if(t.namespaceURI!==mo.svg||"innerHTML"in t)t.innerHTML=e;else{for((hy=hy||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=hy.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});$f={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};hz=["Webkit","ms","Moz","O"];Object.keys($f).forEach(function(t){hz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$f[e]=$f[t]})});jz=la({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});lz=null;mz=null;Hz="function"==typeof setTimeout?setTimeout:void 0;Fx="function"==typeof clearTimeout?clearTimeout:void 0;new Set;Yn=[];gg=-1;Ic={};za={current:Ic};Va={current:!1};Me=Ic;Bx=null;Ax=null;Yh=!1;Wn={current:null};xx=null;wx=null;Jz=null;Eg={};sb={current:Eg};Gg={current:Eg};Ig={current:Eg};Zh=Bn.ReactCurrentOwner;tx=new zj.Component().refs;$h={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===Hf(t)},enqueueSetState:function(t,e,$){t=t._reactInternalFiber;var r=rc(),a=Hc(r=rh(r,t));a.payload=e,null!=$&&(a.callback=$),uh(),hc(t,a),Jd(t,r)},enqueueReplaceState:function(t,e,$){t=t._reactInternalFiber;var r=rc(),a=Hc(r=rh(r,t));a.tag=1,a.payload=e,null!=$&&(a.callback=$),uh(),hc(t,a),Jd(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var $=rc(),r=Hc($=rh($,t));r.tag=2,null!=e&&(r.callback=e),uh(),hc(t,r),Jd(t,$)}};_h=Array.isArray;Md=qp(!0);Rn=qp(!1);Qn=null;ox=null;nx=!1;Kz=Bn.ReactCurrentOwner;Lz=void 0;kx=void 0;Mz=void 0;Nz=void 0;Lz=function(t,e){for(var $=e.child;null!==$;){if(5===$.tag||6===$.tag)t.appendChild($.stateNode);else if(4!==$.tag&&null!==$.child){$.child.return=$,$=$.child;continue}if($===e)break;for(;null===$.sibling;){if(null===$.return||$.return===e)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},kx=function(){},Mz=function(t,e,$,r,a){var i=t.memoizedProps;if(i!==r){var n=e.stateNode;switch(Fd(sb.current),t=null,$){case"input":i=ll(n,i),r=ll(n,r),t=[];break;case"option":i=_k(n,i),r=_k(n,r),t=[];break;case"select":i=la({},i,{value:void 0}),r=la({},r,{value:void 0}),t=[];break;case"textarea":i=wl(n,i),r=wl(n,r),t=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(n.onclick=pj);}Sl($,r),n=$=void 0;var l=null;for($ in i)if(!r.hasOwnProperty($)&&i.hasOwnProperty($)&&null!=i[$])if("style"===$){var o=i[$];for(n in o)o.hasOwnProperty(n)&&(l||(l={}),l[n]="")}else"dangerouslySetInnerHTML"!==$&&"children"!==$&&"suppressContentEditableWarning"!==$&&"suppressHydrationWarning"!==$&&"autoFocus"!==$&&(Ud.hasOwnProperty($)?t||(t=[]):(t=t||[]).push($,null));for($ in r){var v=r[$];if(o=null!=i?i[$]:void 0,r.hasOwnProperty($)&&v!==o&&(null!=v||null!=o))if("style"===$){if(o){for(n in o)!o.hasOwnProperty(n)||v&&v.hasOwnProperty(n)||(l||(l={}),l[n]="");for(n in v)v.hasOwnProperty(n)&&o[n]!==v[n]&&(l||(l={}),l[n]=v[n])}else l||(t||(t=[]),t.push($,l)),l=v;}else"dangerouslySetInnerHTML"===$?(v=v?v.__html:void 0,o=o?o.__html:void 0,null!=v&&o!==v&&(t=t||[]).push($,""+v)):"children"===$?o===v||"string"!=typeof v&&"number"!=typeof v||(t=t||[]).push($,""+v):"suppressContentEditableWarning"!==$&&"suppressHydrationWarning"!==$&&(Ud.hasOwnProperty($)?(null!=v&&_b(a,$),t||o===v||(t=[])):(t=t||[]).push($,v))}l&&(t=t||[]).push("style",l),a=t,(e.updateQueue=a)&&vh(e)}},Nz=function(t,e,$,r){$!==r&&vh(e)};Oz={readContext:dp};ci=Bn.ReactCurrentOwner;ex=1073741822;Kn=0;gi=!1;Ha=null;ii=null;Wa=0;li=-1;Pz=!1;A=null;Xw=!1;Qz=null;Vw=null;ne=null;Vc=null;Gc=null;Uw=0;Tw=void 0;ub=!1;cd=null;Ua=0;De=0;Cn=!1;Sz=null;ed=!1;Kw=!1;ri=!1;vi=null;wn=Zc.unstable_now();bc=1073741822-(wn/10|0);Gw=bc;Xz=50;Aw=0;iA=null;$v=!1;Qv=function(t,e,$){switch(e){case"input":if(bl(t,$),e=$.name,"radio"===$.type&&null!=e){for($=t;$.parentNode;)$=$.parentNode;for($=$.querySelectorAll("input[name="+JSON.stringify(""+e)+"][type=\"radio\"]"),e=0;e<$.length;e++){var r=$[e];if(r!==t&&r.form===t.form){var a=Cm(r);a||j("90"),Mr(r),bl(r,a)}}}break;case"textarea":Gu(t,$);break;case"select":null!=(e=$.value)&&ie(t,!!$.multiple,e,!1);}},mh.prototype.render=function(t){this._defer||j("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,$=this._expirationTime,r=new jf;return Ev(t,e,null,$,r._onCommit),r},mh.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},mh.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||j("251"),this._hasChildren){var $=this._expirationTime;if(e!==this){this._hasChildren&&($=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,a=e;a!==this;)r=a,a=a._next;null===r&&j("251"),r._next=a._next,this._next=e,t.firstBatch=this}this._defer=!1,qu(t,$),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},mh.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},jf.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},jf.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var $=t[e];"function"!=typeof $&&j("191",$),$()}}},hf.prototype.render=function(t,e){var $=this._internalRoot,r=new jf;return null!==(e=void 0===e?null:e)&&r.then(e),po(t,$,null,r._onCommit),r},hf.prototype.unmount=function(t){var e=this._internalRoot,$=new jf;return null!==(t=void 0===t?null:t)&&$.then(t),po(null,e,null,$._onCommit),$},hf.prototype.legacy_renderSubtreeIntoContainer=function(t,e,$){var r=this._internalRoot,a=new jf;return null!==($=void 0===$?null:$)&&a.then($),po(e,r,t,a._onCommit),a},hf.prototype.createBatch=function(){var t=new mh(this),e=t._expirationTime,$=this._internalRoot,r=$.firstBatch;if(null===r)$.firstBatch=t,t._next=null;else{for($=null;null!==r&&r._expirationTime>=e;)$=r,r=r._next;t._next=r,null!==$&&($._next=t)}return t},UH=Lu,VH=Bv,cI=function(){ub||0===De||(jc(De,!1),De=0)};sv={createPortal:xy,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"==typeof t.render?j("188"):j("268",Object.keys(t))),t=null===(t=pp(e))?null:t.stateNode},hydrate:function(t,e,$){return Th(null,t,e,!0,$)},render:function(t,e,$){return Th(null,t,e,!1,$)},unstable_renderSubtreeIntoContainer:function(t,e,$,r){return(null==t||void 0===t._reactInternalFiber)&&j("38"),Th(t,e,$,!1,r)},unmountComponentAtNode:function(t){return Rh(t)||j("40"),!!t._reactRootContainer&&(Tu(function(){Th(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return xy.apply(void 0,arguments)},unstable_batchedUpdates:Lu,unstable_interactiveUpdates:Bv,flushSync:function(t,e){ub&&j("187");var $=ed;ed=!0;try{return fs(t,e)}finally{ed=$,jc(1073741823,!1)}},unstable_flushControlled:function(t){var e=ed;ed=!0;try{fs(t)}finally{(ed=e)||ub||jc(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Hu,Sc,Cm,fm.injectEventPluginsByName,Zl,he,function(t){Gm(t,bC)},Zr,Yr,kk,Em]},unstable_createRoot:function(t,e){return Rh(t)||j("299","unstable_createRoot"),new hf(t,!0,null!=e&&!0===e.hydrate)}};!function(t){var e=t.findFiberByHostInstance;$O(la({},t,{findHostInstanceByFiber:function(t){return null===(t=pp(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:bj,bundleType:0,version:"16.6.3",rendererPackageName:"react-dom"});rv={default:sv};qv=rv&&sv||rv;nF=qv.default||qv}jq(),Ff=(kQ(),nF);function hh(e){return(hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vh(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Vo(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wh(e,r,t){return r&&Vo(e.prototype,r),t&&Vo(e,t),e}function ef(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function iQ(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(r){ef(e,r,t[r])})}return e}function Xn(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&hQ(e,r)}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hQ(e,r){return(hQ=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function bQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e,r){return!r||"object"!=typeof r&&"function"!=typeof r?bQ(e):r}function _P(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Up(e,r){return e(r={exports:{}},r.exports),r.exports}var ZP,a=arguments[0],XP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,$){e.__proto__=$}||function(e,$){for(var r in $)$.hasOwnProperty(r)&&(e[r]=$[r])};function WP(e,$){function r(){this.constructor=e}XP(e,$),e.prototype=null===$?Object.create($):(r.prototype=$.prototype,new r)}var On=Object.assign||function(e){for(var $,r=1,t=arguments.length;r<t;r++)for(var i in $=arguments[r])Object.prototype.hasOwnProperty.call($,i)&&(e[i]=$[i]);return e};function bi(e){var $="function"==typeof Symbol&&e[Symbol.iterator],r=0;return $?$.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function cf(e,$){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,i,a=r.call(e),n=[];try{for(;(void 0===$||$-->0)&&!(t=a.next()).done;)n.push(t.value)}catch(o){i={error:o}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return n}function UP(){for(var e=[],$=0;$<arguments.length;$++)e=e.concat(cf(arguments[$]));return e}var TP="An invariant failed, however the error is obfuscated because this is an production build.",di=[];Object.freeze(di);var Ln={};function Da(){return++h.mobxGuid}function x(e){throw Dd(!1,e),"X"}function Dd(e,$){if(!e)throw new Error("[mobx] "+($||TP))}Object.freeze(Ln);function SP(e,$){return!1}function qs(e){var $=!1;return function(){if(!$)return $=!0,e.apply(this,arguments)}}var hi=function(){};function RP(e){var $=[];return e.forEach(function(e){-1===$.indexOf(e)&&$.push(e)}),$}function Hn(e){return null!==e&&"object"==typeof e}function $e(e){if(null===e||"object"!=typeof e)return!1;var $=Object.getPrototypeOf(e);return $===Object.prototype||null===$}function Ze(e,$,r){Object.defineProperty(e,$,{enumerable:!1,writable:!0,configurable:!0,value:r})}function NP(e,$,r){Object.defineProperty(e,$,{enumerable:!1,writable:!1,configurable:!0,value:r})}function LP(e,$){var r=Object.getOwnPropertyDescriptor(e,$);return!r||!1!==r.configurable&&!1!==r.writable}function JP(e,$){0}function Cd(e,$){var r="isMobX"+e;return $.prototype[r]=!0,function(e){return Hn(e)&&!0===e[r]}}function IP(e){return Array.isArray(e)||X(e)}function Xe(e){return e instanceof Map}function HP(e){return $e(e)?Object.keys(e):Array.isArray(e)?e.map(function(e){return cf(e,1)[0]}):Xe(e)||R(e)?Array.from(e.keys()):x("Cannot get keys from '"+e+"'")}function Rt(e){return null===e?null:"object"==typeof e?""+e:e}var l=Symbol("mobx administration"),Te=function(){function e(e){void 0===e&&(e="Atom@"+Da()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=y.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return sq(this)},e.prototype.reportChanged=function(){db(),xO(this),gb()},e.prototype.toString=function(){return this.name},e}(),zn=Cd("Atom",Te);function qi(e,$,r){void 0===$&&($=hi),void 0===r&&(r=hi);var t=new Te(e);return gs(t,$),hs(t,r),t}function FP(e,$){return e===$}function EP(e,$){return Ov(e,$)}function DP(e,$){return Object.is(e,$)}var Se={identity:FP,structural:EP,default:DP},ti=Symbol("mobx did run lazy initializers"),Rg=Symbol("mobx pending decorators"),BP={},yP={};function wP(e,$){var r=$?BP:yP;return r[e]||(r[e]={configurable:!0,enumerable:$,get:function(){return yd(this),this[e]},set:function($){yd(this),this[e]=$}})}function yd(e){if(!0!==e[ti]){var $=e[Rg];if($)for(var r in Ze(e,ti,!0),$){var t=$[r];t.propertyCreator(e,t.prop,t.descriptor,t.decoratorTarget,t.decoratorArguments)}}}function bv(e,$){return function(){var r,t=function(t,i,a,n){if(!0===n)return $(t,i,a,t,r),null;if(!Object.prototype.hasOwnProperty.call(t,Rg)){var o=t[Rg];Ze(t,Rg,On({},o))}return t[Rg][i]={prop:i,propertyCreator:$,descriptor:a,decoratorTarget:t,decoratorArguments:r},wP(i,e)};return vP(arguments)?(r=di,t.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),t)}}function vP(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function xi(e,$,r){return ng(e)?e:Array.isArray(e)?V.array(e,{name:r}):$e(e)?V.object(e,void 0,{name:r}):Xe(e)?V.map(e,{name:r}):e}function uP(e,$,r){return null==e?e:Y(e)||X(e)||R(e)?e:Array.isArray(e)?V.array(e,{name:r,deep:!1}):$e(e)?V.object(e,void 0,{name:r,deep:!1}):Xe(e)?V.map(e,{name:r,deep:!1}):x(!1)}function yi(e){return e}function sP(e,$,r){return Ov(e,$)?$:e}function Ai(e){Dd(e);var $=bv(!0,function($,r,t,i,a){var n=t?t.initializer?t.initializer.call($):t.value:void 0;sl($).addObservableProp(r,n,e)}),r=(void 0!==Dh&&Dh.env,$);return r.enhancer=e,r}var _v={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Pg(e){return null==e?_v:"string"==typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(_v);var vn=Ai(xi),rP=Ai(uP),uw=Ai(yi),qP=Ai(sP);function tn(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?yi:xi}function kP(e,$,r){if("string"==typeof arguments[1])return vn.apply(null,arguments);if(ng(e))return e;var t=$e(e)?V.object(e,$,r):Array.isArray(e)?V.array(e,$):Xe(e)?V.map(e,$):e;if(t!==e)return t;x(!1)}var Cx={box:function(e,$){arguments.length>2&&Gi("box");var r=Pg($);return new rd(e,tn(r),r.name)},array:function(e,$){arguments.length>2&&Gi("array");var r=Pg($);return NM(e,tn(r),r.name)},map:function(e,$){arguments.length>2&&Gi("map");var r=Pg($);return new Kj(e,tn(r),r.name)},object:function(e,$,r){"string"==typeof arguments[1]&&Gi("object");var t=Pg(r);if(!1===t.proxy)return nm({},e,$,t);var i=vs(t),a=QM(nm({},void 0,void 0,t));return ws(a,e,$,i),a},ref:uw,shallow:rP,deep:vn,struct:qP},V=kP;function Gi(e){x("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(Cx).forEach(function(e){return V[e]=Cx[e]});var Hi=bv(!1,function(e,$,r,t,i){var a=r.get,n=r.set,o=i[0]||{};sl(e).addComputedProp(t,$,On({get:a,set:n,context:e},o))}),jP=Hi({equals:Se.structural}),Ii=function(e,$,r){if("string"==typeof $)return Hi.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return Hi.apply(null,arguments);var t="object"==typeof $?$:{};return t.get=e,t.set="function"==typeof $?$:t.set,t.name=t.name||e.name||"",new He(t)};function Ec(e,$){var r=function(){return Cy(e,$,this,arguments)};return r.isMobxAction=!0,r}function Cy(e,$,r,t){var i=hP(e,$,r,t);try{return $.apply(r,t)}finally{gP(i)}}function hP(e,$,r,t){var i=qa()&&!!e,a=0,n=Fe();return db(),{prevDerivation:n,prevAllowStateChanges:pn(!0),notifySpy:i,startTime:a}}function gP(e){on(e.prevAllowStateChanges),gb(),Ac(e.prevDerivation),e.notifySpy}function Jo(e,$){var r,t=pn(e);try{r=$()}finally{on(t)}return r}function pn(e){var $=h.allowStateChanges;return h.allowStateChanges=e,$}function on(e){h.allowStateChanges=e}function nn(e){var $,r=h.computationDepth;h.computationDepth=0;try{$=e()}finally{h.computationDepth=r}return $}Ii.struct=jP;var y,fc,Hg={},rd=function(e){function $($,r,t,i){void 0===t&&(t="ObservableValue@"+Da()),void 0===i&&(i=!0);var a=e.call(this,t)||this;return a.enhancer=r,a.hasUnreportedChange=!1,a.value=r($,void 0,t),i&&qa(),a}return WP($,e),$.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},$.prototype.set=function(e){this.value;if((e=this.prepareNewValue(e))!==Hg){qa();0,this.setNewValue(e)}},$.prototype.prepareNewValue=function(e){if(Si(this),uc(this)){var $=tc(this,{object:this,type:"update",newValue:e});if(!$)return Hg;e=$.newValue}return e=this.enhancer(e,this.value,this.name),this.value!==e?e:Hg},$.prototype.setNewValue=function(e){var $=this.value;this.value=e,this.reportChanged(),$b(this)&&Zb(this,{type:"update",object:this,newValue:e,oldValue:$})},$.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},$.prototype.intercept=function(e){return Dj(this,e)},$.prototype.observe=function(e,$){return $&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),Fj(this,e)},$.prototype.toJSON=function(){return this.get()},$.prototype.toString=function(){return this.name+"["+this.value+"]"},$.prototype.valueOf=function(){return Rt(this.get())},$.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},$}(Te),kn=Cd("ObservableValue",rd),He=function(){function e(e){this.dependenciesState=y.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=y.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Da(),this.value=new Qi(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=fc.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+Da(),e.set&&(this.setter=Ec(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?Se.structural:Se.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){rO(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&x("Cycle detected in computation "+this.name+": "+this.derivation),0!==h.inBatch||0!==this.observers.size||this.keepAlive?(sq(this),dn(this)&&this.trackAndCompute()&&uO(this)):dn(this)&&(this.warnAboutUntrackedRead(),db(),this.value=this.computeValue(!1),gb());var e=this.value;if(Cg(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(Cg(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){Dd(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else Dd(!1,!1)},e.prototype.trackAndCompute=function(){qa();var e=this.value,$=this.dependenciesState===y.NOT_TRACKING,r=this.computeValue(!0),t=$||Cg(e)||Cg(r)||!this.equals(e,r);return t&&(this.value=r),t},e.prototype.computeValue=function(e){var $;if(this.isComputing=!0,h.computationDepth++,e)$=up(this,this.derivation,this.scope);else if(!0===h.disableErrorBoundaries)$=this.derivation.call(this.scope);else try{$=this.derivation.call(this.scope)}catch(r){$=new Qi(r)}return h.computationDepth--,this.isComputing=!1,$},e.prototype.suspend=function(){this.keepAlive||(_m(this),this.value=void 0)},e.prototype.observe=function(e,$){var r=this,t=!0,i=void 0;return xm(function(){var a=r.get();if(!t||$){var n=Fe();e({type:"update",object:r,newValue:a,oldValue:i}),Ac(n)}t=!1,i=a})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return Rt(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(),Ge=Cd("ComputedValue",He);!function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(y||(ZP=y={},y,ZP)),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(fc||(fc={}));var Qi=function(){return function(e){this.cause=e}}();function Cg(e){return e instanceof Qi}function dn(e){switch(e.dependenciesState){case y.UP_TO_DATE:return!1;case y.NOT_TRACKING:case y.STALE:return!0;case y.POSSIBLY_STALE:for(var $=Fe(),r=e.observing,t=r.length,i=0;i<t;i++){var a=r[i];if(Ge(a)){if(h.disableErrorBoundaries)a.get();else try{a.get()}catch(n){return Ac($),!0}if(e.dependenciesState===y.STALE)return Ac($),!0}}return Ep(e),Ac($),!1;}}function ZO(){return null!==h.trackingDerivation}function Si(e){var $=e.observers.size>0;h.computationDepth>0&&$&&x(!1),h.allowStateChanges||!$&&"strict"!==h.enforceActions||x(!1)}function up(e,$,r){Ep(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++h.runId;var t,i=h.trackingDerivation;if(h.trackingDerivation=e,!0===h.disableErrorBoundaries)t=$.call(r);else try{t=$.call(r)}catch(a){t=new Qi(a)}return h.trackingDerivation=i,XO(e),t}function XO(e){for(var $=e.observing,r=e.observing=e.newObserving,t=y.UP_TO_DATE,i=0,a=e.unboundDepsCount,n=0;n<a;n++){0===(o=r[n]).diffValue&&(o.diffValue=1,i!==n&&(r[i]=o),i++),o.dependenciesState>t&&(t=o.dependenciesState)}for(r.length=i,e.newObserving=null,a=$.length;a--;){0===(o=$[a]).diffValue&&lq(o,e),o.diffValue=0}for(;i--;){var o;1===(o=r[i]).diffValue&&(o.diffValue=0,DO(o,e))}t!==y.UP_TO_DATE&&(e.dependenciesState=t,e.onBecomeStale())}function _m(e){var $=e.observing;e.observing=[];for(var r=$.length;r--;)lq($[r],e);e.dependenciesState=y.NOT_TRACKING}function Bg(e){var $=Fe();try{return e()}finally{Ac($)}}function Fe(){var e=h.trackingDerivation;return h.trackingDerivation=null,e}function Ac(e){h.trackingDerivation=e}function Ep(e){if(e.dependenciesState!==y.UP_TO_DATE){e.dependenciesState=y.UP_TO_DATE;for(var $=e.observing,r=$.length;r--;)$[r].lowestObserverState=y.UP_TO_DATE}}var WO=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","disableErrorBoundaries","runId"],yg=function(){return function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1}}(),Lp=!0,SO=!1,h=function(){var e=Lm();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Lp=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new yg().version&&(Lp=!1),Lp?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new yg):(setTimeout(function(){SO||x("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new yg)}();function NO(){(h.pendingReactions.length||h.inBatch||h.isRunningReactions)&&x("isolateGlobalState should be called before MobX is running any reactions"),SO=!0,Lp&&(0==--Lm().__mobxInstanceCount&&(Lm().__mobxGlobals=void 0),h=new yg)}function MO(){return h}function LO(){var e=new yg;for(var $ in e)-1===WO.indexOf($)&&(h[$]=e[$]);h.allowStateChanges=!h.enforceActions}function Lm(){return"undefined"!=typeof window?window:gc}function KO(e){return e.observers&&e.observers.size>0}function GO(e){return e.observers}function DO(e,$){e.observers.add($),e.lowestObserverState>$.dependenciesState&&(e.lowestObserverState=$.dependenciesState)}function lq(e,$){e.observers.delete($),0===e.observers.size&&mq(e)}function mq(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,h.pendingUnobservations.push(e))}function db(){h.inBatch++}function gb(){if(0==--h.inBatch){Tq();for(var e=h.pendingUnobservations,$=0;$<e.length;$++){var r=e[$];r.isPendingUnobservation=!1,0===r.observers.size&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof He&&r.suspend())}h.pendingUnobservations=[]}}function sq(e){var $=h.trackingDerivation;return null!==$?($.runId!==e.lastAccessedBy&&(e.lastAccessedBy=$.runId,$.newObserving[$.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&h.inBatch>0&&mq(e),!1)}function xO(e){e.lowestObserverState!==y.STALE&&(e.lowestObserverState=y.STALE,e.observers.forEach(function($){$.dependenciesState===y.UP_TO_DATE&&($.isTracing!==fc.NONE&&Cq($,e),$.onBecomeStale()),$.dependenciesState=y.STALE}))}function uO(e){e.lowestObserverState!==y.STALE&&(e.lowestObserverState=y.STALE,e.observers.forEach(function($){$.dependenciesState===y.POSSIBLY_STALE?$.dependenciesState=y.STALE:$.dependenciesState===y.UP_TO_DATE&&(e.lowestObserverState=y.UP_TO_DATE)}))}function rO(e){e.lowestObserverState===y.UP_TO_DATE&&(e.lowestObserverState=y.POSSIBLY_STALE,e.observers.forEach(function($){$.dependenciesState===y.UP_TO_DATE&&($.dependenciesState=y.POSSIBLY_STALE,$.isTracing!==fc.NONE&&Cq($,e),$.onBecomeStale())}))}function Cq(e,$){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+$.name+"'"),e.isTracing===fc.BREAK){var r=[];Dq(xs(e),r,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+$.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof He?e.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")()}}function Dq(e,$,r){$.length>=1e3?$.push("(and many more)"):($.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach(function(e){return Dq(e,$,r+1)}))}var we=function(){function e(e,$,r){void 0===e&&(e="Reaction@"+Da()),this.name=e,this.onInvalidate=$,this.errorHandler=r,this.observing=[],this.newObserving=[],this.dependenciesState=y.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Da(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=fc.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,h.pendingReactions.push(this),Tq())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(db(),this._isScheduled=!1,dn(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&qa()}catch(e){this.reportExceptionInDerivation(e)}}gb()}},e.prototype.track=function(e){db();qa();this._isRunning=!0;var $=up(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&_m(this),Cg($)&&this.reportExceptionInDerivation($.cause),gb()},e.prototype.reportExceptionInDerivation=function(e){var $=this;if(this.errorHandler)this.errorHandler(e,this);else{if(h.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(r,e),qa()&&iO({type:"error",name:this.name,message:r,error:""+e}),h.globalReactionErrorHandlers.forEach(function(r){return r(e,$)})}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(db(),_m(this),gb()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[l]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),Yt(this,e)},e}();function mO(e){return h.globalReactionErrorHandlers.push(e),function(){var $=h.globalReactionErrorHandlers.indexOf(e);$>=0&&h.globalReactionErrorHandlers.splice($,1)}}var Rq=100,Sq=function(e){return e()};function Tq(){h.inBatch>0||h.isRunningReactions||Sq(lO)}function lO(){h.isRunningReactions=!0;for(var e=h.pendingReactions,$=0;e.length>0;){++$===Rq&&(console.error("Reaction doesn't converge to a stable state after "+Rq+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var r=e.splice(0),t=0,i=r.length;t<i;t++)r[t].runReaction()}h.isRunningReactions=!1}var cj=Cd("Reaction",we);function jO(e){var $=Sq;Sq=function(r){return e(function(){return $(r)})}}function qa(){return!1}function iO(e){}function fj(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function fO(){x(!1)}function tr(e){return function($,r,t){if(t){if(t.value)return{value:Ec(e,t.value),enumerable:!1,configurable:!0,writable:!0};var i=t.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Ec(e,i.call(this))}}}return cO(e).apply(this,arguments)}}function cO(e){return function($,r,t){Object.defineProperty($,r,{configurable:!0,enumerable:!1,get:function(){},set:function($){Ze(this,r,Q(e,$))}})}}function bO(e,$,r,t){return!0===t?(ym(e,$,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return ym(this,$,r.value||r.initializer.call(this)),this[$]},set:fO}:{enumerable:!1,configurable:!0,set:function(e){ym(this,$,e)},get:function(){}}}var Q=function(e,$,r,t){return 1===arguments.length&&"function"==typeof e?Ec(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof $?Ec(e,$):1===arguments.length&&"string"==typeof e?tr(e):!0!==t?tr($).apply(null,arguments):void Ze(e,$,Ec(e.name||$,r.value))};function Kr(e,$){var r="string"==typeof e?e:e.name||"<unnamed action>",t="function"==typeof e?e:$;return Cy(r,t,this,void 0)}function YN(e){return"function"==typeof e&&!0===e.isMobxAction}function ym(e,$,r){Ze(e,$,Ec($,r.bind(e)))}function xm(e,$){void 0===$&&($=Ln);var r,t=$&&$.name||e.name||"Autorun@"+Da();if(!$.scheduler&&!$.delay)r=new we(t,function(){this.track(n)},$.onError);else{var i=Sr($),a=!1;r=new we(t,function(){a||(a=!0,i(function(){a=!1,r.isDisposed||r.track(n)}))},$.onError)}function n(){e(r)}return r.schedule(),r.getDisposer()}Q.bound=bO;var XN=function(e){return e()};function Sr(e){return e.scheduler?e.scheduler:e.delay?function($){return setTimeout($,e.delay)}:XN}function $r(e,$,r){void 0===r&&(r=Ln);var t,i=r.name||"Reaction@"+Da(),a=Q(i,r.onError?WN(r.onError,$):$),n=!r.scheduler&&!r.delay,o=Sr(r),u=!0,s=!1,c=r.compareStructural?Se.structural:r.equals||Se.default,v=new we(i,function(){u||n?p():s||(s=!0,o(p))},r.onError);function p(){if(s=!1,!v.isDisposed){var $=!1;v.track(function(){var r=e(v);$=u||!c(t,r),t=r}),u&&r.fireImmediately&&a(t,v),u||!0!==$||a(t,v),u&&(u=!1)}}return v.schedule(),v.getDisposer()}function WN(e,$){return function(){try{return $.apply(this,arguments)}catch(r){e.call(this,r)}}}function gs(e,$,r){return ms("onBecomeObserved",e,$,r)}function hs(e,$,r){return ms("onBecomeUnobserved",e,$,r)}function ms(e,$,r,t){var i="string"==typeof r?Pa($,r):Pa($),a="string"==typeof r?t:r,n=i[e];return"function"!=typeof n?x(!1):(i[e]=function(){n.call(this),a.call(this)},function(){i[e]=n})}function os(e){var $=e.enforceActions,r=e.computedRequiresReaction,t=e.disableErrorBoundaries,i=e.reactionScheduler;if(void 0!==$){"boolean"!=typeof $&&"strict"!==$||SP("Deprecated value for 'enforceActions', use 'false' => '\"never\"', 'true' => '\"observed\"', '\"strict\"' => \"'always'\" instead");var a=void 0;switch($){case!0:case"observed":a=!0;break;case!1:case"never":a=!1;break;case"strict":case"always":a="strict";break;default:x("Invalid value for 'enforceActions': '"+$+"', expected 'never', 'always' or 'observed'");}h.enforceActions=a,h.allowStateChanges=!0!==a&&"strict"!==a}void 0!==r&&(h.computedRequiresReaction=!!r),!0===e.isolateGlobalState&&NO(),void 0!==t&&(!0===t&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),h.disableErrorBoundaries=!!t),i&&jO(i)}function PN(e,$){var r="function"==typeof e?e.prototype:e,t=function(e){var t=$[e];Array.isArray(t)||(t=[t]);var i=Object.getOwnPropertyDescriptor(r,e),a=t.reduce(function($,t){return t(r,e,$)},i);a&&Object.defineProperty(r,e,a)};for(var i in $)t(i);return e}function nm(e,$,r,t){var i=vs(t=Pg(t));return yd(e),sl(e,t.name,i.enhancer),$&&ws(e,$,r,i),e}function vs(e){return e.defaultDecorator||(!1===e.deep?uw:vn)}function ws(e,$,r,t){db();try{for(var i in $){var a=Object.getOwnPropertyDescriptor($,i);0;var n=r&&i in r?r[i]:a.get?Hi:t;0;var o=n(e,i,a,!0);o&&Object.defineProperty(e,i,o)}}finally{gb()}}function xs(e,$){return Bs(Pa(e,$))}function Bs(e){var $={name:e.name};return e.observing&&e.observing.length>0&&($.dependencies=RP(e.observing).map(Bs)),$}function KN(e,$){return Hs(Pa(e,$))}function Hs(e){var $={name:e.name};return KO(e)&&($.observers=Array.from(GO(e)).map(Hs)),$}var JN=0;function BN(e){1!==arguments.length&&x("Flow expects one 1 argument and cannot be used as decorator");var $=e.name||"<unnamed flow>";return function(){var r,t=arguments,i=++JN,a=Q($+" - runid: "+i+" - init",e).apply(this,t),n=void 0,o=new Promise(function(e,t){var o=0;function u(e){var r;n=void 0;try{r=Q($+" - runid: "+i+" - yield "+o++,a.next).call(a,e)}catch(u){return t(u)}c(r)}function s(e){var r;n=void 0;try{r=Q($+" - runid: "+i+" - yield "+o++,a.throw).call(a,e)}catch(u){return t(u)}c(r)}function c($){if(!$||"function"!=typeof $.then)return $.done?e($.value):(n=Promise.resolve($.value)).then(u,s);$.then(c,t)}r=t,u(void 0)});return o.cancel=Q($+" - runid: "+i+" - cancel",function(){try{n&&Os(n);var e=a.return(),$=Promise.resolve(e.value);$.then(hi,hi),Os($),r(new Error("FLOW_CANCELLED"))}catch(t){r(t)}}),o}}function Os(e){"function"==typeof e.cancel&&e.cancel()}function jm(e,$,r){var t;if(R(e)||X(e)||kn(e))t=Oa(e);else{if(!Y(e))return x(!1);if("string"!=typeof $)return x(!1);t=Oa(e,$)}return void 0!==t.dehancer?x(!1):(t.dehancer="function"==typeof $?$:r,function(){t.dehancer=void 0})}function nj(e,$,r){return"function"==typeof r?rN(e,$,r):uN(e,$)}function uN(e,$){return Oa(e).intercept($)}function rN(e,$,r){return Oa(e,$).intercept(r)}function gt(e,$){if(null==e)return!1;if(void 0!==$){if(!1===Y(e))return!1;if(!e[l].values.has($))return!1;var r=Pa(e,$);return Ge(r)}return Ge(e)}function oN(e){return arguments.length>1?x(!1):gt(e)}function bm(e,$){return"string"!=typeof $?x(!1):gt(e,$)}function ot(e,$){return null!=e&&(void 0!==$?!!Y(e)&&e[l].values.has($):Y(e)||!!e[l]||zn(e)||cj(e)||Ge(e))}function ng(e){return 1!==arguments.length&&x(!1),ot(e)}function wt(e,$){return"string"!=typeof $?x(!1):ot(e,$)}function se(e){return Y(e)?e[l].getKeys():R(e)?Array.from(e.keys()):X(e)?e.map(function(e,$){return $}):x(!1)}function Yl(e){return Y(e)?se(e).map(function($){return e[$]}):R(e)?se(e).map(function($){return e.get($)}):X(e)?e.slice():x(!1)}function Ct(e){return Y(e)?se(e).map(function($){return[$,e[$]]}):R(e)?se(e).map(function($){return[$,e.get($)]}):X(e)?e.map(function(e,$){return[$,e]}):x(!1)}function sj(e,$,r){if(2!==arguments.length){if(Y(e)){var t=e[l];t.values.get($)?t.write($,r):t.addObservableProp($,r,t.defaultEnhancer)}else if(R(e))e.set($,r);else{if(!X(e))return x(!1);"number"!=typeof $&&($=parseInt($,10)),Dd($>=0,"Not a valid index: '"+$+"'"),db(),$>=e.length&&(e.length=$+1),e[$]=r,gb()}}else{db();var i=$;try{for(var a in i)sj(e,a,i[a])}finally{gb()}}}function jN(e,$){if(Y(e))e[l].remove($);else if(R(e))e.delete($);else{if(!X(e))return x(!1);"number"!=typeof $&&($=parseInt($,10)),Dd($>=0,"Not a valid index: '"+$+"'"),e.splice($,1)}}function Gt(e,$){return Y(e)?Oa(e).has($):R(e)?e.has($):X(e)?$>=0&&$<e.length:x(!1)}function hN(e,$){if(Gt(e,$))return Y(e)?e[$]:R(e)?e.get($):X(e)?e[$]:x(!1)}function uj(e,$,r,t){return"function"==typeof r?bN(e,$,r,t):cN(e,$,r)}function cN(e,$,r){return Oa(e).observe($,r)}function bN(e,$,r,t){return Oa(e,$).observe(r,t)}var $M={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function xj(e,$,r,t){return t.detectCycles&&e.set($,r),r}function re(e,$,r){if(!$.recurseEverything&&!ng(e))return e;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(kn(e))return re(e.get(),$,r);if(ng(e)&&se(e),!0===$.detectCycles&&null!==e&&r.has(e))return r.get(e);if(X(e)||Array.isArray(e)){var t=xj(r,e,[],$),i=e.map(function(e){return re(e,$,r)});t.length=i.length;for(var a=0,n=i.length;a<n;a++)t[a]=i[a];return t}if(R(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===$.exportMapsAsObjects){var o=xj(r,e,new Map,$);return e.forEach(function(e,t){o.set(t,re(e,$,r))}),o}var u=xj(r,e,{},$);return e.forEach(function(e,t){u[t]=re(e,$,r)}),u}var s=xj(r,e,{},$);for(var c in e)s[c]=re(e[c],$,r);return s}function YM(e,$){var r;return"boolean"==typeof $&&($={detectCycles:$}),$||($=$M),$.detectCycles=void 0===$.detectCycles?!0===$.recurseEverything:!0===$.detectCycles,$.detectCycles&&(r=new Map),re(e,$,r)}function Yt(){for(var e=[],$=0;$<arguments.length;$++)e[$]=arguments[$];var r=!1;"boolean"==typeof e[e.length-1]&&(r=e.pop());var t=XM(e);if(!t)return x(!1);t.isTracing===fc.NONE&&console.log("[mobx.trace] '"+t.name+"' tracing enabled"),t.isTracing=r?fc.BREAK:fc.LOG}function XM(e){switch(e.length){case 0:return h.trackingDerivation;case 1:return Pa(e[0]);case 2:return Pa(e[0],e[1]);}}function qe(e,$){void 0===$&&($=void 0),db();try{return e.apply($)}finally{gb()}}function VM(e,$,r){return 1===arguments.length||$&&"object"==typeof $?TM(e,$):eu(e,$,r||{})}function eu(e,$,r){var t;"number"==typeof r.timeout&&(t=setTimeout(function(){if(!a[l].isDisposed){a();var e=new Error("WHEN_TIMEOUT");if(!r.onError)throw e;r.onError(e)}},r.timeout)),r.name=r.name||"When@"+Da();var i=Ec(r.name+"-effect",$),a=xm(function($){e()&&($.dispose(),t&&clearTimeout(t),i())},r);return a}function TM(e,$){var r;var t=new Promise(function(t,i){var a=eu(e,t,On({},$,{onError:i}));r=function(){a(),i("WHEN_CANCELLED")}});return t.cancel=r,t}function Bj(e){return e[l]}var RM={has:function(e,$){if($===l||"constructor"===$||$===ti)return!0;var r=Bj(e);return"string"==typeof $?r.has($):$ in e},get:function(e,$){if($===l||"constructor"===$||$===ti)return e[$];var r=Bj(e),t=r.values.get($);if(t instanceof Te){var i=t.get();return void 0===i&&r.has($),i}return"string"==typeof $&&r.has($),e[$]},set:function(e,$,r){return"string"==typeof $&&(sj(e,$,r),!0)},deleteProperty:function(e,$){return"string"==typeof $&&(Bj(e).remove($),!0)},ownKeys:function(e){return Bj(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return x("Dynamic observable objects cannot be frozen"),!1}};function QM(e){var $=new Proxy(e,RM);return e[l].proxy=$,$}function uc(e){return void 0!==e.interceptors&&e.interceptors.length>0}function Dj(e,$){var r=e.interceptors||(e.interceptors=[]);return r.push($),qs(function(){var e=r.indexOf($);-1!==e&&r.splice(e,1)})}function tc(e,$){var r=Fe();try{var t=e.interceptors;if(t)for(var i=0,a=t.length;i<a&&(Dd(!($=t[i]($))||$.type,"Intercept handlers should return nothing or a change object"),$);i++);return $}finally{Ac(r)}}function $b(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function Fj(e,$){var r=e.changeListeners||(e.changeListeners=[]);return r.push($),qs(function(){var e=r.indexOf($);-1!==e&&r.splice(e,1)})}function Zb(e,$){var r=Fe(),t=e.changeListeners;if(t){for(var i=0,a=(t=t.slice()).length;i<a;i++)t[i]($);Ac(r)}}var PM=1e4,OM={get:function(e,$){return $===l?e[l]:"length"===$?e[l].getArrayLength():"number"==typeof $?dd.get.call(e,$):"string"!=typeof $||isNaN($)?dd.hasOwnProperty($)?dd[$]:e[$]:dd.get.call(e,parseInt($))},set:function(e,$,r){return"length"===$?(e[l].setArrayLength(r),!0):"number"==typeof $?(dd.set.call(e,$,r),!0):!isNaN($)&&(dd.set.call(e,parseInt($),r),!0)},preventExtensions:function(e){return x("Observable arrays cannot be frozen"),!1}};function NM(e,$,r,t){void 0===r&&(r="ObservableArray@"+Da()),void 0===t&&(t=!1);var i=new Du(r,$,t);NP(i.values,l,i);var a=new Proxy(i.values,OM);if(i.proxy=a,e&&e.length){var n=pn(!0);i.spliceWithArray(0,0,e),on(n)}return a}var Du=function(){function e(e,$,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new Te(e||"ObservableArray@"+Da()),this.enhancer=function(r,t){return $(r,t,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&this.values.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return Dj(this,e)},e.prototype.observe=function(e,$){return void 0===$&&($=!1),$&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Fj(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var $=this.values.length;if(e!==$)if(e>$){for(var r=new Array(e-$),t=0;t<e-$;t++)r[t]=void 0;this.spliceWithArray($,0,r)}else this.spliceWithArray(e,$-e)},e.prototype.updateArrayLength=function(e,$){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=$},e.prototype.spliceWithArray=function(e,$,r){var t=this;Si(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),$=1===arguments.length?i-e:null==$?0:Math.max(0,Math.min($,i-e)),void 0===r&&(r=di),uc(this)){var a=tc(this,{object:this.proxy,type:"splice",index:e,removedCount:$,added:r});if(!a)return di;$=a.removedCount,r=a.added}r=0===r.length?r:r.map(function(e){return t.enhancer(e,void 0)});var n=this.spliceItemsIntoValues(e,$,r);return 0===$&&0===r.length||this.notifyArraySplice(e,r,n),this.dehanceValues(n)},e.prototype.spliceItemsIntoValues=function(e,$,r){var t;if(r.length<PM)return(t=this.values).splice.apply(t,UP([e,$],r));var i=this.values.slice(e,e+$);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+$)),i},e.prototype.notifyArrayChildUpdate=function(e,$,r){var t=!this.owned&&qa(),i=$b(this),a=i||t?{object:this.proxy,type:"update",index:e,newValue:$,oldValue:r}:null;this.atom.reportChanged(),i&&Zb(this,a)},e.prototype.notifyArraySplice=function(e,$,r){var t=!this.owned&&qa(),i=$b(this),a=i||t?{object:this.proxy,type:"splice",index:e,removed:r,added:$,removedCount:r.length,addedCount:$.length}:null;this.atom.reportChanged(),i&&Zb(this,a)},e}(),dd={intercept:function(e){return this[l].intercept(e)},observe:function(e,$){return void 0===$&&($=!1),this[l].observe(e,$)},clear:function(){return this.splice(0)},replace:function(e){var $=this[l];return $.spliceWithArray(0,$.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,$){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];var i=this[l];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(e);case 2:return i.spliceWithArray(e,$);}return i.spliceWithArray(e,$,r)},spliceWithArray:function(e,$,r){return this[l].spliceWithArray(e,$,r)},push:function(){for(var e=[],$=0;$<arguments.length;$++)e[$]=arguments[$];var r=this[l];return r.spliceWithArray(r.values.length,0,e),r.values.length},pop:function(){return this.splice(Math.max(this[l].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],$=0;$<arguments.length;$++)e[$]=arguments[$];var r=this[l];return r.spliceWithArray(0,0,e),r.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var $=this.slice();return $.sort.apply($,arguments)},remove:function(e){var $=this[l],r=$.dehanceValues($.values).indexOf(e);return r>-1&&(this.splice(r,1),!0)},get:function(e){var $=this[l];if($){if(e<$.values.length)return $.atom.reportObserved(),$.dehanceValue($.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+$.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,$){var r=this[l],t=r.values;if(e<t.length){Si(r.atom);var i=t[e];if(uc(r)){var a=tc(r,{type:"update",object:this,index:e,newValue:$});if(!a)return;$=a.newValue}($=r.enhancer($,i))!==i&&(t[e]=$,r.notifyArrayChildUpdate(e,$,i))}else{if(e!==t.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+t.length);r.spliceWithArray(e,0,[$])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(e){dd[e]=function(){var $=this[l];$.atom.reportObserved();var r=$.dehanceValues($.values);return r[e].apply(r,arguments)}});var JM,HM=Cd("ObservableArrayAdministration",Du);function X(e){return Hn(e)&&HM(e[l])}var GM={},Kj=function(){function e(e,$,r){if(void 0===$&&($=xi),void 0===r&&(r="ObservableMap@"+Da()),this.enhancer=$,this.name=r,this[JM]=GM,this._keysAtom=qi(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,$){var r=this._has(e);if(uc(this)){var t=tc(this,{type:r?"update":"add",object:this,newValue:$,name:e});if(!t)return this;$=t.newValue}return r?this._updateValue(e,$):this._addValue(e,$),this},e.prototype.delete=function(e){var $=this;if(uc(this)&&!(i=tc(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var r=qa(),t=$b(this),i=t||r?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return qe(function(){$._keysAtom.reportChanged(),$._updateHasMapEntry(e,!1),$._data.get(e).setNewValue(void 0),$._data.delete(e)}),t&&Zb(this,i),!0}return!1},e.prototype._updateHasMapEntry=function(e,$){var r=this._hasMap.get(e);return r?r.setNewValue($):(r=new rd($,yi,this.name+"."+e+"?",!1),this._hasMap.set(e,r)),r},e.prototype._updateValue=function(e,$){var r=this._data.get(e);if(($=r.prepareNewValue($))!==Hg){var t=qa(),i=$b(this),a=i||t?{type:"update",object:this,oldValue:r.value,name:e,newValue:$}:null;0,r.setNewValue($),i&&Zb(this,a)}},e.prototype._addValue=function(e,$){var r=this;Si(this._keysAtom),qe(function(){var t=new rd($,r.enhancer,r.name+"."+e,!1);r._data.set(e,t),$=t.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()});var t=qa(),i=$b(this),a=i||t?{type:"add",object:this,name:e,newValue:$}:null;i&&Zb(this,a)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,$=0,r=Array.from(this.keys());return Xv({next:function(){return $<r.length?{value:e.get(r[$++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var e=this,$=0,r=Array.from(this.keys());return Xv({next:function(){if($<r.length){var t=r[$++];return{value:[t,e.get(t)],done:!1}}return{done:!0}}})},e.prototype[(JM=l,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,$){var r,t;try{for(var i=bi(this),a=i.next();!a.done;a=i.next()){var n=cf(a.value,2),o=n[0],u=n[1];e.call($,u,o,this)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}},e.prototype.merge=function(e){var $=this;return R(e)&&(e=e.toJS()),qe(function(){$e(e)?Object.keys(e).forEach(function(r){return $.set(r,e[r])}):Array.isArray(e)?e.forEach(function(e){var r=cf(e,2),t=r[0],i=r[1];return $.set(t,i)}):Xe(e)?e.forEach(function(e,r){return $.set(r,e)}):null!=e&&x("Cannot initialize map from "+e)}),this},e.prototype.clear=function(){var e=this;qe(function(){Bg(function(){var $,r;try{for(var t=bi(e.keys()),i=t.next();!i.done;i=t.next()){var a=i.value;e.delete(a)}}catch(n){$={error:n}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if($)throw $.error}}})})},e.prototype.replace=function(e){var $=this;return qe(function(){var r=HP(e);Array.from($.keys()).filter(function(e){return-1===r.indexOf(e)}).forEach(function(e){return $.delete(e)}),$.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,$,r={};try{for(var t=bi(this),i=t.next();!i.done;i=t.next()){var a=cf(i.value,2),n=a[0],o=a[1];r[""+n]=o}}catch(u){e={error:u}}finally{try{i&&!i.done&&($=t.return)&&$.call(t)}finally{if(e)throw e.error}}return r},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function($){return $+": "+e.get($)}).join(", ")+" }]"},e.prototype.observe=function(e,$){return Fj(this,e)},e.prototype.intercept=function(e){return Dj(this,e)},e}(),R=Cd("ObservableMap",Kj),av=function(){function e(e,$,r,t){void 0===$&&($=new Map),this.target=e,this.values=$,this.name=r,this.defaultEnhancer=t,this.keysAtom=new Te(r+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,$){var r=this.target,t=this.values.get(e);if(t instanceof He)t.set($);else{if(uc(this)){if(!(n=tc(this,{type:"update",object:this.proxy||r,name:e,newValue:$})))return;$=n.newValue}if(($=t.prepareNewValue($))!==Hg){var i=$b(this),a=qa(),n=i||a?{type:"update",object:this.proxy||r,oldValue:t.value,name:e,newValue:$}:null;0,t.setNewValue($),i&&Zb(this,n)}}},e.prototype.has=function(e){var $=this.pendingKeys||(this.pendingKeys=new Map),r=$.get(e);if(r)return r.get();var t=!!this.values.get(e);return r=new rd(t,yi,this.name+"."+e.toString()+"?",!1),$.set(e,r),r.get()},e.prototype.addObservableProp=function(e,$,r){void 0===r&&(r=this.defaultEnhancer);var t=this.target;if(JP(t,e),uc(this)){var i=tc(this,{object:this.proxy||t,name:e,type:"add",newValue:$});if(!i)return;$=i.newValue}var a=new rd($,r,this.name+"."+e,!1);this.values.set(e,a),$=a.value,Object.defineProperty(t,e,EM(e)),this.notifyPropertyAddition(e,$)},e.prototype.addComputedProp=function(e,$,r){var t=this.target;r.name=r.name||this.name+"."+$,this.values.set($,new He(r)),(e===t||LP(e,$))&&Object.defineProperty(e,$,DM($))},e.prototype.remove=function(e){if(this.values.has(e)){var $=this.target;if(uc(this))if(!(o=tc(this,{object:this.proxy||$,name:e,type:"remove"})))return;try{db();var r=$b(this),t=qa(),i=this.values.get(e),a=i&&i.get();if(i&&i.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var n=this.pendingKeys.get(e);n&&n.set(!1)}delete this.target[e];var o=r||t?{type:"remove",object:this.proxy||$,oldValue:a,name:e}:null;0,r&&Zb(this,o)}finally{gb()}}},e.prototype.illegalAccess=function(e,$){console.warn("Property '"+$+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,$){return Fj(this,e)},e.prototype.intercept=function(e){return Dj(this,e)},e.prototype.notifyPropertyAddition=function(e,$){var r=$b(this),t=qa(),i=r||t?{type:"add",object:this.proxy||this.target,name:e,newValue:$}:null;if(r&&Zb(this,i),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,$;this.keysAtom.reportObserved();var r=[];try{for(var t=bi(this.values),i=t.next();!i.done;i=t.next()){var a=cf(i.value,2),n=a[0];a[1]instanceof rd&&r.push(n)}}catch(o){e={error:o}}finally{try{i&&!i.done&&($=t.return)&&$.call(t)}finally{if(e)throw e.error}}return r},e}();function sl(e,$,r){if(void 0===$&&($=""),void 0===r&&(r=xi),Object.prototype.hasOwnProperty.call(e,l))return e[l];$e(e)||($=(e.constructor.name||"ObservableObject")+"@"+Da()),$||($="ObservableObject@"+Da());var t=new av(e,new Map(),$,r);return Ze(e,l,t),t}var cv=Object.create(null),gv=Object.create(null);function EM(e){return cv[e]||(cv[e]={configurable:!0,enumerable:!0,get:function(){return this[l].read(e)},set:function($){this[l].write(e,$)}})}function uv(e){var $=e[l];return $||(yd(e),e[l])}function DM(e){return gv[e]||(gv[e]={configurable:!0,enumerable:!1,get:function(){return uv(this).read(e)},set:function($){uv(this).write(e,$)}})}var BM=Cd("ObservableObjectAdministration",av);function Y(e){return!!Hn(e)&&(yd(e),BM(e[l]))}function Pa(e,$){if("object"==typeof e&&null!==e){if(X(e))return void 0!==$&&x(!1),e[l].atom;if(R(e)){var r=e;return void 0===$?r._keysAtom:((t=r._data.get($)||r._hasMap.get($))||x(!1),t)}var t;if(yd(e),$&&!e[l]&&e[$],Y(e))return $?((t=e[l].values.get($))||x(!1),t):x(!1);if(zn(e)||Ge(e)||cj(e))return e}else if("function"==typeof e&&cj(e[l]))return e[l];return x(!1)}function Oa(e,$){return e||x("Expecting some object"),void 0!==$?Oa(Pa(e,$)):zn(e)||Ge(e)||cj(e)?e:R(e)?e:(yd(e),e[l]?e[l]:void x(!1))}function $k(e,$){return(void 0!==$?Pa(e,$):Y(e)||R(e)?Oa(e):Pa(e)).name}var c,Nv=Object.prototype.toString;function Ov(e,$){return Wk(e,$)}function Wk(e,$,r,t){if(e===$)return 0!==e||1/e==1/$;if(null==e||null==$)return!1;if(e!=e)return $!=$;var i=typeof e;return("function"===i||"object"===i||"object"==typeof $)&&uM(e,$,r,t)}function uM(e,$,r,t){e=Sv(e),$=Sv($);var i=Nv.call(e);if(i!==Nv.call($))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+$;case"[object Number]":return+e!=+e?+$!=+$:0==+e?1/+e==1/$:+e==+$;case"[object Date]":case"[object Boolean]":return+e==+$;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call($);}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof $)return!1;var n=e.constructor,o=$.constructor;if(n!==o&&!("function"==typeof n&&n instanceof n&&"function"==typeof o&&o instanceof o)&&"constructor"in e&&"constructor"in $)return!1}t=t||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return t[u]===$;if(r.push(e),t.push($),a){if((u=e.length)!==$.length)return!1;for(;u--;)if(!Wk(e[u],$[u],r,t))return!1}else{var s,c=Object.keys(e);if(u=c.length,Object.keys($).length!==u)return!1;for(;u--;)if(!tM($,s=c[u])||!Wk(e[s],$[s],r,t))return!1}return r.pop(),t.pop(),!0}function Sv(e){return X(e)?e.slice():Xe(e)||R(e)?Array.from(e.entries()):e}function tM(e,$){return Object.prototype.hasOwnProperty.call(e,$)}function Xv(e){return e[Symbol.iterator]=pM,e}function pM(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:fj,extras:{getDebugName:$k},$mobx:l}),jm,mO,ZO,l,IP,nn,Jo,Oa,Pa,$k,MO,LO,KN,xs,Yt,YM,BN,hs,gs,os,PN,hN,Gt,jN,sj,Ct,Yl,se,Kr,YN,Q,VM,$r,xm,nj,uj,nm,bm,oN,wt,ng,Ii,V,qe,R,Kj,X,kn,Y,Se,fj,qi,y,Bg,we;yb();var K=Up(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t="function"==typeof Symbol&&Symbol.for,o=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,$=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,s=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.placeholder"):60113;function u(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case o:switch(e=e.type){case c:case i:case a:case $:return e;default:switch(e=e&&e.$$typeof){case s:case p:case l:return e;default:return r;}}case n:return r;}}}r.typeOf=u,r.AsyncMode=c,r.ContextConsumer=s,r.ContextProvider=l,r.Element=o,r.ForwardRef=p,r.Fragment=i,r.Profiler=a,r.Portal=n,r.StrictMode=$,r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===c||e===a||e===$||e===v||"object"==typeof e&&null!==e&&("function"==typeof e.then||e.$$typeof===l||e.$$typeof===s||e.$$typeof===p)},r.isAsyncMode=function(e){return u(e)===c},r.isContextConsumer=function(e){return u(e)===s},r.isContextProvider=function(e){return u(e)===l},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},r.isForwardRef=function(e){return u(e)===p},r.isFragment=function(e){return u(e)===i},r.isProfiler=function(e){return u(e)===a},r.isPortal=function(e){return u(e)===n},r.isStrictMode=function(e){return u(e)===$}});_P(K);var dw,i=K.typeOf,o=K.AsyncMode,p=K.ContextConsumer,r=K.ContextProvider,sQ=K.Element,tQ=K.ForwardRef,uQ=K.Fragment,vQ=K.Profiler,wQ=K.Portal,xQ=K.StrictMode,LQ=K.isValidElementType,zQ=K.isAsyncMode,AQ=K.isContextConsumer,BQ=K.isContextProvider,CQ=K.isElement,DQ=K.isForwardRef,EQ=K.isFragment,FQ=K.isProfiler,GQ=K.isPortal,HQ=K.isStrictMode,UK=Up(function(e){e.exports=K});function Ok(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Rw={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KK={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ww=Ok({},UK.ForwardRef,(Ok(dw={},"$$typeof",!0),Ok(dw,"render",!0),dw)),HK=Object.defineProperty,GK=Object.getOwnPropertyNames,$w=Object.getOwnPropertySymbols,EK=Object.getOwnPropertyDescriptor,DK=Object.getPrototypeOf,bx=Object.prototype;function cx(e,r,t){if("string"!=typeof r){if(bx){var o=DK(r);o&&o!==bx&&cx(e,o,t)}var n=GK(r);$w&&(n=n.concat($w(r)));for(var i=Ww[e.$$typeof]||Rw,$=Ww[r.$$typeof]||Rw,a=0;a<n.length;++a){var l=n[a];if(!(KK[l]||t&&t[l]||$&&$[l]||i&&i[l])){var s=EK(r,l);try{HK(e,l,s)}catch(c){}}}return e}return e}var dx=cx,fx=function(){function e(){Vh(this,e),this.listeners=[]}return Wh(e,[{key:"on",value:function(e){var r=this;return this.listeners.push(e),function(){var t=r.listeners.indexOf(e);-1!==t&&r.listeners.splice(t,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(r){return r(e)})}}]),e}();function gx(e){function r(r,t,o,n,i,$){for(var a=arguments.length,l=new Array(a>6?a-6:0),s=6;s<a;s++)l[s-6]=arguments[s];return Bg(function(){if(n=n||"<<anonymous>>",$=$||o,null==t[o]){if(r){var a=null===t[o]?"null":"undefined";return new Error("The "+i+" `"+$+"` is marked as required in `"+n+"`, but its value is `"+a+"`.")}return null}return e.apply(void 0,[t,o,n,i,$].concat(l))})}var t=r.bind(null,!1);return t.isRequired=r.bind(null,!0),t}function BK(e,r){return"symbol"===e||"Symbol"===r["@@toStringTag"]||"function"==typeof Symbol&&r instanceof Symbol}function mx(e){var r=hh(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":BK(r,e)?"symbol":r}function xK(e){var r=mx(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function de(e,r){return gx(function(t,o,n,i,$){return Bg(function(){if(e&&mx(t[o])===r.toLowerCase())return null;var i;switch(r){case"Array":i=X;break;case"Object":i=Y;break;case"Map":i=R;break;default:throw new Error("Unexpected mobxType: ".concat(r));}var a=t[o];if(!i(a)){var l=xK(a),s=e?" or javascript `"+r.toLowerCase()+"`":"";return new Error("Invalid prop `"+$+"` of type `"+l+"` supplied to `"+n+"`, expected `mobx.Observable"+r+"`"+s+".")}return null})})}function rx(e,r){return gx(function(t,o,n,i,$){for(var a=arguments.length,l=new Array(a>5?a-5:0),s=5;s<a;s++)l[s-5]=arguments[s];return Bg(function(){if("function"!=typeof r)return new Error("Property `"+$+"` of component `"+n+"` has invalid PropType notation.");var a=de(e,"Array")(t,o,n);if(a instanceof Error)return a;for(var s=t[o],c=0;c<s.length;c++)if((a=r.apply(void 0,[s,c,n,i,$+"["+c+"]"].concat(l)))instanceof Error)return a;return null})})}var vK=de(!1,"Array"),uK=rx.bind(null,!1),tK=de(!1,"Map"),sK=de(!1,"Object"),nK=de(!0,"Array"),lK=rx.bind(null,!0),ak=de(!0,"Object"),Gx=Object.freeze({observableArray:vK,observableArrayOf:uK,observableMap:tK,observableObject:sK,arrayOrObservableArray:nK,arrayOrObservableArrayOf:lK,objectOrObservableObject:ak});function kK(e){return!(e.prototype&&e.prototype.render)}var Lx=0;function kc(e){if("function"==typeof Symbol)return Symbol(e);var r="__$mobx-react ".concat(e," (").concat(Lx,")");return Lx++,r}var Nx=kc("patchMixins"),Ox=kc("patchedDefinition");function jK(e,r){var t=e[Nx]=e[Nx]||{},o=t[r]=t[r]||{};return o.locks=o.locks||0,o.methods=o.methods||[],o}function Tx(e,r){for(var t=this,o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];r.locks++;try{var $;return null!=e&&($=e.apply(this,n)),$}finally{r.locks--,0===r.locks&&r.methods.forEach(function(e){e.apply(t,n)})}}function Ux(e,r){return function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];Tx.call.apply(Tx,[this,e,r].concat(o))}}function Vx(e,r){for(var t=jK(e,r),o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];for(var $=0;$<n.length;$++){var a=n[$];t.methods.indexOf(a)<0&&t.methods.push(a)}var l=Object.getOwnPropertyDescriptor(e,r);if(!l||!l[Ox]){var s=e[r],c=Wx(e,r,l?l.enumerable:void 0,t,s);Object.defineProperty(e,r,c)}}function Wx(e,r,t,o,n){var i,$=Ux(n,o);return ef(i={},Ox,!0),ef(i,"get",function(){return $}),ef(i,"set",function(n){if(this===e)$=Ux(n,o);else{var i=Wx(this,r,t,o,n);Object.defineProperty(this,r,i)}}),ef(i,"configurable",!0),ef(i,"enumerable",t),i}var Yx={mobxStores:ak};Object.seal(Yx);var cK={contextTypes:{get:function(){return Yx},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function iy(e,r,t){var o="inject-"+(r.displayName||r.name||r.constructor&&r.constructor.name||"Unknown");t&&(o+="-with-"+t);var n=function(t){function o(){var e,r;Vh(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(r=Tn(this,(e=Un(o)).call.apply(e,[this].concat(n)))).storeRef=function(e){r.wrappedInstance=e},r}return Xn(o,m.Component),Wh(o,[{key:"render",value:function(){var t={};for(var o in this.props)this.props.hasOwnProperty(o)&&(t[o]=this.props[o]);var n=e(this.context.mobxStores||{},t,this.context)||{};for(var i in n)t[i]=n[i];return kK(r)||(t.ref=this.storeRef),m.createElement(r,t)}}]),o}();return n.displayName=o,dx(n,r),n.wrappedComponent=r,Object.defineProperties(n,cK),n}function bK(e){return function(r,t){return e.forEach(function(e){if(!(e in t)){if(!(e in r))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");t[e]=r[e]}}),t}}function Xc(){var e;if("function"==typeof arguments[0])return e=arguments[0],function(r){var t=iy(e,r);return t.isMobxInjector=!1,(t=Bb(t)).isMobxInjector=!0,t};for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e=bK(r),function(t){return iy(e,t,r.join("-"))}}var Kk=l||"$mobx",py=kc("isUnmounted"),ae=!1,Jk=!1,NJ=!1,Kc="undefined"!=typeof WeakMap?new WeakMap:void 0,fk=new fx,gk=kc("skipRender"),hk=kc("isForcingUpdate"),Ey="function"==typeof m.forwardRef&&m.forwardRef(function(e,r){}).$$typeof;function Tb(e,r,t){Object.hasOwnProperty.call(e,r)?e[r]=t:Object.defineProperty(e,r,{enumerable:!1,configurable:!0,writable:!0,value:t})}function Ao(e){if(Ff.findDOMNode)try{return Ff.findDOMNode(e)}catch(r){return null}return null}function Bo(e){var r=Ao(e);r&&Kc&&Kc.set(r,e),fk.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:r})}function Co(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");ae||(ae=!0)}function EJ(e){Jk=e}var Eo=new fx;function DJ(e,r){Vx(e,r,Fk[r])}function Go(e,r){if(Ho(e,r))return!0;if("object"!==hh(e)||null===e||"object"!==hh(r)||null===r)return!1;var t=Object.keys(e),o=Object.keys(r);if(t.length!==o.length)return!1;for(var n=0;n<t.length;n++)if(!hasOwnProperty.call(r,t[n])||!Ho(e[t[n]],r[t[n]]))return!1;return!0}function Ho(e,r){return e===r?0!==e||1/e==1/r:e!=e&&r!=r}function CJ(e){var r=this;if(!0===Jk)return e.call(this);function t(){var e=this;$=!1;var r=void 0,t=void 0;if(a.track(function(){ae&&(e.__$mobRenderStart=Date.now());try{t=Jo(!1,i)}catch(o){r=o}ae&&(e.__$mobRenderEnd=Date.now())}),r)throw Eo.emit(r),r;return t}var o=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",n=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;Tb(this,gk,!1),Tb(this,hk,!1);var i=e.bind(this),$=!1,a=new we("".concat(o,"#").concat(n,".render()"),function(){if(!$&&($=!0,"function"==typeof r.componentWillReact&&r.componentWillReact(),!0!==r[py])){var e=!0;try{Tb(r,hk,!0),r[gk]||m.Component.prototype.forceUpdate.call(r),e=!1}finally{Tb(r,hk,!1),e&&a.dispose()}}});return a.reactComponent=this,t[Kk]=a,this.render=t,t.call(this)}var Fk={componentWillUnmount:function(){if(!0!==Jk&&(this.render[Kk]&&this.render[Kk].dispose(),this[py]=!0,ae)){var e=Ao(this);e&&Kc&&Kc.delete(e),fk.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){ae&&Bo(this)},componentDidUpdate:function(){ae&&Bo(this)},shouldComponentUpdate:function(e,r){return Jk&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==r||!Go(this.props,e)}};function Ko(e,r){var t=kc("reactProp_".concat(r,"_valueHolder")),o=kc("reactProp_".concat(r,"_atomHolder"));function n(){return this[o]||Tb(this,o,qi("reactive "+r)),this[o]}Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){return n.call(this).reportObserved(),this[t]},set:function(e){this[hk]||Go(this[t],e)?Tb(this,t,e):(Tb(this,t,e),Tb(this,gk,!0),n.call(this).reportChanged(),Tb(this,gk,!1))}})}function Bb(e,r){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return NJ||(NJ=!0,console.warn("Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject(\"store1\", \"store2\") @observer ComponentClass` or `inject(\"store1\", \"store2\")(observer(componentClass))` instead of `@observer([\"store1\", \"store2\"]) ComponentClass`")),r?Xc.apply(null,e)(Bb(r)):function(r){return Bb(e,r)};var t=e;if(!0===t.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),t.__proto__===m.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),Ey&&t.$$typeof===Ey){var o=t.render;if("function"!=typeof o)throw new Error("render property of ForwardRef was not a function");return iQ({},t,{render:function(){var e=arguments;var $h8ka$$interop$default=ma(m);return $h8ka$$interop$default.d.createElement(lk,null,function(){return o.apply(void 0,e)})}})}if(!("function"!=typeof t||t.prototype&&t.prototype.render||t.isReactClass||m.Component.isPrototypeOf(t))){var n,i,$=Bb((i=n=function(e){function r(){return Vh(this,r),Tn(this,Un(r).apply(this,arguments))}return Xn(r,m.Component),Wh(r,[{key:"render",value:function(){return t.call(this,this.props,this.context)}}]),r}(),n.displayName=t.displayName||t.name,n.contextTypes=t.contextTypes,n.propTypes=t.propTypes,n.defaultProps=t.defaultProps,i));return dx($,t),$}if(!t)throw new Error("Please pass a valid component to 'observer'");var a=t.prototype||t;BJ(a),t.isMobXReactObserver=!0,Ko(a,"props"),Ko(a,"state");var l=a.render;return a.render=function(){return CJ.call(this,l)},t}function BJ(e){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(r){DJ(e,r)}),e.shouldComponentUpdate?e.shouldComponentUpdate!==Fk.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):e.shouldComponentUpdate=Fk.shouldComponentUpdate}var lk=Bb(function(e){var r=e.children,t=e.inject,o=e.render,n=r||o;if(void 0===n)return null;if(!t)return n();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var i=Xc(t)(n);var $h8ka$$interop$default=ma(m);return $h8ka$$interop$default.d.createElement(i,null)});lk.displayName="Observer";var Oo=function(e,r,t,o,n){var i="children"===r?"render":"children";return"function"==typeof e[r]&&"function"==typeof e[i]?new Error("Invalid prop,do not use children and render in the same time in`"+t):"function"!=typeof e[r]&&"function"!=typeof e[i]?new Error("Invalid prop `"+n+"` of type `"+hh(e[r])+"` supplied to `"+t+"`, expected `function`."):void 0};function Po(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Qo(e){this.setState(function(r){var t=this.constructor.getDerivedStateFromProps(e,r);return null!=t?t:null}.bind(this))}function Ro(e,r){try{var t=this.props,o=this.state;this.props=e,this.state=r,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,o)}finally{this.props=t,this.state=o}}function AJ(e){var r=e.prototype;if(!r||!r.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof r.getSnapshotBeforeUpdate)return e;var t=null,o=null,n=null;if("function"==typeof r.componentWillMount?t="componentWillMount":"function"==typeof r.UNSAFE_componentWillMount&&(t="UNSAFE_componentWillMount"),"function"==typeof r.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof r.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof r.componentWillUpdate?n="componentWillUpdate":"function"==typeof r.UNSAFE_componentWillUpdate&&(n="UNSAFE_componentWillUpdate"),null!==t||null!==o||null!==n){var i=e.displayName||e.name,$="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+$+" but also contains the following legacy lifecycles:"+(null!==t?"\n  "+t:"")+(null!==o?"\n  "+o:"")+(null!==n?"\n  "+n:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(r.componentWillMount=Po,r.componentWillReceiveProps=Qo),"function"==typeof r.getSnapshotBeforeUpdate){if("function"!=typeof r.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");r.componentWillUpdate=Ro;var a=r.componentDidUpdate;r.componentDidUpdate=function(e,r,t){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:t;a.call(this,e,r,o)}}return e}lk.propTypes={render:Oo,children:Oo},Po.__suppressDeprecationWarning=!0,Qo.__suppressDeprecationWarning=!0,Ro.__suppressDeprecationWarning=!0;var tJ={children:!0,key:!0,ref:!0},Qf=function(e){function r(e,t){var o;return Vh(this,r),(o=Tn(this,Un(r).call(this,e,t))).state={},Ck(e,o.state),o}return Xn(r,m.Component),Wh(r,[{key:"render",value:function(){return m.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={};return Ck(this.context.mobxStores,e),Ck(this.props,e),{mobxStores:e}}}],[{key:"getDerivedStateFromProps",value:function(e,r){if(!e)return null;if(!r)return e;if(Object.keys(e).filter(nk).length!==Object.keys(r).filter(nk).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var t in e)nk(t)&&r[t]!==e[t]&&console.warn("MobX Provider: Provided store '"+t+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return e}}]),r}();function Ck(e,r){if(e)for(var t in e)nk(t)&&(r[t]=e[t])}function nk(e){return!tJ[e]&&"suppressChangedStoreWarning"!==e}Qf.contextTypes={mobxStores:ak},Qf.childContextTypes={mobxStores:ak.isRequired},AJ(Qf);var Yd=kc("disposeOnUnmount");function sJ(){var e=this;this[Yd]&&(this[Yd].forEach(function(r){var t="string"==typeof r?e[r]:r;if(null!=t){if("function"!=typeof t)throw new Error("[mobx-react] disposeOnUnmount only works on functions such as disposers returned by reactions, autorun, etc.");t()}}),this[Yd]=[])}function Zo(e,r){if(Array.isArray(r))return r.map(function(r){return Zo(e,r)});if(!e instanceof m.Component)throw new Error("[mobx-react] disposeOnUnmount only works on class based React components.");if("string"!=typeof r&&"function"!=typeof r)throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.");var t=!!e[Yd];return(e[Yd]||(e[Yd]=[])).push(r),t||Vx(e,"componentWillUnmount",sJ),"string"!=typeof r?r:void 0}if(!m.Component)throw new Error("mobx-react requires React to be available");if(!fj)throw new Error("mobx-react requires mobx to be available");"function"==typeof Ff.unstable_batchedUpdates&&os({reactionScheduler:Ff.unstable_batchedUpdates});var rJ=function(e){return Eo.on(e)};if("object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":hh(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var qJ={spy:fj,extras:{getDebugName:$k}},oJ={renderReporter:fk,componentByNodeRegistry:Kc,componentByNodeRegistery:Kc,trackComponents:Co};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(oJ,qJ)}Zo,Xc,Qf,EJ,Co,Kc,Kc,fk,lk,Bb,rJ,Gx,Gx;function Rb(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),Object.assign(Rb.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,e)}}}});var cp="98",mJ={LEFT:0,MIDDLE:1,RIGHT:2},ep=0,zk=1,gp=2,lJ=3,kJ=0,jJ=1,hJ=0,vm=1,mp=2,Vd=0,ha=1,Td=2,wk=1,ZI=2,xk=0,yk=1,Qc=2,If=0,Pc=1,qk=2,pk=3,mk=4,Dk=5,Oc=100,Cp=101,Dp=102,jk=103,ek=104,Gp=200,Hp=201,Ip=202,Jp=203,Hk=204,Ik=205,Mp=206,Np=207,Op=208,Pp=209,Qp=210,Rp=0,Sp=1,Tp=2,dk=3,Vp=4,Wp=5,Xp=6,Yp=7,Df=0,$p=1,_p=2,ck=0,Lk=1,cq=2,dq=3,eq=4,bk=300,$j=301,Zj=302,Pk=303,Yj=304,Rk=305,Xj=306,Wj=307,Pb=1e3,Qa=1001,Mc=1002,ta=1003,Sj=1004,Rj=1005,va=1006,Xk=1007,xf=1008,yh=1009,xq=1010,yq=1011,wf=1012,Aq=1013,Zk=1014,pf=1015,Oj=1016,Eq=1017,Fq=1018,Gq=1019,uf=1020,Iq=1021,nf=1022,ob=1023,Lq=1024,Mq=1025,EI=ob,Bd=1026,kf=1027,Qq=1028,cl=33776,dl=33777,el=33778,fl=33779,gl=35840,hl=35841,il=35842,jl=35843,Zq=36196,$q=37808,_q=37809,ar=37810,br=37811,cr=37812,dr=37813,er=37814,fr=37815,gr=37816,hr=37817,ir=37818,jr=37819,kr=37820,lr=37821,mr=2200,nr=2201,or=2202,wh=2300,th=2301,Nj=2302,zd=2400,wd=2401,lh=2402,ol=0,wr=1,xr=2,jh=3e3,zr=3001,pl=3007,Br=3002,lI=3003,Dr=3004,Er=3005,Fr=3006,Gr=3200,Hr=3201,ih=0,Jr=1,ea={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*ea.DEG2RAD},radToDeg:function(e){return e*ea.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function ba(e,t){this.x=e||0,this.y=t||0}function da(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function O(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function aa(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function Z(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(ba.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(ba.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new ba,t=new ba;return function(r,n){return e.set(r,r),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*n+e.x,this.y=i*n+o*r+e.y,this}}),Object.assign(da.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,o,a,s,p,c,$,l,h,u,V,d){var f=this.elements;return f[0]=e,f[4]=t,f[8]=r,f[12]=n,f[1]=i,f[5]=o,f[9]=a,f[13]=s,f[2]=p,f[6]=c,f[10]=$,f[14]=l,f[3]=h,f[7]=u,f[11]=V,f[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new da().fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e=new aa;return function(t){var r=this.elements,n=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=0,r[8]=n[8]*a,r[9]=n[9]*a,r[10]=n[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(n),p=Math.sin(n),c=Math.cos(i),$=Math.sin(i);if("XYZ"===e.order){var l=o*c,h=o*$,u=a*c,V=a*$;t[0]=s*c,t[4]=-s*$,t[8]=p,t[1]=h+u*p,t[5]=l-V*p,t[9]=-a*s,t[2]=V-l*p,t[6]=u+h*p,t[10]=o*s}else if("YXZ"===e.order){var d=s*c,f=s*$,m=p*c,x=p*$;t[0]=d+x*a,t[4]=m*a-f,t[8]=o*p,t[1]=o*$,t[5]=o*c,t[9]=-a,t[2]=f*a-m,t[6]=x+d*a,t[10]=o*s}else if("ZXY"===e.order){d=s*c,f=s*$,m=p*c,x=p*$;t[0]=d-x*a,t[4]=-o*$,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*c,t[9]=x-d*a,t[2]=-o*p,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){l=o*c,h=o*$,u=a*c,V=a*$;t[0]=s*c,t[4]=u*p-h,t[8]=l*p+V,t[1]=s*$,t[5]=V*p+l,t[9]=h*p-u,t[2]=-p,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var v=o*s,g=o*p,y=a*s,b=a*p;t[0]=s*c,t[4]=b-v*$,t[8]=y*$+g,t[1]=$,t[5]=o*c,t[9]=-a*c,t[2]=-p*c,t[6]=g*$+y,t[10]=v-b*$}else if("XZY"===e.order){v=o*s,g=o*p,y=a*s,b=a*p;t[0]=s*c,t[4]=-$,t[8]=p*c,t[1]=v*$+b,t[5]=o*c,t[9]=g*$-y,t[2]=y*$-g,t[6]=a*c,t[10]=b*$+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new aa(0,0,0),t=new aa(1,1,1);return function(r){return this.compose(e,r,t)}}(),lookAt:function(){var e=new aa,t=new aa,r=new aa;return function(n,i,o){var a=this.elements;return r.subVectors(n,i),0===r.lengthSq()&&(r.z=1),r.normalize(),e.crossVectors(o,r),0===e.lengthSq()&&(1===Math.abs(o.z)?r.x+=1e-4:r.z+=1e-4,r.normalize(),e.crossVectors(o,r)),e.normalize(),t.crossVectors(r,e),a[0]=e.x,a[4]=t.x,a[8]=r.x,a[1]=e.y,a[5]=t.y,a[9]=r.y,a[2]=e.z,a[6]=t.z,a[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],p=r[12],c=r[1],$=r[5],l=r[9],h=r[13],u=r[2],V=r[6],d=r[10],f=r[14],m=r[3],x=r[7],v=r[11],g=r[15],y=n[0],b=n[4],_=n[8],M=n[12],w=n[1],S=n[5],T=n[9],E=n[13],L=n[2],A=n[6],C=n[10],P=n[14],B=n[3],R=n[7],G=n[11],D=n[15];return i[0]=o*y+a*w+s*L+p*B,i[4]=o*b+a*S+s*A+p*R,i[8]=o*_+a*T+s*C+p*G,i[12]=o*M+a*E+s*P+p*D,i[1]=c*y+$*w+l*L+h*B,i[5]=c*b+$*S+l*A+h*R,i[9]=c*_+$*T+l*C+h*G,i[13]=c*M+$*E+l*P+h*D,i[2]=u*y+V*w+d*L+f*B,i[6]=u*b+V*S+d*A+f*R,i[10]=u*_+V*T+d*C+f*G,i[14]=u*M+V*E+d*P+f*D,i[3]=m*y+x*w+v*L+g*B,i[7]=m*b+x*S+v*A+g*R,i[11]=m*_+x*T+v*C+g*G,i[15]=m*M+x*E+v*P+g*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new aa;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],p=e[13],c=e[2],$=e[6],l=e[10],h=e[14];return e[3]*(+i*s*$-n*p*$-i*a*l+r*p*l+n*a*h-r*s*h)+e[7]*(+t*s*h-t*p*l+i*o*l-n*o*h+n*p*c-i*s*c)+e[11]*(+t*p*$-t*a*h-i*o*$+r*o*h+i*a*c-r*p*c)+e[15]*(-n*a*c-t*s*$+t*a*l+n*o*$-r*o*l+r*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],o=n[1],a=n[2],s=n[3],p=n[4],c=n[5],$=n[6],l=n[7],h=n[8],u=n[9],V=n[10],d=n[11],f=n[12],m=n[13],x=n[14],v=n[15],g=u*x*l-m*V*l+m*$*d-c*x*d-u*$*v+c*V*v,y=f*V*l-h*x*l-f*$*d+p*x*d+h*$*v-p*V*v,b=h*m*l-f*u*l+f*c*d-p*m*d-h*c*v+p*u*v,_=f*u*$-h*m*$-f*c*V+p*m*V+h*c*x-p*u*x,M=i*g+o*y+a*b+s*_;if(0===M){var w="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(w);return console.warn(w),this.identity()}var S=1/M;return r[0]=g*S,r[1]=(m*V*s-u*x*s-m*a*d+o*x*d+u*a*v-o*V*v)*S,r[2]=(c*x*s-m*$*s+m*a*l-o*x*l-c*a*v+o*$*v)*S,r[3]=(u*$*s-c*V*s-u*a*l+o*V*l+c*a*d-o*$*d)*S,r[4]=y*S,r[5]=(h*x*s-f*V*s+f*a*d-i*x*d-h*a*v+i*V*v)*S,r[6]=(f*$*s-p*x*s-f*a*l+i*x*l+p*a*v-i*$*v)*S,r[7]=(p*V*s-h*$*s+h*a*l-i*V*l-p*a*d+i*$*d)*S,r[8]=b*S,r[9]=(f*u*s-h*m*s-f*o*d+i*m*d+h*o*v-i*u*v)*S,r[10]=(p*m*s-f*c*s+f*o*l-i*m*l-p*o*v+i*c*v)*S,r[11]=(h*c*s-p*u*s-h*o*l+i*u*l+p*o*d-i*c*d)*S,r[12]=_*S,r[13]=(h*m*a-f*u*a+f*o*V-i*m*V-h*o*x+i*u*x)*S,r[14]=(f*c*a-p*m*a-f*o*$+i*m*$+p*o*x-i*c*x)*S,r[15]=(p*u*a-h*c*a+h*o*$-i*u*$-p*o*V+i*c*V)*S,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,p=i*o,c=i*a;return this.set(p*o+r,p*a-n*s,p*s+n*a,0,p*a+n*s,c*a+r,c*s-n*o,0,p*s-n*a,c*s+n*o,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){var n=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,p=i+i,c=o+o,$=a+a,l=i*p,h=i*c,u=i*$,V=o*c,d=o*$,f=a*$,m=s*p,x=s*c,v=s*$,g=r.x,y=r.y,b=r.z;return n[0]=(1-(V+f))*g,n[1]=(h+v)*g,n[2]=(u-x)*g,n[3]=0,n[4]=(h-v)*y,n[5]=(1-(l+f))*y,n[6]=(d+m)*y,n[7]=0,n[8]=(u+x)*b,n[9]=(d-m)*b,n[10]=(1-(l+V))*b,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:function(){var e=new aa,t=new da;return function(r,n,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),p=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),r.x=o[12],r.y=o[13],r.z=o[14],t.copy(this);var c=1/a,$=1/s,l=1/p;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=$,t.elements[5]*=$,t.elements[6]*=$,t.elements[8]*=l,t.elements[9]*=l,t.elements[10]*=l,n.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=p,this}}(),makePerspective:function(e,t,r,n,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),p=2*i/(r-n),c=(t+e)/(t-e),$=(r+n)/(r-n),l=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=p,a[9]=$,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,r,n,i,o){var a=this.elements,s=1/(t-e),p=1/(r-n),c=1/(o-i),$=(t+e)*s,l=(r+n)*p,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-$,a[1]=0,a[5]=2*p,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}),Object.assign(O,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,o,a){var s=r[n+0],p=r[n+1],c=r[n+2],$=r[n+3],l=i[o+0],h=i[o+1],u=i[o+2],V=i[o+3];if($!==V||s!==l||p!==h||c!==u){var d=1-a,f=s*l+p*h+c*u+$*V,m=f>=0?1:-1,x=1-f*f;if(x>Number.EPSILON){var v=Math.sqrt(x),g=Math.atan2(v,f*m);d=Math.sin(d*g)/v,a=Math.sin(a*g)/v}var y=a*m;if(s=s*d+l*y,p=p*d+h*y,c=c*d+u*y,$=$*d+V*y,d===1-a){var b=1/Math.sqrt(s*s+p*p+c*c+$*$);s*=b,p*=b,c*=b,$*=b}}e[t]=s,e[t+1]=p,e[t+2]=c,e[t+3]=$}}),Object.defineProperties(O.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(O.prototype,{isQuaternion:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,p=a(r/2),c=a(n/2),$=a(i/2),l=s(r/2),h=s(n/2),u=s(i/2);return"XYZ"===o?(this._x=l*c*$+p*h*u,this._y=p*h*$-l*c*u,this._z=p*c*u+l*h*$,this._w=p*c*$-l*h*u):"YXZ"===o?(this._x=l*c*$+p*h*u,this._y=p*h*$-l*c*u,this._z=p*c*u-l*h*$,this._w=p*c*$+l*h*u):"ZXY"===o?(this._x=l*c*$-p*h*u,this._y=p*h*$+l*c*u,this._z=p*c*u+l*h*$,this._w=p*c*$-l*h*u):"ZYX"===o?(this._x=l*c*$-p*h*u,this._y=p*h*$+l*c*u,this._z=p*c*u-l*h*$,this._w=p*c*$+l*h*u):"YZX"===o?(this._x=l*c*$+p*h*u,this._y=p*h*$+l*c*u,this._z=p*c*u-l*h*$,this._w=p*c*$-l*h*u):"XZY"===o&&(this._x=l*c*$-p*h*u,this._y=p*h*$-l*c*u,this._z=p*c*u+l*h*$,this._w=p*c*$+l*h*u),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],p=r[9],c=r[2],$=r[6],l=r[10],h=n+s+l;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=($-p)*t,this._y=(o-c)*t,this._z=(a-i)*t):n>s&&n>l?(t=2*Math.sqrt(1+n-s-l),this._w=($-p)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>l?(t=2*Math.sqrt(1+s-n-l),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(p+$)/t):(t=2*Math.sqrt(1+l-n-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(p+$)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new aa;return function(r,n){return void 0===t&&(t=new aa),(e=r.dot(n)+1)<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(ea.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,p=t._z,c=t._w;return this._x=r*c+o*a+n*p-i*s,this._y=n*c+o*s+i*a-r*p,this._z=i*c+o*p+r*s-n*a,this._w=o*c-r*a-n*s-i*p,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*n+t*this._y,this._z=p*i+t*this._z,this.normalize()}var c=Math.sqrt(s),$=Math.atan2(c,a),l=Math.sin((1-t)*$)/c,h=Math.sin(t*$)/c;return this._w=o*l+this._w*h,this._x=r*l+this._x*h,this._y=n*l+this._y*h,this._z=i*l+this._z*h,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(aa.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new O;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new O;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,p=s*t+o*n-a*r,c=s*r+a*t-i*n,$=s*n+i*r-o*t,l=-i*t-o*r-a*n;return this.x=p*s+l*-i+c*-a-$*-o,this.y=c*s+l*-o+$*-i-p*-a,this.z=$*s+l*-a+p*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new da;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new aa,t=new aa;return function(r,n){return e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new aa;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new aa;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(ea.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Z.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,o,a,s,p){var c=this.elements;return c[0]=e,c[1]=n,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=r,c[7]=o,c[8]=p,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new aa;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[3],s=r[6],p=r[1],c=r[4],$=r[7],l=r[2],h=r[5],u=r[8],V=n[0],d=n[3],f=n[6],m=n[1],x=n[4],v=n[7],g=n[2],y=n[5],b=n[8];return i[0]=o*V+a*m+s*g,i[3]=o*d+a*x+s*y,i[6]=o*f+a*v+s*b,i[1]=p*V+c*m+$*g,i[4]=p*d+c*x+$*y,i[7]=p*f+c*v+$*b,i[2]=l*V+h*m+u*g,i[5]=l*d+h*x+u*y,i[8]=l*f+h*v+u*b,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],p=e[7],c=e[8];return t*o*c-t*a*p-r*i*c+r*a*s+n*i*p-n*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],o=r[1],a=r[2],s=r[3],p=r[4],c=r[5],$=r[6],l=r[7],h=r[8],u=h*p-c*l,V=c*$-h*s,d=l*s-p*$,f=i*u+o*V+a*d;if(0===f){var m="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(m);return console.warn(m),this.identity()}var x=1/f;return n[0]=u*x,n[1]=(a*l-h*o)*x,n[2]=(c*o-a*p)*x,n[3]=V*x,n[4]=(h*i-a*$)*x,n[5]=(a*s-c*i)*x,n[6]=d*x,n[7]=(o*$-l*i)*x,n[8]=(p*i-o*s)*x,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,n,i,o,a){var s=Math.cos(i),p=Math.sin(i);this.set(r*s,r*p,-r*(s*o+p*a)+o+e,-n*p,n*s,-n*(-p*o+s*a)+a+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],o=n[3],a=n[6],s=n[1],p=n[4],c=n[7];return n[0]=t*i+r*s,n[3]=t*o+r*p,n[6]=t*a+r*c,n[1]=-r*i+t*s,n[4]=-r*o+t*p,n[7]=-r*a+t*c,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var oc={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},dI=0;function E(e,t,r,n,i,o,a,s,p,c){Object.defineProperty(this,"id",{value:dI++}),this.uuid=ea.generateUUID(),this.name="",this.image=void 0!==e?e:E.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:E.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:Qa,this.wrapT=void 0!==n?n:Qa,this.magFilter=void 0!==i?i:va,this.minFilter=void 0!==o?o:xf,this.anisotropy=void 0!==p?p:1,this.format=void 0!==a?a:ob,this.type=void 0!==s?s:yh,this.offset=new ba(0,0),this.repeat=new ba(1,1),this.center=new ba(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Z,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:jh,this.version=0,this.onUpdate=null}function fa(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function kd(e,t,r){this.width=e,this.height=t,this.scissor=new fa(0,0,e,t),this.scissorTest=!1,this.viewport=new fa(0,0,e,t),void 0===(r=r||{}).minFilter&&(r.minFilter=va),this.texture=new E(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.generateMipmaps=void 0===r.generateMipmaps||r.generateMipmaps,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function Ie(e,t,r){kd.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function xd(e,t,r,n,i,o,a,s,p,c,$,l){E.call(this,null,o,a,s,p,c,n,i,$,l),this.image={data:e,width:t,height:r},this.magFilter=void 0!==p?p:ta,this.minFilter=void 0!==c?c:ta,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Kb(e,t){this.min=void 0!==e?e:new aa(1/0,1/0,1/0),this.max=void 0!==t?t:new aa(-1/0,-1/0,-1/0)}function jb(e,t){this.center=void 0!==e?e:new aa,this.radius=void 0!==t?t:0}function Ib(e,t){this.normal=void 0!==e?e:new aa(1,0,0),this.constant=void 0!==t?t:0}function Lj(e,t,r,n,i,o){this.planes=[void 0!==e?e:new Ib,void 0!==t?t:new Ib,void 0!==r?r:new Ib,void 0!==n?n:new Ib,void 0!==i?i:new Ib,void 0!==o?o:new Ib]}E.DEFAULT_IMAGE=void 0,E.DEFAULT_MAPPING=bk,E.prototype=Object.assign(Object.create(Rb.prototype),{constructor:E,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=ea.generateUUID()),!t&&void 0===e.images[n.uuid]){var i;if(Array.isArray(n)){i=[];for(var o=0,a=n.length;o<a;o++)i.push(oc.getDataURL(n[o]))}else i=oc.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==bk)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pb:e.x=e.x-Math.floor(e.x);break;case Qa:e.x=e.x<0?0:1;break;case Mc:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);}if(e.y<0||e.y>1)switch(this.wrapT){case Pb:e.y=e.y-Math.floor(e.y);break;case Qa:e.y=e.y<0?0:1;break;case Mc:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(E.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(fa.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,o=e.elements,a=o[0],s=o[4],p=o[8],c=o[1],$=o[5],l=o[9],h=o[2],u=o[6],V=o[10];if(Math.abs(s-c)<.01&&Math.abs(p-h)<.01&&Math.abs(l-u)<.01){if(Math.abs(s+c)<.1&&Math.abs(p+h)<.1&&Math.abs(l+u)<.1&&Math.abs(a+$+V-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var d=(a+1)/2,f=($+1)/2,m=(V+1)/2,x=(s+c)/4,v=(p+h)/4,g=(l+u)/4;return d>f&&d>m?d<.01?(r=0,n=.707106781,i=.707106781):(n=x/(r=Math.sqrt(d)),i=v/r):f>m?f<.01?(r=.707106781,n=0,i=.707106781):(r=x/(n=Math.sqrt(f)),i=g/n):m<.01?(r=.707106781,n=.707106781,i=0):(r=v/(i=Math.sqrt(m)),n=g/i),this.set(r,n,i,t),this}var y=Math.sqrt((u-l)*(u-l)+(p-h)*(p-h)+(c-s)*(c-s));return Math.abs(y)<.001&&(y=1),this.x=(u-l)/y,this.y=(p-h)/y,this.z=(c-s)/y,this.w=Math.acos((a+$+V-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new fa,t=new fa),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),kd.prototype=Object.assign(Object.create(Rb.prototype),{constructor:kd,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ie.prototype=Object.create(kd.prototype),Ie.prototype.constructor=Ie,Ie.prototype.isWebGLRenderTargetCube=!0,xd.prototype=Object.create(E.prototype),xd.prototype.constructor=xd,xd.prototype.isDataTexture=!0,Object.assign(Kb.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,p=e.length;s<p;s+=3){var c=e[s],$=e[s+1],l=e[s+2];c<t&&(t=c),$<r&&(r=$),l<n&&(n=l),c>i&&(i=c),$>o&&(o=$),l>a&&(a=l)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,p=e.count;s<p;s++){var c=e.getX(s),$=e.getY(s),l=e.getZ(s);c<t&&(t=c),$<r&&(r=$),l<n&&(n=l),c>i&&(i=c),$>o&&(o=$),l>a&&(a=l)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new aa;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new aa),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new aa),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,r,n=new aa;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,r=a.length;t<r;t++)n.copy(a[t]),n.applyMatrix4(i.matrixWorld),e.expandByPoint(n)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,r=s.count;t<r;t++)n.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(n)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new aa),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new aa;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(){var e=new aa,t=new aa,r=new aa,n=new aa,i=new aa,o=new aa,a=new aa,s=new aa,p=new aa,c=new aa;function $(n){var i,o;for(i=0,o=n.length-3;i<=o;i+=3){a.fromArray(n,i);var s=p.x*Math.abs(a.x)+p.y*Math.abs(a.y)+p.z*Math.abs(a.z),c=e.dot(a),$=t.dot(a),l=r.dot(a);if(Math.max(-Math.max(c,$,l),Math.min(c,$,l))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),p.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),r.subVectors(a.c,s),n.subVectors(t,e),i.subVectors(r,t),o.subVectors(e,r);var l=[0,-n.z,n.y,0,-i.z,i.y,0,-o.z,o.y,n.z,0,-n.x,i.z,0,-i.x,o.z,0,-o.x,-n.y,n.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!$(l)&&!!$(l=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(n,i),$(l=[c.x,c.y,c.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new aa),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new aa;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new aa;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new jb),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new aa,new aa,new aa,new aa,new aa,new aa,new aa,new aa];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(jb.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Kb;return function(t,r){var n=this.center;void 0!==r?n.copy(r):e.setFromPoints(t).getCenter(n);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new aa),t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Kb),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Ib.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new aa,t=new aa;return function(r,n,i){var o=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new aa),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new aa;return function(t,r){void 0===r&&(console.warn("THREE.Plane: .intersectLine() target is now required"),r=new aa);var n=t.delta(e),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?r.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:r.copy(n).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new aa),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new aa,t=new Z;return function(r,n){var i=n||t.getNormalMatrix(r),o=this.coplanarPoint(e).applyMatrix4(r),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Lj.prototype,{set:function(e,t,r,n,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],p=r[5],c=r[6],$=r[7],l=r[8],h=r[9],u=r[10],V=r[11],d=r[12],f=r[13],m=r[14],x=r[15];return t[0].setComponents(a-n,$-s,V-l,x-d).normalize(),t[1].setComponents(a+n,$+s,V+l,x+d).normalize(),t[2].setComponents(a+i,$+p,V+h,x+f).normalize(),t[3].setComponents(a-i,$-p,V-h,x-f).normalize(),t[4].setComponents(a-o,$-c,V-u,x-m).normalize(),t[5].setComponents(a+o,$+c,V+u,x+m).normalize(),this},intersectsObject:function(){var e=new jb;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new jb;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(){var e=new aa;return function(t){for(var r=this.planes,n=0;n<6;n++){var i=r[n];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}});var TH="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",QH="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",qH="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",oH="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",lH="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",kH="\nvec3 transformed = vec3( position );\n",hH="\nvec3 objectNormal = vec3( normal );\n",eH="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",cH="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",bH="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",aH="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",_G="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",YG="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",XG="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",JG="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",IG="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",HG="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",CG="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",AG="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",zG="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",yG="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",xG="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",vG="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",tG="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",qG="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",pG="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",fG="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",bG="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",aG="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",_F="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",YF="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",XF="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",WF="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",VF="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",RF="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",NF="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",JF="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",GF="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",FF="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",CF="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",zF="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",wF="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",tF="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",sF="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",oF="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",jF="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",iF="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",hF="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",gF="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",fF="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",eF="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",dF="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",cF="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",bF="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",aF="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",_E="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",$E="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",ZE="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",YE="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",WE="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",VE="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",UE="#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",TE="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",QE="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",KE="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",JE="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",HE="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",GE="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",FE="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",vE="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",uE="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",tE="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",sE="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",qE="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",pE="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",oE="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",lE="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",jE="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",iE="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",hE="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",gE="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",fE="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",eE="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",dE="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",cE="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",bE="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",aE="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",_D="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",YD="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",XD="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n}\n",WD="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position, 1.0 );\n\tgl_Position.z = 1.0;\n}\n",VD="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",LD="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",JD="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",ID="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",AD="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",zD="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",xD="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",wD="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",uD="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",rD="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",pD="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",oD="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",mD="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",lD="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",jD="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\tvec4 matcapColor = texture2D( matcap, uv );\n\tmatcapColor = matcapTexelToLinear( matcapColor );\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",eD="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",_C="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",WC="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",UC="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",HC="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",FC="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",CC="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",AC="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",yC="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",wC="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",uC="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",tC="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",qC="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",B={alphamap_fragment:TH,alphamap_pars_fragment:QH,alphatest_fragment:qH,aomap_fragment:oH,aomap_pars_fragment:lH,begin_vertex:kH,beginnormal_vertex:hH,bsdfs:eH,bumpmap_pars_fragment:cH,clipping_planes_fragment:bH,clipping_planes_pars_fragment:aH,clipping_planes_pars_vertex:_G,clipping_planes_vertex:YG,color_fragment:XG,color_pars_fragment:JG,color_pars_vertex:IG,color_vertex:HG,common:CG,cube_uv_reflection_fragment:AG,defaultnormal_vertex:zG,displacementmap_pars_vertex:yG,displacementmap_vertex:xG,emissivemap_fragment:vG,emissivemap_pars_fragment:tG,encodings_fragment:qG,encodings_pars_fragment:pG,envmap_fragment:fG,envmap_pars_fragment:bG,envmap_pars_vertex:aG,envmap_physical_pars_fragment:CF,envmap_vertex:_F,fog_vertex:YF,fog_pars_vertex:XF,fog_fragment:WF,fog_pars_fragment:VF,gradientmap_pars_fragment:RF,lightmap_fragment:NF,lightmap_pars_fragment:JF,lights_lambert_vertex:GF,lights_pars_begin:FF,lights_phong_fragment:zF,lights_phong_pars_fragment:wF,lights_physical_fragment:tF,lights_physical_pars_fragment:sF,lights_fragment_begin:oF,lights_fragment_maps:jF,lights_fragment_end:iF,logdepthbuf_fragment:hF,logdepthbuf_pars_fragment:gF,logdepthbuf_pars_vertex:fF,logdepthbuf_vertex:eF,map_fragment:dF,map_pars_fragment:cF,map_particle_fragment:bF,map_particle_pars_fragment:aF,metalnessmap_fragment:_E,metalnessmap_pars_fragment:$E,morphnormal_vertex:ZE,morphtarget_pars_vertex:YE,morphtarget_vertex:WE,normal_fragment_begin:VE,normal_fragment_maps:UE,normalmap_pars_fragment:TE,packing:QE,premultiplied_alpha_fragment:KE,project_vertex:JE,dithering_fragment:HE,dithering_pars_fragment:GE,roughnessmap_fragment:FE,roughnessmap_pars_fragment:vE,shadowmap_pars_fragment:uE,shadowmap_pars_vertex:tE,shadowmap_vertex:sE,shadowmask_pars_fragment:qE,skinbase_vertex:pE,skinning_pars_vertex:oE,skinning_vertex:lE,skinnormal_vertex:jE,specularmap_fragment:iE,specularmap_pars_fragment:hE,tonemapping_fragment:gE,tonemapping_pars_fragment:fE,uv_pars_fragment:eE,uv_pars_vertex:dE,uv_vertex:cE,uv2_pars_fragment:bE,uv2_pars_vertex:aE,uv2_vertex:_D,worldpos_vertex:YD,background_frag:XD,background_vert:WD,cube_frag:VD,cube_vert:LD,depth_frag:JD,depth_vert:ID,distanceRGBA_frag:AD,distanceRGBA_vert:zD,equirect_frag:xD,equirect_vert:wD,linedashed_frag:uD,linedashed_vert:rD,meshbasic_frag:pD,meshbasic_vert:oD,meshlambert_frag:mD,meshlambert_vert:lD,meshmatcap_frag:jD,meshmatcap_vert:eD,meshphong_frag:_C,meshphong_vert:WC,meshphysical_frag:UC,meshphysical_vert:HC,normal_frag:FC,normal_vert:CC,points_frag:AC,points_vert:yC,shadow_frag:wC,shadow_vert:uC,sprite_frag:tC,sprite_vert:qC},ga={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e)for(var n in t[r]={},e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}return t}},oC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function z(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}Object.assign(z.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=ea.euclideanModulo(t,1),r=ea.clamp(r,0,1),n=ea.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,o=2*n-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,p=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(a,s,p)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,$=(c=r[1]).length;if(3===$)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===$)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=oC[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,r,n=this.r,i=this.g,o=this.b,a=Math.max(n,i,o),s=Math.min(n,i,o),p=(s+a)/2;if(s===a)t=0,r=0;else{var c=a-s;switch(r=p<=.5?c/(a+s):c/(2-a-s),a){case n:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-n)/c+2;break;case o:t=(n-i)/c+4;}t/=6}return e.h=t,e.s=r,e.l=p,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,r,n){return this.getHSL(e),e.h+=t,e.s+=r,e.l+=n,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(r,n){this.getHSL(e),r.getHSL(t);var i=ea.lerp(e.h,t.h,n),o=ea.lerp(e.s,t.s,n),a=ea.lerp(e.l,t.l,n);return this.setHSL(i,o,a),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var ca={common:{diffuse:{value:new z(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Z},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ba(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new z(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new z(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Z}},sprite:{diffuse:{value:new z(15658734)},opacity:{value:1},center:{value:new ba(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Z}}},Gb={basic:{uniforms:ga.merge([ca.common,ca.specularmap,ca.envmap,ca.aomap,ca.lightmap,ca.fog]),vertexShader:B.meshbasic_vert,fragmentShader:B.meshbasic_frag},lambert:{uniforms:ga.merge([ca.common,ca.specularmap,ca.envmap,ca.aomap,ca.lightmap,ca.emissivemap,ca.fog,ca.lights,{emissive:{value:new z(0)}}]),vertexShader:B.meshlambert_vert,fragmentShader:B.meshlambert_frag},phong:{uniforms:ga.merge([ca.common,ca.specularmap,ca.envmap,ca.aomap,ca.lightmap,ca.emissivemap,ca.bumpmap,ca.normalmap,ca.displacementmap,ca.gradientmap,ca.fog,ca.lights,{emissive:{value:new z(0)},specular:{value:new z(1118481)},shininess:{value:30}}]),vertexShader:B.meshphong_vert,fragmentShader:B.meshphong_frag},standard:{uniforms:ga.merge([ca.common,ca.envmap,ca.aomap,ca.lightmap,ca.emissivemap,ca.bumpmap,ca.normalmap,ca.displacementmap,ca.roughnessmap,ca.metalnessmap,ca.fog,ca.lights,{emissive:{value:new z(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:B.meshphysical_vert,fragmentShader:B.meshphysical_frag},matcap:{uniforms:ga.merge([ca.common,ca.bumpmap,ca.normalmap,ca.displacementmap,ca.fog,{matcap:{value:null}}]),vertexShader:B.meshmatcap_vert,fragmentShader:B.meshmatcap_frag},points:{uniforms:ga.merge([ca.points,ca.fog]),vertexShader:B.points_vert,fragmentShader:B.points_frag},dashed:{uniforms:ga.merge([ca.common,ca.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:B.linedashed_vert,fragmentShader:B.linedashed_frag},depth:{uniforms:ga.merge([ca.common,ca.displacementmap]),vertexShader:B.depth_vert,fragmentShader:B.depth_frag},normal:{uniforms:ga.merge([ca.common,ca.bumpmap,ca.normalmap,ca.displacementmap,{opacity:{value:1}}]),vertexShader:B.normal_vert,fragmentShader:B.normal_frag},sprite:{uniforms:ga.merge([ca.sprite,ca.fog]),vertexShader:B.sprite_vert,fragmentShader:B.sprite_frag},background:{uniforms:{uvTransform:{value:new Z},t2D:{value:null}},vertexShader:B.background_vert,fragmentShader:B.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:B.cube_vert,fragmentShader:B.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:B.equirect_vert,fragmentShader:B.equirect_frag},distanceRGBA:{uniforms:ga.merge([ca.common,ca.displacementmap,{referencePosition:{value:new aa},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:B.distanceRGBA_vert,fragmentShader:B.distanceRGBA_frag},shadow:{uniforms:ga.merge([ca.lights,ca.fog,{color:{value:new z(0)},opacity:{value:1}}]),vertexShader:B.shadow_vert,fragmentShader:B.shadow_frag}};function tm(){var e=null,t=!1,r=null;function n(i,o){!1!==t&&(r(i,o),e.requestAnimationFrame(n))}return{start:function(){!0!==t&&null!==r&&(e.requestAnimationFrame(n),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function mC(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var n=t.get(r);n&&(e.deleteBuffer(n.buffer),t.delete(r))},update:function(r,n){r.isInterleavedBufferAttribute&&(r=r.data);var i=t.get(r);void 0===i?t.set(r,function(t,r){var n=t.array,i=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,n,i),t.onUploadCallback();var a=5126;return n instanceof Float32Array?a=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=5123:n instanceof Int16Array?a=5122:n instanceof Uint32Array?a=5125:n instanceof Int32Array?a=5124:n instanceof Int8Array?a=5120:n instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(r,n)):i.version<r.version&&(function(t,r,n){var i=r.array,o=r.updateRange;e.bindBuffer(n,t),!1===r.dynamic?e.bufferData(n,i,35044):-1===o.count?e.bufferSubData(n,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,r,n),i.version=r.version)}}}function Xb(e,t,r,n,i,o){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new aa,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new z,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function ad(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||ad.DefaultOrder}function tk(){this.mask=1}Gb.physical={uniforms:ga.merge([Gb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:B.meshphysical_vert,fragmentShader:B.meshphysical_frag},Object.assign(Xb.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),ad.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ad.DefaultOrder="XYZ",Object.defineProperties(ad.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ad.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=ea.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],p=i[1],c=i[5],$=i[9],l=i[2],h=i[6],u=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-$,u),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n($,-1,1)),Math.abs($)<.99999?(this._y=Math.atan2(s,u),this._z=Math.atan2(p,c)):(this._y=Math.atan2(-l,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-l,u),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(p,o))):"ZYX"===t?(this._y=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(h,u),this._z=Math.atan2(p,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(-$,c),this._y=Math.atan2(-l,o)):(this._x=0,this._y=Math.atan2(s,u))):"XZY"===t?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-$,u),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new da;return function(t,r,n){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new O;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new aa(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(tk.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var dC=0;function b(){Object.defineProperty(this,"id",{value:dC++}),this.uuid=ea.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=b.DefaultUp.clone();var e=new aa,t=new ad,r=new O,n=new aa(1,1,1);t.onChange(function(){r.setFromEuler(t,!1)}),r.onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new da},normalMatrix:{value:new Z}}),this.matrix=new da,this.matrixWorld=new da,this.matrixAutoUpdate=b.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new tk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}b.DefaultUp=new aa(0,1,0),b.DefaultMatrixAutoUpdate=!0,b.prototype=Object.assign(Object.create(Rb.prototype),{constructor:b,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new O;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new O;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new aa(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new aa(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new aa(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new aa;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new aa(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new aa(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new aa(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new da;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new O,t=new da,r=new aa,n=new aa;return function(i,o,a){i.isVector3?r.copy(i):r.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(n,r,this.up):t.lookAt(r,n,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new aa),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new aa,t=new aa;return function(r){return void 0===r&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),r=new O),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldScale:function(){var e=new aa,t=new O;return function(r){return void 0===r&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),r=new aa),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new aa),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,i=0,o=n.length;i<o;i++)n[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function i(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,p=a.length;s<p;s++){var c=a[s];i(e.shapes,c)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var $=[];for(s=0,p=this.material.length;s<p;s++)$.push(i(e.materials,this.material[s]));n.material=$}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object)}if(t){var l=d(e.geometries),h=d(e.materials),u=d(e.textures),V=d(e.images);a=d(e.shapes);l.length>0&&(r.geometries=l),h.length>0&&(r.materials=h),u.length>0&&(r.textures=u),V.length>0&&(r.images=V),a.length>0&&(r.shapes=a)}return r.object=n,r;function d(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}});function v(){Object.defineProperty(this,"id",{value:2}),this.uuid=ea.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function w(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ag(e,t,r){w.call(this,new Int8Array(e),t,r)}function zg(e,t,r){w.call(this,new Uint8Array(e),t,r)}function xg(e,t,r){w.call(this,new Uint8ClampedArray(e),t,r)}function vg(e,t,r){w.call(this,new Int16Array(e),t,r)}function Yc(e,t,r){w.call(this,new Uint16Array(e),t,r)}function tg(e,t,r){w.call(this,new Int32Array(e),t,r)}function Wc(e,t,r){w.call(this,new Uint32Array(e),t,r)}function k(e,t,r){w.call(this,new Float32Array(e),t,r)}function og(e,t,r){w.call(this,new Float64Array(e),t,r)}function Iu(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ju(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}v.prototype=Object.assign(Object.create(Rb.prototype),{constructor:v,isGeometry:!0,applyMatrix:function(e){for(var t=new Z().getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new da;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new da;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new da;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new da;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new da;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new b;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,n=e.attributes,i=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,p=void 0!==n.uv2?n.uv2.array:void 0;void 0!==p&&(this.faceVertexUvs[1]=[]);for(var c=0,$=0;c<i.length;c+=3,$+=2)t.vertices.push(new aa().fromArray(i,c)),void 0!==a&&t.colors.push(new z().fromArray(a,c));function l(e,r,n,i){var c=void 0===a?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()],$=new Xb(e,r,n,void 0===o?[]:[new aa().fromArray(o,3*e),new aa().fromArray(o,3*r),new aa().fromArray(o,3*n)],c,i);t.faces.push($),void 0!==s&&t.faceVertexUvs[0].push([new ba().fromArray(s,2*e),new ba().fromArray(s,2*r),new ba().fromArray(s,2*n)]),void 0!==p&&t.faceVertexUvs[1].push([new ba().fromArray(p,2*e),new ba().fromArray(p,2*r),new ba().fromArray(p,2*n)])}var h=e.groups;if(h.length>0)for(c=0;c<h.length;c++)for(var u=h[c],V=u.start,d=($=V,V+u.count);$<d;$+=3)void 0!==r?l(r[$],r[$+1],r[$+2],u.materialIndex):l($,$+1,$+2,u.materialIndex);else if(void 0!==r)for(c=0;c<r.length;c+=3)l(r[c],r[c+1],r[c+2]);else for(c=0;c<i.length/3;c+=3)l(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new aa;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new da;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new aa,t=new aa,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new aa;if(e){var s,p,c,$=new aa,l=new aa;for(n=0,i=this.faces.length;n<i;n++)o=this.faces[n],s=this.vertices[o.a],p=this.vertices[o.b],c=this.vertices[o.c],$.subVectors(c,p),l.subVectors(s,p),$.cross(l),a[o.a].add($),a[o.b].add($),a[o.c].add($)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var h=(o=this.faces[n]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(r=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new v;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)p=new aa,c={a:new aa,b:new aa,c:new aa},a.push(p),s.push(c)}var p,c,$=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],p=$.faceNormals[r],c=$.vertexNormals[r],p.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Kb),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new jb),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,p=e.faces,c=this.faceVertexUvs[0],$=e.faceVertexUvs[0],l=this.colors,h=e.colors;void 0===r&&(r=0),void 0!==t&&(n=new Z().getNormalMatrix(t));for(var u=0,V=a.length;u<V;u++){var d=a[u].clone();void 0!==t&&d.applyMatrix4(t),o.push(d)}for(u=0,V=h.length;u<V;u++)l.push(h[u].clone());for(u=0,V=p.length;u<V;u++){var f,m,x,v=p[u],g=v.vertexNormals,y=v.vertexColors;(f=new Xb(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==n&&f.normal.applyMatrix3(n).normalize();for(var b=0,_=g.length;b<_;b++)m=g[b].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),f.vertexNormals.push(m);f.color.copy(v.color);for(b=0,_=y.length;b<_;b++)x=y[b],f.vertexColors.push(x.clone());f.materialIndex=v.materialIndex+r,s.push(f)}for(u=0,V=$.length;u<V;u++){var M=$[u],w=[];if(void 0!==M){for(b=0,_=M.length;b<_;b++)w.push(M[b].clone());c.push(w)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,n,i,o,a,s,p={},c=[],$=[],l=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===p[t=Math.round(e.x*l)+"_"+Math.round(e.y*l)+"_"+Math.round(e.z*l)]?(p[t]=r,c.push(this.vertices[r]),$[r]=c.length-1):$[r]=$[p[t]];var h=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=$[i.a],i.b=$[i.b],i.c=$[i.c],o=[i.a,i.b,i.c];for(var u=0;u<3;u++)if(o[u]===o[(u+1)%3]){h.push(r);break}}for(r=h.length-1;r>=0;r--){var V=h[r];for(this.faces.splice(V,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(V,1)}var d=this.vertices.length-c.length;return this.vertices=c,d},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new aa(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(n=[]),a&&a.length===t&&(i=[]);for(r=0;r<t;r++){var s=e[r]._id;n&&n.push(o[s]),i&&i.push(a[s])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];n.push(o.x,o.y,o.z)}var a=[],s=[],p={},c=[],$={},l=[],h={};for(i=0;i<this.faces.length;i++){var u=this.faces[i],V=void 0!==this.faceVertexUvs[0][i],d=u.normal.length()>0,f=u.vertexNormals.length>0,m=1!==u.color.r||1!==u.color.g||1!==u.color.b,x=u.vertexColors.length>0,v=0;if(v=_(v,0,0),v=_(v,1,!0),v=_(v,2,!1),v=_(v,3,V),v=_(v,4,d),v=_(v,5,f),v=_(v,6,m),v=_(v,7,x),a.push(v),a.push(u.a,u.b,u.c),a.push(u.materialIndex),V){var g=this.faceVertexUvs[0][i];a.push(S(g[0]),S(g[1]),S(g[2]))}if(d&&a.push(M(u.normal)),f){var y=u.vertexNormals;a.push(M(y[0]),M(y[1]),M(y[2]))}if(m&&a.push(w(u.color)),x){var b=u.vertexColors;a.push(w(b[0]),w(b[1]),w(b[2]))}}function _(e,t,r){return r?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==p[t]?p[t]:(p[t]=s.length/3,s.push(e.x,e.y,e.z),p[t])}function w(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==$[t]?$[t]:($[t]=c.length,c.push(e.getHex()),$[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]?h[t]:(h[t]=l.length/2,l.push(e.x,e.y),h[t])}return e.data={},e.data.vertices=n,e.data.normals=s,c.length>0&&(e.data.colors=c),l.length>0&&(e.data.uvs=[l]),e.data.faces=a,e},clone:function(){return new v().copy(this)},copy:function(e){var t,r,n,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var p=e.colors;for(t=0,r=p.length;t<r;t++)this.colors.push(p[t].clone());var c=e.faces;for(t=0,r=c.length;t<r;t++)this.faces.push(c[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var $=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=$.length;n<i;n++){var l=$[n],h=[];for(o=0,a=l.length;o<a;o++){var u=l[o];h.push(u.clone())}this.faceVertexUvs[t].push(h)}}var V=e.morphTargets;for(t=0,r=V.length;t<r;t++){var d={};if(d.name=V[t].name,void 0!==V[t].vertices)for(d.vertices=[],n=0,i=V[t].vertices.length;n<i;n++)d.vertices.push(V[t].vertices[n].clone());if(void 0!==V[t].normals)for(d.normals=[],n=0,i=V[t].normals.length;n<i;n++)d.normals.push(V[t].normals[n].clone());this.morphTargets.push(d)}var f=e.morphNormals;for(t=0,r=f.length;t<r;t++){var m={};if(void 0!==f[t].vertexNormals)for(m.vertexNormals=[],n=0,i=f[t].vertexNormals.length;n<i;n++){var x=f[t].vertexNormals[n],v={};v.a=x.a.clone(),v.b=x.b.clone(),v.c=x.c.clone(),m.vertexNormals.push(v)}if(void 0!==f[t].faceNormals)for(m.faceNormals=[],n=0,i=f[t].faceNormals.length;n<i;n++)m.faceNormals.push(f[t].faceNormals[n].clone());this.morphNormals.push(m)}var g=e.skinWeights;for(t=0,r=g.length;t<r;t++)this.skinWeights.push(g[t].clone());var y=e.skinIndices;for(t=0,r=y.length;t<r;t++)this.skinIndices.push(y[t].clone());var b=e.lineDistances;for(t=0,r=b.length;t<r;t++)this.lineDistances.push(b[t]);var _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(w.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(w.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new z),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new ba),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new aa),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new fa),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Ag.prototype=Object.create(w.prototype),Ag.prototype.constructor=Ag,zg.prototype=Object.create(w.prototype),zg.prototype.constructor=zg,xg.prototype=Object.create(w.prototype),xg.prototype.constructor=xg,vg.prototype=Object.create(w.prototype),vg.prototype.constructor=vg,Yc.prototype=Object.create(w.prototype),Yc.prototype.constructor=Yc,tg.prototype=Object.create(w.prototype),tg.prototype.constructor=tg,Wc.prototype=Object.create(w.prototype),Wc.prototype.constructor=Wc,k.prototype=Object.create(w.prototype),k.prototype.constructor=k,og.prototype=Object.create(w.prototype),og.prototype.constructor=og,Object.assign(Iu.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,n=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,p=s.length;if(p>0){t=[];for(var c=0;c<p;c++)t[c]={name:s[c].name,data:[]};this.morphTargets.position=t}var $,l=e.morphNormals,h=l.length;if(h>0){$=[];for(c=0;c<h;c++)$[c]={name:l[c].name,data:[]};this.morphTargets.normal=$}var u=e.skinIndices,V=e.skinWeights,d=u.length===n.length,f=V.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<r.length;c++){var m=r[c];this.vertices.push(n[m.a],n[m.b],n[m.c]);var x=m.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var v=m.normal;this.normals.push(v,v,v)}var g,y=m.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{var b=m.color;this.colors.push(b,b,b)}if(!0===o)void 0!==(g=i[0][c])?this.uvs.push(g[0],g[1],g[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new ba,new ba,new ba));if(!0===a)void 0!==(g=i[1][c])?this.uvs2.push(g[0],g[1],g[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new ba,new ba,new ba));for(var _=0;_<p;_++){var M=s[_].vertices;t[_].data.push(M[m.a],M[m.b],M[m.c])}for(_=0;_<h;_++){var w=l[_].vertexNormals[c];$[_].data.push(w.a,w.b,w.c)}d&&this.skinIndices.push(u[m.a],u[m.b],u[m.c]),f&&this.skinWeights.push(V[m.a],V[m.b],V[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});function q(){Object.defineProperty(this,"id",{value:2}),this.uuid=ea.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function $d(e,t,r,n,i,o){v.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Rc(e,t,r,n,i,o)),this.mergeVertices()}function Rc(e,t,r,n,i,o){q.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],p=[],c=[],$=[],l=0,h=0;function u(e,t,r,n,i,o,u,V,d,f,m){var x,v,g=o/d,y=u/f,b=o/2,_=u/2,M=V/2,w=d+1,S=f+1,T=0,E=0,L=new aa;for(v=0;v<S;v++){var A=v*y-_;for(x=0;x<w;x++){var C=x*g-b;L[e]=C*n,L[t]=A*i,L[r]=M,p.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[r]=V>0?1:-1,c.push(L.x,L.y,L.z),$.push(x/d),$.push(1-v/f),T+=1}}for(v=0;v<f;v++)for(x=0;x<d;x++){var P=l+x+w*v,B=l+x+w*(v+1),R=l+(x+1)+w*(v+1),G=l+(x+1)+w*v;s.push(P,B,G),s.push(B,R,G),E+=6}a.addGroup(h,E,m),h+=E,l+=T}u("z","y","x",-1,-1,r,t,e,o,i,0),u("z","y","x",1,-1,r,t,-e,o,i,1),u("x","z","y",1,1,e,r,t,n,o,2),u("x","z","y",1,-1,e,r,-t,n,o,3),u("x","y","z",1,-1,e,t,r,n,i,4),u("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.addAttribute("position",new k(p,3)),this.addAttribute("normal",new k(c,3)),this.addAttribute("uv",new k($,2))}function jg(e,t,r,n){v.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new Nc(e,t,r,n)),this.mergeVertices()}function Nc(e,t,r,n){q.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,p=Math.floor(r)||1,c=Math.floor(n)||1,$=p+1,l=c+1,h=e/p,u=t/c,V=[],d=[],f=[],m=[];for(o=0;o<l;o++){var x=o*u-s;for(i=0;i<$;i++){var v=i*h-a;d.push(v,-x,0),f.push(0,0,1),m.push(i/p),m.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<p;i++){var g=i+$*o,y=i+$*(o+1),b=i+1+$*(o+1),_=i+1+$*o;V.push(g,y,_),V.push(y,b,_)}this.setIndex(V),this.addAttribute("position",new k(d,3)),this.addAttribute("normal",new k(f,3)),this.addAttribute("uv",new k(m,2))}q.prototype=Object.assign(Object.create(Rb.prototype),{constructor:q,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Ju(e)>65535?Wc:Yc)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new w(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;void 0!==r&&(new Z().getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new da;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new da;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new da;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new da;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new da;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new b;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new aa;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new k(3*t.vertices.length,3),n=new k(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new k(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new k(t,3)),this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Iu().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new w(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new w(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new w(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new w(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new w(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],p=e.morphTargets[a],c=0,$=p.length;c<$;c++){var l=p[c],h=new k(3*l.data.length,3);h.name=l.name,s.push(h.copyVector3sArray(l.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var u=new k(4*e.skinIndices.length,4);this.addAttribute("skinIndex",u.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var V=new k(4*e.skinWeights.length,4);this.addAttribute("skinWeight",V.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Kb);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var e=new Kb,t=new aa;return function(){null===this.boundingSphere&&(this.boundingSphere=new jb);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(n);for(var i=0,o=0,a=r.count;o<a;o++)t.x=r.getX(o),t.y=r.getY(o),t.z=r.getZ(o),i=Math.max(i,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new w(new Float32Array(r.length),3));else for(var n=t.normal.array,i=0,o=n.length;i<o;i++)n[i]=0;var a,s,p,c=t.normal.array,$=new aa,l=new aa,h=new aa,u=new aa,V=new aa;if(e){var d=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*d[i+0],s=3*d[i+1],p=3*d[i+2],$.fromArray(r,a),l.fromArray(r,s),h.fromArray(r,p),u.subVectors(h,l),V.subVectors($,l),u.cross(V),c[a]+=u.x,c[a+1]+=u.y,c[a+2]+=u.z,c[s]+=u.x,c[s+1]+=u.y,c[s+2]+=u.z,c[p]+=u.x,c[p+1]+=u.y,c[p+2]+=u.z}else for(i=0,o=r.length;i<o;i+=9)$.fromArray(r,i),l.fromArray(r,i+3),h.fromArray(r,i+6),u.subVectors(h,l),V.subVectors($,l),u.cross(V),c[i]=u.x,c[i+1]=u.y,c[i+2]=u.z,c[i+3]=u.x,c[i+4]=u.y,c[i+5]=u.z,c[i+6]=u.x,c[i+7]=u.y,c[i+8]=u.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,o=e.attributes[n],a=o.array,s=0,p=o.itemSize*t;s<a.length;s++,p++)i[p]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new aa;return function(){for(var t=this.attributes.normal,r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.normalize(),t.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new q,t=this.index.array,r=this.attributes;for(var n in r){for(var i=r[n],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),p=0,c=0,$=0,l=t.length;$<l;$++){p=t[$]*a;for(var h=0;h<a;h++)s[c++]=o[p++]}e.addAttribute(n,new w(s,a))}var u=this.groups;for($=0,l=u.length;$<l;$++){var V=u[$];e.addGroup(V.start,V.count,V.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var o=this.attributes;for(var r in o){var a=o[r];i=Array.prototype.slice.call(a.array);e.data.attributes[r]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var p=this.boundingSphere;return null!==p&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e},clone:function(){return new q().copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var p=[],c=s[t];for(r=0,n=c.length;r<n;r++)p.push(c[r].clone());this.morphAttributes[t]=p}var $=e.groups;for(r=0,n=$.length;r<n;r++){var l=$[r];this.addGroup(l.start,l.count,l.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$d.prototype=Object.create(v.prototype),$d.prototype.constructor=$d,Rc.prototype=Object.create(q.prototype),Rc.prototype.constructor=Rc,jg.prototype=Object.create(v.prototype),jg.prototype.constructor=jg,Nc.prototype=Object.create(q.prototype),Nc.prototype.constructor=Nc;var ZB=0;function s(){Object.defineProperty(this,"id",{value:ZB++}),this.uuid=ea.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Pc,this.side=Vd,this.flatShading=!1,this.vertexColors=xk,this.opacity=1,this.transparent=!1,this.blendSrc=Hk,this.blendDst=Ik,this.blendEquation=Oc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=dk,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function Na(e){s.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Hd(e,t){this.origin=void 0!==e?e:new aa,this.direction=void 0!==t?t:new aa}function ia(e,t,r){this.a=void 0!==e?e:new aa,this.b=void 0!==t?t:new aa,this.c=void 0!==r?r:new aa}function $a(e){s.call(this),this.type="MeshBasicMaterial",this.color=new z(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Df,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Aa(e,t){b.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new q,this.material=void 0!==t?t:new $a({color:16777215*Math.random()}),this.drawMode=ol,this.updateMorphTargets()}function HB(e,t,r,n){var i,o,a=new z(0),s=0;function p(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),p(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){p(a,s=e)},render:function(t,n,c,$){var l=n.background;null===l?p(a,s):l&&l.isColor&&(p(l,1),$=!0),(e.autoClear||$)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),l&&(l.isCubeTexture||l.isWebGLRenderTargetCube)?(void 0===o&&((o=new Aa(new Rc(1,1,1),new Na({type:"BackgroundCubeMaterial",uniforms:ga.clone(Gb.cube.uniforms),vertexShader:Gb.cube.vertexShader,fragmentShader:Gb.cube.fragmentShader,side:ha,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},r.update(o)),o.material.uniforms.tCube.value=l.isWebGLRenderTargetCube?l.texture:l,o.material.uniforms.tFlip.value=l.isWebGLRenderTargetCube?1:-1,t.push(o,o.geometry,o.material,0,null)):l&&l.isTexture&&(void 0===i&&((i=new Aa(new Nc(2,2),new Na({type:"BackgroundMaterial",uniforms:ga.clone(Gb.background.uniforms),vertexShader:Gb.background.vertexShader,fragmentShader:Gb.background.fragmentShader,side:Vd,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),r.update(i)),i.material.uniforms.t2D.value=l,!0===l.matrixAutoUpdate&&l.updateMatrix(),i.material.uniforms.uvTransform.value.copy(l.matrix),t.push(i,i.geometry,i.material,0,null))}}}function kB(e,t,r,n){var i;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.update(n,i)},this.renderInstances=function(o,a,s){var p;if(n.isWebGL2)p=e;else if(null===(p=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),r.update(s,i,o.maxInstancedCount)}}function jB(e,t,r){var n;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==r.precision?r.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var p=!0===r.logarithmicDepthBuffer,c=e.getParameter(34930),$=e.getParameter(35660),l=e.getParameter(3379),h=e.getParameter(34076),u=e.getParameter(34921),V=e.getParameter(36347),d=e.getParameter(36348),f=e.getParameter(36349),m=$>0,x=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==n)return n;var r=t.get("EXT_texture_filter_anisotropic");return n=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:p,maxTextures:c,maxVertexTextures:$,maxTextureSize:l,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:V,maxVaryings:d,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:x,floatVertexTextures:m&&x}}function iB(){var e=this,t=null,r=0,n=!1,i=!1,o=new Ib,a=new Z,s={value:null,needsUpdate:!1};function p(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,r,n,i){var p=null!==t?t.length:0,c=null;if(0!==p){if(c=s.value,!0!==i||null===c){var $=n+4*p,l=r.matrixWorldInverse;a.getNormalMatrix(l),(null===c||c.length<$)&&(c=new Float32Array($));for(var h=0,u=n;h!==p;++h,u+=4)o.copy(t[h]).applyMatrix4(l,a),o.normal.toArray(c,u),c[u+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=p,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==r||n;return n=i,t=c(e,o,0),r=e.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,p()},this.setState=function(e,o,a,$,l,h){if(!n||null===e||0===e.length||i&&!a)i?c(null):p();else{var u=i?0:r,V=4*u,d=l.clippingState||null;s.value=d,d=c(e,$,V,h);for(var f=0;f!==V;++f)d[f]=t[f];l.clippingState=d,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=u}}}function hB(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r);}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function fB(e,t,r){var n={},i={};function o(e){var a=e.target,s=n[a.id];for(var p in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[p]);a.removeEventListener("dispose",o),delete n[a.id];var c=i[s.id];c&&(t.remove(c),delete i[s.id]),r.memory.geometries--}return{get:function(e,t){var i=n[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new q().setFromObject(e)),i=t._bufferGeometry),n[t.id]=i,r.memory.geometries++,i)},update:function(e){var r=e.index,n=e.attributes;for(var i in null!==r&&t.update(r,34963),n)t.update(n[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,p=a.length;s<p;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var r=i[e.id];if(r)return r;var n,o=[],a=e.index,s=e.attributes;if(null!==a)for(var p=0,c=(n=a.array).length;p<c;p+=3){var $=n[p+0],l=n[p+1],h=n[p+2];o.push($,l,l,h,h,$)}else for(p=0,c=(n=s.position.array).length/3-1;p<c;p+=3)$=p+0,l=p+1,h=p+2,o.push($,l,l,h,h,$);return r=new(Ju(o)>65535?Wc:Yc)(o,1),t.update(r,34963),i[e.id]=r,r}}}function cB(e,t,r,n){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,n){e.drawElements(i,n,o,t*a),r.update(n,i)},this.renderInstances=function(s,p,c){var $;if(n.isWebGL2)$=e;else if(null===($=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");$[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,c,o,p*a,s.maxInstancedCount),r.update(c,i,s.maxInstancedCount)}}function aB(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,r,n){switch(n=n||1,t.calls++,r){case 4:t.triangles+=n*(e/3);break;case 5:case 6:t.triangles+=n*(e-2);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);}}}}function _A(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ZA(e){var t={},r=new Float32Array(8);return{update:function(n,i,o,a){var s=n.morphTargetInfluences,p=s.length,c=t[i.id];if(void 0===c){c=[];for(var $=0;$<p;$++)c[$]=[$,0];t[i.id]=c}var l=o.morphTargets&&i.morphAttributes.position,h=o.morphNormals&&i.morphAttributes.normal;for($=0;$<p;$++)0!==(u=c[$])[1]&&(l&&i.removeAttribute("morphTarget"+$),h&&i.removeAttribute("morphNormal"+$));for($=0;$<p;$++)(u=c[$])[0]=$,u[1]=s[$];for(c.sort(_A),$=0;$<8;$++){var u;if(u=c[$]){var V=u[0],d=u[1];if(d){l&&i.addAttribute("morphTarget"+$,l[V]),h&&i.addAttribute("morphNormal"+$,h[V]),r[$]=d;continue}}r[$]=0}a.getUniforms().setValue(e,"morphTargetInfluences",r)}}}function YA(e,t){var r={};return{update:function(n){var i=t.render.frame,o=n.geometry,a=e.get(n,o);return r[a.id]!==i&&(o.isGeometry&&a.updateFromObject(n),e.update(a),r[a.id]=i),a},dispose:function(){r={}}}}function Jb(e,t,r,n,i,o,a,s,p,c){e=void 0!==e?e:[],t=void 0!==t?t:$j,E.call(this,e,t,r,n,i,o,a,s,p,c),this.flipY=!1}function mf(e,t,r,n){E.call(this,null),this.image={data:e,width:t,height:r,depth:n},this.magFilter=ta,this.minFilter=ta,this.generateMipmaps=!1,this.flipY=!1}s.prototype=Object.assign(Object.create(Rb.prototype),{constructor:s,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===wk;}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Pc&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==Vd&&(r.side=this.side),this.vertexColors!==xk&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){var i=n(e.textures),o=n(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Na.prototype=Object.create(s.prototype),Na.prototype.constructor=Na,Na.prototype.isShaderMaterial=!0,Na.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ga.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Na.prototype.toJSON=function(e){var t=s.prototype.toJSON.call(this,e);for(var r in t.uniforms={},this.uniforms){var n=this.uniforms[r].value;n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}return Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Hd.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new aa),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new aa;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new aa),t.subVectors(e,this.origin);var r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new aa;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new aa,t=new aa,r=new aa;return function(n,i,o,a){e.copy(n).add(i).multiplyScalar(.5),t.copy(i).sub(n).normalize(),r.copy(this.origin).sub(e);var s,p,c,$,l=.5*n.distanceTo(i),h=-this.direction.dot(t),u=r.dot(this.direction),V=-r.dot(t),d=r.lengthSq(),f=Math.abs(1-h*h);if(f>0){if(p=h*u-V,$=l*f,(s=h*V-u)>=0){if(p>=-$){if(p<=$){var m=1/f;c=(s*=m)*(s+h*(p*=m)+2*u)+p*(h*s+p+2*V)+d}else p=l,c=-(s=Math.max(0,-(h*p+u)))*s+p*(p+2*V)+d;}else p=-l,c=-(s=Math.max(0,-(h*p+u)))*s+p*(p+2*V)+d;}else p<=-$?c=-(s=Math.max(0,-(-h*l+u)))*s+(p=s>0?-l:Math.min(Math.max(-l,-V),l))*(p+2*V)+d:p<=$?(s=0,c=(p=Math.min(Math.max(-l,-V),l))*(p+2*V)+d):c=-(s=Math.max(0,-(h*l+u)))*s+(p=s>0?l:Math.min(Math.max(-l,-V),l))*(p+2*V)+d;}else p=h>0?-l:l,c=-(s=Math.max(0,-(h*p+u)))*s+p*(p+2*V)+d;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(p).add(e),c}}(),intersectSphere:function(){var e=new aa;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=n-a,p=n+a;return s<0&&p<0?null:s<0?this.at(p,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,o,a,s,p=1/this.direction.x,c=1/this.direction.y,$=1/this.direction.z,l=this.origin;return p>=0?(r=(e.min.x-l.x)*p,n=(e.max.x-l.x)*p):(r=(e.max.x-l.x)*p,n=(e.min.x-l.x)*p),c>=0?(i=(e.min.y-l.y)*c,o=(e.max.y-l.y)*c):(i=(e.max.y-l.y)*c,o=(e.min.y-l.y)*c),r>o||i>n?null:((i>r||r!=r)&&(r=i),(o<n||n!=n)&&(n=o),$>=0?(a=(e.min.z-l.z)*$,s=(e.max.z-l.z)*$):(a=(e.max.z-l.z)*$,s=(e.min.z-l.z)*$),r>s||a>n?null:((a>r||r!=r)&&(r=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(){var e=new aa;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new aa,t=new aa,r=new aa,n=new aa;return function(i,o,a,s,p){t.subVectors(o,i),r.subVectors(a,i),n.crossVectors(t,r);var c,$=this.direction.dot(n);if($>0){if(s)return null;c=1}else{if(!($<0))return null;c=-1,$=-$}e.subVectors(this.origin,i);var l=c*this.direction.dot(r.crossVectors(e,r));if(l<0)return null;var h=c*this.direction.dot(t.cross(e));if(h<0)return null;if(l+h>$)return null;var u=-c*e.dot(n);return u<0?null:this.at(u/$,p)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(ia,{getNormal:function(){var e=new aa;return function(t,r,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new aa),i.subVectors(n,r),e.subVectors(t,r),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new aa,t=new aa,r=new aa;return function(n,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),r.subVectors(n,i);var p=e.dot(e),c=e.dot(t),$=e.dot(r),l=t.dot(t),h=t.dot(r),u=p*l-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new aa),0===u)return s.set(-2,-1,-1);var V=1/u,d=(l*$-c*h)*V,f=(p*h-c*$)*V;return s.set(1-d-f,f,d)}}(),containsPoint:function(){var e=new aa;return function(t,r,n,i){return ia.getBarycoord(t,r,n,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new aa;return function(t,r,n,i,o,a,s,p){return this.getBarycoord(t,r,n,i,e),p.set(0,0),p.addScaledVector(o,e.x),p.addScaledVector(a,e.y),p.addScaledVector(s,e.z),p}}()}),Object.assign(ia.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new aa,t=new aa;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new aa),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ia.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new aa),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ia.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ia.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,r,n,i){return ia.getUV(e,this.a,this.b,this.c,t,r,n,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new aa,t=new aa,r=new aa,n=new aa,i=new aa,o=new aa;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new aa);var p,c,$=this.a,l=this.b,h=this.c;e.subVectors(l,$),t.subVectors(h,$),n.subVectors(a,$);var u=e.dot(n),V=t.dot(n);if(u<=0&&V<=0)return s.copy($);i.subVectors(a,l);var d=e.dot(i),f=t.dot(i);if(d>=0&&f<=d)return s.copy(l);var m=u*f-d*V;if(m<=0&&u>=0&&d<=0)return p=u/(u-d),s.copy($).addScaledVector(e,p);o.subVectors(a,h);var x=e.dot(o),v=t.dot(o);if(v>=0&&x<=v)return s.copy(h);var g=x*V-u*v;if(g<=0&&V>=0&&v<=0)return c=V/(V-v),s.copy($).addScaledVector(t,c);var y=d*v-x*f;if(y<=0&&f-d>=0&&x-v>=0)return r.subVectors(h,l),c=(f-d)/(f-d+(x-v)),s.copy(l).addScaledVector(r,c);var b=1/(y+g+m);return p=g*b,c=m*b,s.copy($).addScaledVector(e,p).addScaledVector(t,c)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),$a.prototype=Object.create(s.prototype),$a.prototype.constructor=$a,$a.prototype.isMeshBasicMaterial=!0,$a.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Aa.prototype=Object.assign(Object.create(b.prototype),{constructor:Aa,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return b.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)r=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}},raycast:function(){var e=new da,t=new Hd,r=new jb,n=new aa,i=new aa,o=new aa,a=new aa,s=new aa,p=new aa,c=new ba,$=new ba,l=new ba,h=new aa,u=new aa;function V(e,t,r,n,i,o,a,s){if(null===(t.side===ha?n.intersectTriangle(a,o,i,!0,s):n.intersectTriangle(i,o,a,t.side!==Td,s)))return null;u.copy(s),u.applyMatrix4(e.matrixWorld);var p=r.ray.origin.distanceTo(u);return p<r.near||p>r.far?null:{distance:p,point:u.clone(),object:e}}function d(e,t,r,a,s,p,u,d,f){n.fromBufferAttribute(s,u),i.fromBufferAttribute(s,d),o.fromBufferAttribute(s,f);var m=V(e,t,r,a,n,i,o,h);if(m){p&&(c.fromBufferAttribute(p,u),$.fromBufferAttribute(p,d),l.fromBufferAttribute(p,f),m.uv=ia.getUV(h,n,i,o,c,$,l,new ba));var x=new Xb(u,d,f);ia.getNormal(n,i,o,x.normal),m.face=x}return m}return function(u,f){var m,x=this.geometry,v=this.material,g=this.matrixWorld;if(void 0!==v&&(null===x.boundingSphere&&x.computeBoundingSphere(),r.copy(x.boundingSphere),r.applyMatrix4(g),!1!==u.ray.intersectsSphere(r)&&(e.getInverse(g),t.copy(u.ray).applyMatrix4(e),null===x.boundingBox||!1!==t.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var y,b,_,M,w,S,T,E,L,A=x.index,C=x.attributes.position,P=x.attributes.uv,B=x.groups,R=x.drawRange;if(null!==A){if(Array.isArray(v))for(M=0,S=B.length;M<S;M++)for(L=v[(E=B[M]).materialIndex],w=Math.max(E.start,R.start),T=Math.min(E.start+E.count,R.start+R.count);w<T;w+=3)y=A.getX(w),b=A.getX(w+1),_=A.getX(w+2),(m=d(this,L,u,t,C,P,y,b,_))&&(m.faceIndex=Math.floor(w/3),f.push(m));else for(M=Math.max(0,R.start),S=Math.min(A.count,R.start+R.count);M<S;M+=3)y=A.getX(M),b=A.getX(M+1),_=A.getX(M+2),(m=d(this,v,u,t,C,P,y,b,_))&&(m.faceIndex=Math.floor(M/3),f.push(m));}else if(void 0!==C)if(Array.isArray(v))for(M=0,S=B.length;M<S;M++)for(L=v[(E=B[M]).materialIndex],w=Math.max(E.start,R.start),T=Math.min(E.start+E.count,R.start+R.count);w<T;w+=3)(m=d(this,L,u,t,C,P,y=w,b=w+1,_=w+2))&&(m.faceIndex=Math.floor(w/3),f.push(m));else for(M=Math.max(0,R.start),S=Math.min(C.count,R.start+R.count);M<S;M+=3)(m=d(this,v,u,t,C,P,y=M,b=M+1,_=M+2))&&(m.faceIndex=Math.floor(M/3),f.push(m))}else if(x.isGeometry){var G,D,I,O,F=Array.isArray(v),U=x.vertices,N=x.faces,z=x.faceVertexUvs[0];z.length>0&&(O=z);for(var H=0,k=N.length;H<k;H++){var j=N[H],W=F?v[j.materialIndex]:v;if(void 0!==W){if(G=U[j.a],D=U[j.b],I=U[j.c],!0===W.morphTargets){var q=x.morphTargets,X=this.morphTargetInfluences;n.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var Y=0,J=q.length;Y<J;Y++){var Z=X[Y];if(0!==Z){var Q=q[Y].vertices;n.addScaledVector(a.subVectors(Q[j.a],G),Z),i.addScaledVector(s.subVectors(Q[j.b],D),Z),o.addScaledVector(p.subVectors(Q[j.c],I),Z)}}n.add(G),i.add(D),o.add(I),G=n,D=i,I=o}if(m=V(this,W,u,t,G,D,I,h)){if(O&&O[H]){var K=O[H];c.copy(K[0]),$.copy(K[1]),l.copy(K[2]),m.uv=ia.getUV(h,G,D,I,c,$,l,new ba)}m.face=j,m.faceIndex=H,f.push(m)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Jb.prototype=Object.create(E.prototype),Jb.prototype.constructor=Jb,Jb.prototype.isCubeTexture=!0,Object.defineProperty(Jb.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),mf.prototype=Object.create(E.prototype),mf.prototype.constructor=mf,mf.prototype.isDataTexture3D=!0;var hv=new E,UA=new mf,jv=new Jb;function kv(){this.seq=[],this.map={}}var lv=[],mv=[],nv=new Float32Array(16),ov=new Float32Array(9),pv=new Float32Array(4);function lf(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,o=lv[i];if(void 0===o&&(o=new Float32Array(i),lv[i]=o),0!==t){n.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function L(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function W(e,t){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}function tv(e,t){var r=mv[t];void 0===r&&(r=new Int32Array(t),mv[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function TA(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function SA(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function RA(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(L(r,t))return;e.uniform2fv(this.addr,t),W(r,t)}}function QA(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)r[0]===t.r&&r[1]===t.g&&r[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(L(r,t))return;e.uniform3fv(this.addr,t),W(r,t)}}function PA(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z&&r[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(L(r,t))return;e.uniform4fv(this.addr,t),W(r,t)}}function OA(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(L(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),W(r,t)}else{if(L(r,n))return;pv.set(n),e.uniformMatrix2fv(this.addr,!1,pv),W(r,n)}}function NA(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(L(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),W(r,t)}else{if(L(r,n))return;ov.set(n),e.uniformMatrix3fv(this.addr,!1,ov),W(r,n)}}function MA(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(L(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),W(r,t)}else{if(L(r,n))return;nv.set(n),e.uniformMatrix4fv(this.addr,!1,nv),W(r,n)}}function LA(e,t,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2D(t||hv,i)}function KA(e,t,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||UA,i)}function JA(e,t,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(t||jv,i)}function Fv(e,t){var r=this.cache;L(r,t)||(e.uniform2iv(this.addr,t),W(r,t))}function Gv(e,t){var r=this.cache;L(r,t)||(e.uniform3iv(this.addr,t),W(r,t))}function Hv(e,t){var r=this.cache;L(r,t)||(e.uniform4iv(this.addr,t),W(r,t))}function IA(e){switch(e){case 5126:return TA;case 35664:return RA;case 35665:return QA;case 35666:return PA;case 35674:return OA;case 35675:return NA;case 35676:return MA;case 35678:case 36198:return LA;case 35679:return KA;case 35680:return JA;case 5124:case 35670:return SA;case 35667:case 35671:return Fv;case 35668:case 35672:return Gv;case 35669:case 35673:return Hv;}}function HA(e,t){var r=this.cache;L(r,t)||(e.uniform1fv(this.addr,t),W(r,t))}function FA(e,t){var r=this.cache;L(r,t)||(e.uniform1iv(this.addr,t),W(r,t))}function EA(e,t){var r=this.cache,n=lf(t,this.size,2);L(r,n)||(e.uniform2fv(this.addr,n),this.updateCache(n))}function CA(e,t){var r=this.cache,n=lf(t,this.size,3);L(r,n)||(e.uniform3fv(this.addr,n),this.updateCache(n))}function BA(e,t){var r=this.cache,n=lf(t,this.size,4);L(r,n)||(e.uniform4fv(this.addr,n),this.updateCache(n))}function AA(e,t){var r=this.cache,n=lf(t,this.size,4);L(r,n)||(e.uniformMatrix2fv(this.addr,!1,n),this.updateCache(n))}function zA(e,t){var r=this.cache,n=lf(t,this.size,9);L(r,n)||(e.uniformMatrix3fv(this.addr,!1,n),this.updateCache(n))}function yA(e,t){var r=this.cache,n=lf(t,this.size,16);L(r,n)||(e.uniformMatrix4fv(this.addr,!1,n),this.updateCache(n))}function xA(e,t,r){var n=this.cache,i=t.length,o=tv(r,i);!1===L(n,o)&&(e.uniform1iv(this.addr,o),W(n,o));for(var a=0;a!==i;++a)r.setTexture2D(t[a]||hv,o[a])}function wA(e,t,r){var n=this.cache,i=t.length,o=tv(r,i);!1===L(n,o)&&(e.uniform1iv(this.addr,o),W(n,o));for(var a=0;a!==i;++a)r.setTextureCube(t[a]||jv,o[a])}function vA(e){switch(e){case 5126:return HA;case 35664:return EA;case 35665:return CA;case 35666:return BA;case 35674:return AA;case 35675:return zA;case 35676:return yA;case 35678:return xA;case 35680:return wA;case 5124:case 35670:return FA;case 35667:case 35671:return Fv;case 35668:case 35672:return Gv;case 35669:case 35673:return Hv;}}function uA(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=IA(t.type)}function Vv(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=vA(t.type)}function Wv(e){this.id=e,kv.call(this)}Vv.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),W(t,e)},Wv.prototype.setValue=function(e,t,r){for(var n=this.seq,i=0,o=n.length;i!==o;++i){var a=n[i];a.setValue(e,t[a.id],r)}};var an=/([\w\d_]+)(\])?(\[|\.)?/g;function Yv(e,t){e.seq.push(t),e.map[t.id]=t}function tA(e,t,r){var n=e.name,i=n.length;for(an.lastIndex=0;;){var o=an.exec(n),a=an.lastIndex,s=o[1],p="]"===o[2],c=o[3];if(p&&(s|=0),void 0===c||"["===c&&a+2===i){Yv(r,void 0===c?new uA(s,e,t):new Vv(s,e,t));break}var $=r.map[s];void 0===$&&Yv(r,$=new Wv(s)),r=$}}function Cc(e,t,r){kv.call(this),this.renderer=r;for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var o=e.getActiveUniform(t,i);tA(o,e.getUniformLocation(t,o.name),this)}}function sA(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function aw(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),!1===e.getShaderParameter(n,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(n),sA(r)),n}Cc.prototype.setValue=function(e,t,r){var n=this.map[t];void 0!==n&&n.setValue(e,r,this.renderer)},Cc.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},Cc.upload=function(e,t,r,n){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}},Cc.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var o=e[n];o.id in t&&r.push(o)}return r};var rA=0;function cw(e){switch(e){case jh:return["Linear","( value )"];case zr:return["sRGB","( value )"];case Br:return["RGBE","( value )"];case Dr:return["RGBM","( value, 7.0 )"];case Er:return["RGBM","( value, 16.0 )"];case Fr:return["RGBD","( value, 256.0 )"];case pl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e);}}function Ri(e,t){var r=cw(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function oA(e,t){var r=cw(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function nA(e,t){var r;switch(t){case Lk:r="Linear";break;case cq:r="Reinhard";break;case dq:r="Uncharted2";break;case eq:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t);}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function mA(e,t,r){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Uf).join("\n")}function lA(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function kA(e,t){for(var r={},n=e.getProgramParameter(t,35721),i=0;i<n;i++){var o=e.getActiveAttrib(t,i).name;r[o]=e.getAttribLocation(t,o)}return r}function Uf(e){return""!==e}function kw(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function lw(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function hn(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,t){var r=B[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return hn(r)})}function nw(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,r,n){for(var i="",o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function hA(e,t,r,n,i,o,a){var s=e.context,p=n.defines,c=i.vertexShader,$=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";o.shadowMapType===vm?l="SHADOWMAP_TYPE_PCF":o.shadowMapType===mp&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",V="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case $j:case Zj:h="ENVMAP_TYPE_CUBE";break;case Xj:case Wj:h="ENVMAP_TYPE_CUBE_UV";break;case Pk:case Yj:h="ENVMAP_TYPE_EQUIREC";break;case Rk:h="ENVMAP_TYPE_SPHERE";}switch(n.envMap.mapping){case Zj:case Yj:u="ENVMAP_MODE_REFRACTION";}switch(n.combine){case Df:V="ENVMAP_BLENDING_MULTIPLY";break;case $p:V="ENVMAP_BLENDING_MIX";break;case _p:V="ENVMAP_BLENDING_ADD";}}var d,f,m=e.gammaFactor>0?e.gammaFactor:1,x=a.isWebGL2?"":mA(n.extensions,o,t),v=lA(p),g=s.createProgram();if(n.isRawShaderMaterial?((d=[v].filter(Uf).join("\n")).length>0&&(d+="\n"),(f=[x,v].filter(Uf).join("\n")).length>0&&(f+="\n")):(d=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,v,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+u:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Uf).join("\n"),f=[x,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,v,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+u:"",o.envMap?"#define "+V:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ck?"#define TONE_MAPPING":"",o.toneMapping!==ck?B.tonemapping_pars_fragment:"",o.toneMapping!==ck?nA("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?B.encodings_pars_fragment:"",o.mapEncoding?Ri("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?Ri("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?Ri("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ri("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?oA("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Uf).join("\n")),c=lw(c=kw(c=hn(c),o),o),$=lw($=kw($=hn($),o),o),c=nw(c),$=nw($),a.isWebGL2&&!n.isRawShaderMaterial){var y=!1,b=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==c.match(b)&&null!==$.match(b)&&(y=!0,c=c.replace(b,""),$=$.replace(b,"")),d=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+d,f=["#version 300 es\n","#define varying in",y?"":"out highp vec4 pc_fragColor;",y?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+f}var _=f+$,M=aw(s,35633,d+c),w=aw(s,35632,_);s.attachShader(g,M),s.attachShader(g,w),void 0!==n.index0AttributeName?s.bindAttribLocation(g,0,n.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(g,0,"position"),s.linkProgram(g);var S,T,E=s.getProgramInfoLog(g).trim(),L=s.getShaderInfoLog(M).trim(),A=s.getShaderInfoLog(w).trim(),C=!0,P=!0;return!1===s.getProgramParameter(g,35714)?(C=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(g,35715),"gl.getProgramInfoLog",E,L,A)):""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==L&&""!==A||(P=!1),P&&(this.diagnostics={runnable:C,material:n,programLog:E,vertexShader:{log:L,prefix:d},fragmentShader:{log:A,prefix:f}}),s.deleteShader(M),s.deleteShader(w),this.getUniforms=function(){return void 0===S&&(S=new Cc(s,g,e)),S},this.getAttributes=function(){return void 0===T&&(T=kA(s,g)),T},this.destroy=function(){s.deleteProgram(g),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=rA++,this.code=r,this.usedTimes=1,this.program=g,this.vertexShader=M,this.fragmentShader=w,this}function gA(e,t,r){var n=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=jh,r===jh&&t&&(r=pl),r}this.getParameters=function(t,n,o,s,p,c,$){var l=i[t.type],h=$.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(r.floatVertexTextures)return 1024;var n=r.maxVertexUniforms,i=Math.floor((n-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}($):0,u=r.precision;null!==t.precision&&(u=r.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",u,"instead.");var V=e.getRenderTarget();return{shaderID:l,precision:u,supportsVertexTextures:r.vertexTextures,outputEncoding:a(V?V.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:a(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Xj||t.envMap.mapping===Wj),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Jr,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:r.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:p,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&$.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Td,flipSided:t.side===ha,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,r){var n=[];if(r.shaderID?n.push(r.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(var a=0;a<o.length;a++)n.push(r[o[a]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.push(e.gammaFactor),n.join()},this.acquireProgram=function(i,o,a,s){for(var p,c=0,$=n.length;c<$;c++){var l=n[c];if(l.code===s){++(p=l).usedTimes;break}}return void 0===p&&(p=new hA(e,t,s,i,o,a,r),n.push(p)),p},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function fA(){var e=new WeakMap;return{get:function(t){var r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,n){e.get(t)[r]=n},dispose:function(){e=new WeakMap}}}function eA(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function dA(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function cA(){var e=[],t=0,r=[],n=[];return{opaque:r,transparent:n,init:function(){t=0,r.length=0,n.length=0},push:function(i,o,a,s,p){var c=e[t];void 0===c?(c={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:p},e[t]=c):(c.id=i.id,c.object=i,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=i.renderOrder,c.z=s,c.group=p),(!0===a.transparent?n:r).push(c),t++},sort:function(){r.length>1&&r.sort(eA),n.length>1&&n.sort(dA)}}}function bA(){var e={};return{get:function(t,r){var n=t.id+","+r.id,i=e[n];return void 0===i&&(i=new cA,e[n]=i),i},dispose:function(){e={}}}}function aA(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new aa,color:new z,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ba};break;case"SpotLight":r={position:new aa,direction:new aa,color:new z,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ba};break;case"PointLight":r={position:new aa,color:new z,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ba,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new aa,skyColor:new z,groundColor:new z};break;case"RectAreaLight":r={color:new z,position:new aa,halfWidth:new aa,halfHeight:new aa};}return e[t.id]=r,r}}}var _z=0;function $z(){var e=new aA,t={id:_z++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new aa,n=new da,i=new da;return{setup:function(o,a,s){for(var p=0,c=0,$=0,l=0,h=0,u=0,V=0,d=0,f=s.matrixWorldInverse,m=0,x=o.length;m<x;m++){var v=o[m],g=v.color,y=v.intensity,b=v.distance,_=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)p+=g.r*y,c+=g.g*y,$+=g.b*y;else if(v.isDirectionalLight){if((w=e.get(v)).color.copy(v.color).multiplyScalar(v.intensity),w.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(f),w.shadow=v.castShadow,v.castShadow){var M=v.shadow;w.shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize}t.directionalShadowMap[l]=_,t.directionalShadowMatrix[l]=v.shadow.matrix,t.directional[l]=w,l++}else if(v.isSpotLight)(w=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(f),w.color.copy(g).multiplyScalar(y),w.distance=b,w.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(f),w.coneCos=Math.cos(v.angle),w.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),w.decay=v.decay,w.shadow=v.castShadow,v.castShadow&&(M=v.shadow,w.shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize),t.spotShadowMap[u]=_,t.spotShadowMatrix[u]=v.shadow.matrix,t.spot[u]=w,u++;else if(v.isRectAreaLight)(w=e.get(v)).color.copy(g).multiplyScalar(y),w.position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(f),i.identity(),n.copy(v.matrixWorld),n.premultiply(f),i.extractRotation(n),w.halfWidth.set(.5*v.width,0,0),w.halfHeight.set(0,.5*v.height,0),w.halfWidth.applyMatrix4(i),w.halfHeight.applyMatrix4(i),t.rectArea[V]=w,V++;else if(v.isPointLight)(w=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(f),w.color.copy(v.color).multiplyScalar(v.intensity),w.distance=v.distance,w.decay=v.decay,w.shadow=v.castShadow,v.castShadow&&(M=v.shadow,w.shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize,w.shadowCameraNear=M.camera.near,w.shadowCameraFar=M.camera.far),t.pointShadowMap[h]=_,t.pointShadowMatrix[h]=v.shadow.matrix,t.point[h]=w,h++;else if(v.isHemisphereLight){var w;(w=e.get(v)).direction.setFromMatrixPosition(v.matrixWorld),w.direction.transformDirection(f),w.direction.normalize(),w.skyColor.copy(v.color).multiplyScalar(y),w.groundColor.copy(v.groundColor).multiplyScalar(y),t.hemi[d]=w,d++}}t.ambient[0]=p,t.ambient[1]=c,t.ambient[2]=$,t.directional.length=l,t.spot.length=u,t.rectArea.length=V,t.point.length=h,t.hemi.length=d,t.hash.stateID=t.id,t.hash.directionalLength=l,t.hash.pointLength=h,t.hash.spotLength=u,t.hash.rectAreaLength=V,t.hash.hemiLength=d,t.hash.shadowsLength=a.length},state:t}}function yw(){var e=new $z,t=[],r=[];return{init:function(){t.length=0,r.length=0},state:{lightsArray:t,shadowsArray:r,lights:e},setupLights:function(n){e.setup(t,r,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){r.push(e)}}}function Zz(){var e={};return{get:function(t,r){var n;return void 0===e[t.id]?(n=new yw,e[t.id]={},e[t.id][r.id]=n):void 0===e[t.id][r.id]?(n=new yw,e[t.id][r.id]=n):n=e[t.id][r.id],n},dispose:function(){e={}}}}function yc(e){s.call(this),this.type="MeshDepthMaterial",this.depthPacking=Gr,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function xc(e){s.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new aa,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Cw(e,t,r){for(var n=new Lj,i=new da,o=new ba,a=new ba(r,r),s=new aa,p=new aa,c=1,$=2,l=1+(c|$),h=new Array(l),u=new Array(l),V={},d={0:ha,1:Vd,2:Td},f=[new aa(1,0,0),new aa(-1,0,0),new aa(0,0,1),new aa(0,0,-1),new aa(0,1,0),new aa(0,-1,0)],m=[new aa(0,1,0),new aa(0,1,0),new aa(0,1,0),new aa(0,1,0),new aa(0,0,1),new aa(0,0,-1)],x=[new fa,new fa,new fa,new fa,new fa,new fa],v=0;v!==l;++v){var g=0!=(v&c),y=0!=(v&$),b=new yc({depthPacking:Hr,morphTargets:g,skinning:y});h[v]=b;var _=new xc({morphTargets:g,skinning:y});u[v]=_}var M=this;function w(t,r,n,i,o,a){var s=t.geometry,p=null,l=h,f=t.customDepthMaterial;if(n&&(l=u,f=t.customDistanceMaterial),f)p=f;else{var m=!1;r.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var x=t.isSkinnedMesh&&r.skinning,v=0;m&&(v|=c),x&&(v|=$),p=l[v]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var g=p.uuid,y=r.uuid,b=V[g];void 0===b&&(b={},V[g]=b);var _=b[y];void 0===_&&(_=p.clone(),b[y]=_),p=_}return p.visible=r.visible,p.wireframe=r.wireframe,p.side=null!=r.shadowSide?r.shadowSide:d[r.side],p.clipShadows=r.clipShadows,p.clippingPlanes=r.clippingPlanes,p.clipIntersection=r.clipIntersection,p.wireframeLinewidth=r.wireframeLinewidth,p.linewidth=r.linewidth,n&&p.isMeshDistanceMaterial&&(p.referencePosition.copy(i),p.nearDistance=o,p.farDistance=a),p}function S(r,i,o,a){if(!1!==r.visible){if(r.layers.test(i.layers)&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,r.matrixWorld);var s=t.update(r),c=r.material;if(Array.isArray(c))for(var $=s.groups,l=0,h=$.length;l<h;l++){var u=$[l],V=c[u.materialIndex];if(V&&V.visible){var d=w(r,V,a,p,o.near,o.far);e.renderBufferDirect(o,null,s,d,r,u)}}else if(c.visible){d=w(r,c,a,p,o.near,o.far);e.renderBufferDirect(o,null,s,d,r,null)}}for(var f=r.children,m=0,x=f.length;m<x;m++)S(f[m],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vm,this.render=function(t,r,c){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){e.context;var $,l=e.state;l.disable(3042),l.buffers.color.setClear(1,1,1,1),l.buffers.depth.setTest(!0),l.setScissorTest(!1);for(var h=0,u=t.length;h<u;h++){var V=t[h],d=V.shadow,v=V&&V.isPointLight;if(void 0!==d){var g=d.camera;if(o.copy(d.mapSize),o.min(a),v){var y=o.x,b=o.y;x[0].set(2*y,b,y,b),x[1].set(0,b,y,b),x[2].set(3*y,b,y,b),x[3].set(y,b,y,b),x[4].set(3*y,0,y,b),x[5].set(y,0,y,b),o.x*=4,o.y*=2}if(null===d.map){var _={minFilter:ta,magFilter:ta,format:ob};d.map=new kd(o.x,o.y,_),d.map.texture.name=V.name+".shadowMap",g.updateProjectionMatrix()}d.isSpotLightShadow&&d.update(V);var w=d.map,T=d.matrix;p.setFromMatrixPosition(V.matrixWorld),g.position.copy(p),v?($=6,T.makeTranslation(-p.x,-p.y,-p.z)):($=1,s.setFromMatrixPosition(V.target.matrixWorld),g.lookAt(s),g.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(g.projectionMatrix),T.multiply(g.matrixWorldInverse)),e.setRenderTarget(w),e.clear();for(var E=0;E<$;E++){if(v){s.copy(g.position),s.add(f[E]),g.up.copy(m[E]),g.lookAt(s),g.updateMatrixWorld();var L=x[E];l.viewport(L)}i.multiplyMatrices(g.projectionMatrix,g.matrixWorldInverse),n.setFromMatrix(i),S(r,c,g,v)}}else console.warn("THREE.WebGLShadowMap:",V,"has no shadow.")}M.needsUpdate=!1}}}function Wz(e,t,r,n){var i=new function(){var t=!1,r=new fa,n=null,i=new fa(0,0,0,0);return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,o,a,s){!0===s&&(t*=a,n*=a,o*=a),r.set(t,n,o,a),!1===i.equals(r)&&(e.clearColor(t,n,o,a),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,r=null,n=null,i=null;return{setTest:function(e){e?F(2929):U(2929)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case Rp:e.depthFunc(512);break;case Sp:e.depthFunc(519);break;case Tp:e.depthFunc(513);break;case dk:e.depthFunc(515);break;case Vp:e.depthFunc(514);break;case Wp:e.depthFunc(518);break;case Xp:e.depthFunc(516);break;case Yp:e.depthFunc(517);break;default:e.depthFunc(515);}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}},a=new function(){var t=!1,r=null,n=null,i=null,o=null,a=null,s=null,p=null,c=null;return{setTest:function(e){e?F(2960):U(2960)},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,a){n===t&&i===r&&o===a||(e.stencilFunc(t,r,a),n=t,i=r,o=a)},setOp:function(t,r,n){a===t&&s===r&&p===n||(e.stencilOp(t,r,n),a=t,s=r,p=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,r=null,n=null,i=null,o=null,a=null,s=null,p=null,c=null}}},s=e.getParameter(34921),p=new Uint8Array(s),c=new Uint8Array(s),$=new Uint8Array(s),l={},h=null,u=null,V=null,d=null,f=null,m=null,x=null,v=null,g=null,y=null,b=!1,_=null,M=null,w=null,S=null,T=null,E=e.getParameter(35661),L=!1,A=0,C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(A=parseFloat(/^WebGL\ ([0-9])/.exec(C)[1]),L=A>=1):-1!==C.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(C)[1]),L=A>=2);var P=null,B={},R=new fa,G=new fa;function D(t,r,n){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<n;a++)e.texImage2D(r+a,0,6408,1,1,0,6408,5121,i);return o}var I={};function O(r,i){(p[r]=1,0===c[r]&&(e.enableVertexAttribArray(r),c[r]=1),$[r]!==i)&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,i),$[r]=i)}function F(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function U(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}function N(t,n,i,o,a,s,p,c){if(t!==If){if(V||(F(3042),V=!0),t===Dk)a=a||n,s=s||i,p=p||o,n===f&&a===v||(e.blendEquationSeparate(r.convert(n),r.convert(a)),f=n,v=a),i===m&&o===x&&s===g&&p===y||(e.blendFuncSeparate(r.convert(i),r.convert(o),r.convert(s),r.convert(p)),m=i,x=o,g=s,y=p),d=t,b=null;else if(t!==d||c!==b){if(f===Oc&&v===Oc||(e.blendEquation(32774),f=Oc,v=Oc),c)switch(t){case Pc:e.blendFuncSeparate(1,771,1,771);break;case qk:e.blendFunc(1,1);break;case pk:e.blendFuncSeparate(0,0,769,771);break;case mk:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);}else switch(t){case Pc:e.blendFuncSeparate(770,771,1,771);break;case qk:e.blendFunc(770,1);break;case pk:e.blendFunc(0,769);break;case mk:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);}m=null,x=null,g=null,y=null,d=t,b=c}}else V&&(U(3042),V=!1)}function z(t){_!==t&&(t?e.frontFace(2304):e.frontFace(2305),_=t)}function H(t){t!==ep?(F(2884),t!==M&&(t===zk?e.cullFace(1029):t===gp?e.cullFace(1028):e.cullFace(1032))):U(2884),M=t}function k(t,r,n){t?(F(32823),S===r&&T===n||(e.polygonOffset(r,n),S=r,T=n)):U(32823)}function j(t){void 0===t&&(t=33984+E-1),P!==t&&(e.activeTexture(t),P=t)}return I[3553]=D(3553,3553,1),I[34067]=D(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(2929),o.setFunc(dk),z(!1),H(zk),F(2884),N(If),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=p.length;e<t;e++)p[e]=0},enableAttribute:function(e){O(e,0)},enableAttributeAndDivisor:O,disableUnusedAttributes:function(){for(var t=0,r=c.length;t!==r;++t)c[t]!==p[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:F,disable:U,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var r=e.getParameter(34467),n=0;n<r.length;n++)h.push(r[n]);return h},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:N,setMaterial:function(e,t){e.side===Td?U(2884):F(2884);var r=e.side===ha;t&&(r=!r),z(r),e.blending===Pc&&!1===e.transparent?N(If):N(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite),k(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:z,setCullFace:H,setLineWidth:function(t){t!==w&&(L&&e.lineWidth(t),w=t)},setPolygonOffset:k,setScissorTest:function(e){e?F(3089):U(3089)},activeTexture:j,bindTexture:function(t,r){null===P&&j();var n=B[P];void 0===n&&(n={type:void 0,texture:void 0},B[P]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||I[t]),n.type=t,n.texture=r)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===R.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),R.copy(t))},viewport:function(t){!1===G.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),G.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);l={},h=null,P=null,B={},u=null,d=null,_=null,M=null,i.reset(),o.reset(),a.reset()}}}function Vz(e,t,r,n,i,o,a){var s,p={};function c(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var r=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height),n}return e}function $(e){return ea.isPowerOfTwo(e.width)&&ea.isPowerOfTwo(e.height)}function l(e,t){return e.generateMipmaps&&t&&e.minFilter!==ta&&e.minFilter!==va}function h(t,r,i,o){e.generateMipmap(t),n.get(r).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function u(e,t){if(!i.isWebGL2)return e;if(6403===e){if(5126===t)return 33326;if(5131===t)return 33325;if(5121===t)return 33321}if(6407===e){if(5126===t)return 34837;if(5131===t)return 34843;if(5121===t)return 32849}if(6408===e){if(5126===t)return 34836;if(5131===t)return 34842;if(5121===t)return 32856}return e}function V(e){return e===ta||e===Sj||e===Rj?9728:9729}function d(t){var r=t.target;r.removeEventListener("dispose",d),function(t){var r=n.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}n.remove(t)}(r),r.isVideoTexture&&delete p[r.id],a.memory.textures--}function f(t){var r=t.target;r.removeEventListener("dispose",f),function(t){var r=n.get(t),i=n.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[o]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}(r),a.memory.textures--}function m(e,t){var i=n.get(e);if(e.isVideoTexture&&function(e){var t=e.id,r=a.render.frame;p[t]!==r&&(p[t]=r,e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void v(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+t),r.bindTexture(3553,i.__webglTexture)}function x(r,a,s){var p;if(s?(e.texParameteri(r,10242,o.convert(a.wrapS)),e.texParameteri(r,10243,o.convert(a.wrapT)),e.texParameteri(r,10240,o.convert(a.magFilter)),e.texParameteri(r,10241,o.convert(a.minFilter))):(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071),a.wrapS===Qa&&a.wrapT===Qa||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(r,10240,V(a.magFilter)),e.texParameteri(r,10241,V(a.minFilter)),a.minFilter!==ta&&a.minFilter!==va&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),p=t.get("EXT_texture_filter_anisotropic")){if(a.type===pf&&null===t.get("OES_texture_float_linear"))return;if(a.type===Oj&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(r,p.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function v(t,n,p){var V;V=n.isDataTexture3D?32879:3553,void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",d),t.__webglTexture=e.createTexture(),a.memory.textures++),r.activeTexture(33984+p),r.bindTexture(V,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment);var f=c(n.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==Qa||e.wrapT!==Qa||e.minFilter!==ta&&e.minFilter!==va)})(n)&&!1===$(f)&&(f=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=ea.floorPowerOfTwo(e.width),s.height=ea.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(f));var m=$(f),v=o.convert(n.format),g=o.convert(n.type),y=u(v,g);x(V,n,m);var b,_=n.mipmaps;if(n.isDepthTexture){if(y=6402,n.type===pf){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else i.isWebGL2&&(y=33189);n.format===Bd&&6402===y&&n.type!==wf&&n.type!==Zk&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=wf,g=o.convert(n.type)),n.format===kf&&(y=34041,n.type!==uf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=uf,g=o.convert(n.type))),r.texImage2D(3553,0,y,f.width,f.height,0,v,g,null)}else if(n.isDataTexture){if(_.length>0&&m){for(var M=0,w=_.length;M<w;M++)b=_[M],r.texImage2D(3553,M,y,b.width,b.height,0,v,g,b.data);n.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else r.texImage2D(3553,0,y,f.width,f.height,0,v,g,f.data),t.__maxMipLevel=0;}else if(n.isCompressedTexture){for(M=0,w=_.length;M<w;M++)b=_[M],n.format!==ob&&n.format!==nf?r.getCompressedTextureFormats().indexOf(v)>-1?r.compressedTexImage2D(3553,M,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,M,y,b.width,b.height,0,v,g,b.data);t.__maxMipLevel=_.length-1}else if(n.isDataTexture3D)r.texImage3D(32879,0,y,f.width,f.height,f.depth,0,v,g,f.data),t.__maxMipLevel=0;else if(_.length>0&&m){for(M=0,w=_.length;M<w;M++)b=_[M],r.texImage2D(3553,M,y,v,g,b);n.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else r.texImage2D(3553,0,y,v,g,f),t.__maxMipLevel=0;l(n,m)&&h(3553,n,f.width,f.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function g(t,i,a,s){var p=o.convert(i.texture.format),c=o.convert(i.texture.type),$=u(p,c);r.texImage2D(s,0,$,i.width,i.height,0,p,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function y(t,r){e.bindRenderbuffer(36161,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(36161,33189,r.width,r.height),e.framebufferRenderbuffer(36160,36096,36161,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(36161,34041,r.width,r.height),e.framebufferRenderbuffer(36160,33306,36161,t)):e.renderbufferStorage(36161,32854,r.width,r.height),e.bindRenderbuffer(36161,null)}function b(t){var r=n.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),m(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Bd)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(r.depthTexture.format!==kf)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),y(r.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),y(r.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}this.setTexture2D=m,this.setTexture3D=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?v(i,e,t):(r.activeTexture(33984+t),r.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,s){var p=n.get(t);if(6===t.image.length)if(t.version>0&&p.__version!==t.version){p.__image__webglTextureCube||(t.addEventListener("dispose",d),p.__image__webglTextureCube=e.createTexture(),a.memory.textures++),r.activeTexture(33984+s),r.bindTexture(34067,p.__image__webglTextureCube),e.pixelStorei(37440,t.flipY);for(var V=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=V||f?f?t.image[v].image:t.image[v]:c(t.image[v],i.maxCubemapSize);var g=m[0],y=$(g),b=o.convert(t.format),_=o.convert(t.type),M=u(b,_);for(x(34067,t,y),v=0;v<6;v++)if(V)for(var w,S=m[v].mipmaps,T=0,E=S.length;T<E;T++)w=S[T],t.format!==ob&&t.format!==nf?r.getCompressedTextureFormats().indexOf(b)>-1?r.compressedTexImage2D(34069+v,T,M,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+v,T,M,w.width,w.height,0,b,_,w.data);else f?r.texImage2D(34069+v,0,M,m[v].width,m[v].height,0,b,_,m[v].data):r.texImage2D(34069+v,0,M,b,_,m[v]);p.__maxMipLevel=V?S.length-1:0,l(t,y)&&h(34067,t,g.width,g.height),p.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(33984+s),r.bindTexture(34067,p.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){r.activeTexture(33984+t),r.bindTexture(34067,n.get(e).__webglTexture)},this.setupRenderTarget=function(t){var i=n.get(t),o=n.get(t.texture);t.addEventListener("dispose",f),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,p=$(t);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(r.bindTexture(34067,o.__webglTexture),x(34067,t.texture,p),c=0;c<6;c++)g(i.__webglFramebuffer[c],t,36064,34069+c);l(t.texture,p)&&h(34067,t.texture,t.width,t.height),r.bindTexture(34067,null)}else r.bindTexture(3553,o.__webglTexture),x(3553,t.texture,p),g(i.__webglFramebuffer,t,36064,3553),l(t.texture,p)&&h(3553,t.texture,t.width,t.height),r.bindTexture(3553,null);t.depthBuffer&&b(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(l(t,$(e))){var i=e.isWebGLRenderTargetCube?34067:3553,o=n.get(t).__webglTexture;r.bindTexture(i,o),h(i,t,e.width,e.height),r.bindTexture(i,null)}}}function Fw(e,t,r){return{convert:function(e){var n;if(e===Pb)return 10497;if(e===Qa)return 33071;if(e===Mc)return 33648;if(e===ta)return 9728;if(e===Sj)return 9984;if(e===Rj)return 9986;if(e===va)return 9729;if(e===Xk)return 9985;if(e===xf)return 9987;if(e===yh)return 5121;if(e===Eq)return 32819;if(e===Fq)return 32820;if(e===Gq)return 33635;if(e===xq)return 5120;if(e===yq)return 5122;if(e===wf)return 5123;if(e===Aq)return 5124;if(e===Zk)return 5125;if(e===pf)return 5126;if(e===Oj){if(r.isWebGL2)return 5131;if(null!==(n=t.get("OES_texture_half_float")))return n.HALF_FLOAT_OES}if(e===Iq)return 6406;if(e===nf)return 6407;if(e===ob)return 6408;if(e===Lq)return 6409;if(e===Mq)return 6410;if(e===Bd)return 6402;if(e===kf)return 34041;if(e===Qq)return 6403;if(e===Oc)return 32774;if(e===Cp)return 32778;if(e===Dp)return 32779;if(e===Gp)return 0;if(e===Hp)return 1;if(e===Ip)return 768;if(e===Jp)return 769;if(e===Hk)return 770;if(e===Ik)return 771;if(e===Mp)return 772;if(e===Np)return 773;if(e===Op)return 774;if(e===Pp)return 775;if(e===Qp)return 776;if((e===cl||e===dl||e===el||e===fl)&&null!==(n=t.get("WEBGL_compressed_texture_s3tc"))){if(e===cl)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===dl)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===el)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===fl)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===gl||e===hl||e===il||e===jl)&&null!==(n=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===gl)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===hl)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===il)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===jl)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Zq&&null!==(n=t.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((e===$q||e===_q||e===ar||e===br||e===cr||e===dr||e===er||e===fr||e===gr||e===hr||e===ir||e===jr||e===kr||e===lr)&&null!==(n=t.get("WEBGL_compressed_texture_astc")))return e;if(e===jk||e===ek){if(r.isWebGL2){if(e===jk)return 32775;if(e===ek)return 32776}if(null!==(n=t.get("EXT_blend_minmax"))){if(e===jk)return n.MIN_EXT;if(e===ek)return n.MAX_EXT}}if(e===uf){if(r.isWebGL2)return 34042;if(null!==(n=t.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Pe(){b.call(this),this.type="Group"}function wb(){b.call(this),this.type="Camera",this.matrixWorldInverse=new da,this.projectionMatrix=new da,this.projectionMatrixInverse=new da}function N(e,t,r,n){wb.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Mf(e){N.call(this),this.cameras=e||[]}yc.prototype=Object.create(s.prototype),yc.prototype.constructor=yc,yc.prototype.isMeshDepthMaterial=!0,yc.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},xc.prototype=Object.create(s.prototype),xc.prototype.constructor=xc,xc.prototype.isMeshDistanceMaterial=!0,xc.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Pe.prototype=Object.assign(Object.create(b.prototype),{constructor:Pe,isGroup:!0}),wb.prototype=Object.assign(Object.create(b.prototype),{constructor:wb,isCamera:!0,copy:function(e,t){return b.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new aa),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){b.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),N.prototype=Object.assign(Object.create(wb.prototype),{constructor:N,isPerspectiveCamera:!0,copy:function(e,t){return wb.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*ea.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*ea.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ea.RAD2DEG*Math.atan(Math.tan(.5*ea.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*ea.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*n/a,t-=o.offsetY*r/s,n*=o.width/a,r*=o.height/s}var p=this.filmOffset;0!==p&&(i+=e*p/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Mf.prototype=Object.assign(Object.create(N.prototype),{constructor:Mf,isArrayCamera:!0});var Lf,Lw=new aa,Mw=new aa;function Nw(e,t,r){Lw.setFromMatrixPosition(t.matrixWorld),Mw.setFromMatrixPosition(r.matrixWorld);var n=Lw.distanceTo(Mw),i=t.projectionMatrix.elements,o=r.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),p=(i[9]+1)/i[5],c=(i[9]-1)/i[5],$=(i[8]-1)/i[0],l=(o[8]+1)/o[0],h=a*$,u=a*l,V=n/(-$+l),d=V*-$;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(d),e.translateZ(V),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var f=a+V,m=s+V,x=h-d,v=u+(n-d),g=p*s/m*f,y=c*s/m*f;e.projectionMatrix.makePerspective(x,v,g,y,f,m)}function Ow(e){var t=this,r=null,n=null,i=null,o=[],a=new da,s=new da,p=1,c="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",v,!1));var $=new da,l=new O,h=new aa,u=new N;u.bounds=new fa(0,0,.5,1),u.layers.enable(1);var V=new N;V.bounds=new fa(.5,0,.5,1),V.layers.enable(2);var d,f,m=new Mf([u,V]);function x(){return null!==r&&!0===r.isPresenting}function v(){if(x()){var n=r.getEyeParameters("left"),i=n.renderWidth*p,o=n.renderHeight*p;f=e.getPixelRatio(),d=e.getSize(),e.setDrawingBufferSize(2*i,o,1),b.start()}else t.enabled&&e.setDrawingBufferSize(d.width,d.height,f),b.stop()}m.layers.enable(1),m.layers.enable(2);var g=[];function y(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),r=0,n=0,i=t.length;r<i;r++){var o=t[r];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(n===e)return o;n++}}}this.enabled=!1,this.getController=function(e){var t=o[e];return void 0===t&&((t=new Pe).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),b.setContext(e)},this.setFramebufferScaleFactor=function(e){p=e},this.setFrameOfReferenceType=function(e){c=e},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){var t="stage"===c?1.6:0;if(null===r)return e.position.set(0,t,0),e;if(r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(n),"stage"===c){var p=r.stageParameters;p?a.fromArray(p.sittingToStandingTransform):a.makeTranslation(0,t,0)}var d=n.pose,f=null!==i?i:e;if(f.matrix.copy(a),f.matrix.decompose(f.position,f.quaternion,f.scale),null!==d.orientation&&(l.fromArray(d.orientation),f.quaternion.multiply(l)),null!==d.position&&(l.setFromRotationMatrix(a),h.fromArray(d.position),h.applyQuaternion(l),f.position.add(h)),f.updateMatrixWorld(),!1===r.isPresenting)return e;u.near=e.near,V.near=e.near,u.far=e.far,V.far=e.far,u.matrixWorldInverse.fromArray(n.leftViewMatrix),V.matrixWorldInverse.fromArray(n.rightViewMatrix),s.getInverse(a),"stage"===c&&(u.matrixWorldInverse.multiply(s),V.matrixWorldInverse.multiply(s));var x=f.parent;null!==x&&($.getInverse(x.matrixWorld),u.matrixWorldInverse.multiply($),V.matrixWorldInverse.multiply($)),u.matrixWorld.getInverse(u.matrixWorldInverse),V.matrixWorld.getInverse(V.matrixWorldInverse),u.projectionMatrix.fromArray(n.leftProjectionMatrix),V.projectionMatrix.fromArray(n.rightProjectionMatrix),Nw(m,u,V);var v=r.getLayers();if(v.length){var b=v[0];null!==b.leftBounds&&4===b.leftBounds.length&&u.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&V.bounds.fromArray(b.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],r=y(e);if(void 0!==r&&void 0!==r.pose){if(null===r.pose)return;var n=r.pose;!1===n.hasPosition&&t.position.set(.2,-.6,-.05),null!==n.position&&t.position.fromArray(n.position),null!==n.orientation&&t.quaternion.fromArray(n.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===r.id?0:1;g[e]!==r.buttons[i].pressed&&(g[e]=r.buttons[i].pressed,!0===g[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return a},this.isPresenting=x;var b=new tm;this.setAnimationLoop=function(e){b.setAnimationLoop(e)},this.submitFrame=function(){x()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",v)}}function Tz(e){var t=e.context,r=null,n=null,i=1,o=null,a="stage",s=null,p=[],c=[];function $(){return null!==n&&null!==o}var l=new N;l.layers.enable(1),l.viewport=new fa;var h=new N;h.layers.enable(2),h.viewport=new fa;var u=new Mf([l,h]);function V(e){var t=p[c.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function d(){e.setFramebuffer(null),x.stop()}function f(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}u.layers.enable(1),u.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=p[e];return void 0===t&&((t=new Pe).matrixAutoUpdate=!1,t.visible=!1,p[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){i=e},this.setFrameOfReferenceType=function(e){a=e},this.setSession=function(r){null!==(n=r)&&(n.addEventListener("select",V),n.addEventListener("selectstart",V),n.addEventListener("selectend",V),n.addEventListener("end",d),n.baseLayer=new XRWebGLLayer(n,t,{framebufferScaleFactor:i}),n.requestFrameOfReference(a).then(function(t){o=t,e.setFramebuffer(n.baseLayer.framebuffer),x.setContext(n),x.start()}),c=n.getInputSources(),n.addEventListener("inputsourceschange",function(){c=n.getInputSources(),console.log(c);for(var e=0;e<p.length;e++){p[e].userData.inputSource=c[e]}}))},this.getCamera=function(e){if($()){var t=e.parent,r=u.cameras;f(u,t);for(var n=0;n<r.length;n++)f(r[n],t);e.matrixWorld.copy(u.matrixWorld);for(var i=e.children,o=(n=0,i.length);n<o;n++)i[n].updateMatrixWorld(!0);return Nw(u,l,h),u}return e},this.isPresenting=$;var m=null;var x=new tm;x.setAnimationLoop(function(e,t){if(null!==(s=t.getDevicePose(o)))for(var r=n.baseLayer,i=t.views,a=0;a<i.length;a++){var $=i[a],l=r.getViewport($),h=s.getViewMatrix($),V=u.cameras[a];V.matrix.fromArray(h).getInverse(V.matrix),V.projectionMatrix.fromArray($.projectionMatrix),V.viewport.set(l.x,l.y,l.width,l.height),0===a&&u.matrix.copy(V.matrix)}for(a=0;a<p.length;a++){var d=p[a],f=c[a];if(f){var x=t.getInputPose(f,o);if(null!==x){"targetRay"in x?d.matrix.elements=x.targetRay.transformMatrix:"pointerMatrix"in x&&(d.matrix.elements=x.pointerMatrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.visible=!0;continue}}d.visible=!1}m&&m(e)}),this.setAnimationLoop=function(e){m=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function An(e){console.log("THREE.WebGLRenderer",cp);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,p=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",$=null,l=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Lk,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var h,u,V,d,f,m,x,v,g,y,b,_,M,w,S,T,E,L,A=this,C=!1,P=null,B=null,R=null,G=-1,D={geometry:null,program:null,wireframe:!1},I=null,O=null,F=new fa,U=new fa,N=null,z=0,H=t.width,k=t.height,j=1,W=new fa(0,0,H,k),q=new fa(0,0,H,k),X=!1,Y=new Lj,J=new iB,Z=!1,Q=!1,K=new da,ee=new aa;function te(){return null===B?j:1}try{var re={alpha:n,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:p,powerPreference:c};if(t.addEventListener("webglcontextlost",ae,!1),t.addEventListener("webglcontextrestored",se,!1),null===(h=r||t.getContext("webgl",re)||t.getContext("experimental-webgl",re)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===h.getShaderPrecisionFormat&&(h.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){console.error("THREE.WebGLRenderer: "+ge.message)}function ne(){u=new hB(h),(V=new jB(h,u,e)).isWebGL2||(u.get("WEBGL_depth_texture"),u.get("OES_texture_float"),u.get("OES_texture_half_float"),u.get("OES_texture_half_float_linear"),u.get("OES_standard_derivatives"),u.get("OES_element_index_uint"),u.get("ANGLE_instanced_arrays")),u.get("OES_texture_float_linear"),L=new Fw(h,u,V),(d=new Wz(h,u,L,V)).scissor(U.copy(q).multiplyScalar(j)),d.viewport(F.copy(W).multiplyScalar(j)),f=new aB(h),m=new fA,x=new Vz(h,u,d,m,V,L,f),v=new mC(h),g=new fB(h,v,f),y=new YA(g,f),S=new ZA(h),b=new gA(A,u,V),_=new bA,M=new Zz,w=new HB(A,d,y,s),T=new kB(h,u,f,V),E=new cB(h,u,f,V),f.programs=b.programs,A.context=h,A.capabilities=V,A.extensions=u,A.properties=m,A.renderLists=_,A.state=d,A.info=f}ne();var ie=null;"undefined"!=typeof navigator&&(ie="xr"in navigator?new Tz(A):new Ow(A)),this.vr=ie;var oe=new Cw(A,y,V.maxTextureSize);function ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1,ne()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){ce(e),m.remove(e)}(t)}function ce(e){var t=m.get(e).program;e.program=void 0,void 0!==t&&b.releaseProgram(t)}this.shadowMap=oe,this.getContext=function(){return h},this.getContextAttributes=function(){return h.getContextAttributes()},this.forceContextLoss=function(){var e=u.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=u.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(e){void 0!==e&&(j=e,this.setSize(H,k,!1))},this.getSize=function(){return{width:H,height:k}},this.setSize=function(e,r,n){ie.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=e,k=r,t.width=e*j,t.height=r*j,!1!==n&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(){return{width:H*j,height:k*j}},this.setDrawingBufferSize=function(e,r,n){H=e,k=r,j=n,t.width=e*n,t.height=r*n,this.setViewport(0,0,e,r)},this.getCurrentViewport=function(){return F},this.setViewport=function(e,t,r,n){W.set(e,k-t-n,r,n),d.viewport(F.copy(W).multiplyScalar(j))},this.setScissor=function(e,t,r,n){q.set(e,k-t-n,r,n),d.scissor(U.copy(q).multiplyScalar(j))},this.setScissorTest=function(e){d.setScissorTest(X=e)},this.getClearColor=function(){return w.getClearColor()},this.setClearColor=function(){w.setClearColor.apply(w,arguments)},this.getClearAlpha=function(){return w.getClearAlpha()},this.setClearAlpha=function(){w.setClearAlpha.apply(w,arguments)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===r||r)&&(n|=1024),h.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ae,!1),t.removeEventListener("webglcontextrestored",se,!1),_.dispose(),M.dispose(),m.dispose(),y.dispose(),ie.dispose(),he.stop()},this.renderBufferImmediate=function(e,t){d.initAttributes();var r=m.get(e);e.hasPositions&&!r.position&&(r.position=h.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=h.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=h.createBuffer()),e.hasColors&&!r.color&&(r.color=h.createBuffer());var n=t.getAttributes();e.hasPositions&&(h.bindBuffer(34962,r.position),h.bufferData(34962,e.positionArray,35048),d.enableAttribute(n.position),h.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(h.bindBuffer(34962,r.normal),h.bufferData(34962,e.normalArray,35048),d.enableAttribute(n.normal),h.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(h.bindBuffer(34962,r.uv),h.bufferData(34962,e.uvArray,35048),d.enableAttribute(n.uv),h.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(h.bindBuffer(34962,r.color),h.bufferData(34962,e.colorArray,35048),d.enableAttribute(n.color),h.vertexAttribPointer(n.color,3,5126,!1,0,0)),d.disableUnusedAttributes(),h.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,n,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;d.setMaterial(n,a);var s=fe(e,t,n,i),p=!1;D.geometry===r.id&&D.program===s.id&&D.wireframe===(!0===n.wireframe)||(D.geometry=r.id,D.program=s.id,D.wireframe=!0===n.wireframe,p=!0),i.morphTargetInfluences&&(S.update(i,r,n,s),p=!0);var c,$=r.index,l=r.attributes.position,f=1;!0===n.wireframe&&($=g.getWireframeAttribute(r),f=2);var m=T;null!==$&&(c=v.get($),(m=E).setIndex(c)),p&&(!function(e,t,r){if(r&&r.isInstancedBufferGeometry&!V.isWebGL2&&null===u.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d.initAttributes();var n=r.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var p=n[a];if(void 0!==p){var c=p.normalized,$=p.itemSize,l=v.get(p);if(void 0===l)continue;var f=l.buffer,m=l.type,x=l.bytesPerElement;if(p.isInterleavedBufferAttribute){var g=p.data,y=g.stride,b=p.offset;g&&g.isInstancedInterleavedBuffer?(d.enableAttributeAndDivisor(s,g.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=g.meshPerAttribute*g.count)):d.enableAttribute(s),h.bindBuffer(34962,f),h.vertexAttribPointer(s,$,m,c,y*x,b*x)}else p.isInstancedBufferAttribute?(d.enableAttributeAndDivisor(s,p.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=p.meshPerAttribute*p.count)):d.enableAttribute(s),h.bindBuffer(34962,f),h.vertexAttribPointer(s,$,m,c,0,0)}else if(void 0!==o){var _=o[a];if(void 0!==_)switch(_.length){case 2:h.vertexAttrib2fv(s,_);break;case 3:h.vertexAttrib3fv(s,_);break;case 4:h.vertexAttrib4fv(s,_);break;default:h.vertexAttrib1fv(s,_);}}}}d.disableUnusedAttributes()}(n,s,r),null!==$&&h.bindBuffer(34963,c.buffer));var x=1/0;null!==$?x=$.count:void 0!==l&&(x=l.count);var y=r.drawRange.start*f,b=r.drawRange.count*f,_=null!==o?o.start*f:0,M=null!==o?o.count*f:1/0,w=Math.max(y,_),L=Math.min(x,y+b,_+M)-1,A=Math.max(0,L-w+1);if(0!==A){if(i.isMesh){if(!0===n.wireframe)d.setLineWidth(n.wireframeLinewidth*te()),m.setMode(1);else switch(i.drawMode){case ol:m.setMode(4);break;case wr:m.setMode(5);break;case xr:m.setMode(6);}}else if(i.isLine){var C=n.linewidth;void 0===C&&(C=1),d.setLineWidth(C*te()),i.isLineSegments?m.setMode(1):i.isLineLoop?m.setMode(2):m.setMode(3)}else i.isPoints?m.setMode(0):i.isSprite&&m.setMode(4);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&m.renderInstances(r,w,A):m.render(w,A)}},this.compile=function(e,t){(l=M.get(e,t)).init(),e.traverse(function(e){e.isLight&&(l.pushLight(e),e.castShadow&&l.pushShadow(e))}),l.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)de(t.material[r],e.fog,t);else de(t.material,e.fog,t)})};var $e=null;var le,he=new tm;function ue(e,t,r,n){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,p=a.geometry,c=void 0===n?a.material:n,$=a.group;if(r.isArrayCamera){O=r;for(var h=r.cameras,u=0,V=h.length;u<V;u++){var f=h[u];if(s.layers.test(f.layers)){if("viewport"in f)d.viewport(F.copy(f.viewport));else{var m=f.bounds,x=m.x*H,v=m.y*k,g=m.z*H,y=m.w*k;d.viewport(F.set(x,v,g,y).multiplyScalar(j))}l.setupLights(f),Ve(s,t,f,p,c,$)}}}else O=null,Ve(s,t,r,p,c,$)}}function Ve(e,t,r,n,i,o){if(e.onBeforeRender(A,t,r,n,i,o),l=M.get(t,O||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){d.setMaterial(i);var a=fe(r,t.fog,i,e);D.geometry=null,D.program=null,D.wireframe=!1,function(e,t){e.render(function(e){A.renderBufferImmediate(e,t)})}(e,a)}else A.renderBufferDirect(r,t.fog,n,i,e,o);e.onAfterRender(A,t,r,n,i,o),l=M.get(t,O||r)}function de(e,t,r){var n=m.get(e),i=l.state.lights,o=l.state.shadowsArray,a=n.lightsHash,s=i.state.hash,p=b.getParameters(e,i.state,o,t,J.numPlanes,J.numIntersection,r),c=b.getProgramCode(e,p),$=n.program,h=!0;if(void 0===$)e.addEventListener("dispose",pe);else if($.code!==c)ce(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,h=!1;else{if(void 0!==p.shaderID)return;h=!1}if(h){if(p.shaderID){var u=Gb[p.shaderID];n.shader={name:e.type,uniforms:ga.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(n.shader,A),c=b.getProgramCode(e,p),$=b.acquireProgram(e,n.shader,p,c),n.program=$,e.program=$}var V=$.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<A.maxMorphTargets;d++)V["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(d=0;d<A.maxMorphNormals;d++)V["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var f=n.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=J.numPlanes,n.numIntersection=J.numIntersection,f.clippingPlanes=J.uniform),n.fog=t,void 0===a&&(n.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(f.ambientLightColor.value=i.state.ambient,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var x=n.program.getUniforms(),v=Cc.seqWithValue(x.seq,f);n.uniformsList=v}function fe(e,t,r,n){z=0;var i=m.get(r),o=l.state.lights,a=i.lightsHash,s=o.state.hash;if(Z&&(Q||e!==I)){var p=e===I&&r.id===G;J.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,p)}!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==t?r.needsUpdate=!0:(!r.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===J.numPlanes&&i.numIntersection===J.numIntersection)||(r.needsUpdate=!0)),r.needsUpdate&&(de(r,t,n),r.needsUpdate=!1);var c,$,u=!1,f=!1,x=!1,v=i.program,g=v.getUniforms(),y=i.shader.uniforms;if(d.useProgram(v.program)&&(u=!0,f=!0,x=!0),r.id!==G&&(G=r.id,f=!0),u||I!==e){if(g.setValue(h,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&g.setValue(h,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),I!==e&&(I=e,f=!0,x=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var b=g.map.cameraPosition;void 0!==b&&b.setValue(h,ee.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&g.setValue(h,"viewMatrix",e.matrixWorldInverse)}if(r.skinning){g.setOptional(h,n,"bindMatrix"),g.setOptional(h,n,"bindMatrixInverse");var _=n.skeleton;if(_){var M=_.bones;if(V.floatVertexTextures){if(void 0===_.boneTexture){var w=Math.sqrt(4*M.length);w=ea.ceilPowerOfTwo(w),w=Math.max(w,4);var S=new Float32Array(w*w*4);S.set(_.boneMatrices);var T=new xd(S,w,w,ob,pf);T.needsUpdate=!0,_.boneMatrices=S,_.boneTexture=T,_.boneTextureSize=w}g.setValue(h,"boneTexture",_.boneTexture),g.setValue(h,"boneTextureSize",_.boneTextureSize)}else g.setOptional(h,_,"boneMatrices")}}return f&&(g.setValue(h,"toneMappingExposure",A.toneMappingExposure),g.setValue(h,"toneMappingWhitePoint",A.toneMappingWhitePoint),r.lights&&($=x,(c=y).ambientLightColor.needsUpdate=$,c.directionalLights.needsUpdate=$,c.pointLights.needsUpdate=$,c.spotLights.needsUpdate=$,c.rectAreaLights.needsUpdate=$,c.hemisphereLights.needsUpdate=$),t&&r.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(y,t),r.isMeshBasicMaterial?me(y,r):r.isMeshLambertMaterial?(me(y,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(y,r)):r.isMeshPhongMaterial?(me(y,r),r.isMeshToonMaterial?function(e,t){xe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(y,r):xe(y,r)):r.isMeshStandardMaterial?(me(y,r),r.isMeshPhysicalMaterial?function(e,t){ve(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(y,r):ve(y,r)):r.isMeshMatcapMaterial?(me(y,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,r)):r.isMeshDepthMaterial?(me(y,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,r)):r.isMeshDistanceMaterial?(me(y,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(y,r)):r.isMeshNormalMaterial?(me(y,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(y,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(y,r)):r.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*j,e.scale.value=.5*k,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(y,r):r.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(y,r):r.isShadowMaterial&&(y.color.value=r.color,y.opacity.value=r.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=ca.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=ca.LTC_2),Cc.upload(h,i.uniformsList,y,A)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Cc.upload(h,i.uniformsList,y,A),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&g.setValue(h,"center",n.center),g.setValue(h,"modelViewMatrix",n.modelViewMatrix),g.setValue(h,"normalMatrix",n.normalMatrix),g.setValue(h,"modelMatrix",n.matrixWorld),v}function me(e,t){var r;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=m.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}function xe(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function ve(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}he.setAnimationLoop(function(e){ie.isPresenting()||$e&&$e(e)}),"undefined"!=typeof window&&he.setContext(window),this.setAnimationLoop=function(e){$e=e,ie.setAnimationLoop(e),he.start()},this.render=function(e,t,r,n){if(t&&t.isCamera){if(!C){D.geometry=null,D.program=null,D.wireframe=!1,G=-1,I=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ie.enabled&&(t=ie.getCamera(t)),(l=M.get(e,t)).init(),e.onBeforeRender(A,e,t,r),K.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Y.setFromMatrix(K),Q=this.localClippingEnabled,Z=J.init(this.clippingPlanes,Q,t),($=_.get(e,t)).init(),function e(t,r,n){if(!1===t.visible)return;var i=t.layers.test(r.layers);if(i)if(t.isLight)l.pushLight(t),t.castShadow&&l.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Y.intersectsSprite(t)){n&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4(K);var o=y.update(t),a=t.material;$.push(t,o,a,ee.z,null)}}else if(t.isImmediateRenderObject)n&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4(K),$.push(t,null,t.material,ee.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Y.intersectsObject(t))){n&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4(K);var o=y.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,p=0,c=s.length;p<c;p++){var h=s[p],u=a[h.materialIndex];u&&u.visible&&$.push(t,o,u,ee.z,h)}else a.visible&&$.push(t,o,a,ee.z,null)}var V=t.children;for(var p=0,c=V.length;p<c;p++)e(V[p],r,n)}(e,t,A.sortObjects),!0===A.sortObjects&&$.sort(),Z&&J.beginShadows();var i=l.state.shadowsArray;oe.render(i,e,t),l.setupLights(t),Z&&J.endShadows(),this.info.autoReset&&this.info.reset(),void 0===r&&(r=null),this.setRenderTarget(r),w.render($,e,t,n);var o=$.opaque,a=$.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&ue(o,e,t,s),a.length&&ue(a,e,t,s)}else o.length&&ue(o,e,t),a.length&&ue(a,e,t);r&&x.updateRenderTargetMipmap(r),d.buffers.depth.setTest(!0),d.buffers.depth.setMask(!0),d.buffers.color.setMask(!0),d.setPolygonOffset(!1),e.onAfterRender(A,e,t),ie.enabled&&ie.submitFrame(),$=null,l=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=z;return e>=V.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+V.maxTextures),z+=1,e},this.setTexture2D=(le=!1,function(e,t){e&&e.isWebGLRenderTarget&&(le||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),le=!0),e=e.texture),x.setTexture2D(e,t)}),this.setTexture3D=function(e,t){x.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),x.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?x.setTextureCube(t,r):x.setTextureCubeDynamic(t,r)}}(),this.setFramebuffer=function(e){P=e},this.getRenderTarget=function(){return B},this.setRenderTarget=function(e){B=e,e&&void 0===m.get(e).__webglFramebuffer&&x.setupRenderTarget(e);var t=P,r=!1;if(e){var n=m.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=n[e.activeCubeFace],r=!0):t=n,F.copy(e.viewport),U.copy(e.scissor),N=e.scissorTest}else F.copy(W).multiplyScalar(j),U.copy(q).multiplyScalar(j),N=X;if(R!==t&&(h.bindFramebuffer(36160,t),R=t),d.viewport(F),d.scissor(U),d.setScissorTest(N),r){var i=m.get(e.texture);h.framebufferTexture2D(36160,36064,34069+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,n,i,o){if(e&&e.isWebGLRenderTarget){var a=m.get(e).__webglFramebuffer;if(a){var s=!1;a!==R&&(h.bindFramebuffer(36160,a),s=!0);try{var p=e.texture,c=p.format,$=p.type;if(c!==ob&&L.convert(c)!==h.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!($===yh||L.convert($)===h.getParameter(35738)||$===pf&&(V.isWebGL2||u.get("OES_texture_float")||u.get("WEBGL_color_buffer_float"))||$===Oj&&(V.isWebGL2?u.get("EXT_color_buffer_float"):u.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===h.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&h.readPixels(t,r,n,i,L.convert(c),L.convert($),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&h.bindFramebuffer(36160,R)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,r){var n=t.image.width,i=t.image.height,o=L.convert(t.format);this.setTexture2D(t,0),h.copyTexImage2D(3553,r||0,o,e.x,e.y,n,i,0)},this.copyTextureToTexture=function(e,t,r,n){var i=t.image.width,o=t.image.height,a=L.convert(r.format),s=L.convert(r.type);this.setTexture2D(r,0),t.isDataTexture?h.texSubImage2D(3553,n||0,e.x,e.y,i,o,a,s,t.image.data):h.texSubImage2D(3553,n||0,e.x,e.y,a,s,t.image)}}function Je(e,t){this.name="",this.color=new z(e),this.density=void 0!==t?t:25e-5}function Ee(e,t,r){this.name="",this.color=new z(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function zf(){b.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function _c(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function rf(e,t,r,n){this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function vc(e){s.call(this),this.type="SpriteMaterial",this.color=new z(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function qh(e){if(b.call(this),this.type="Sprite",void 0===Lf){Lf=new q;var t=new _c(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Lf.setIndex([0,1,2,0,2,3]),Lf.addAttribute("position",new rf(t,3,0,!1)),Lf.addAttribute("uv",new rf(t,2,3,!1))}this.geometry=Lf,this.material=void 0!==e?e:new vc,this.center=new ba(.5,.5)}function nh(){b.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function kh(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new da)}}function ki(){b.call(this),this.type="Bone"}function ji(e,t){Aa.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new da,this.bindMatrixInverse=new da;var r=new kh(this.initBones());this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function D(e){s.call(this),this.type="LineBasicMaterial",this.color=new z(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function xa(e,t,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),b.call(this),this.type="Line",this.geometry=void 0!==e?e:new q,this.material=void 0!==t?t:new D({color:16777215*Math.random()})}function F(e,t){xa.call(this,e,t),this.type="LineSegments"}function ei(e,t){xa.call(this,e,t),this.type="LineLoop"}function lb(e){s.call(this),this.type="PointsMaterial",this.color=new z(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Zd(e,t){b.call(this),this.type="Points",this.geometry=void 0!==e?e:new q,this.material=void 0!==t?t:new lb({color:16777215*Math.random()})}function Nn(e,t,r,n,i,o,a,s,p){E.call(this,e,t,r,n,i,o,a,s,p),this.generateMipmaps=!1}function Xd(e,t,r,n,i,o,a,s,p,c,$,l){E.call(this,null,o,a,s,p,c,n,i,$,l),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Yg(e,t,r,n,i,o,a,s,p){E.call(this,e,t,r,n,i,o,a,s,p),this.needsUpdate=!0}function Xg(e,t,r,n,i,o,a,s,p,c){if((c=void 0!==c?c:Bd)!==Bd&&c!==kf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&c===Bd&&(r=wf),void 0===r&&c===kf&&(r=uf),E.call(this,null,n,i,o,a,s,c,r,p),this.image={width:e,height:t},this.magFilter=void 0!==a?a:ta,this.minFilter=void 0!==s?s:ta,this.flipY=!1,this.generateMipmaps=!1}function Sd(e){q.call(this),this.type="WireframeGeometry";var t,r,n,i,o,a,s,p,c,$,l=[],h=[0,0],u={},V=["a","b","c"];if(e&&e.isGeometry){var d=e.faces;for(t=0,n=d.length;t<n;t++){var f=d[t];for(r=0;r<3;r++)s=f[V[r]],p=f[V[(r+1)%3]],h[0]=Math.min(s,p),h[1]=Math.max(s,p),void 0===u[c=h[0]+","+h[1]]&&(u[c]={index1:h[0],index2:h[1]})}for(c in u)a=u[c],$=e.vertices[a.index1],l.push($.x,$.y,$.z),$=e.vertices[a.index2],l.push($.x,$.y,$.z)}else if(e&&e.isBufferGeometry){var m,x,v,g,y,b,_;if($=new aa,null!==e.index){for(m=e.attributes.position,x=e.index,0===(v=e.groups).length&&(v=[{start:0,count:x.count,materialIndex:0}]),i=0,o=v.length;i<o;++i)for(t=y=(g=v[i]).start,n=y+g.count;t<n;t+=3)for(r=0;r<3;r++)s=x.getX(t+r),p=x.getX(t+(r+1)%3),h[0]=Math.min(s,p),h[1]=Math.max(s,p),void 0===u[c=h[0]+","+h[1]]&&(u[c]={index1:h[0],index2:h[1]});for(c in u)a=u[c],$.fromBufferAttribute(m,a.index1),l.push($.x,$.y,$.z),$.fromBufferAttribute(m,a.index2),l.push($.x,$.y,$.z)}else for(t=0,n=(m=e.attributes.position).count/3;t<n;t++)for(r=0;r<3;r++)b=3*t+r,$.fromBufferAttribute(m,b),l.push($.x,$.y,$.z),_=3*t+(r+1)%3,$.fromBufferAttribute(m,_),l.push($.x,$.y,$.z)}this.addAttribute("position",new k(l,3))}function Vg(e,t,r){v.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new Rd(e,t,r)),this.mergeVertices()}function Rd(e,t,r){q.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,o=[],a=[],s=[],p=[],c=new aa,$=new aa,l=new aa,h=new aa,u=new aa;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var V=t+1;for(n=0;n<=r;n++){var d=n/r;for(i=0;i<=t;i++){var f=i/t;e(f,d,$),a.push($.x,$.y,$.z),f-1e-5>=0?(e(f-1e-5,d,l),h.subVectors($,l)):(e(f+1e-5,d,l),h.subVectors(l,$)),d-1e-5>=0?(e(f,d-1e-5,l),u.subVectors($,l)):(e(f,d+1e-5,l),u.subVectors(l,$)),c.crossVectors(h,u).normalize(),s.push(c.x,c.y,c.z),p.push(f,d)}}for(n=0;n<r;n++)for(i=0;i<t;i++){var m=n*V+i,x=n*V+i+1,v=(n+1)*V+i+1,g=(n+1)*V+i;o.push(m,x,g),o.push(x,v,g)}this.setIndex(o),this.addAttribute("position",new k(a,3)),this.addAttribute("normal",new k(s,3)),this.addAttribute("uv",new k(p,2))}function Tg(e,t,r,n){v.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new ya(e,t,r,n)),this.mergeVertices()}function ya(e,t,r,n){q.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1;var i=[],o=[];function a(e,t,r,n){var i,o,a=Math.pow(2,n),p=[];for(i=0;i<=a;i++){p[i]=[];var c=e.clone().lerp(r,i/a),$=t.clone().lerp(r,i/a),l=a-i;for(o=0;o<=l;o++)p[i][o]=0===o&&i===a?c:c.clone().lerp($,o/l)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var h=Math.floor(o/2);o%2==0?(s(p[i][h+1]),s(p[i+1][h]),s(p[i][h])):(s(p[i][h+1]),s(p[i+1][h+1]),s(p[i+1][h]))}}function s(e){i.push(e.x,e.y,e.z)}function p(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function c(e,t,r,n){n<0&&1===e.x&&(o[t]=e.x-1),0===r.x&&0===r.z&&(o[t]=n/2/Math.PI+.5)}function $(e){return Math.atan2(e.z,-e.x)}!function(e){for(var r=new aa,n=new aa,i=new aa,o=0;o<t.length;o+=3)p(t[o+0],r),p(t[o+1],n),p(t[o+2],i),a(r,n,i,e)}(n=n||0),function(e){for(var t=new aa,r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}(r),function(){for(var e=new aa,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var r=$(e)/2/Math.PI+.5,n=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(r,1-n)}var a;(function(){for(var e=new aa,t=new aa,r=new aa,n=new aa,a=new ba,s=new ba,p=new ba,l=0,h=0;l<i.length;l+=9,h+=6){e.set(i[l+0],i[l+1],i[l+2]),t.set(i[l+3],i[l+4],i[l+5]),r.set(i[l+6],i[l+7],i[l+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),p.set(o[h+4],o[h+5]),n.copy(e).add(t).add(r).divideScalar(3);var u=$(n);c(a,h+0,e,u),c(s,h+2,t,u),c(p,h+4,r,u)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],r=o[e+2],n=o[e+4],i=Math.max(t,r,n),a=Math.min(t,r,n);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),r<.2&&(o[e+2]+=1),n<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new k(i,3)),this.addAttribute("normal",new k(i.slice(),3)),this.addAttribute("uv",new k(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function Qg(e,t){v.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nd(e,t)),this.mergeVertices()}function Nd(e,t){ya.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Mg(e,t){v.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Gd(e,t)),this.mergeVertices()}function Gd(e,t){ya.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Kg(e,t){v.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new af(e,t)),this.mergeVertices()}function af(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];ya.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Dg(e,t){v.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ue(e,t)),this.mergeVertices()}function Ue(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];ya.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ug(e,t,r,n,i,o){v.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Qe(e,t,r,n,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Qe(e,t,r,n,i){q.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},t=t||64,r=r||1,n=n||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,p=new aa,c=new aa,$=new ba,l=new aa,h=[],u=[],V=[],d=[];function f(i){l=e.getPointAt(i/t,l);var a=o.normals[i],$=o.binormals[i];for(s=0;s<=n;s++){var V=s/n*Math.PI*2,d=Math.sin(V),f=-Math.cos(V);c.x=f*a.x+d*$.x,c.y=f*a.y+d*$.y,c.z=f*a.z+d*$.z,c.normalize(),u.push(c.x,c.y,c.z),p.x=l.x+r*c.x,p.y=l.y+r*c.y,p.z=l.z+r*c.z,h.push(p.x,p.y,p.z)}}!function(){for(a=0;a<t;a++)f(a);f(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=n;s++)$.x=a/t,$.y=s/n,V.push($.x,$.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=n;a++){var e=(n+1)*(s-1)+(a-1),r=(n+1)*s+(a-1),i=(n+1)*s+a,o=(n+1)*(s-1)+a;d.push(e,r,o),d.push(r,i,o)}}()}(),this.setIndex(d),this.addAttribute("position",new k(h,3)),this.addAttribute("normal",new k(u,3)),this.addAttribute("uv",new k(V,2))}function rg(e,t,r,n,i,o,a){v.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Oe(e,t,r,n,i,o)),this.mergeVertices()}function Oe(e,t,r,n,i,o){q.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},e=e||1,t=t||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,o=o||3;var a,s,p=[],c=[],$=[],l=[],h=new aa,u=new aa,V=new aa,d=new aa,f=new aa,m=new aa,x=new aa;for(a=0;a<=r;++a){var v=a/r*i*Math.PI*2;for(T(v,i,o,e,V),T(v+.01,i,o,e,d),m.subVectors(d,V),x.addVectors(d,V),f.crossVectors(m,x),x.crossVectors(f,m),f.normalize(),x.normalize(),s=0;s<=n;++s){var g=s/n*Math.PI*2,y=-t*Math.cos(g),b=t*Math.sin(g);h.x=V.x+(y*x.x+b*f.x),h.y=V.y+(y*x.y+b*f.y),h.z=V.z+(y*x.z+b*f.z),c.push(h.x,h.y,h.z),u.subVectors(h,V).normalize(),$.push(u.x,u.y,u.z),l.push(a/r),l.push(s/n)}}for(s=1;s<=r;s++)for(a=1;a<=n;a++){var _=(n+1)*(s-1)+(a-1),M=(n+1)*s+(a-1),w=(n+1)*s+a,S=(n+1)*(s-1)+a;p.push(_,M,S),p.push(M,w,S)}function T(e,t,r,n,i){var o=Math.cos(e),a=Math.sin(e),s=r/t*e,p=Math.cos(s);i.x=n*(2+p)*.5*o,i.y=n*(2+p)*a*.5,i.z=n*Math.sin(s)*.5}this.setIndex(p),this.addAttribute("position",new k(c,3)),this.addAttribute("normal",new k($,3)),this.addAttribute("uv",new k(l,2))}function pg(e,t,r,n,i){v.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new ye(e,t,r,n,i)),this.mergeVertices()}function ye(e,t,r,n,i){q.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||1,t=t||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var o,a,s=[],p=[],c=[],$=[],l=new aa,h=new aa,u=new aa;for(o=0;o<=r;o++)for(a=0;a<=n;a++){var V=a/n*i,d=o/r*Math.PI*2;h.x=(e+t*Math.cos(d))*Math.cos(V),h.y=(e+t*Math.cos(d))*Math.sin(V),h.z=t*Math.sin(d),p.push(h.x,h.y,h.z),l.x=e*Math.cos(V),l.y=e*Math.sin(V),u.subVectors(h,l).normalize(),c.push(u.x,u.y,u.z),$.push(a/n),$.push(o/r)}for(o=1;o<=r;o++)for(a=1;a<=n;a++){var f=(n+1)*o+a-1,m=(n+1)*(o-1)+a-1,x=(n+1)*(o-1)+a,v=(n+1)*o+a;s.push(f,m,v),s.push(m,x,v)}this.setIndex(s),this.addAttribute("position",new k(p,3)),this.addAttribute("normal",new k(c,3)),this.addAttribute("uv",new k($,2))}Je.prototype.isFogExp2=!0,Je.prototype.clone=function(){return new Je(this.color,this.density)},Je.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Ee.prototype.isFog=!0,Ee.prototype.clone=function(){return new Ee(this.color,this.near,this.far)},Ee.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},zf.prototype=Object.assign(Object.create(b.prototype),{constructor:zf,copy:function(e,t){return b.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(_c.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(_c.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(rf.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(rf.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}}),vc.prototype=Object.create(s.prototype),vc.prototype.constructor=vc,vc.prototype.isSpriteMaterial=!0,vc.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},qh.prototype=Object.assign(Object.create(b.prototype),{constructor:qh,isSprite:!0,raycast:function(){var e=new aa,t=new aa,r=new aa,n=new ba,i=new ba,o=new da,a=new aa,s=new aa,p=new aa,c=new ba,$=new ba,l=new ba;function h(e,t,r,a,s,p){n.subVectors(e,r).addScalar(.5).multiply(a),void 0!==s?(i.x=p*n.x-s*n.y,i.y=s*n.x+p*n.y):i.copy(n),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(n,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),r.setFromMatrixPosition(this.modelViewMatrix);var u,V,d=this.material.rotation;0!==d&&(V=Math.cos(d),u=Math.sin(d));var f=this.center;h(a.set(-.5,-.5,0),r,f,t,u,V),h(s.set(.5,-.5,0),r,f,t,u,V),h(p.set(.5,.5,0),r,f,t,u,V),c.set(0,0),$.set(1,0),l.set(1,1);var m=n.ray.intersectTriangle(a,s,p,!1,e);if(null!==m||(h(s.set(-.5,.5,0),r,f,t,u,V),$.set(0,1),null!==(m=n.ray.intersectTriangle(a,p,s,!1,e)))){var x=n.ray.origin.distanceTo(e);x<n.near||x>n.far||i.push({distance:x,point:e.clone(),uv:ia.getUV(e,a,s,p,c,$,l,new ba),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return b.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),nh.prototype=Object.assign(Object.create(b.prototype),{constructor:nh,copy:function(e){b.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new aa;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,r)}}(),update:function(){var e=new aa,t=new aa;return function(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);n[0].object.visible=!0;for(var o=1,a=n.length;o<a&&i>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;o<a;o++)n[o].object.visible=!1}}}(),toJSON:function(e){var t=b.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var o=r[n];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(kh.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new da;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new da,t=new da;return function(){for(var r=this.bones,n=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=r.length;a<s;a++){var p=r[a]?r[a].matrixWorld:t;e.multiplyMatrices(p,n[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new kh(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}}}),ki.prototype=Object.assign(Object.create(b.prototype),{constructor:ki,isBone:!0}),ji.prototype=Object.assign(Object.create(Aa.prototype),{constructor:ji,isSkinnedMesh:!0,initBones:function(){var e,t,r,n,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(r=0,n=this.geometry.bones.length;r<n;r++)t=this.geometry.bones[r],e=new ki,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(r=0,n=this.geometry.bones.length;r<n;r++)-1!==(t=this.geometry.bones[r]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[r]):this.add(i[r])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var r=this.geometry.skinWeights[t];(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new fa,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)n.x=i.getX(t),n.y=i.getY(t),n.z=i.getZ(t),n.w=i.getW(t),(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0),i.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(e){Aa.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),D.prototype=Object.create(s.prototype),D.prototype.constructor=D,D.prototype.isLineBasicMaterial=!0,D.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},xa.prototype=Object.assign(Object.create(b.prototype),{constructor:xa,isLine:!0,computeLineDistances:function(){var e=new aa,t=new aa;return function(){var r=this.geometry;if(r.isBufferGeometry){if(null===r.index){for(var n=r.attributes.position,i=[0],o=1,a=n.count;o<a;o++)e.fromBufferAttribute(n,o-1),t.fromBufferAttribute(n,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);r.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(r.isGeometry){var s=r.vertices;(i=r.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new da,t=new Hd,r=new jb;return function(n,i){var o=n.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(s),r.radius+=o,!1!==n.ray.intersectsSphere(r)){e.getInverse(s),t.copy(n.ray).applyMatrix4(e);var p=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=p*p,$=new aa,l=new aa,h=new aa,u=new aa,V=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var d=a.index,f=a.attributes.position.array;if(null!==d)for(var m=d.array,x=0,v=m.length-1;x<v;x+=V){var g=m[x],y=m[x+1];if($.fromArray(f,3*g),l.fromArray(f,3*y),!(t.distanceSqToSegment($,l,u,h)>c))u.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(u))<n.near||M>n.far||i.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(x=0,v=f.length/3-1;x<v;x+=V){if($.fromArray(f,3*x),l.fromArray(f,3*x+3),!(t.distanceSqToSegment($,l,u,h)>c))u.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(u))<n.near||M>n.far||i.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var b=a.vertices,_=b.length;for(x=0;x<_-1;x+=V){var M;if(!(t.distanceSqToSegment(b[x],b[x+1],u,h)>c))u.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(u))<n.near||M>n.far||i.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}}(),copy:function(e){return b.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}}),F.prototype=Object.assign(Object.create(xa.prototype),{constructor:F,isLineSegments:!0,computeLineDistances:function(){var e=new aa,t=new aa;return function(){var r=this.geometry;if(r.isBufferGeometry){if(null===r.index){for(var n=r.attributes.position,i=[],o=0,a=n.count;o<a;o+=2)e.fromBufferAttribute(n,o),t.fromBufferAttribute(n,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);r.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(r.isGeometry){var s=r.vertices;for(i=r.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),ei.prototype=Object.assign(Object.create(xa.prototype),{constructor:ei,isLineLoop:!0}),lb.prototype=Object.create(s.prototype),lb.prototype.constructor=lb,lb.prototype.isPointsMaterial=!0,lb.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Zd.prototype=Object.assign(Object.create(b.prototype),{constructor:Zd,isPoints:!0,raycast:function(){var e=new da,t=new Hd,r=new jb;return function(n,i){var o=this,a=this.geometry,s=this.matrixWorld,p=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(s),r.radius+=p,!1!==n.ray.intersectsSphere(r)){e.getInverse(s),t.copy(n.ray).applyMatrix4(e);var c=p/((this.scale.x+this.scale.y+this.scale.z)/3),$=c*c,l=new aa,h=new aa;if(a.isBufferGeometry){var u=a.index,V=a.attributes.position.array;if(null!==u)for(var d=u.array,f=0,m=d.length;f<m;f++){var x=d[f];l.fromArray(V,3*x),y(l,x)}else{f=0;for(var v=V.length/3;f<v;f++)l.fromArray(V,3*f),y(l,f)}}else{var g=a.vertices;for(f=0,v=g.length;f<v;f++)y(g[f],f)}}function y(e,r){var a=t.distanceSqToPoint(e);if(a<$){t.closestPointToPoint(e,h),h.applyMatrix4(s);var p=n.ray.origin.distanceTo(h);if(p<n.near||p>n.far)return;i.push({distance:p,distanceToRay:Math.sqrt(a),point:h.clone(),index:r,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Nn.prototype=Object.assign(Object.create(E.prototype),{constructor:Nn,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Xd.prototype=Object.create(E.prototype),Xd.prototype.constructor=Xd,Xd.prototype.isCompressedTexture=!0,Yg.prototype=Object.create(E.prototype),Yg.prototype.constructor=Yg,Yg.prototype.isCanvasTexture=!0,Xg.prototype=Object.create(E.prototype),Xg.prototype.constructor=Xg,Xg.prototype.isDepthTexture=!0,Sd.prototype=Object.create(q.prototype),Sd.prototype.constructor=Sd,Vg.prototype=Object.create(v.prototype),Vg.prototype.constructor=Vg,Rd.prototype=Object.create(q.prototype),Rd.prototype.constructor=Rd,Tg.prototype=Object.create(v.prototype),Tg.prototype.constructor=Tg,ya.prototype=Object.create(q.prototype),ya.prototype.constructor=ya,Qg.prototype=Object.create(v.prototype),Qg.prototype.constructor=Qg,Nd.prototype=Object.create(ya.prototype),Nd.prototype.constructor=Nd,Mg.prototype=Object.create(v.prototype),Mg.prototype.constructor=Mg,Gd.prototype=Object.create(ya.prototype),Gd.prototype.constructor=Gd,Kg.prototype=Object.create(v.prototype),Kg.prototype.constructor=Kg,af.prototype=Object.create(ya.prototype),af.prototype.constructor=af,Dg.prototype=Object.create(v.prototype),Dg.prototype.constructor=Dg,Ue.prototype=Object.create(ya.prototype),Ue.prototype.constructor=Ue,ug.prototype=Object.create(v.prototype),ug.prototype.constructor=ug,Qe.prototype=Object.create(q.prototype),Qe.prototype.constructor=Qe,rg.prototype=Object.create(v.prototype),rg.prototype.constructor=rg,Oe.prototype=Object.create(q.prototype),Oe.prototype.constructor=Oe,pg.prototype=Object.create(v.prototype),pg.prototype.constructor=pg,ye.prototype=Object.create(q.prototype),ye.prototype.constructor=ye;var Iz={triangulate:function(e,t,r){r=r||2;var n,i,o,a,s,p,c,$=t&&t.length,l=$?t[0]*r:e.length,h=Ex(e,0,l,r,!0),u=[];if(!h)return u;if($&&(h=uz(e,t,h,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var V=r;V<l;V+=r)(s=e[V])<n&&(n=s),(p=e[V+1])<i&&(i=p),s>o&&(o=s),p>a&&(a=p);c=0!==(c=Math.max(o-n,a-i))?1/c:0}return dg(h,u,r,n,i,c),u}};function Ex(e,t,r,n,i){var o,a;if(i===gz(e,t,r,n)>0)for(o=t;o<r;o+=n)a=ay(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=ay(o,e[o],e[o+1],a);return a&&td(a,a.next)&&(_f(a),a=a.next),a}function eg(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!td(n,n.next)&&0!==ra(n.prev,n,n.next))n=n.next;else{if(_f(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function dg(e,t,r,n,i,o,a){if(e){!a&&o&&qz(e,n,i,o);for(var s,p,c=e;e.prev!==e.next;)if(s=e.prev,p=e.next,o?Bz(e,n,i,o):Gz(e))t.push(s.i/r),t.push(e.i/r),t.push(p.i/r),_f(e),e=p.next,c=p.next;else if((e=p)===c){a?1===a?dg(e=xz(e,t,r),t,r,n,i,o,2):2===a&&vz(e,t,r,n,i,o):dg(eg(e),t,r,n,i,o,1);break}}}function Gz(e){var t=e.prev,r=e,n=e.next;if(ra(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Qh(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&ra(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Bz(e,t,r,n){var i=e.prev,o=e,a=e.next;if(ra(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,p=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,$=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=fo(s,p,t,r,n),h=fo(c,$,t,r,n),u=e.nextZ;u&&u.z<=h;){if(u!==e.prev&&u!==e.next&&Qh(i.x,i.y,o.x,o.y,a.x,a.y,u.x,u.y)&&ra(u.prev,u,u.next)>=0)return!1;u=u.nextZ}for(u=e.prevZ;u&&u.z>=l;){if(u!==e.prev&&u!==e.next&&Qh(i.x,i.y,o.x,o.y,a.x,a.y,u.x,u.y)&&ra(u.prev,u,u.next)>=0)return!1;u=u.prevZ}return!0}function xz(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!td(i,o)&&Xx(i,n,n.next,o)&&ag(i,o)&&ag(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),_f(n),_f(n.next),n=e=o),n=n.next}while(n!==e);return n}function vz(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&nz(a,s)){var p=_x(a,s);return a=eg(a,a.next),p=eg(p,p.next),dg(a,t,r,n,i,o),void dg(p,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function uz(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Ex(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(oz(a));for(s.sort(tz),i=0;i<s.length;i++)sz(s[i],r),r=eg(r,r.next);return r}function tz(e,t){return e.x-t.x}function sz(e,t){if(t=rz(e,t)){var r=_x(t,e);eg(r,r.next)}}function rz(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var p,c=r,$=r.x,l=r.y,h=1/0;for(n=r.next;n!==c;)i>=n.x&&n.x>=$&&i!==n.x&&Qh(o<l?i:a,o,$,l,o<l?a:i,o,n.x,n.y)&&((p=Math.abs(o-n.y)/(i-n.x))<h||p===h&&n.x>r.x)&&ag(n,e)&&(r=n,h=p),n=n.next;return r}function qz(e,t,r,n){var i=e;do{null===i.z&&(i.z=fo(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,pz(i)}function pz(e){var t,r,n,i,o,a,s,p,c=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(p=c;s>0||p>0&&n;)0!==s&&(0===p||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,p--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(a>1);return e}function fo(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function oz(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function Qh(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function nz(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!kz(e,t)&&ag(e,t)&&ag(t,e)&&iz(e,t)}function ra(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function td(e,t){return e.x===t.x&&e.y===t.y}function Xx(e,t,r,n){return!!(td(e,t)&&td(r,n)||td(e,n)&&td(r,t))||ra(e,t,r)>0!=ra(e,t,n)>0&&ra(r,n,e)>0!=ra(r,n,t)>0}function kz(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Xx(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function ag(e,t){return ra(e.prev,e,e.next)<0?ra(e,t,e.next)>=0&&ra(e,e.prev,t)>=0:ra(e,t,e.prev)<0||ra(e,e.next,t)<0}function iz(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function _x(e,t){var r=new lo(e.i,e.x,e.y),n=new lo(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function ay(e,t,r,n){var i=new lo(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function _f(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function lo(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gz(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}var ic={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return .5*r},isClockWise:function(e){return ic.area(e)<0},triangulateShape:function(e,t){var r=[],n=[],i=[];fy(e),gy(r,e);var o=e.length;t.forEach(fy);for(var a=0;a<t.length;a++)n.push(o),o+=t[a].length,gy(r,t[a]);var s=Iz.triangulate(r,n);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function fy(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function gy(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function pd(e,t){v.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new qb(e,t)),this.mergeVertices()}function qb(e,t){q.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,n=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,p=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,$=void 0!==t.bevelThickness?t.bevelThickness:6,l=void 0!==t.bevelSize?t.bevelSize:$-2,h=void 0!==t.bevelSegments?t.bevelSegments:3,u=t.extrudePath,V=void 0!==t.UVGenerator?t.UVGenerator:fz;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),p=t.amount);var d,f,m,x,v,g,y,b,_=!1;u&&(d=u.getSpacedPoints(s),_=!0,c=!1,f=u.computeFrenetFrames(s,!1),m=new aa,x=new aa,v=new aa),c||(h=0,$=0,l=0);var M=e.extractPoints(a),w=M.shape,S=M.holes;if(!ic.isClockWise(w))for(w=w.reverse(),y=0,b=S.length;y<b;y++)g=S[y],ic.isClockWise(g)&&(S[y]=g.reverse());var T=ic.triangulateShape(w,S),E=w;for(y=0,b=S.length;y<b;y++)g=S[y],w=w.concat(g);function L(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var A,C,P,B,R,G,D=w.length,I=T.length;function O(e,t,r){var n,i,o,a=e.x-t.x,s=e.y-t.y,p=r.x-e.x,c=r.y-e.y,$=a*a+s*s,l=a*c-s*p;if(Math.abs(l)>Number.EPSILON){var h=Math.sqrt($),u=Math.sqrt(p*p+c*c),V=t.x-s/h,d=t.y+a/h,f=((r.x-c/u-V)*c-(r.y+p/u-d)*p)/(a*c-s*p),m=(n=V+a*f-e.x)*n+(i=d+s*f-e.y)*i;if(m<=2)return new ba(n,i);o=Math.sqrt(m/2)}else{var x=!1;a>Number.EPSILON?p>Number.EPSILON&&(x=!0):a<-Number.EPSILON?p<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(c)&&(x=!0),x?(n=-s,i=a,o=Math.sqrt($)):(n=a,i=s,o=Math.sqrt($/2))}return new ba(n/o,i/o)}for(var F=[],U=0,N=E.length,z=N-1,H=U+1;U<N;U++,z++,H++)z===N&&(z=0),H===N&&(H=0),F[U]=O(E[U],E[z],E[H]);var k,j,W=[],q=F.concat();for(y=0,b=S.length;y<b;y++){for(g=S[y],k=[],U=0,z=(N=g.length)-1,H=U+1;U<N;U++,z++,H++)z===N&&(z=0),H===N&&(H=0),k[U]=O(g[U],g[z],g[H]);W.push(k),q=q.concat(k)}for(A=0;A<h;A++){for(P=A/h,B=$*Math.cos(P*Math.PI/2),C=l*Math.sin(P*Math.PI/2),U=0,N=E.length;U<N;U++)Y((R=L(E[U],F[U],C)).x,R.y,-B);for(y=0,b=S.length;y<b;y++)for(g=S[y],k=W[y],U=0,N=g.length;U<N;U++)Y((R=L(g[U],k[U],C)).x,R.y,-B)}for(C=l,U=0;U<D;U++)R=c?L(w[U],q[U],C):w[U],_?(x.copy(f.normals[0]).multiplyScalar(R.x),m.copy(f.binormals[0]).multiplyScalar(R.y),v.copy(d[0]).add(x).add(m),Y(v.x,v.y,v.z)):Y(R.x,R.y,0);for(j=1;j<=s;j++)for(U=0;U<D;U++)R=c?L(w[U],q[U],C):w[U],_?(x.copy(f.normals[j]).multiplyScalar(R.x),m.copy(f.binormals[j]).multiplyScalar(R.y),v.copy(d[j]).add(x).add(m),Y(v.x,v.y,v.z)):Y(R.x,R.y,p/s*j);for(A=h-1;A>=0;A--){for(P=A/h,B=$*Math.cos(P*Math.PI/2),C=l*Math.sin(P*Math.PI/2),U=0,N=E.length;U<N;U++)Y((R=L(E[U],F[U],C)).x,R.y,p+B);for(y=0,b=S.length;y<b;y++)for(g=S[y],k=W[y],U=0,N=g.length;U<N;U++)R=L(g[U],k[U],C),_?Y(R.x,R.y+d[s-1].y,d[s-1].x+B):Y(R.x,R.y,p+B)}function X(e,t){var r,n;for(U=e.length;--U>=0;){r=U,(n=U-1)<0&&(n=e.length-1);var i=0,o=s+2*h;for(i=0;i<o;i++){var a=D*i,p=D*(i+1);Z(t+r+a,t+n+a,t+n+p,t+r+p)}}}function Y(e,t,r){o.push(e),o.push(t),o.push(r)}function J(e,t,i){Q(e),Q(t),Q(i);var o=n.length/3,a=V.generateTopUV(r,n,o-3,o-2,o-1);K(a[0]),K(a[1]),K(a[2])}function Z(e,t,i,o){Q(e),Q(t),Q(o),Q(t),Q(i),Q(o);var a=n.length/3,s=V.generateSideWallUV(r,n,a-6,a-3,a-2,a-1);K(s[0]),K(s[1]),K(s[3]),K(s[1]),K(s[2]),K(s[3])}function Q(e){n.push(o[3*e+0]),n.push(o[3*e+1]),n.push(o[3*e+2])}function K(e){i.push(e.x),i.push(e.y)}!function(){var e=n.length/3;if(c){var t=0,i=D*t;for(U=0;U<I;U++)J((G=T[U])[2]+i,G[1]+i,G[0]+i);for(i=D*(t=s+2*h),U=0;U<I;U++)J((G=T[U])[0]+i,G[1]+i,G[2]+i)}else{for(U=0;U<I;U++)J((G=T[U])[2],G[1],G[0]);for(U=0;U<I;U++)J((G=T[U])[0]+D*s,G[1]+D*s,G[2]+D*s)}r.addGroup(e,n.length/3-e,0)}(),function(){var e=n.length/3,t=0;for(X(E,t),t+=E.length,y=0,b=S.length;y<b;y++)X(g=S[y],t),t+=g.length;r.addGroup(e,n.length/3-e,1)}()}this.addAttribute("position",new k(n,3)),this.addAttribute("uv",new k(i,2)),this.computeVertexNormals()}pd.prototype=Object.create(v.prototype),pd.prototype.constructor=pd,pd.prototype.toJSON=function(){var e=v.prototype.toJSON.call(this);return ky(this.parameters.shapes,this.parameters.options,e)},qb.prototype=Object.create(q.prototype),qb.prototype.constructor=qb,qb.prototype.toJSON=function(){var e=q.prototype.toJSON.call(this);return ky(this.parameters.shapes,this.parameters.options,e)};var fz={generateTopUV:function(e,t,r,n,i){var o=t[3*r],a=t[3*r+1],s=t[3*n],p=t[3*n+1],c=t[3*i],$=t[3*i+1];return[new ba(o,a),new ba(s,p),new ba(c,$)]},generateSideWallUV:function(e,t,r,n,i,o){var a=t[3*r],s=t[3*r+1],p=t[3*r+2],c=t[3*n],$=t[3*n+1],l=t[3*n+2],h=t[3*i],u=t[3*i+1],V=t[3*i+2],d=t[3*o],f=t[3*o+1],m=t[3*o+2];return Math.abs(s-$)<.01?[new ba(a,1-p),new ba(c,1-l),new ba(h,1-V),new ba(d,1-m)]:[new ba(s,1-p),new ba($,1-l),new ba(u,1-V),new ba(f,1-m)]}};function ky(e,t,r){if(r.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];r.shapes.push(o.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}function Wf(e,t){v.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ld(e,t)),this.mergeVertices()}function Ld(e,t){var r=(t=t||{}).font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new v;var n=r.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),qb.call(this,n,t),this.type="TextBufferGeometry"}function Tf(e,t,r,n,i,o,a){v.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new id(e,t,r,n,i,o,a)),this.mergeVertices()}function id(e,t,r,n,i,o,a){q.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var s,p,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),$=0,l=[],h=new aa,u=new aa,V=[],d=[],f=[],m=[];for(p=0;p<=r;p++){var x=[],v=p/r;for(s=0;s<=t;s++){var g=s/t;h.x=-e*Math.cos(n+g*i)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(n+g*i)*Math.sin(o+v*a),d.push(h.x,h.y,h.z),u.set(h.x,h.y,h.z).normalize(),f.push(u.x,u.y,u.z),m.push(g,1-v),x.push($++)}l.push(x)}for(p=0;p<r;p++)for(s=0;s<t;s++){var y=l[p][s+1],b=l[p][s],_=l[p+1][s],M=l[p+1][s+1];(0!==p||o>0)&&V.push(y,b,M),(p!==r-1||c<Math.PI)&&V.push(b,_,M)}this.setIndex(V),this.addAttribute("position",new k(d,3)),this.addAttribute("normal",new k(f,3)),this.addAttribute("uv",new k(m,2))}function Rf(e,t,r,n,i,o){v.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Be(e,t,r,n,i,o)),this.mergeVertices()}function Be(e,t,r,n,i,o){q.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var a,s,p,c=[],$=[],l=[],h=[],u=e,V=(t-e)/(n=void 0!==n?Math.max(1,n):1),d=new aa,f=new ba;for(s=0;s<=n;s++){for(p=0;p<=r;p++)a=i+p/r*o,d.x=u*Math.cos(a),d.y=u*Math.sin(a),$.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,h.push(f.x,f.y);u+=V}for(s=0;s<n;s++){var m=s*(r+1);for(p=0;p<r;p++){var x=a=p+m,v=a+r+1,g=a+r+2,y=a+1;c.push(x,v,y),c.push(v,g,y)}}this.setIndex(c),this.addAttribute("position",new k($,3)),this.addAttribute("normal",new k(l,3)),this.addAttribute("uv",new k(h,2))}function Of(e,t,r,n){v.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new xe(e,t,r,n)),this.mergeVertices()}function xe(e,t,r,n){q.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||2*Math.PI,n=ea.clamp(n,0,2*Math.PI);var i,o,a,s=[],p=[],c=[],$=1/t,l=new aa,h=new ba;for(o=0;o<=t;o++){var u=r+o*$*n,V=Math.sin(u),d=Math.cos(u);for(a=0;a<=e.length-1;a++)l.x=e[a].x*V,l.y=e[a].y,l.z=e[a].x*d,p.push(l.x,l.y,l.z),h.x=o/t,h.y=a/(e.length-1),c.push(h.x,h.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var f=i=a+o*e.length,m=i+e.length,x=i+e.length+1,v=i+1;s.push(f,m,v),s.push(m,x,v)}if(this.setIndex(s),this.addAttribute("position",new k(p,3)),this.addAttribute("uv",new k(c,2)),this.computeVertexNormals(),n===2*Math.PI){var g=this.attributes.normal.array,y=new aa,b=new aa,_=new aa;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)y.x=g[a+0],y.y=g[a+1],y.z=g[a+2],b.x=g[i+a+0],b.y=g[i+a+1],b.z=g[i+a+2],_.addVectors(y,b).normalize(),g[a+0]=g[i+a+0]=_.x,g[a+1]=g[i+a+1]=_.y,g[a+2]=g[i+a+2]=_.z}}function gd(e,t){v.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new fd(e,t)),this.mergeVertices()}function fd(e,t){q.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var p=0;p<e.length;p++)c(e[p]),this.addGroup(a,s,p),a+=s,s=0;function c(e){var a,p,c,$=n.length/3,l=e.extractPoints(t),h=l.shape,u=l.holes;if(!1===ic.isClockWise(h))for(h=h.reverse(),a=0,p=u.length;a<p;a++)c=u[a],!0===ic.isClockWise(c)&&(u[a]=c.reverse());var V=ic.triangulateShape(h,u);for(a=0,p=u.length;a<p;a++)c=u[a],h=h.concat(c);for(a=0,p=h.length;a<p;a++){var d=h[a];n.push(d.x,d.y,0),i.push(0,0,1),o.push(d.x,d.y)}for(a=0,p=V.length;a<p;a++){var f=V[a],m=f[0]+$,x=f[1]+$,v=f[2]+$;r.push(m,x,v),s+=3}}this.setIndex(r),this.addAttribute("position",new k(n,3)),this.addAttribute("normal",new k(i,3)),this.addAttribute("uv",new k(o,2))}function vy(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function me(e,t){q.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,n,i,o,a=[],s=Math.cos(ea.DEG2RAD*t),p=[0,0],c={},$=["a","b","c"];e.isBufferGeometry?(o=new v).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var l=o.vertices,h=o.faces,u=0,V=h.length;u<V;u++)for(var d=h[u],f=0;f<3;f++)r=d[$[f]],n=d[$[(f+1)%3]],p[0]=Math.min(r,n),p[1]=Math.max(r,n),void 0===c[i=p[0]+","+p[1]]?c[i]={index1:p[0],index2:p[1],face1:u,face2:void 0}:c[i].face2=u;for(i in c){var m=c[i];if(void 0===m.face2||h[m.face1].normal.dot(h[m.face2].normal)<=s){var x=l[m.index1];a.push(x.x,x.y,x.z),x=l[m.index2],a.push(x.x,x.y,x.z)}}this.addAttribute("position",new k(a,3))}function bd(e,t,r,n,i,o,a,s){v.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Nb(e,t,r,n,i,o,a,s)),this.mergeVertices()}function Nb(e,t,r,n,i,o,a,s){q.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var p=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],$=[],l=[],h=[],u=0,V=[],d=r/2,f=0;function m(r){var i,o,V,m=new ba,x=new aa,v=0,g=!0===r?e:t,y=!0===r?1:-1;for(o=u,i=1;i<=n;i++)$.push(0,d*y,0),l.push(0,y,0),h.push(.5,.5),u++;for(V=u,i=0;i<=n;i++){var b=i/n*s+a,_=Math.cos(b),M=Math.sin(b);x.x=g*M,x.y=d*y,x.z=g*_,$.push(x.x,x.y,x.z),l.push(0,y,0),m.x=.5*_+.5,m.y=.5*M*y+.5,h.push(m.x,m.y),u++}for(i=0;i<n;i++){var w=o+i,S=V+i;!0===r?c.push(S,S+1,w):c.push(S+1,S,w),v+=3}p.addGroup(f,v,!0===r?1:2),f+=v}!function(){var o,m,x=new aa,v=new aa,g=0,y=(t-e)/r;for(m=0;m<=i;m++){var b=[],_=m/i,M=_*(t-e)+e;for(o=0;o<=n;o++){var w=o/n,S=w*s+a,T=Math.sin(S),E=Math.cos(S);v.x=M*T,v.y=-_*r+d,v.z=M*E,$.push(v.x,v.y,v.z),x.set(T,y,E).normalize(),l.push(x.x,x.y,x.z),h.push(w,1-_),b.push(u++)}V.push(b)}for(o=0;o<n;o++)for(m=0;m<i;m++){var L=V[m][o],A=V[m+1][o],C=V[m+1][o+1],P=V[m][o+1];c.push(L,A,P),c.push(A,C,P),g+=6}p.addGroup(f,g,0),f+=g}(),!1===o&&(e>0&&m(!0),t>0&&m(!1)),this.setIndex(c),this.addAttribute("position",new k($,3)),this.addAttribute("normal",new k(l,3)),this.addAttribute("uv",new k(h,2))}function Bf(e,t,r,n,i,o,a){bd.call(this,0,e,t,r,n,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function Af(e,t,r,n,i,o,a){Nb.call(this,0,e,t,r,n,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function yf(e,t,r,n){v.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new pe(e,t,r,n)),this.mergeVertices()}function pe(e,t,r,n){q.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,o,a=[],s=[],p=[],c=[],$=new aa,l=new ba;for(s.push(0,0,0),p.push(0,0,1),c.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var h=r+o/t*n;$.x=e*Math.cos(h),$.y=e*Math.sin(h),s.push($.x,$.y,$.z),p.push(0,0,1),l.x=(s[i]/e+1)/2,l.y=(s[i+1]/e+1)/2,c.push(l.x,l.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new k(s,3)),this.addAttribute("normal",new k(p,3)),this.addAttribute("uv",new k(c,2))}Wf.prototype=Object.create(v.prototype),Wf.prototype.constructor=Wf,Ld.prototype=Object.create(qb.prototype),Ld.prototype.constructor=Ld,Tf.prototype=Object.create(v.prototype),Tf.prototype.constructor=Tf,id.prototype=Object.create(q.prototype),id.prototype.constructor=id,Rf.prototype=Object.create(v.prototype),Rf.prototype.constructor=Rf,Be.prototype=Object.create(q.prototype),Be.prototype.constructor=Be,Of.prototype=Object.create(v.prototype),Of.prototype.constructor=Of,xe.prototype=Object.create(q.prototype),xe.prototype.constructor=xe,gd.prototype=Object.create(v.prototype),gd.prototype.constructor=gd,gd.prototype.toJSON=function(){var e=v.prototype.toJSON.call(this);return vy(this.parameters.shapes,e)},fd.prototype=Object.create(q.prototype),fd.prototype.constructor=fd,fd.prototype.toJSON=function(){var e=q.prototype.toJSON.call(this);return vy(this.parameters.shapes,e)},me.prototype=Object.create(q.prototype),me.prototype.constructor=me,bd.prototype=Object.create(v.prototype),bd.prototype.constructor=bd,Nb.prototype=Object.create(q.prototype),Nb.prototype.constructor=Nb,Bf.prototype=Object.create(bd.prototype),Bf.prototype.constructor=Bf,Af.prototype=Object.create(Nb.prototype),Af.prototype.constructor=Af,yf.prototype=Object.create(v.prototype),yf.prototype.constructor=yf,pe.prototype=Object.create(q.prototype),pe.prototype.constructor=pe;var Ba=Object.freeze({WireframeGeometry:Sd,ParametricGeometry:Vg,ParametricBufferGeometry:Rd,TetrahedronGeometry:Qg,TetrahedronBufferGeometry:Nd,OctahedronGeometry:Mg,OctahedronBufferGeometry:Gd,IcosahedronGeometry:Kg,IcosahedronBufferGeometry:af,DodecahedronGeometry:Dg,DodecahedronBufferGeometry:Ue,PolyhedronGeometry:Tg,PolyhedronBufferGeometry:ya,TubeGeometry:ug,TubeBufferGeometry:Qe,TorusKnotGeometry:rg,TorusKnotBufferGeometry:Oe,TorusGeometry:pg,TorusBufferGeometry:ye,TextGeometry:Wf,TextBufferGeometry:Ld,SphereGeometry:Tf,SphereBufferGeometry:id,RingGeometry:Rf,RingBufferGeometry:Be,PlaneGeometry:jg,PlaneBufferGeometry:Nc,LatheGeometry:Of,LatheBufferGeometry:xe,ShapeGeometry:gd,ShapeBufferGeometry:fd,ExtrudeGeometry:pd,ExtrudeBufferGeometry:qb,EdgesGeometry:me,ConeGeometry:Bf,ConeBufferGeometry:Af,CylinderGeometry:bd,CylinderBufferGeometry:Nb,CircleGeometry:yf,CircleBufferGeometry:pe,BoxGeometry:$d,BoxBufferGeometry:Rc});function Id(e){s.call(this),this.type="ShadowMaterial",this.color=new z(0),this.transparent=!0,this.setValues(e)}function _e(e){Na.call(this,e),this.type="RawShaderMaterial"}function Db(e){s.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new z(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ih,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function vd(e){Db.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function mb(e){s.call(this),this.type="MeshPhongMaterial",this.color=new z(16777215),this.specular=new z(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ih,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Df,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function qd(e){mb.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function jd(e){s.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ih,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $c(e){s.call(this),this.type="MeshLambertMaterial",this.color=new z(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Df,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Uc(e){if(s.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new z(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ih,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e),null===this.matcap){var t=document.createElement("canvas");t.width=1,t.height=1;var r=t.getContext("2d");r.fillStyle="#fff",r.fillRect(0,0,1,1),this.matcap=new THREE.CanvasTexture(t)}}function nd(e){D.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Id.prototype=Object.create(s.prototype),Id.prototype.constructor=Id,Id.prototype.isShadowMaterial=!0,Id.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this},_e.prototype=Object.create(Na.prototype),_e.prototype.constructor=_e,_e.prototype.isRawShaderMaterial=!0,Db.prototype=Object.create(s.prototype),Db.prototype.constructor=Db,Db.prototype.isMeshStandardMaterial=!0,Db.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},vd.prototype=Object.create(Db.prototype),vd.prototype.constructor=vd,vd.prototype.isMeshPhysicalMaterial=!0,vd.prototype.copy=function(e){return Db.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},mb.prototype=Object.create(s.prototype),mb.prototype.constructor=mb,mb.prototype.isMeshPhongMaterial=!0,mb.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},qd.prototype=Object.create(mb.prototype),qd.prototype.constructor=qd,qd.prototype.isMeshToonMaterial=!0,qd.prototype.copy=function(e){return mb.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},jd.prototype=Object.create(s.prototype),jd.prototype.constructor=jd,jd.prototype.isMeshNormalMaterial=!0,jd.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$c.prototype=Object.create(s.prototype),$c.prototype.constructor=$c,$c.prototype.isMeshLambertMaterial=!0,$c.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Uc.prototype=Object.create(s.prototype),Uc.prototype.constructor=Uc,Uc.prototype.isMeshMatcapMaterial=!0,Uc.prototype.copy=function(e){return s.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},nd.prototype=Object.create(D.prototype),nd.prototype.constructor=nd,nd.prototype.isLineDashedMaterial=!0,nd.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Oy=Object.freeze({ShadowMaterial:Id,SpriteMaterial:vc,RawShaderMaterial:_e,ShaderMaterial:Na,PointsMaterial:lb,MeshPhysicalMaterial:vd,MeshStandardMaterial:Db,MeshPhongMaterial:mb,MeshToonMaterial:qd,MeshNormalMaterial:jd,MeshLambertMaterial:$c,MeshDepthMaterial:yc,MeshDistanceMaterial:xc,MeshBasicMaterial:$a,MeshMatcapMaterial:Uc,LineDashedMaterial:nd,LineBasicMaterial:D,Material:s}),ja={arraySlice:function(e,t,r){return ja.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),n=0;n!==t;++n)r[n]=n;return r.sort(function(t,r){return e[t]-e[r]}),r},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=r[o]*t,p=0;p!==t;++p)i[a++]=e[s+p];return i},flattenJSON:function(e,t,r,n){for(var i=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[i++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[n])&&(t.push(o.time),r.push.apply(r,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[n])&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[n])&&(t.push(o.time),r.push(a)),o=e[i++]}while(void 0!==o)}}};function Ka(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function zh(e,t,r,n){Ka.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Og(e,t,r,n){Ka.call(this,e,t,r,n)}function Ah(e,t,r,n){Ka.call(this,e,t,r,n)}function U(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ja.convertArray(t,this.TimeBufferType),this.values=ja.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function Bh(e,t,r){U.call(this,e,t,r)}function Fh(e,t,r,n){U.call(this,e,t,r,n)}function oe(e,t,r,n){U.call(this,e,t,r,n)}function Hh(e,t,r,n){Ka.call(this,e,t,r,n)}function Jg(e,t,r,n){U.call(this,e,t,r,n)}function Oh(e,t,r,n){U.call(this,e,t,r,n)}function be(e,t,r,n){U.call(this,e,t,r,n)}function Ma(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=ea.generateUUID(),this.duration<0&&this.resetDuration()}function bz(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return oe;case"vector":case"vector2":case"vector3":case"vector4":return be;case"color":return Fh;case"quaternion":return Jg;case"bool":case"boolean":return Bh;case"string":return Oh;}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function cz(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=bz(e.type);if(void 0===e.times){var r=[],n=[];ja.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Ka.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var o;r:{n:if(!(e<n)){for(var a=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===a)break;if(i=n,e<(n=t[++r]))break t}o=t.length;break r}if(e>=i)break e;var s=t[1];e<s&&(r=2,i=s);for(a=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===a)break;if(n=i,e>=(i=t[--r-1]))break t}o=r,r=0}for(;r<o;){var p=r+o>>>1;e<t[p]?o=p:r=p+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,o=0;o!==n;++o)t[o]=r[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ka.prototype,{beforeStart_:Ka.prototype.copySampleValue_,afterEnd_:Ka.prototype.copySampleValue_}),zh.prototype=Object.assign(Object.create(Ka.prototype),{constructor:zh,DefaultSettings_:{endingStart:zd,endingEnd:zd},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,o=e+1,a=n[i],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case wd:i=e,a=2*t-r;break;case lh:a=t+n[i=n.length-2]-n[i+1];break;default:i=e,a=r;}if(void 0===s)switch(this.getSettings_().endingEnd){case wd:o=e,s=2*r-t;break;case lh:o=1,s=r+n[1]-n[0];break;default:o=e-1,s=t;}var p=.5*(r-t),c=this.valueSize;this._weightPrev=p/(t-a),this._weightNext=p/(s-r),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,p=s-a,c=this._offsetPrev,$=this._offsetNext,l=this._weightPrev,h=this._weightNext,u=(r-t)/(n-t),V=u*u,d=V*u,f=-l*d+2*l*V-l*u,m=(1+l)*d+(-1.5-2*l)*V+(-.5+l)*u+1,x=(-1-h)*d+(1.5+h)*V+.5*u,v=h*d-h*V,g=0;g!==a;++g)i[g]=f*o[c+g]+m*o[p+g]+x*o[s+g]+v*o[$+g];return i}}),Og.prototype=Object.assign(Object.create(Ka.prototype),{constructor:Og,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,p=s-a,c=(r-t)/(n-t),$=1-c,l=0;l!==a;++l)i[l]=o[p+l]*$+o[s+l]*c;return i}}),Ah.prototype=Object.assign(Object.create(Ka.prototype),{constructor:Ah,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(U,{toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:ja.convertArray(e.times,Array),values:ja.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(U.prototype,{constructor:U,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:th,InterpolantFactoryMethodDiscrete:function(e){return new Ah(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Og(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new zh(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case wh:t=this.InterpolantFactoryMethodDiscrete;break;case th:t=this.InterpolantFactoryMethodLinear;break;case Nj:t=this.InterpolantFactoryMethodSmooth;}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wh;case this.InterpolantFactoryMethodLinear:return th;case this.InterpolantFactoryMethodSmooth:return Nj;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,o=n-1;i!==n&&r[i]<e;)++i;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==i||o!==n){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=ja.arraySlice(r,i,o),this.values=ja.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=r[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==n&&ja.isTypedArray(n)){a=0;for(var p=n.length;a!==p;++a){var c=n[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),n=this.getInterpolation()===Nj,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,p=e[a];if(p!==e[a+1]&&(1!==a||p!==p[0]))if(n)s=!0;else for(var c=a*r,$=c-r,l=c+r,h=0;h!==r;++h){var u=t[c+h];if(u!==t[$+h]||u!==t[l+h]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var V=a*r,d=i*r;for(h=0;h!==r;++h)t[d+h]=t[V+h]}++i}}if(o>0){e[i]=e[o];for(V=o*r,d=i*r,h=0;h!==r;++h)t[d+h]=t[V+h];++i}return i!==e.length&&(this.times=ja.arraySlice(e,0,i),this.values=ja.arraySlice(t,0,i*r)),this}}),Bh.prototype=Object.assign(Object.create(U.prototype),{constructor:Bh,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:wh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Fh.prototype=Object.assign(Object.create(U.prototype),{constructor:Fh,ValueTypeName:"color"}),oe.prototype=Object.assign(Object.create(U.prototype),{constructor:oe,ValueTypeName:"number"}),Hh.prototype=Object.assign(Object.create(Ka.prototype),{constructor:Hh,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,p=(r-t)/(n-t),c=s+a;s!==c;s+=4)O.slerpFlat(i,0,o,s-a,o,s,p);return i}}),Jg.prototype=Object.assign(Object.create(U.prototype),{constructor:Jg,ValueTypeName:"quaternion",DefaultInterpolation:th,InterpolantFactoryMethodLinear:function(e){return new Hh(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Oh.prototype=Object.assign(Object.create(U.prototype),{constructor:Oh,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:wh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),be.prototype=Object.assign(Object.create(U.prototype),{constructor:be,ValueTypeName:"vector"}),Object.assign(Ma,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,o=r.length;i!==o;++i)t.push(cz(r[i]).scale(n));return new Ma(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=r.length;i!==o;++i)t.push(U.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],p=[];s.push((a+i-1)%i,a,(a+1)%i),p.push(0,1,0);var c=ja.getKeyframeOrder(s);s=ja.sortedArray(s,1,c),p=ja.sortedArray(p,1,c),n||0!==s[0]||(s.push(i),p.push(p[0])),o.push(new oe(".morphTargetInfluences["+t[a].name+"]",s,p).scale(1/r))}return new Ma(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],p=s.name.match(i);if(p&&p.length>1){var c=n[l=p[1]];c||(n[l]=c=[]),c.push(s)}}var $=[];for(var l in n)$.push(Ma.CreateFromMorphTargetSequence(l,n[l],t,r));return $},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var o=[],a=[];ja.flattenJSON(r,o,a,n),0!==o.length&&i.push(new e(t,o,a))}},n=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],p=0;p<s.length;p++){var c=s[p].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var $={},l=0;l<c.length;l++)if(c[l].morphTargets)for(var h=0;h<c[l].morphTargets.length;h++)$[c[l].morphTargets[h]]=-1;for(var u in $){var V=[],d=[];for(h=0;h!==c[l].morphTargets.length;++h){var f=c[l];V.push(f.time),d.push(f.morphTarget===u?1:0)}n.push(new oe(".morphTargetInfluence["+u+"]",V,d))}o=$.length*(a||1)}else{var m=".bones["+t[p].name+"]";r(be,m+".position",c,"pos",n),r(Jg,m+".quaternion",c,"rot",n),r(be,m+".scale",c,"scl",n)}}return 0===n.length?null:new Ma(i,o,n)}}),Object.assign(Ma.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});var hd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function oo(e,t,r){var n=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++,!1===i&&void 0!==n.onStart&&n.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var pa=new oo,hb={};function Xa(e){this.manager=void 0!==e?e:pa}function $x(e){this.manager=void 0!==e?e:pa}function Zx(e){this.manager=void 0!==e?e:pa,this._parser=null}function ko(e){this.manager=void 0!==e?e:pa,this._parser=null}function ig(e){this.manager=void 0!==e?e:pa}function io(e){this.manager=void 0!==e?e:pa}function Ph(e){this.manager=void 0!==e?e:pa}function g(){this.type="Curve",this.arcLengthDivisions=200}function Ra(e,t,r,n,i,o,a,s){g.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function te(e,t,r,n,i,o){Ra.call(this,e,t,r,r,n,i,o),this.type="ArcCurve"}function eo(){var e=0,t=0,r=0,n=0;function i(i,o,a,s){e=i,t=a,r=-3*i+3*o-2*a-s,n=2*i-2*o+a+s}return{initCatmullRom:function(e,t,r,n,o){i(t,r,o*(r-e),o*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,o,a,s){var p=(t-e)/o-(r-e)/(o+a)+(r-t)/a,c=(r-t)/a-(n-t)/(a+s)+(n-r)/s;i(t,r,p*=a,c*=a)},calc:function(i){var o=i*i;return e+t*i+r*o+n*(o*i)}}}Object.assign(Xa.prototype,{load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=hd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===hb[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],p=!!a[2],c=a[3];c=decodeURIComponent(c),p&&(c=atob(c));try{var $,l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":for(var h=new Uint8Array(c.length),u=0;u<c.length;u++)h[u]=c.charCodeAt(u);$="blob"===l?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var V=new DOMParser;$=V.parseFromString(c,s);break;case"json":$=JSON.parse(c);break;default:$=c;}setTimeout(function(){t&&t($),i.manager.itemEnd(e)},0)}catch(m){setTimeout(function(){n&&n(m),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{hb[e]=[],hb[e].push({onLoad:t,onProgress:r,onError:n});var d=new XMLHttpRequest;for(var f in d.open("GET",e,!0),d.addEventListener("load",function(t){var r=this.response;hd.add(e,r);var n=hb[e];if(delete hb[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=n.length;o<a;o++){(s=n[o]).onLoad&&s.onLoad(r)}i.manager.itemEnd(e)}else{for(o=0,a=n.length;o<a;o++){var s;(s=n[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),d.addEventListener("progress",function(t){for(var r=hb[e],n=0,i=r.length;n<i;n++){var o=r[n];o.onProgress&&o.onProgress(t)}},!1),d.addEventListener("error",function(t){var r=hb[e];delete hb[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),d.addEventListener("abort",function(t){var r=hb[e];delete hb[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(d.responseType=this.responseType),void 0!==this.withCredentials&&(d.withCredentials=this.withCredentials),d.overrideMimeType&&d.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)d.setRequestHeader(f,this.requestHeader[f]);d.send(null)}return i.manager.itemStart(e),d}hb[e].push({onLoad:t,onProgress:r,onError:n})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign($x.prototype,{load:function(e,t,r,n){var i=this,o=new Xa(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e,t){for(var r=[],n=0;n<e.length;n++){var i=Ma.parse(e[n]);r.push(i)}t(r)},setPath:function(e){return this.path=e,this}}),Object.assign(Zx.prototype,{load:function(e,t,r,n){var i=this,o=[],a=new Xd;a.image=o;var s=new Xa(this.manager);function p(p){s.load(e[p],function(e){var r=i._parser(e,!0);o[p]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(c+=1)&&(1===r.mipmapCount&&(a.minFilter=va),a.format=r.format,a.needsUpdate=!0,t&&t(a))},r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,$=0,l=e.length;$<l;++$)p($);else s.load(e,function(e){var r=i._parser(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){o[s]={mipmaps:[]};for(var p=0;p<r.mipmapCount;p++)o[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+p]),o[s].format=r.format,o[s].width=r.width,o[s].height=r.height}else a.image.width=r.width,a.image.height=r.height,a.mipmaps=r.mipmaps;1===r.mipmapCount&&(a.minFilter=va),a.format=r.format,a.needsUpdate=!0,t&&t(a)},r,n);return a},setPath:function(e){return this.path=e,this}}),Object.assign(ko.prototype,{load:function(e,t,r,n){var i=this,o=new xd,a=new Xa(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,function(e){var r=i._parser(e);r&&(void 0!==r.image?o.image=r.image:void 0!==r.data&&(o.image.width=r.width,o.image.height=r.height,o.image.data=r.data),o.wrapS=void 0!==r.wrapS?r.wrapS:Qa,o.wrapT=void 0!==r.wrapT?r.wrapT:Qa,o.magFilter=void 0!==r.magFilter?r.magFilter:va,o.minFilter=void 0!==r.minFilter?r.minFilter:xf,o.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(o.format=r.format),void 0!==r.type&&(o.type=r.type),void 0!==r.mipmaps&&(o.mipmaps=r.mipmaps),1===r.mipmapCount&&(o.minFilter=va),o.needsUpdate=!0,t&&t(o,r))},r,n),o},setPath:function(e){return this.path=e,this}}),Object.assign(ig.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=hd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",p,!1),hd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function p(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",p,!1),n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",p,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(io.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=new Jb,o=new ig(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(r){o.load(e[r],function(e){i.images[r]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))},void 0,n)}for(var p=0;p<e.length;++p)s(p);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ph.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=new E,o=new ig(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(r){i.image=r;var n=e.search(/\.jpe?g$/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?nf:ob,i.needsUpdate=!0,void 0!==t&&t(i)},r,n),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(g.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;r<=e;r++)o+=(t=this.getPoint(r/e)).distanceTo(i),n.push(o),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,o=n.length;r=t||e*n[o-1];for(var a,s=0,p=o-1;s<=p;)if((a=n[i=Math.floor(s+(p-s)/2)]-r)<0)s=i+1;else{if(!(a>0)){p=i;break}p=i-1}if(n[i=p]===r)return i/(o-1);var c=n[i];return(i+(r-c)/(n[i+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,n,i,o=new aa,a=[],s=[],p=[],c=new aa,$=new da;for(r=0;r<=e;r++)n=r/e,a[r]=this.getTangentAt(n),a[r].normalize();s[0]=new aa,p[0]=new aa;var l=Number.MAX_VALUE,h=Math.abs(a[0].x),u=Math.abs(a[0].y),V=Math.abs(a[0].z);for(h<=l&&(l=h,o.set(1,0,0)),u<=l&&(l=u,o.set(0,1,0)),V<=l&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),p[0].crossVectors(a[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),p[r]=p[r-1].clone(),c.crossVectors(a[r-1],a[r]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(ea.clamp(a[r-1].dot(a[r]),-1,1)),s[r].applyMatrix4($.makeRotationAxis(c,i))),p[r].crossVectors(a[r],s[r]);if(!0===t)for(i=Math.acos(ea.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4($.makeRotationAxis(a[r],i*r)),p[r].crossVectors(a[r],s[r]);return{tangents:a,normals:s,binormals:p}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ra.prototype=Object.create(g.prototype),Ra.prototype.constructor=Ra,Ra.prototype.isEllipseCurve=!0,Ra.prototype.getPoint=function(e,t){for(var r=t||new ba,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=o?0:n),!0!==this.aClockwise||o||(i===n?i=-n:i-=n);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),p=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),$=Math.sin(this.aRotation),l=s-this.aX,h=p-this.aY;s=l*c-h*$+this.aX,p=l*$+h*c+this.aY}return r.set(s,p)},Ra.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ra.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ra.prototype.fromJSON=function(e){return g.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},te.prototype=Object.create(Ra.prototype),te.prototype.constructor=te,te.prototype.isArcCurve=!0;var Sh=new aa,bo=new eo,ao=new eo,_n=new eo;function $(e,t,r,n){g.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=n||.5}function Jx(e,t,r,n,i){var o=.5*(n-t),a=.5*(i-r),s=e*e;return(2*r-2*n+o+a)*(e*s)+(-3*r+3*n-2*o-a)*s+o*e+r}function yz(e,t){var r=1-e;return r*r*t}function zz(e,t){return 2*(1-e)*e*t}function Az(e,t){return e*e*t}function Xf(e,t,r,n){return yz(e,t)+zz(e,r)+Az(e,n)}function Cz(e,t){var r=1-e;return r*r*r*t}function Dz(e,t){var r=1-e;return 3*r*r*e*t}function Ez(e,t){return 3*(1-e)*e*e*t}function Fz(e,t){return e*e*e*t}function Vf(e,t,r,n,i){return Cz(e,t)+Dz(e,r)+Ez(e,n)+Fz(e,i)}function bb(e,t,r,n){g.call(this),this.type="CubicBezierCurve",this.v0=e||new ba,this.v1=t||new ba,this.v2=r||new ba,this.v3=n||new ba}function vb(e,t,r,n){g.call(this),this.type="CubicBezierCurve3",this.v0=e||new aa,this.v1=t||new aa,this.v2=r||new aa,this.v3=n||new aa}function Fa(e,t){g.call(this),this.type="LineCurve",this.v1=e||new ba,this.v2=t||new ba}function eb(e,t){g.call(this),this.type="LineCurve3",this.v1=e||new aa,this.v2=t||new aa}function fb(e,t,r){g.call(this),this.type="QuadraticBezierCurve",this.v0=e||new ba,this.v1=t||new ba,this.v2=r||new ba}function xb(e,t,r){g.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new aa,this.v1=t||new aa,this.v2=r||new aa}function ib(e){g.call(this),this.type="SplineCurve",this.points=e||[]}$.prototype=Object.create(g.prototype),$.prototype.constructor=$,$.prototype.isCatmullRomCurve3=!0,$.prototype.getPoint=function(e,t){var r,n,i,o,a=t||new aa,s=this.points,p=s.length,c=(p-(this.closed?0:1))*e,$=Math.floor(c),l=c-$;if(this.closed?$+=$>0?0:(Math.floor(Math.abs($)/p)+1)*p:0===l&&$===p-1&&($=p-2,l=1),this.closed||$>0?r=s[($-1)%p]:(Sh.subVectors(s[0],s[1]).add(s[0]),r=Sh),n=s[$%p],i=s[($+1)%p],this.closed||$+2<p?o=s[($+2)%p]:(Sh.subVectors(s[p-1],s[p-2]).add(s[p-1]),o=Sh),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,u=Math.pow(r.distanceToSquared(n),h),V=Math.pow(n.distanceToSquared(i),h),d=Math.pow(i.distanceToSquared(o),h);V<1e-4&&(V=1),u<1e-4&&(u=V),d<1e-4&&(d=V),bo.initNonuniformCatmullRom(r.x,n.x,i.x,o.x,u,V,d),ao.initNonuniformCatmullRom(r.y,n.y,i.y,o.y,u,V,d),_n.initNonuniformCatmullRom(r.z,n.z,i.z,o.z,u,V,d)}else"catmullrom"===this.curveType&&(bo.initCatmullRom(r.x,n.x,i.x,o.x,this.tension),ao.initCatmullRom(r.y,n.y,i.y,o.y,this.tension),_n.initCatmullRom(r.z,n.z,i.z,o.z,this.tension));return a.set(bo.calc(l),ao.calc(l),_n.calc(l)),a},$.prototype.copy=function(e){g.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},$.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},$.prototype.fromJSON=function(e){g.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(new aa().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},bb.prototype=Object.create(g.prototype),bb.prototype.constructor=bb,bb.prototype.isCubicBezierCurve=!0,bb.prototype.getPoint=function(e,t){var r=t||new ba,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Vf(e,n.x,i.x,o.x,a.x),Vf(e,n.y,i.y,o.y,a.y)),r},bb.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},bb.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},bb.prototype.fromJSON=function(e){return g.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},vb.prototype=Object.create(g.prototype),vb.prototype.constructor=vb,vb.prototype.isCubicBezierCurve3=!0,vb.prototype.getPoint=function(e,t){var r=t||new aa,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Vf(e,n.x,i.x,o.x,a.x),Vf(e,n.y,i.y,o.y,a.y),Vf(e,n.z,i.z,o.z,a.z)),r},vb.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},vb.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},vb.prototype.fromJSON=function(e){return g.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Fa.prototype=Object.create(g.prototype),Fa.prototype.constructor=Fa,Fa.prototype.isLineCurve=!0,Fa.prototype.getPoint=function(e,t){var r=t||new ba;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},Fa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Fa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Fa.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Fa.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Fa.prototype.fromJSON=function(e){return g.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},eb.prototype=Object.create(g.prototype),eb.prototype.constructor=eb,eb.prototype.isLineCurve3=!0,eb.prototype.getPoint=function(e,t){var r=t||new aa;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},eb.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},eb.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},eb.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},eb.prototype.fromJSON=function(e){return g.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fb.prototype=Object.create(g.prototype),fb.prototype.constructor=fb,fb.prototype.isQuadraticBezierCurve=!0,fb.prototype.getPoint=function(e,t){var r=t||new ba,n=this.v0,i=this.v1,o=this.v2;return r.set(Xf(e,n.x,i.x,o.x),Xf(e,n.y,i.y,o.y)),r},fb.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},fb.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},fb.prototype.fromJSON=function(e){return g.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},xb.prototype=Object.create(g.prototype),xb.prototype.constructor=xb,xb.prototype.isQuadraticBezierCurve3=!0,xb.prototype.getPoint=function(e,t){var r=t||new aa,n=this.v0,i=this.v1,o=this.v2;return r.set(Xf(e,n.x,i.x,o.x),Xf(e,n.y,i.y,o.y),Xf(e,n.z,i.z,o.z)),r},xb.prototype.copy=function(e){return g.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},xb.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},xb.prototype.fromJSON=function(e){return g.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ib.prototype=Object.create(g.prototype),ib.prototype.constructor=ib,ib.prototype.isSplineCurve=!0,ib.prototype.getPoint=function(e,t){var r=t||new ba,n=this.points,i=(n.length-1)*e,o=Math.floor(i),a=i-o,s=n[0===o?o:o-1],p=n[o],c=n[o>n.length-2?n.length-1:o+1],$=n[o>n.length-3?n.length-1:o+2];return r.set(Jx(a,s.x,p.x,c.x,$.x),Jx(a,s.y,p.y,c.y,$.y)),r},ib.prototype.copy=function(e){g.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this},ib.prototype.toJSON=function(){var e=g.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e},ib.prototype.fromJSON=function(e){g.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(new ba().fromArray(n))}return this};var hx=Object.freeze({ArcCurve:te,CatmullRomCurve3:$,CubicBezierCurve:bb,CubicBezierCurve3:vb,EllipseCurve:Ra,LineCurve:Fa,LineCurve3:eb,QuadraticBezierCurve:fb,QuadraticBezierCurve3:xb,SplineCurve:ib});function Sb(){g.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function nb(e){Sb.call(this),this.type="Path",this.currentPoint=new ba,e&&this.setFromPoints(e)}function mc(e){nb.call(this,e),this.uuid=ea.generateUUID(),this.type="Shape",this.holes=[]}function J(e,t){b.call(this),this.type="Light",this.color=new z(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function pi(e,t,r){J.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(b.DefaultUp),this.updateMatrix(),this.groundColor=new z(t)}function ud(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new ba(512,512),this.map=null,this.matrix=new da}function Bi(){ud.call(this,new N(50,1,.5,500))}function Ci(e,t,r,n,i,o){J.call(this,e,t),this.type="SpotLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Bi}function Di(e,t,r,n){J.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new ud(new N(90,1,.5,500))}function eh(e,t,r,n,i,o){wb.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==r?r:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ei(){ud.call(this,new eh(-5,5,5,-5,.5,500))}function Fi(e,t){J.call(this,e,t),this.type="DirectionalLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,this.shadow=new Ei}function Ji(e,t){J.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Ki(e,t,r,n){J.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function Li(e){this.manager=void 0!==e?e:pa,this.textures={}}Sb.prototype=Object.assign(Object.create(g.prototype),{constructor:Sb,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Fa(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,o=this.curves[n],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var o=i[n],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),p=0;p<s.length;p++){var c=s[p];t&&t.equals(c)||(r.push(c),t=c)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){g.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=g.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){g.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(new hx[n.type]().fromJSON(n))}return this}}),nb.prototype=Object.assign(Object.create(Sb.prototype),{constructor:nb,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new Fa(this.currentPoint.clone(),new ba(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,n){var i=new fb(this.currentPoint.clone(),new ba(e,t),new ba(r,n));this.curves.push(i),this.currentPoint.set(r,n)},bezierCurveTo:function(e,t,r,n,i,o){var a=new bb(this.currentPoint.clone(),new ba(e,t),new ba(r,n),new ba(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new ib([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,r,n,i,o)},absarc:function(e,t,r,n,i,o){this.absellipse(e,t,r,r,n,i,o)},ellipse:function(e,t,r,n,i,o,a,s){var p=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+p,t+c,r,n,i,o,a,s)},absellipse:function(e,t,r,n,i,o,a,s){var p=new Ra(e,t,r,n,i,o,a,s);if(this.curves.length>0){var c=p.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(p);var $=p.getPoint(1);this.currentPoint.copy($)},copy:function(e){return Sb.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Sb.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Sb.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),mc.prototype=Object.assign(Object.create(nb.prototype),{constructor:mc,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){nb.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=nb.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){nb.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(new nb().fromJSON(n))}return this}}),J.prototype=Object.assign(Object.create(b.prototype),{constructor:J,isLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),pi.prototype=Object.assign(Object.create(J.prototype),{constructor:pi,isHemisphereLight:!0,copy:function(e){return J.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ud.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Bi.prototype=Object.assign(Object.create(ud.prototype),{constructor:Bi,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=2*ea.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&n===t.aspect&&i===t.far||(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix())}}),Ci.prototype=Object.assign(Object.create(J.prototype),{constructor:Ci,isSpotLight:!0,copy:function(e){return J.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Di.prototype=Object.assign(Object.create(J.prototype),{constructor:Di,isPointLight:!0,copy:function(e){return J.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),eh.prototype=Object.assign(Object.create(wb.prototype),{constructor:eh,isOrthographicCamera:!0,copy:function(e,t){return wb.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,o=r+e,a=n+t,s=n-t;if(null!==this.view&&this.view.enabled){var p=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),$=(this.right-this.left)/this.view.width,l=(this.top-this.bottom)/this.view.height;o=(i+=$*(this.view.offsetX/p))+$*(this.view.width/p),s=(a-=l*(this.view.offsetY/c))-l*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Ei.prototype=Object.assign(Object.create(ud.prototype),{constructor:Ei}),Fi.prototype=Object.assign(Object.create(J.prototype),{constructor:Fi,isDirectionalLight:!0,copy:function(e){return J.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ji.prototype=Object.assign(Object.create(J.prototype),{constructor:Ji,isAmbientLight:!0}),Ki.prototype=Object.assign(Object.create(J.prototype),{constructor:Ki,isRectAreaLight:!0,copy:function(e){return J.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=J.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Li.prototype,{load:function(e,t,r,n){var i=this,o=new Xa(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new Oy[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(n.uniforms[i]={},o.type){case"t":n.uniforms[i].value=r(o.value);break;case"c":n.uniforms[i].value=new z().setHex(o.value);break;case"v2":n.uniforms[i].value=new ba().fromArray(o.value);break;case"v3":n.uniforms[i].value=new aa().fromArray(o.value);break;case"v4":n.uniforms[i].value=new fa().fromArray(o.value);break;case"m4":n.uniforms[i].value=new da().fromArray(o.value);break;default:n.uniforms[i].value=o.value;}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=r(e.map)),void 0!==e.alphaMap&&(n.alphaMap=r(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),n.normalScale=new ba().fromArray(a)}return void 0!==e.displacementMap&&(n.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=r(e.specularMap)),void 0!==e.envMap&&(n.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=r(e.gradientMap)),n},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var Mi={decodeText:function(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function mn(e){this.manager=void 0!==e?e:pa}Object.assign(mn.prototype,{load:function(e,t,r,n){var i=this,o=new Xa(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=new q,r=e.data.index;if(void 0!==r){var n=new rw[r.type](r.array);t.setIndex(new w(n,1))}var i=e.data.attributes;for(var o in i){var a=i[o];n=new rw[a.type](a.array);t.addAttribute(o,new w(n,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var p=0,c=s.length;p!==c;++p){var $=s[p];t.addGroup($.start,$.count,$.materialIndex)}var l=e.data.boundingSphere;if(void 0!==l){var h=new aa;void 0!==l.center&&h.fromArray(l.center),t.boundingSphere=new jb(h,l.radius)}return t},setPath:function(e){return this.path=e,this}});var rw={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ke(){}function Pi(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:pa,this.withCredentials=!1}function jn(e){this.manager=void 0!==e?e:pa,this.resourcePath=""}Ke.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;r<n;r+=2){var i=t[r],o=t[r+1];if(i.test(e))return o}return null}},Object.assign(Ke.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,r){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:function(){var e={NoBlending:If,NormalBlending:Pc,AdditiveBlending:qk,SubtractiveBlending:pk,MultiplyBlending:mk,CustomBlending:Dk},t=new z,r=new Ph,n=new Li;return function(i,o,a){var s={};function p(e,t,n,i,p){var c,$=o+e,l=Ke.Handlers.get($);null!==l?c=l.load($):(r.setCrossOrigin(a),c=r.load($)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=Pb),1!==t[1]&&(c.wrapT=Pb)),void 0!==n&&c.offset.fromArray(n),void 0!==i&&("repeat"===i[0]&&(c.wrapS=Pb),"mirror"===i[0]&&(c.wrapS=Mc),"repeat"===i[1]&&(c.wrapT=Pb),"mirror"===i[1]&&(c.wrapT=Mc)),void 0!==p&&(c.anisotropy=p);var h=ea.generateUUID();return s[h]=c,h}var c={uuid:ea.generateUUID(),type:"MeshLambertMaterial"};for(var $ in i){var l=i[$];switch($){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=l;break;case"blending":c.blending=e[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",$,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(l).getHex();break;case"colorSpecular":c.specular=t.fromArray(l).getHex();break;case"colorEmissive":c.emissive=t.fromArray(l).getHex();break;case"specularCoef":c.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=p(l,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=p(l,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=p(l,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=p(l,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=p(l,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=p(l,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=l;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=p(l,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=p(l,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=p(l,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=p(l,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=ha;break;case"doubleSided":c.side=Td;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[$]=l;break;case"vertexColors":!0===l&&(c.vertexColors=Qc),"face"===l&&(c.vertexColors=yk);break;default:console.error("THREE.Loader.createMaterial: Unsupported",$,l);}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),n.setTextures(s),n.parse(c)}}()}),Object.assign(Pi.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=this,o=void 0===this.path?Mi.extractUrlBase(e):this.path,a=new Xa(this.manager);a.setPath(this.path),a.setWithCredentials(this.withCredentials),a.load(e,function(r){var n=JSON.parse(r),a=n.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var p=i.parse(n,o);t(p.geometry,p.materials)},r,n)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var r=new v;return function(e,t){function r(e,t){return e&1<<t}var n,i,o,a,s,p,c,$,l,h,u,V,d,f,m,x,v,g,y,b,_,M,w,S,T,E=e.faces,L=e.vertices,A=e.normals,C=e.colors,P=e.scale,B=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&B++;for(n=0;n<B;n++)t.faceVertexUvs[n]=[]}for(a=0,s=L.length;a<s;)(g=new aa).x=L[a++]*P,g.y=L[a++]*P,g.z=L[a++]*P,t.vertices.push(g);for(a=0,s=E.length;a<s;)if(u=r(h=E[a++],0),V=r(h,1),d=r(h,3),f=r(h,4),m=r(h,5),x=r(h,6),v=r(h,7),u){if((b=new Xb).a=E[a],b.b=E[a+1],b.c=E[a+3],(_=new Xb).a=E[a+1],_.b=E[a+2],_.c=E[a+3],a+=4,V&&(l=E[a++],b.materialIndex=l,_.materialIndex=l),o=t.faces.length,d)for(n=0;n<B;n++)for(S=e.uvs[n],t.faceVertexUvs[n][o]=[],t.faceVertexUvs[n][o+1]=[],i=0;i<4;i++)T=new ba(S[2*($=E[a++])],S[2*$+1]),2!==i&&t.faceVertexUvs[n][o].push(T),0!==i&&t.faceVertexUvs[n][o+1].push(T);if(f&&(c=3*E[a++],b.normal.set(A[c++],A[c++],A[c]),_.normal.copy(b.normal)),m)for(n=0;n<4;n++)c=3*E[a++],w=new aa(A[c++],A[c++],A[c]),2!==n&&b.vertexNormals.push(w),0!==n&&_.vertexNormals.push(w);if(x&&(M=C[p=E[a++]],b.color.setHex(M),_.color.setHex(M)),v)for(n=0;n<4;n++)M=C[p=E[a++]],2!==n&&b.vertexColors.push(new z(M)),0!==n&&_.vertexColors.push(new z(M));t.faces.push(b),t.faces.push(_)}else{if((y=new Xb).a=E[a++],y.b=E[a++],y.c=E[a++],V&&(l=E[a++],y.materialIndex=l),o=t.faces.length,d)for(n=0;n<B;n++)for(S=e.uvs[n],t.faceVertexUvs[n][o]=[],i=0;i<3;i++)T=new ba(S[2*($=E[a++])],S[2*$+1]),t.faceVertexUvs[n][o].push(T);if(f&&(c=3*E[a++],y.normal.set(A[c++],A[c++],A[c])),m)for(n=0;n<3;n++)c=3*E[a++],w=new aa(A[c++],A[c++],A[c]),y.vertexNormals.push(w);if(x&&(p=E[a++],y.color.setHex(C[p])),v)for(n=0;n<3;n++)p=E[a++],y.vertexColors.push(new z(C[p]));t.faces.push(y)}}(e,r),function(e,t){var r=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,i=e.skinWeights.length;n<i;n+=r){var o=e.skinWeights[n],a=r>1?e.skinWeights[n+1]:0,s=r>2?e.skinWeights[n+2]:0,p=r>3?e.skinWeights[n+3]:0;t.skinWeights.push(new fa(o,a,s,p))}if(e.skinIndices)for(n=0,i=e.skinIndices.length;n<i;n+=r){var c=e.skinIndices[n],$=r>1?e.skinIndices[n+1]:0,l=r>2?e.skinIndices[n+2]:0,h=r>3?e.skinIndices[n+3]:0;t.skinIndices.push(new fa(c,$,l,h))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,r),function(e,t){var r=e.scale;if(void 0!==e.morphTargets)for(var n=0,i=e.morphTargets.length;n<i;n++){t.morphTargets[n]={},t.morphTargets[n].name=e.morphTargets[n].name,t.morphTargets[n].vertices=[];for(var o=t.morphTargets[n].vertices,a=e.morphTargets[n].vertices,s=0,p=a.length;s<p;s+=3){var c=new aa;c.x=a[s]*r,c.y=a[s+1]*r,c.z=a[s+2]*r,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");var $=t.faces,l=e.morphColors[0].colors;for(n=0,i=$.length;n<i;n++)$[n].color.fromArray(l,3*n)}}(e,r),function(e,t){var r=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var i=0;i<n.length;i++){var o=Ma.parseAnimation(n[i],t.bones);o&&r.push(o)}if(t.morphTargets){var a=Ma.CreateClipsFromMorphTargetSequences(t.morphTargets,10);r=r.concat(a)}r.length>0&&(t.animations=r)}(e,r),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:r}:{geometry:r,materials:Ke.prototype.initMaterials(e.materials,this.resourcePath||t,this.crossOrigin)}}}()}),Object.assign(jn.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=this,o=void 0===this.path?Mi.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Xa(i.manager);a.setPath(this.path),a.load(e,function(r){var o=null;try{o=JSON.parse(r)}catch(s){return void 0!==n&&n(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},r,n)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var r=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,n,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=new mc().fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var n=new Pi,i=new mn,o=0,a=e.length;o<a;o++){var s,p=e[o];switch(p.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ba[p.type](p.width,p.height,p.widthSegments,p.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ba[p.type](p.width,p.height,p.depth,p.widthSegments,p.heightSegments,p.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ba[p.type](p.radius,p.segments,p.thetaStart,p.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ba[p.type](p.radiusTop,p.radiusBottom,p.height,p.radialSegments,p.heightSegments,p.openEnded,p.thetaStart,p.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ba[p.type](p.radius,p.height,p.radialSegments,p.heightSegments,p.openEnded,p.thetaStart,p.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ba[p.type](p.radius,p.widthSegments,p.heightSegments,p.phiStart,p.phiLength,p.thetaStart,p.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ba[p.type](p.radius,p.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ba[p.type](p.innerRadius,p.outerRadius,p.thetaSegments,p.phiSegments,p.thetaStart,p.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ba[p.type](p.radius,p.tube,p.radialSegments,p.tubularSegments,p.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ba[p.type](p.radius,p.tube,p.tubularSegments,p.radialSegments,p.p,p.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ba[p.type](p.points,p.segments,p.phiStart,p.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ba[p.type](p.vertices,p.indices,p.radius,p.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],$=0,l=p.shapes.length;$<l;$++){var h=t[p.shapes[$]];c.push(h)}s=new Ba[p.type](c,p.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],$=0,l=p.shapes.length;$<l;$++){h=t[p.shapes[$]];c.push(h)}var u=p.options.extrudePath;void 0!==u&&(p.options.extrudePath=new hx[u.type]().fromJSON(u)),s=new Ba[p.type](c,p.options);break;case"BufferGeometry":s=i.parse(p);break;case"Geometry":s=n.parse(p,this.resourcePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+p.type+"\"");continue;}s.uuid=p.uuid,void 0!==p.name&&(s.name=p.name),!0===s.isBufferGeometry&&void 0!==p.userData&&(s.userData=p.userData),r[p.uuid]=s}return r},parseMaterials:function(e,t){var r={},n={};if(void 0!==e){var i=new Li;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var p=[],c=0;c<s.materials.length;c++){var $=s.materials[c];void 0===r[$.uuid]&&(r[$.uuid]=i.parse($)),p.push(r[$.uuid])}n[s.uuid]=p}else n[s.uuid]=i.parse(s),r[s.uuid]=n[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=Ma.parse(n);void 0!==n.uuid&&(i.uuid=n.uuid),t.push(i)}return t},parseImages:function(e,t){var r=this,n={};function i(e){return r.manager.itemStart(e),o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e),r.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var o=new ig(new oo(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var p=e[a],c=p.url;if(Array.isArray(c)){n[p.uuid]=[];for(var $=0,l=c.length;$<l;$++){var h=c[$],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:r.resourcePath+h;n[p.uuid].push(i(u))}}else{u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p.url)?p.url:r.resourcePath+p.url;n[p.uuid]=i(u)}}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Jb(t[s.image]):new E(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=r(s.mapping,jA)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=r(s.wrap[0],iw),a.wrapT=r(s.wrap[1],iw)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=r(s.minFilter,hw)),void 0!==s.magFilter&&(a.magFilter=r(s.magFilter,hw)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),n[s.uuid]=a}return n},parseObject:function(e,t,r){var n;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];void 0===r[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(r[o])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}switch(e.type){case"Scene":n=new zf,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new z(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new Ee(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new Je(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new N(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new eh(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new Ji(e.color,e.intensity);break;case"DirectionalLight":n=new Fi(e.color,e.intensity);break;case"PointLight":n=new Di(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new Ki(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new Ci(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new pi(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);n=a.bones&&a.bones.length>0?new ji(a,s):new Aa(a,s);break;case"LOD":n=new nh;break;case"Line":n=new xa(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":n=new ei(i(e.geometry),o(e.material));break;case"LineSegments":n=new F(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":n=new Zd(i(e.geometry),o(e.material));break;case"Sprite":n=new qh(o(e.material));break;case"Group":n=new Pe;break;default:n=new b;}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,c=0;c<p.length;c++)n.add(this.parseObject(p[c],t,r));if("LOD"===e.type)for(var $=e.levels,l=0;l<$.length;l++){var h=$[l],u=n.getObjectByProperty("uuid",h.object);void 0!==u&&n.addLevel(u,h.distance)}return n}});var jw,jA={UVMapping:bk,CubeReflectionMapping:$j,CubeRefractionMapping:Zj,EquirectangularReflectionMapping:Pk,EquirectangularRefractionMapping:Yj,SphericalReflectionMapping:Rk,CubeUVReflectionMapping:Xj,CubeUVRefractionMapping:Wj},iw={RepeatWrapping:Pb,ClampToEdgeWrapping:Qa,MirroredRepeatWrapping:Mc},hw={NearestFilter:ta,NearestMipMapNearestFilter:Sj,NearestMipMapLinearFilter:Rj,LinearFilter:va,LinearMipMapNearestFilter:Xk,LinearMipMapLinearFilter:xf};function gn(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:pa,this.options=void 0}function fn(){this.type="ShapePath",this.color=new z,this.subPaths=[],this.currentPath=null}function en(e){this.type="Font",this.data=e}function pA(e,t,r){for(var n=Array.from?Array.from(e):String(e).split(""),i=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,a=[],s=0,p=0,c=0;c<n.length;c++){var $=n[c];if("\n"===$)s=0,p-=o;else{var l=qA($,i,s,p,r);s+=l.offsetX,a.push(l.path)}}return a}function qA(e,t,r,n,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,p,c,$,l,h,u,V=new fn;if(o.o)for(var d=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),f=0,m=d.length;f<m;){switch(d[f++]){case"m":a=d[f++]*t+r,s=d[f++]*t+n,V.moveTo(a,s);break;case"l":a=d[f++]*t+r,s=d[f++]*t+n,V.lineTo(a,s);break;case"q":p=d[f++]*t+r,c=d[f++]*t+n,$=d[f++]*t+r,l=d[f++]*t+n,V.quadraticCurveTo($,l,p,c);break;case"b":p=d[f++]*t+r,c=d[f++]*t+n,$=d[f++]*t+r,l=d[f++]*t+n,h=d[f++]*t+r,u=d[f++]*t+n,V.bezierCurveTo($,l,h,u,p,c);}}return{offsetX:o.ha*t,path:V}}}function bw(e){this.manager=void 0!==e?e:pa}gn.prototype={constructor:gn,setOptions:function(e){return this.options=e,this},load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=hd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(r){hd.add(e,r),t&&t(r),i.manager.itemEnd(e)}).catch(function(t){n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(fn.prototype,{moveTo:function(e,t){this.currentPath=new nb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,o){this.currentPath.bezierCurveTo(e,t,r,n,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],o=new mc;o.curves=i.curves,t.push(o)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,o=0;o<r;i=o++){var a=t[i],s=t[o],p=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],p=-p,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var $=c*(e.x-a.x)-p*(e.y-a.y);if(0===$)return!0;if($<0)continue;n=!n}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return n}var i=ic.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return r(o);var a,s,p,c=[];if(1===o.length)return s=o[0],(p=new mc).curves=s.curves,c.push(p),c;var $=!i(o[0].getPoints());$=e?!$:$;var l,h,u=[],V=[],d=[],f=0;V[f]=void 0,d[f]=[];for(var m=0,x=o.length;m<x;m++)a=i(l=(s=o[m]).getPoints()),(a=e?!a:a)?(!$&&V[f]&&f++,V[f]={s:new mc,p:l},V[f].s.curves=s.curves,$&&f++,d[f]=[]):d[f].push({h:s,p:l[0]});if(!V[0])return r(o);if(V.length>1){for(var v=!1,g=[],y=0,b=V.length;y<b;y++)u[y]=[];for(y=0,b=V.length;y<b;y++)for(var _=d[y],M=0;M<_.length;M++){for(var w=_[M],S=!0,T=0;T<V.length;T++)n(w.p,V[T].p)&&(y!==T&&g.push({froms:y,tos:T,hole:M}),S?(S=!1,u[T].push(w)):v=!0);S&&u[y].push(w)}g.length>0&&(v||(d=u))}m=0;for(var E=V.length;m<E;m++){p=V[m].s,c.push(p);for(var L=0,A=(h=d[m]).length;L<A;L++)p.holes.push(h[L].h)}return c}}),Object.assign(en.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var r=[],n=pA(e,t,this.data),i=0,o=n.length;i<o;i++)Array.prototype.push.apply(r,n[i].toShapes());return r}}),Object.assign(bw.prototype,{load:function(e,t,r,n){var i=this,o=new Xa(this.manager);o.setPath(this.path),o.load(e,function(e){var r;try{r=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)},r,n)},parse:function(e){return new en(e)},setPath:function(e){return this.path=e,this}});var cn={getContext:function(){return void 0===jw&&(jw=new(window.AudioContext||window.webkitAudioContext)),jw},setContext:function(e){jw=e}};function bn(e){this.manager=void 0!==e?e:pa}function Uv(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new N,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new N,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function bh(e,t,r,n){b.call(this),this.type="CubeCamera";var i=new N(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new aa(1,0,0)),this.add(i);var o=new N(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new aa(-1,0,0)),this.add(o);var a=new N(90,1,e,t);a.up.set(0,0,1),a.lookAt(new aa(0,1,0)),this.add(a);var s=new N(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new aa(0,-1,0)),this.add(s);var p=new N(90,1,e,t);p.up.set(0,-1,0),p.lookAt(new aa(0,0,1)),this.add(p);var c=new N(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new aa(0,0,-1)),this.add(c),n=n||{format:nf,magFilter:va,minFilter:va},this.renderTarget=new Ie(r,r,n),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,n=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,i,r),r.activeCubeFace=1,e.render(t,o,r),r.activeCubeFace=2,e.render(t,a,r),r.activeCubeFace=3,e.render(t,s,r),r.activeCubeFace=4,e.render(t,p,r),r.texture.generateMipmaps=n,r.activeCubeFace=5,e.render(t,c,r),e.setRenderTarget(null)},this.clear=function(e,t,r,n){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,r,n);e.setRenderTarget(null)}}function $m(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Zm(){b.call(this),this.type="AudioListener",this.context=cn.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Le(e){b.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ym(e){Le.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Xm(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Wm(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp;}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(bn.prototype,{load:function(e,t,r,n){var i=new Xa(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(e){var r=e.slice(0);cn.getContext().decodeAudioData(r,function(e){t(e)})},r,n)},setPath:function(e){return this.path=e,this}}),Object.assign(Uv.prototype,{update:function(){var e,t,r,n,i,o,a,s,p=new da,c=new da;return function($){if(e!==this||t!==$.focus||r!==$.fov||n!==$.aspect*this.aspect||i!==$.near||o!==$.far||a!==$.zoom||s!==this.eyeSep){e=this,t=$.focus,r=$.fov,n=$.aspect*this.aspect,i=$.near,o=$.far,a=$.zoom;var l,h,u=$.projectionMatrix.clone(),V=(s=this.eyeSep/2)*i/t,d=i*Math.tan(ea.DEG2RAD*r*.5)/a;c.elements[12]=-s,p.elements[12]=s,l=-d*n+V,h=d*n+V,u.elements[0]=2*i/(h-l),u.elements[8]=(h+l)/(h-l),this.cameraL.projectionMatrix.copy(u),l=-d*n-V,h=d*n-V,u.elements[0]=2*i/(h-l),u.elements[8]=(h+l)/(h-l),this.cameraR.projectionMatrix.copy(u)}this.cameraL.matrixWorld.copy($.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy($.matrixWorld).multiply(p)}}()}),bh.prototype=Object.create(b.prototype),bh.prototype.constructor=bh,Object.assign($m.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Zm.prototype=Object.assign(Object.create(b.prototype),{constructor:Zm,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new aa,t=new O,r=new aa,n=new aa,i=new $m;return function(o){b.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),a.positionX){var p=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(e.x,p),a.positionY.linearRampToValueAtTime(e.y,p),a.positionZ.linearRampToValueAtTime(e.z,p),a.forwardX.linearRampToValueAtTime(n.x,p),a.forwardY.linearRampToValueAtTime(n.y,p),a.forwardZ.linearRampToValueAtTime(n.z,p),a.upX.linearRampToValueAtTime(s.x,p),a.upY.linearRampToValueAtTime(s.y,p),a.upZ.linearRampToValueAtTime(s.z,p)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z)}}()}),Le.prototype=Object.assign(Object.create(b.prototype),{constructor:Le,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Ym.prototype=Object.assign(Object.create(Le.prototype),{constructor:Ym,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(){var e=new aa,t=new O,r=new aa,n=new aa;return function(i){b.prototype.updateMatrixWorld.call(this,i);var o=this.panner;if(this.matrixWorld.decompose(e,t,r),n.set(0,0,1).applyQuaternion(t),o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(e.x,a),o.positionY.linearRampToValueAtTime(e.y,a),o.positionZ.linearRampToValueAtTime(e.z,a),o.orientationX.linearRampToValueAtTime(n.x,a),o.orientationY.linearRampToValueAtTime(n.y,a),o.orientationZ.linearRampToValueAtTime(n.z,a)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(n.x,n.y,n.z)}}()}),Object.assign(Xm.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(Wm.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==n;++a)r[i+a]=r[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(r,n,a,1-i,t)}for(var s=t,p=t+t;s!==p;++s)if(r[s]!==r[s+t]){o.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,o=n;i!==o;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var o=0;o!==i;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,n){O.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var o=1-n,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[r+a]*n}}});var Mv,DA,Vm="\\[\\]\\.:\\/";function Kv(e,t,r){var n=r||_.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function _(e,t,r){this.path=t,this.parsedPath=r||_.parseTrackName(t),this.node=_.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Jv(){this.uuid=ea.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Iv(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,o=new Array(i),a={endingStart:zd,endingEnd:zd},s=0;s!==i;++s){var p=n[s].createInterpolant(null);o[s]=p,p.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Um(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Vi(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Sm(){q.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Rm(e,t,r){_c.call(this,e,t),this.meshPerAttribute=r||1}function Qm(e,t,r,n){"number"==typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),w.call(this,e,t,r),this.meshPerAttribute=n||1}function zv(e,t,r,n){this.ray=new Hd(e,t),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function yv(e,t){return e.distance-t.distance}function Pm(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,o=0,a=i.length;o<a;o++)Pm(i[o],t,r,!0)}function wv(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function vv(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function Om(e,t){this.min=void 0!==e?e:new ba(1/0,1/0),this.max=void 0!==t?t:new ba(-1/0,-1/0)}function Nm(e,t){this.start=void 0!==e?e:new aa,this.end=void 0!==t?t:new aa}function Zg(e){b.call(this),this.material=e,this.render=function(){}}function Ug(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var p=new q,c=new k(2*a*3,3);p.addAttribute("position",c),F.call(this,p,new D({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ce(e,t){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new q,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}r.addAttribute("position",new k(n,3));var p=new D({fog:!1});this.cone=new F(r,p),this.add(this.cone),this.update()}function ev(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,ev(e.children[r]));return t}function ee(e){for(var t=ev(e),r=new q,n=[],i=[],o=new z(0,0,1),a=new z(0,1,0),s=0;s<t.length;s++){var p=t[s];p.parent&&p.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}r.addAttribute("position",new k(n,3)),r.addAttribute("color",new k(i,3));var c=new D({vertexColors:Qc,depthTest:!1,depthWrite:!1,transparent:!0});F.call(this,r,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function fe(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var n=new id(t,4,2),i=new $a({wireframe:!0,fog:!1});Aa.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ge(e,t){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var r=new D({fog:!1}),n=new q;n.addAttribute("position",new w(new Float32Array(15),3)),this.line=new xa(n,r),this.add(this.line),this.update()}function le(e,t,r){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new Gd(t);n.rotateY(.5*Math.PI),this.material=new $a({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Qc);var i=n.getAttribute("position"),o=new Float32Array(3*i.count);n.addAttribute("color",new w(o,3)),this.add(new Aa(n,this.material)),this.update()}function lg(e,t,r,n){e=e||10,t=t||10,r=new z(void 0!==r?r:4473924),n=new z(void 0!==n?n:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],p=[],c=0,$=0,l=-a;c<=t;c++,l+=o){s.push(-a,0,l,a,0,l),s.push(l,0,-a,l,0,a);var h=c===i?r:n;h.toArray(p,$),$+=3,h.toArray(p,$),$+=3,h.toArray(p,$),$+=3,h.toArray(p,$),$+=3}var u=new q;u.addAttribute("position",new k(s,3)),u.addAttribute("color",new k(p,3));var V=new D({vertexColors:Qc});F.call(this,u,V)}function _i(e,t,r,n,i,o){e=e||10,t=t||16,r=r||8,n=n||64,i=new z(void 0!==i?i:4473924),o=new z(void 0!==o?o:8947848);var a,s,p,c,$,l,h,u=[],V=[];for(c=0;c<=t;c++)p=c/t*(2*Math.PI),a=Math.sin(p)*e,s=Math.cos(p)*e,u.push(0,0,0),u.push(a,0,s),h=1&c?i:o,V.push(h.r,h.g,h.b),V.push(h.r,h.g,h.b);for(c=0;c<=r;c++)for(h=1&c?i:o,l=e-e/r*c,$=0;$<n;$++)p=$/n*(2*Math.PI),a=Math.sin(p)*l,s=Math.cos(p)*l,u.push(a,0,s),V.push(h.r,h.g,h.b),p=($+1)/n*(2*Math.PI),a=Math.sin(p)*l,s=Math.cos(p)*l,u.push(a,0,s),V.push(h.r,h.g,h.b);var d=new q;d.addAttribute("position",new k(u,3)),d.addAttribute("color",new k(V,3));var f=new D({vertexColors:Qc});F.call(this,d,f)}function kg(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16776960,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var p=new q,c=new k(2*a*3,3);p.addAttribute("position",c),F.call(this,p,new D({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Ce(e,t,r){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var n=new q;n.addAttribute("position",new k([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new D({fog:!1});this.lightPlane=new xa(n,i),this.add(this.lightPlane),(n=new q).addAttribute("position",new k([0,0,0,0,0,1],3)),this.targetLine=new xa(n,i),this.add(this.targetLine),this.update()}function cg(e){var t=new q,r=new D({color:16777215,vertexColors:yk}),n=[],i=[],o={},a=new z(16755200),s=new z(16711680),p=new z(43775),c=new z(16777215),$=new z(3355443);function l(e,t,r){h(e,r),h(t,r)}function h(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(n.length/3-1)}l("n1","n2",a),l("n2","n4",a),l("n4","n3",a),l("n3","n1",a),l("f1","f2",a),l("f2","f4",a),l("f4","f3",a),l("f3","f1",a),l("n1","f1",a),l("n2","f2",a),l("n3","f3",a),l("n4","f4",a),l("p","n1",s),l("p","n2",s),l("p","n3",s),l("p","n4",s),l("u1","u2",p),l("u2","u3",p),l("u3","u1",p),l("c","t",c),l("p","c",$),l("cn1","cn2",$),l("cn3","cn4",$),l("cf1","cf2",$),l("cf3","cf4",$),t.addAttribute("position",new k(n,3)),t.addAttribute("color",new k(i,3)),F.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function dc(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new q;i.setIndex(new w(r,1)),i.addAttribute("position",new w(n,3)),F.call(this,i,new D({color:t})),this.matrixAutoUpdate=!1,this.update()}function Sf(e,t){this.type="Box3Helper",this.box=e;var r=void 0!==t?t:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new q;i.setIndex(new w(n,1)),i.addAttribute("position",new k([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),F.call(this,i,new D({color:r})),this.geometry.computeBoundingSphere()}function Pf(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==r?r:16776960,i=new q;i.addAttribute("position",new k([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),xa.call(this,i,new D({color:n}));var o=new q;o.addAttribute("position",new k([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Aa(o,new $a({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function Yb(e,t,r,n,i,o){b.call(this),void 0===e&&(e=new THREE.Vector3(0,0,1)),void 0===t&&(t=new THREE.Vector3(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=16776960),void 0===i&&(i=.2*r),void 0===o&&(o=.2*i),void 0===Mv&&((Mv=new q).addAttribute("position",new k([0,0,0,0,1,0],3)),(DA=new Nb(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new xa(Mv,new D({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Aa(DA,new $a({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,o)}function Kf(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new q;r.addAttribute("position",new k(t,3)),r.addAttribute("color",new k([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new D({vertexColors:Qc});F.call(this,r,n)}function lB(e,t,r,n,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Xb(e,t,r,i,o,a)}Object.assign(Kv.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(_,{Composite:Kv,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new _.Composite(e,t,r):new _(e,t,r)},sanitizeNodeName:function(){var e=new RegExp("["+Vm+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Vm+"]",t="[^"+Vm.replace("\\.","")+"]",r=/((?:WC+[\/:])*)/.source.replace("WC",e),n=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+r+n+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==s.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var o=n(i.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(_.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=_.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r];}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[n];if(void 0!==s){var p=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?p=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][p]}else{var $=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+$+"."+n+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(_.prototype,{_getValue_unbound:_.prototype.getValue,_setValue_unbound:_.prototype.setValue}),Object.assign(Jv.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,p=void 0,c=0,$=arguments.length;c!==$;++c){var l=arguments[c],h=l.uuid,u=n[h];if(void 0===u){u=t++,n[h]=u,e.push(l);for(var V=0,d=s;V!==d;++V)a[V].push(new _(l,i[V],o[V]))}else if(u<r){p=e[u];var f=--r,m=e[f];n[m.uuid]=u,e[u]=m,n[h]=f,e[f]=l;for(V=0,d=s;V!==d;++V){var x=a[V],v=x[f],g=x[u];x[u]=v,void 0===g&&(g=new _(l,i[V],o[V])),x[f]=g}}else e[u]!==p&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],p=s.uuid,c=r[p];if(void 0!==c&&c>=t){var $=t++,l=e[$];r[l.uuid]=c,e[c]=l,r[p]=$,e[$]=s;for(var h=0,u=i;h!==u;++h){var V=n[h],d=V[$],f=V[c];V[c]=d,V[$]=f}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var p=arguments[a].uuid,c=n[p];if(void 0!==c)if(delete n[p],c<r){var $=--r,l=e[$],h=e[m=--t];n[l.uuid]=c,e[c]=l,n[h.uuid]=$,e[$]=h,e.pop();for(var u=0,V=o;u!==V;++u){var d=(x=i[u])[$],f=x[m];x[c]=d,x[$]=f,x.pop()}}else{var m;n[(h=e[m=--t]).uuid]=c,e[c]=h,e.pop();for(u=0,V=o;u!==V;++u){var x;(x=i[u])[c]=x[m],x.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var o=this._paths,a=this._parsedPaths,s=this._objects,p=s.length,c=this.nCachedObjects_,$=new Array(p);n=i.length,r[e]=n,o.push(e),a.push(t),i.push($);for(var l=c,h=s.length;l!==h;++l){var u=s[l];$[l]=new _(u,e,t)}return $},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=r,o[r]=s,o.pop(),i[r]=i[a],i.pop(),n[r]=n[a],n.pop()}}}),Object.assign(Iv.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,o=i/n,a=n/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,p=o.sampleValues;return s[0]=i,s[1]=i+r,p[0]=e/a,p[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*r;if(o<0||0===r)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var p=this._interpolants,c=this._propertyBindings,$=0,l=p.length;$!==l;++$)p[$].evaluate(a),c[$].accumulate(n,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r)t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,r=this._clip.duration,n=this.loop,i=this._loopCount,o=n===or;if(0===e)return-1===i?t:o&&1==(1&i)?r-t:t;if(n===mr){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=r||t<0){var a=Math.floor(t/r);t-=r*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var p=e<0;this._setEndings(p,!p,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=wd,n.endingEnd=wd):(n.endingStart=e?this.zeroSlopeAtStart?wd:zd:lh,n.endingEnd=t?this.zeroSlopeAtEnd?wd:zd:lh)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=r,this}}),Um.prototype=Object.assign(Object.create(Rb.prototype),{constructor:Um,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,p=this._bindingsByRootAndName,c=p[s];void 0===c&&(c={},p[s]=c);for(var $=0;$!==i;++$){var l=n[$],h=l.name,u=c[h];if(void 0!==u)o[$]=u;else{if(void 0!==(u=o[$])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,h));continue}var V=t&&t._propertyBindings[$].binding.parsedPath;++(u=new Wm(_.create(r,h,V),l.ValueTypeName,l.getValueSize())).referenceCount,this._addInactiveBinding(u,s,h),o[$]=u}a[$].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,p=s[s.length-1],c=e._byClipCacheIndex;p._byClipCacheIndex=c,s[c]=p,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],o=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],p=e._cacheIndex;s._cacheIndex=p,t[p]=s,t.pop(),delete a[i];e:{for(var c in a)break e;delete o[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new Og(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?Ma.findByName(r,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var p=a.actionByRoot[n];if(void 0!==p)return p;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new Iv(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,n),c},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?Ma.findByName(r,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==r;++a){t[a]._update(n,e,i,o)}var s=this._bindings,p=this._nActiveBindings;for(a=0;a!==p;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var p=o[a];this._deactivateAction(p);var c=p._cacheIndex,$=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,$._cacheIndex=c,t[c]=$,t.pop(),this._removeInactiveBindingsForAction(p)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Vi.prototype.clone=function(){return new Vi(void 0===this.value.clone?this.value:this.value.clone())},Sm.prototype=Object.assign(Object.create(q.prototype),{constructor:Sm,isInstancedBufferGeometry:!0,copy:function(e){return q.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}}),Rm.prototype=Object.assign(Object.create(_c.prototype),{constructor:Rm,isInstancedInterleavedBuffer:!0,copy:function(e){return _c.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Qm.prototype=Object.assign(Object.create(w.prototype),{constructor:Qm,isInstancedBufferAttribute:!0,copy:function(e){return w.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(zv.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var n=r||[];return Pm(e,this,n,t),n.sort(yv),n},intersectObjects:function(e,t,r){var n=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,o=e.length;i<o;i++)Pm(e[i],this,n,t);return n.sort(yv),n}}),Object.assign(wv.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ea.clamp(t/this.radius,-1,1))),this}}),Object.assign(vv.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}}),Object.assign(Om.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new ba;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new ba),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new ba),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new ba),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new ba),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new ba;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Nm.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new aa),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new aa),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new aa),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new aa,t=new aa;return function(r,n){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e)/i;return n&&(o=ea.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new aa),this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Zg.prototype=Object.create(b.prototype),Zg.prototype.constructor=Zg,Zg.prototype.isImmediateRenderObject=!0,Ug.prototype=Object.create(F.prototype),Ug.prototype.constructor=Ug,Ug.prototype.update=function(){var e=new aa,t=new aa,r=new Z;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,p=a.faces,c=0,$=0,l=p.length;$<l;$++)for(var h=p[$],u=0,V=h.vertexNormals.length;u<V;u++){var d=s[h[n[u]]],f=h.vertexNormals[u];e.copy(d).applyMatrix4(i),t.copy(f).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var m=a.attributes.position,x=a.attributes.normal;for(c=0,u=0,V=m.count;u<V;u++)e.set(m.getX(u),m.getY(u),m.getZ(u)).applyMatrix4(i),t.set(x.getX(u),x.getY(u),x.getZ(u)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),ce.prototype=Object.create(b.prototype),ce.prototype.constructor=ce,ce.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ce.prototype.update=function(){var e=new aa,t=new aa;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),ee.prototype=Object.create(F.prototype),ee.prototype.constructor=ee,ee.prototype.updateMatrixWorld=function(){var e=new aa,t=new da,r=new da;return function(n){var i=this.bones,o=this.geometry,a=o.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var s=0,p=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(r,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(p,e.x,e.y,e.z),t.multiplyMatrices(r,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(p+1,e.x,e.y,e.z),p+=2)}o.getAttribute("position").needsUpdate=!0,b.prototype.updateMatrixWorld.call(this,n)}}(),fe.prototype=Object.create(Aa.prototype),fe.prototype.constructor=fe,fe.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},fe.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ge.prototype=Object.create(b.prototype),ge.prototype.constructor=ge,ge.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ge.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,r=this.line.geometry.attributes.position,n=r.array;n[0]=e,n[1]=-t,n[2]=0,n[3]=e,n[4]=t,n[5]=0,n[6]=-e,n[7]=t,n[8]=0,n[9]=-e,n[10]=-t,n[11]=0,n[12]=e,n[13]=-t,n[14]=0,r.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},le.prototype=Object.create(b.prototype),le.prototype.constructor=le,le.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},le.prototype.update=function(){var e=new aa,t=new z,r=new z;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=n.geometry.getAttribute("color");t.copy(this.light.color),r.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:r;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),lg.prototype=Object.create(F.prototype),lg.prototype.constructor=lg,_i.prototype=Object.create(F.prototype),_i.prototype.constructor=_i,kg.prototype=Object.create(F.prototype),kg.prototype.constructor=kg,kg.prototype.update=function(){var e=new aa,t=new aa,r=new Z;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,p=0,c=0,$=s.length;c<$;c++){var l=s[c],h=l.normal;e.copy(a[l.a]).add(a[l.b]).add(a[l.c]).divideScalar(3).applyMatrix4(n),t.copy(h).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),i.setXYZ(p,e.x,e.y,e.z),p+=1,i.setXYZ(p,t.x,t.y,t.z),p+=1}i.needsUpdate=!0}}(),Ce.prototype=Object.create(b.prototype),Ce.prototype.constructor=Ce,Ce.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Ce.prototype.update=function(){var e=new aa,t=new aa,r=new aa;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r),this.targetLine.scale.z=r.length()}}(),cg.prototype=Object.create(F.prototype),cg.prototype.constructor=cg,cg.prototype.update=function(){var e,t,r=new aa,n=new wb;function i(i,o,a,s){r.set(o,a,s).unproject(n);var p=t[i];if(void 0!==p)for(var c=e.getAttribute("position"),$=0,l=p.length;$<l;$++)c.setXYZ(p[$],r.x,r.y,r.z)}return function(){e=this.geometry,t=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),dc.prototype=Object.create(F.prototype),dc.prototype.constructor=dc,dc.prototype.update=function(){var e=new Kb;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,n=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=r.x,o[4]=n.y,o[5]=n.z,o[6]=r.x,o[7]=r.y,o[8]=n.z,o[9]=n.x,o[10]=r.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=r.z,o[15]=r.x,o[16]=n.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=n.x,o[22]=r.y,o[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),dc.prototype.setFromObject=function(e){return this.object=e,this.update(),this},dc.prototype.copy=function(e){return F.prototype.copy.call(this,e),this.object=e.object,this},dc.prototype.clone=function(){return new this.constructor().copy(this)},Sf.prototype=Object.create(F.prototype),Sf.prototype.constructor=Sf,Sf.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),b.prototype.updateMatrixWorld.call(this,e))},Pf.prototype=Object.create(xa.prototype),Pf.prototype.constructor=Pf,Pf.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?ha:Vd,this.lookAt(this.plane.normal),b.prototype.updateMatrixWorld.call(this,e)},Yb.prototype=Object.create(b.prototype),Yb.prototype.constructor=Yb,Yb.prototype.setDirection=function(){var e,t=new aa;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),Yb.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},Yb.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Yb.prototype.copy=function(e){return b.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Yb.prototype.clone=function(){return new this.constructor().copy(this)},Kf.prototype=Object.create(F.prototype),Kf.prototype.constructor=Kf;var mB=0,nB=1;function oB(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function pB(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function qB(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Zd(e,t)}function rB(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new qh(e)}function sB(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Zd(e,t)}function tB(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new lb(e)}function uB(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new lb(e)}function vB(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new lb(e)}function wB(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new aa(e,t,r)}function xB(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new w(e,t).setDynamic(!0)}function yB(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ag(e,t)}function zB(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new zg(e,t)}function AB(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new xg(e,t)}function BB(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new vg(e,t)}function CB(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Yc(e,t)}function DB(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new tg(e,t)}function EB(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Wc(e,t)}function FB(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new k(e,t)}function GB(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new og(e,t)}function Wu(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),$.call(this,e),this.type="catmullrom",this.closed=!0}function Vu(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),$.call(this,e),this.type="catmullrom"}function Im(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),$.call(this,e),this.type="catmullrom"}function KB(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Kf(e)}function LB(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new dc(e,t)}function MB(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new F(new me(e.geometry),new D({color:void 0!==t?t:16777215}))}function NB(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new F(new Sd(e.geometry),new D({color:void 0!==t?t:16777215}))}function OB(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Xa(e)}function PB(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ko(e)}g.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(g.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Sb.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new v,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new aa(i.x,i.y,i.z||0))}return t}}),Object.assign(nb.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Wu.prototype=Object.create($.prototype),Vu.prototype=Object.create($.prototype),Im.prototype=Object.create($.prototype),Object.assign(Im.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),lg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ee.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ke.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Mi.extractUrlBase(e)}}),Object.assign(Pi.prototype,{setTexturePath:function(e){return console.warn("THREE.JSONLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(jn.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Om.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Kb.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Nm.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(ea,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ea.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ea.ceilPowerOfTwo(e)}}),Object.assign(Z.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(da.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new aa),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,o)}}),Ib.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},O.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Hd.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ia.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ia,{barycoordFromPoint:function(e,t,r,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ia.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ia.getNormal(e,t,r,n)}}),Object.assign(mc.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new pd(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new gd(this,e)}}),Object.assign(ba.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(aa.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(fa.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(v.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(b.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(b.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(nh.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(kh.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(g.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),N.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(J.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(w.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(q.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(q.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(qb.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Vi.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(s.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new z}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===wk}}}),Object.defineProperties(mb.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Na.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(An.prototype,{clearTarget:function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(An.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cw.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(kd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Ow.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Le.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return new bn().load(e,function(e){t.setBuffer(e)}),this},Xm.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},bh.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var QB={merge:function(e,t,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function RB(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function SB(){console.error("THREE.CanvasRenderer has been removed")}oc.crossOrigin=void 0,oc.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ph;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},oc.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new io;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},oc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},oc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var TB={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function UB(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}UB,TB,SB,RB,QB,PB,OB,NB,MB,LB,KB,Im,Vu,Wu,GB,FB,EB,DB,CB,BB,AB,zB,yB,xB,wB,vB,uB,tB,sB,rB,qB,pB,oB,nB,mB,lB,$d,Jr,ih,Hr,Gr,Fr,Er,Dr,lI,Br,pl,zr,jh,xr,wr,ol,lh,wd,zd,Nj,th,wh,or,nr,mr,lr,kr,jr,ir,hr,gr,fr,er,dr,cr,br,ar,_q,$q,Zq,jl,il,hl,gl,fl,el,dl,cl,Qq,kf,Bd,EI,Mq,Lq,ob,nf,Iq,uf,Gq,Fq,Eq,Oj,pf,Zk,Aq,wf,yq,xq,yh,xf,Xk,va,Rj,Sj,ta,Mc,Qa,Pb,Wj,Xj,Rk,Yj,Pk,Zj,$j,bk,eq,dq,cq,Lk,ck,_p,$p,Df,Yp,Xp,Wp,Vp,dk,Tp,Sp,Rp,Qp,Pp,Op,Np,Mp,Ik,Hk,Jp,Ip,Hp,Gp,ek,jk,Dp,Cp,Oc,Dk,mk,pk,qk,Pc,If,Qc,yk,xk,ZI,wk,Td,ha,Vd,mp,vm,hJ,jJ,kJ,lJ,gp,zk,ep,mJ,cp,ib,xb,fb,eb,Fa,Ra,vb,bb,$,te,w,Ag,zg,xg,vg,Yc,tg,Wc,k,og,s,D,nd,Uc,$a,xc,yc,$c,jd,qd,mb,Db,vd,lb,Na,_e,vc,Id,Rc,$d,pe,yf,Nb,bd,Af,Bf,me,qb,pd,fd,gd,xe,Of,Nc,jg,Be,Rf,id,Tf,Ld,Wf,ye,pg,Oe,rg,Qe,ug,ya,Tg,Ue,Dg,af,Kg,Gd,Mg,Nd,Qg,Rd,Vg,Sd,Fw,ic,oc,g,Sb,en,fn,nb,mc,Kf,Yb,Pf,Sf,dc,cg,Ce,kg,_i,lg,le,ge,fe,ee,ce,Ug,Zg,z,O,ba,aa,fa,ad,Nm,Om,Kb,Z,da,Hd,jb,Lj,Ib,vv,wv,ea,ia,Ka,zh,Ah,Og,Hh,$m,Rb,tk,zv,b,Xb,Qm,_c,Rm,rf,v,q,Sm,Vi,Ma,Um,Jv,ja,U,_,Wm,Bh,Fh,oe,Jg,Oh,be,Le,Xm,cn,Ym,Zm,wb,Mf,bh,eh,N,Uv,J,ud,Ji,Fi,Ei,pi,Ki,Di,Ci,Bi,bn,hd,Mi,Ke,Xa,bw,gn,ig,Pi,oo,pa,mn,Li,jn,Ph,io,ko,Zx,$x,E,Xg,Yg,Jb,Xd,mf,xd,Nn,Pe,Zd,xa,ei,F,Aa,ki,kh,ji,nh,qh,zf,Ee,Je,B,ga,ca,Gb,An,kd,Ie;function VB(){return(VB=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var $ in e)Object.prototype.hasOwnProperty.call(e,$)&&(r[$]=e[$])}return r}).apply(this,arguments)}var Ga=VB;var aj={},YB=Object.prototype.hasOwnProperty;function Pu(r,t){return r===t?0!==r||0!==t||1/r==1/t:r!=r&&t!=t}function $B(r,t){if(Pu(r,t))return!0;if("object"!=typeof r||null===r||"object"!=typeof t||null===t)return!1;var $=Object.keys(r),e=Object.keys(t);if($.length!==e.length)return!1;for(var l=0;l<$.length;l++)if(!YB.call(t,$[l])||!Pu(r[$[l]],t[$[l]]))return!1;return!0}aj=$B;function Za(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o}function Eu(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=n&&this.setState(n)}function Cu(n){this.setState(function(t){var e=this.constructor.getDerivedStateFromProps(n,t);return null!=e?e:null}.bind(this))}function wu(n,t){try{var e=this.props,o=this.state;this.props=n,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(e,o)}finally{this.props=e,this.state=o}}function wm(n){var t=n.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof n.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return n;var e=null,o=null,l=null;if("function"==typeof t.componentWillMount?e="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(e="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?l="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(l="UNSAFE_componentWillUpdate"),null!==e||null!==o||null!==l){var p=n.displayName||n.name,i="function"==typeof n.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+p+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==e?"\n  "+e:"")+(null!==o?"\n  "+o:"")+(null!==l?"\n  "+l:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof n.getDerivedStateFromProps&&(t.componentWillMount=Eu,t.componentWillReceiveProps=Cu),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=wu;var r=t.componentDidUpdate;t.componentDidUpdate=function(n,t,e){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:e;r.call(this,n,t,o)}}return n}Eu.__suppressDeprecationWarning=!0,Cu.__suppressDeprecationWarning=!0,wu.__suppressDeprecationWarning=!0,wm;function eC(e,t){if(null==e)return{};var r,$,a={},f=Object.keys(e);for($=0;$<f.length;$++)r=f[$],t.indexOf(r)>=0||(a[r]=e[r]);return a}var fC={},gC={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hC={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},iC=Object.defineProperty,jC=Object.getOwnPropertyNames,tu=Object.getOwnPropertySymbols,lC=Object.getOwnPropertyDescriptor,um=Object.getPrototypeOf,nu=um&&um(Object);function mu(t,r,e){if("string"!=typeof r){if(nu){var $=um(r);$&&$!==nu&&mu(t,$,e)}var o=jC(r);tu&&(o=o.concat(tu(r)));for(var a=0;a<o.length;++a){var l=o[a];if(!(gC[l]||hC[l]||e&&e[l])){var p=lC(r,l);try{iC(t,l,p)}catch(y){}}}return t}return t}fC=mu;var sm,ju={};Object.defineProperty(ju,"__esModule",{value:!0});var KQ=(sm=function(){var e=[],t=e;function r(){t===e&&(t=e.slice())}return{listen:function(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var n=!0;return r(),t.push(e),function(){if(n){n=!1,r();var i=t.indexOf(e);t.splice(i,1)}}},emit:function(){for(var r=e=t,n=0;n<r.length;n++)r[n].apply(r,arguments)}}},ju.createChangeEmitter=sm);function sC(e){var o,r=e.Symbol;return"function"==typeof r?r.observable?o=r.observable:(o=r("observable"),r.observable=o):o="@@observable",o}var rm=function(){var e,l={exports:this};this.__esModule=!0,e="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof gc?gc:void 0!==l?l:Function("return this")();var o=sC(e);return this.default=o,l.exports}.call({});yb();var qm=function(t,r){return function(e){return e[t]=r,e}},vC=function(t){return qm("displayName",t)},pm=function(t){return"string"==typeof t?t:t?t.displayName||t.name||"Component":void 0},xC=function(t,r){return r+"("+pm(t)+")"},kj=function(t){return function(r){var e=m.createFactory(r),o=function(r){return e(t(r))};return o}},zC=function(t){var r=kj(function(r){return Ga({},r,"function"==typeof t?t(r):t)});return r},vf=function(t,r){for(var e={},o=0;o<r.length;o++){var n=r[o];t.hasOwnProperty(n)&&(e[n]=t[n])}return e},BC=function(t,r){return function(e){var o=m.createFactory(e),n="function"==typeof t?t:function(r,e){var $lyLi$$interop$default=ma(aj);return!$lyLi$$interop$default.d(vf(r,t),vf(e,t))},$=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),$=0;$<o;$++)n[$]=arguments[$];return(e=t.call.apply(t,[this].concat(n))||this).state={computedProps:r(e.props),prevProps:e.props},e}return Za(e,t),e.getDerivedStateFromProps=function(t,e){return n(e.prevProps,t)?{computedProps:r(t),prevProps:t}:{prevProps:t}},e.prototype.render=function(){return o(Ga({},this.props,this.state.computedProps))},e}(m.Component);return wm($),$}},du=function(t,r){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=r(t[o],o));return e},DC=function(t){return function(r){var e=m.createFactory(r),o=function(r){function o(){for(var e,o=arguments.length,n=new Array(o),$=0;$<o;$++)n[$]=arguments[$];return(e=r.call.apply(r,[this].concat(n))||this).handlers=du("function"==typeof t?t(e.props):t,function(t){return function(){var r=t(e.props);return r.apply(void 0,arguments)}}),e}return Za(o,r),o.prototype.render=function(){return e(Ga({},this.props,this.handlers))},o}(m.Component);return o}},EC=function(t){return function(r){var e=m.createFactory(r),o=function(t){return e(t)};return o.defaultProps=t,o}},mm=function(t,r){for(var e=Ga({},t),o=0;o<r.length;o++){var n=r[o];e.hasOwnProperty(n)&&delete e[n]}return e},GC=function(t,r){var e=kj(function(e){var o;return Ga({},mm(e,[t]),((o={})[r]=e[t],o))});return e},lm=Object.keys,IC=function(t,r){return lm(t).reduce(function(e,o){var n=t[o];return e[r(n,o)]=n,e},{})},JC=function(t){var r=kj(function(r){return Ga({},mm(r,lm(t)),IC(vf(r,lm(t)),function(r,e){return t[e]}))});return r},KC=function(t){return function(r){var e=m.createFactory(r),o=function(r){return e(Ga({},r,r[t]))};return o}},LC=function(t,r,e){return function(o){var n=m.createFactory(o),$=function(o){function $(){for(var t,r=arguments.length,n=new Array(r),$=0;$<r;$++)n[$]=arguments[$];return(t=o.call.apply(o,[this].concat(n))||this).state={stateValue:"function"==typeof e?e(t.props):e},t.updateStateValue=function(r,e){return t.setState(function(t){var e=t.stateValue;return{stateValue:"function"==typeof r?r(e):r}},e)},t}return Za($,o),$.prototype.render=function(){var e;return n(Ga({},this.props,((e={})[t]=this.state.stateValue,e[r]=this.updateStateValue,e)))},$}(m.Component);return $}},MC=function(t,r){return function(e){var o=m.createFactory(e),n=function(e){function n(){for(var o,n=arguments.length,$=new Array(n),p=0;p<n;p++)$[p]=arguments[p];return(o=e.call.apply(e,[this].concat($))||this).state="function"==typeof t?t(o.props):t,o.stateUpdaters=du(r,function(t){return function(r){for(var e=arguments.length,n=new Array(e>1?e-1:0),$=1;$<e;$++)n[$-1]=arguments[$];r&&"function"==typeof r.persist&&r.persist(),o.setState(function(e,o){return t(e,o).apply(void 0,[r].concat(n))})}}),o}return Za(n,e),n.prototype.render=function(){return o(Ga({},this.props,this.state,this.stateUpdaters))},n}(m.Component);return n}},NC=function(){},OC=function(t,r,e,o){return function(n){var $=m.createFactory(n),p=function(n){function p(){for(var t,r=arguments.length,o=new Array(r),$=0;$<r;$++)o[$]=arguments[$];return(t=n.call.apply(n,[this].concat(o))||this).state={stateValue:t.initializeStateValue()},t.dispatch=function(r,o){return void 0===o&&(o=NC),t.setState(function(t){var o=t.stateValue;return{stateValue:e(o,r)}},function(){return o(t.state.stateValue)})},t}Za(p,n);var i=p.prototype;return i.initializeStateValue=function(){return void 0!==o?"function"==typeof o?o(this.props):o:e(void 0,{type:"@@recompose/INIT"})},i.render=function(){var e;return $(Ga({},this.props,((e={})[t]=this.state.stateValue,e[r]=this.dispatch,e)))},p}(m.Component);return p}},PC=function(t){return t},QC=function(t,r,e){return void 0===e&&(e=PC),function(o){var n,$,p=function(p){return t(p)?(n=n||m.createFactory(r(o)))(p):($=$||m.createFactory(e(o)))(p)};return p}},RC=function(t){return function(r){var e=m.createFactory(t),o=function(t){return e(t)};return o}},SC=function(t){function r(){return t.apply(this,arguments)||this}return Za(r,t),r.prototype.render=function(){return null},r}(m.Component),TC=function(t){return SC},km=function(t){return function(r){var e=m.createFactory(r),o=function(r){function o(){return r.apply(this,arguments)||this}Za(o,r);var n=o.prototype;return n.shouldComponentUpdate=function(r){return t(this.props,r)},n.render=function(){return e(this.props)},o}(m.Component);return o}},VC=function(t){var r=km(function(t,r){var $lyLi$$interop$default=ma(aj);return!$lyLi$$interop$default.d(t,r)});return r(t)},_t=function(t){var r=km(function(r,e){var $lyLi$$interop$default=ma(aj);return!$lyLi$$interop$default.d(vf(e,t),vf(r,t))});return r},XC=function(t){var r=t.propTypes;var e=Object.keys(r||{}),o=_t(e)(t);return o},YC=function(t,r){return function(e){var o=m.createFactory(e),n=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),$=0;$<o;$++)n[$]=arguments[$];return(e=t.call.apply(t,[this].concat(n))||this).getChildContext=function(){return r(e.props)},e}return Za(e,t),e.prototype.render=function(){return o(this.props)},e}(m.Component);return n.childContextTypes=t,n}},ZC=function(t){return function(r){var e=m.createFactory(r),o=function(t,r){return e(Ga({},t,r))};return o.contextTypes=t,o}},$C=function(t){return function(r){var e=m.createFactory(r);var o=function(t){function r(){return t.apply(this,arguments)||this}return Za(r,t),r.prototype.render=function(){return e(Ga({},this.props,this.state))},r}(m.Component);return Object.keys(t).forEach(function(r){return o.prototype[r]=t[r]}),o}},$t=function(t){return Boolean(t&&t.prototype&&"function"==typeof t.prototype.render)},aD=function(t){var r,e;return $t(t)?t:(e=r=function(r){function e(){return r.apply(this,arguments)||this}return Za(e,r),e.prototype.render=function(){var $h8ka$$interop$default=ma(m);return"string"==typeof t?$h8ka$$interop$default.d.createElement(t,this.props):t(this.props,this.context)},e}(m.Component),r.displayName=pm(t),r.propTypes=t.propTypes,r.contextTypes=t.contextTypes,r.defaultProps=t.defaultProps,e)};function bD(t){return t(function(t){return t.children(t)})}var cD=function(t,r,e){return void 0===e&&(e="children"),function(o){var $h8ka$$interop$default=ma(m);var n=$h8ka$$interop$default.d.createFactory(o),$=$h8ka$$interop$default.d.createFactory(t),p=function(t){var o;return $(((o={})[e]=function(){return n(Ga({},t,r.apply(void 0,arguments)))},o))};return p}},dD=function(t){return qm("propTypes",t)},sf=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return r.reduce(function(t,r){return function(){return t(r.apply(void 0,arguments))}},function(t){return t})},fD=function(t){var r=function(r){function e(){for(var t,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(t=r.call.apply(r,[this].concat(o))||this).state={},t}return Za(e,r),e.getDerivedStateFromProps=function(r){return t(r),null},e.prototype.render=function(){return null},e}(m.Component);return wm(r),r},gD=function(t){var r=function(r){return m.createElement(r[t],mm(r,[t]))};return r.displayName="componentFromProp("+t+")",r},hD=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=r.map(m.createFactory),n=function(t){var r=t.children,e=eC(t,["children"]);return o.reduceRight(function(t,r){return r(e,t)},r)};return n},iD=function(t,r){return function(e){var o=t(e);var $El$$interop$default=ma(fC);return $El$$interop$default.d(o,e,r),o}},mj={fromESObservable:null,toESObservable:null},kD=function(t){mj=t},im={fromESObservable:function(t){return"function"==typeof mj.fromESObservable?mj.fromESObservable(t):t},toESObservable:function(t){return"function"==typeof mj.toESObservable?mj.toESObservable(t):t}},hm=function(t){return function(r){return function(e){function o(){for(var o,n,$=arguments.length,p=new Array($),i=0;i<$;i++)p[i]=arguments[i];var $LkZ7$$interop$default=ma(rm);return(n=e.call.apply(e,[this].concat(p))||this).state={vdom:null},n.propsEmitter=sm(),n.props$=t.fromESObservable(((o={subscribe:function(t){return{unsubscribe:n.propsEmitter.listen(function(r){r?t.next(r):t.complete()})}}})[$LkZ7$$interop$default.d]=function(){return this},o)),n.vdom$=t.toESObservable(r(n.props$)),n}Za(o,e);var n=o.prototype;return n.componentWillMount=function(){var t=this;this.subscription=this.vdom$.subscribe({next:function(r){t.setState({vdom:r})}}),this.propsEmitter.emit(this.props)},n.componentWillReceiveProps=function(t){this.propsEmitter.emit(t)},n.shouldComponentUpdate=function(t,r){return r.vdom!==this.state.vdom},n.componentWillUnmount=function(){this.propsEmitter.emit(),this.subscription.unsubscribe()},n.render=function(){return this.state.vdom},o}(m.Component)}},nD=function(t){return hm(im)(t)},Vt=function(t){return t},Ut=function(t){var r=hm({fromESObservable:Vt,toESObservable:Vt});return function(e){return function(o){var n=m.createFactory(o),$=t.fromESObservable,p=t.toESObservable;return r(function(t){var r;var $LkZ7$$interop$default=ma(rm);return(r={subscribe:function(r){var o=p(e($(t))).subscribe({next:function(t){return r.next(n(t))}});return{unsubscribe:function(){return o.unsubscribe()}}}})[$LkZ7$$interop$default.d]=function(){return this},r})}}},qD=function(t){var r=Ut(im)(t);return r},Tt=function(t){return function(){var $LkZ7$$interop$default=ma(rm);var r,e=sm(),o=t.fromESObservable(((r={subscribe:function(t){return{unsubscribe:e.listen(function(r){return t.next(r)})}}})[$LkZ7$$interop$default.d]=function(){return this},r));return{handler:e.emit,stream:o}}},sD=Tt(im);var tD=ma(aj);kD,Tt,sD,Ut,qD,hm,nD,iD,hD,gD,fD,$t,tD.d,xC,pm,sf,vC,dD,qm,cD,bD,aD,$C,ZC,YC,XC,_t,VC,km,TC,RC,QC,OC,MC,LC,KC,JC,GC,EC,DC,BC,zC,kj;yb();var St={global:[["Wall thickness","wallThickness","m",.3,.6,.02]],roof:[["Ridge offset","ridgeOffset","m",-5,5,.1]],external:[["Width","width3d","m",3,8,1],["# Bays","length",!1,1,8,1],["Length","length3d","m"],["Left wall height","leftWallHeight","m",2,5,1],["Right wall height","rightWallHeight","m",2,5,1],["Footprint","floorArea","m2"],["Roofing area","roofingArea","m2"],["Cladding area","claddingArea","m2"]],internal:[["Width","internalWidth","m"],["Length","internalLength","m"],["Wall area","internalWallArea","m2"],["Flooring area","internalFlooringArea","m2"],["Insulation volume","insulationVolume","m3"]]},vD=sf(Xc("project"),Bb)(function(e){var t=e.project;t.toJSON();return React.createElement("table",{id:"info"},React.createElement("tbody",null,Object.keys(St).map(function(e){return React.createElement(m.Fragment,{key:e},React.createElement("tr",null,React.createElement("th",{colSpan:2,className:"category"},e)),St[e].map(function(e){return React.createElement("tr",{key:e[1]},React.createElement("th",null,e[0]," ",React.createElement("span",{className:"unit"},e[2])),React.createElement("td",null,e[2]?t.hanger[e[1]].toFixed(2):t.hanger[e[1]]),e[3]&&React.createElement("td",null,React.createElement("input",{type:"range",min:e[3],max:e[4],step:e[5],value:t.hanger[e[1]],onChange:function(a){var r=e[6]?e[6]:Number;t.hanger.adjust(e[1],r(a.target.value))}})))}))}),React.createElement("tr",null,React.createElement("td",{colSpan:2},React.createElement("button",{onClick:t.updateSpreadSheet,disabled:"updating"===t.state},t.buttonText)))))});var gm={};function Qt(r){for(;r;){var e=r,o=e.closed,t=e.destination,$=e.isStopped;if(o||$)return!1;r=t&&t instanceof na?t:null}return!0}var yD=function(t,e){return(yD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function G(t,e){function r(){this.constructor=t}yD(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var em=function(){return em=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},em,em.apply(this,arguments)};function BD(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&(r[o[n]]=t[o[n]])}return r}function CD(t,e,r,o){var n,a=arguments.length,$=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$=Reflect.decorate(t,e,r,o);else for(var x=t.length-1;x>=0;x--)(n=t[x])&&($=(a<3?n($):a>3?n(e,r,$):n(e,r))||$);return a>3&&$&&Object.defineProperty(e,r,$),$}function DD(t,e){return function(r,o){e(r,o,t)}}function ED(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function FD(t,e,r,o){return new(r||(r=Promise))(function(n,a){function $(t){try{i(o.next(t))}catch(e){a(e)}}function x(t){try{i(o.throw(t))}catch(e){a(e)}}function i(t){t.done?n(t.value):new r(function(e){e(t.value)}).then($,x)}i((o=o.apply(t,e||[])).next())})}function GD(t,e){var r,o,n,a,$={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function x(a){return function(x){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;$;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return $.label++,{value:a[1],done:!1};case 5:$.label++,o=a[1],a=[0];continue;case 7:a=$.ops.pop(),$.trys.pop();continue;default:if(!(n=(n=$.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){$=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){$.label=a[1];break}if(6===a[0]&&$.label<n[1]){$.label=n[1],n=a;break}if(n&&$.label<n[2]){$.label=n[2],$.ops.push(a);break}n[2]&&$.ops.pop(),$.trys.pop();continue;}a=e.call(t,$)}catch(x){a=[6,x],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,x])}}}function HD(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function dm(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function Mt(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,a=r.call(t),$=[];try{for(;(void 0===e||e-->0)&&!(o=a.next()).done;)$.push(o.value)}catch(x){n={error:x}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return $}function KD(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Mt(arguments[e]));return t}function oh(t){return this instanceof oh?(this.v=t,this):new oh(t)}function MD(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(t,e||[]),a=[];return o={},$("next"),$("throw"),$("return"),o[Symbol.asyncIterator]=function(){return this},o;function $(t){n[t]&&(o[t]=function(e){return new Promise(function(r,o){a.push([t,e,r,o])>1||x(t,e)})})}function x(t,e){try{(r=n[t](e)).value instanceof oh?Promise.resolve(r.value.v).then(i,c):_(a[0][2],r)}catch(o){_(a[0][3],o)}var r}function i(t){x("next",t)}function c(t){x("throw",t)}function _(t,e){t(e),a.shift(),a.length&&x(a[0][0],a[0][1])}}function ND(t){var e,r;return e={},o("next"),o("throw",function(t){throw t}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(o,n){e[o]=t[o]?function(e){return(r=!r)?{value:oh(t[o](e)),done:"return"===o}:n?n(e):e}:n}}function OD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof dm?dm(t):t[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(r){e[r]=t[r]&&function(e){return new Promise(function(o,n){(function(t,e,r,o){Promise.resolve(o).then(function(e){t({value:e,done:r})},e)})(o,n,(e=t[r](e)).done,e.value)})}}}function PD(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function QD(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function RD(t){return t&&t.__esModule?t:{default:t}}em,BD,CD,DD,ED,FD,GD,HD,dm,Mt,KD,oh,MD,ND,OD,PD,QD,RD;function gh(n){return"function"==typeof n}var TD=!1,kb={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&new Error().stack;TD=e},get useDeprecatedSynchronousErrorHandling(){return TD}};function Qd(r){setTimeout(function(){throw r})}var oj={closed:!0,next:function(r){},error:function(r){if(kb.useDeprecatedSynchronousErrorHandling)throw r;Qd(r)},complete:function(){}};var It=Array.isArray||function(r){return r&&"number"==typeof r.length};function Ht(t){return null!=t&&"object"==typeof t}var ZD;function $D(){try{return ZD.apply(this,arguments)}catch(t){return sc.e=t,sc}}function am(t){return ZD=t,$D}var sc={e:{}};am;function Et(r){return Error.call(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map(function(r,o){return o+1+") "+r.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r,this}Et.prototype=Object.create(Error.prototype);var qj=Et;var ab=function(){function r(r){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,r&&(this._unsubscribe=r)}var t;return r.prototype.unsubscribe=function(){var r,t=!1;if(!this.closed){var i=this._parent,e=this._parents,s=this._unsubscribe,n=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var o=-1,c=e?e.length:0;i;)i.remove(this),i=++o<c&&e[o]||null;if(gh(s))am(s).call(this)===sc&&(t=!0,r=r||(sc.e instanceof qj?Bt(sc.e.errors):[sc.e]));if(It(n))for(o=-1,c=n.length;++o<c;){var u=n[o];if(Ht(u))if(am(u.unsubscribe).call(u)===sc){t=!0,r=r||[];var $=sc.e;$ instanceof qj?r=r.concat(Bt($.errors)):r.push($)}}if(t)throw new qj(r)}},r.prototype.add=function(t){if(!t||t===r.EMPTY)return r.EMPTY;if(t===this)return this;var i=t;switch(typeof t){case"function":i=new r(t);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var e=i;(i=new r)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.");}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},r.prototype.remove=function(r){var t=this._subscriptions;if(t){var i=t.indexOf(r);-1!==i&&t.splice(i,1)}},r.prototype._addParent=function(r){var t=this._parent,i=this._parents;t&&t!==r?i?-1===i.indexOf(r)&&i.push(r):this._parents=[r]:this._parent=r},r.EMPTY=((t=new r).closed=!0,t),r}();function Bt(r){return r.reduce(function(r,t){return r.concat(t instanceof qj?t.errors:t)},[])}var rj="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();var na=function(r){function t(e,i,o){var s=r.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,s._parentSubscription=null,arguments.length){case 0:s.destination=oj;break;case 1:if(!e){s.destination=oj;break}if("object"==typeof e){e instanceof t?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(s)):(s.syncErrorThrowable=!0,s.destination=new yt(s,e));break}default:s.syncErrorThrowable=!0,s.destination=new yt(s,e,i,o);}return s}return G(t,r),t.prototype[rj]=function(){return this},t.create=function(r,e,i){var o=new t(r,e,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var r=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=r,this._parents=t,this._parentSubscription=null,this},t}(ab);var yt=function(r){function t(t,e,i,o){var s,n=r.call(this)||this;n._parentSubscriber=t;var c=n;return gh(e)?s=e:e&&(s=e.next,i=e.error,o=e.complete,e!==oj&&(c=Object.create(e),gh(c.unsubscribe)&&n.add(c.unsubscribe.bind(c)),c.unsubscribe=n.unsubscribe.bind(n))),n._context=c,n._next=s,n._error=i,n._complete=o,n}return G(t,r),t.prototype.next=function(r){if(!this.isStopped&&this._next){var t=this._parentSubscriber;kb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,r)&&this.unsubscribe():this.__tryOrUnsub(this._next,r)}},t.prototype.error=function(r){if(!this.isStopped){var t=this._parentSubscriber,e=kb.useDeprecatedSynchronousErrorHandling;if(this._error)e&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,r),this.unsubscribe()):(this.__tryOrUnsub(this._error,r),this.unsubscribe());else if(t.syncErrorThrowable)e?(t.syncErrorValue=r,t.syncErrorThrown=!0):Qd(r),this.unsubscribe();else{if(this.unsubscribe(),e)throw r;Qd(r)}}},t.prototype.complete=function(){var r=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var e=function(){return r._complete.call(r._context)};kb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(r,t){try{r.call(this._context,t)}catch(e){if(this.unsubscribe(),kb.useDeprecatedSynchronousErrorHandling)throw e;Qd(e)}},t.prototype.__tryOrSetError=function(r,t,e){if(!kb.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,e)}catch(i){return kb.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=i,r.syncErrorThrown=!0,!0):(Qd(i),!0)}return!1},t.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},t}(na);Qt;function xt(r,e,$){if(r){if(r instanceof na)return r;if(r[rj])return r[rj]()}return r||e||$?new na(r,e,$):new na(oj)}xt;var sg="function"==typeof Symbol&&Symbol.observable||"@@observable";function kE(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Vl(r)}function Vl(r){return r?1===r.length?r[0]:function(e){return r.reduce(function(r,e){return e(r)},e)}:Qb}function Qb(){}kE,Vl;var ka=function(){function r(r){this._isScalar=!1,r&&(this._subscribe=r)}return r.prototype.lift=function(e){var o=new r;return o.source=this,o.operator=e,o},r.prototype.subscribe=function(r,e,o){var t=this.operator,n=xt(r,e,o);if(t?t.call(n,this.source):n.add(this.source||kb.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),kb.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},r.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(e){kb.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=e),Qt(r)?r.error(e):console.warn(e)}},r.prototype.forEach=function(r,e){var o=this;return new(e=ut(e))(function(e,t){var n;n=o.subscribe(function(e){try{r(e)}catch(o){t(o),n&&n.unsubscribe()}},t,e)})},r.prototype._subscribe=function(r){var e=this.source;return e&&e.subscribe(r)},r.prototype[sg]=function(){return this},r.prototype.pipe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return 0===r.length?this:Vl(r)(this)},r.prototype.toPromise=function(r){var e=this;return new(r=ut(r))(function(r,o){var t;e.subscribe(function(r){return t=r},function(r){return o(r)},function(){return r(t)})})},r.create=function(e){return new r(e)},r}();function ut(r){if(r||(r=kb.Promise||Promise),!r)throw new Error("no Promise impl found");return r}function tt(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}tt.prototype=Object.create(Error.prototype);var fg=tt;var rE=function(t){function e(e,i){var r=t.call(this)||this;return r.subject=e,r.subscriber=i,r.closed=!1,r}return G(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(ab);var rt=function(r){function t(t){var e=r.call(this,t)||this;return e.destination=t,e}return G(t,r),t}(na);var qt=function(r){function t(){var t=r.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return G(t,r),t.prototype[rj]=function(){return new rt(this)},t.prototype.lift=function(r){var t=new pt(this,this);return t.operator=r,t},t.prototype.next=function(r){if(this.closed)throw new fg;if(!this.isStopped)for(var t=this.observers,e=t.length,o=t.slice(),i=0;i<e;i++)o[i].next(r)},t.prototype.error=function(r){if(this.closed)throw new fg;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var t=this.observers,e=t.length,o=t.slice(),i=0;i<e;i++)o[i].error(r);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new fg;this.isStopped=!0;for(var r=this.observers,t=r.length,e=r.slice(),o=0;o<t;o++)e[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new fg;return r.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(r){if(this.closed)throw new fg;return this.hasError?(r.error(this.thrownError),ab.EMPTY):this.isStopped?(r.complete(),ab.EMPTY):(this.observers.push(r),new rE(this,r))},t.prototype.asObservable=function(){var r=new ka;return r.source=this,r},t.create=function(r,t){return new pt(r,t)},t}(ka);var pt=function(r){function t(t,e){var o=r.call(this)||this;return o.destination=t,o.source=e,o}return G(t,r),t.prototype.next=function(r){var t=this.destination;t&&t.next&&t.next(r)},t.prototype.error=function(r){var t=this.destination;t&&t.error&&this.destination.error(r)},t.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},t.prototype._subscribe=function(r){return this.source?this.source.subscribe(r):ab.EMPTY},t}(qt);function Ul(){return function(n){return n.lift(new wE(n))}}Ul;var wE=function(){function n(n){this.connectable=n}return n.prototype.call=function(n,e){var t=this.connectable;t._refCount++;var o=new xE(n,t),r=e.subscribe(o);return o.closed||(o.connection=t.connect()),r},n}(),xE=function(n){function e(e,t){var o=n.call(this,e)||this;return o.connectable=t,o}return G(e,n),e.prototype._unsubscribe=function(){var n=this.connectable;if(n){this.connectable=null;var e=n._refCount;if(e<=0)this.connection=null;else if(n._refCount=e-1,e>1)this.connection=null;else{var t=this.connection,o=n._connection;this.connection=null,!o||t&&o!==t||o.unsubscribe()}}else this.connection=null},e}(na);var yE=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return G(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new ab).add(this.source.subscribe(new BE(this.getSubject(),this))),e.closed?(this._connection=null,e=ab.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return Ul()(this)},t}(ka);var bg=yE.prototype,AE={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:bg._subscribe},_isComplete:{value:bg._isComplete,writable:!0},getSubject:{value:bg.getSubject},connect:{value:bg.connect},refCount:{value:bg.refCount}};var BE=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return G(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(rt),JQ=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new DE(e,n),o=t.subscribe(r);return r.closed||(r.connection=n.connect()),o},e}(),DE=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return G(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(na);var EE=function(r){function t(t,i){return r.call(this)||this}return G(t,r),t.prototype.schedule=function(r,t){return void 0===t&&(t=0),this},t}(ab);var nt=function(t){function i(i,e){var n=t.call(this,i,e)||this;return n.scheduler=i,n.work=e,n.pending=!1,n}return G(i,t),i.prototype.schedule=function(t,i){if(void 0===i&&(i=0),this.closed)return this;this.state=t;var e=this.id,n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(n,this.id,i),this},i.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),setInterval(t.flush.bind(t,this),e)},i.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!==e&&this.delay===e&&!1===this.pending)return i;clearInterval(i)},i.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(t,i){var e=!1,n=void 0;try{this.work(t)}catch(s){e=!0,n=!!s&&s||new Error(s)}if(e)return this.unsubscribe(),n},i.prototype._unsubscribe=function(){var t=this.id,i=this.scheduler,e=i.actions,n=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&e.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null},i}(EE);var mt=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}();var lt=function(e){function t(r,i){void 0===i&&(i=mt.now);var h=e.call(this,r,function(){return t.delegate&&t.delegate!==h?t.delegate.now():i()})||this;return h.actions=[],h.active=!1,h.scheduled=void 0,h}return G(t,e),t.prototype.schedule=function(r,i,h){return void 0===i&&(i=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,i,h):e.prototype.schedule.call(this,r,i,h)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(mt);function IE(e){return e&&"function"==typeof e.schedule}function Tl(r,e){return e?new ka(function($){var o=new ab,t=0;return o.add(e.schedule(function(){t!==r.length?($.next(r[t++]),$.closed||o.add(this.schedule())):$.complete()})),o}):new ka(jt(r))}var jt=function(r){return function(e){for(var o=0,s=r.length;o<s&&!e.closed;o++)e.next(r[o]);e.closed||e.complete()}};Tl;var LE=new lt(nt);var ME=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return G(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(nt);var NE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return G(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,i=this.actions,r=-1,o=i.length;e=e||i.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<o&&(e=i.shift()));if(this.active=!1,t){for(;++r<o&&(e=i.shift());)e.unsubscribe();throw t}},t}(lt);var OE=new NE(ME);function PE(t){return t}function Nf(r,t){return function(e){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new RE(r,t))}}Nf;var RE=function(){function r(r,t){this.project=r,this.thisArg=t}return r.prototype.call=function(r,t){return t.subscribe(new SE(r,this.project,this.thisArg))},r}();var SE=function(r){function t(t,e,o){var i=r.call(this,t)||this;return i.project=e,i.count=0,i.thisArg=o||i,i}return G(t,r),t.prototype._next=function(r){var t;try{t=this.project.call(this.thisArg,r,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(na);var yj=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return G(r,t),r.prototype.notifyNext=function(t,r,e,i,o){this.destination.next(r)},r.prototype.notifyError=function(t,r){this.destination.error(t)},r.prototype.notifyComplete=function(t){this.destination.complete()},r}(na);function Ef(r,e,$,s,b){if(void 0===b&&(b=new ft(r,$,s)),!b.closed)return $s(e)(b)}var ft=function(r){function t(t,e,i){var n=r.call(this)||this;return n.parent=t,n.outerValue=e,n.outerIndex=i,n.index=0,n}return G(t,r),t.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},t.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(na);var et=function(r){return function(e){return r.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Qd),e}};function XE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Aj=XE();var ct=function(r){return function(e){for(var t=r[Aj]();;){var o=t.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}};var bt=function(e){return function(r){var b=e[sg]();if("function"!=typeof b.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return b.subscribe(r)}};var at=function(r){return r&&"number"==typeof r.length&&"function"!=typeof r};function _s(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var $s=function(r){if(r instanceof ka)return function(e){return r._isScalar?(e.next(r.value),void e.complete()):r.subscribe(e)};if(r&&"function"==typeof r[sg])return bt(r);if(at(r))return jt(r);if(_s(r))return et(r);if(r&&"function"==typeof r[Aj])return ct(r);var e=Ht(r)?"an invalid object":"'"+r+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};Ef;function Zs(r,e){if(!e)return r instanceof ka?r:new ka($s(r));if(null!=r){if(Ys(r))return Us(r,e);if(_s(r))return Ws(r,e);if(at(r))return Tl(r,e);if(Xs(r)||"string"==typeof r)return Vs(r,e)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}function Ys(e){return e&&"function"==typeof e[sg]}Ys;function Xs(r){return r&&"function"==typeof r[Aj]}Xs;function Ws(r,e){return e?new ka(function(i){var o=new ab;return o.add(e.schedule(function(){return r.then(function(r){o.add(e.schedule(function(){i.next(r),o.add(e.schedule(function(){return i.complete()}))}))},function(r){o.add(e.schedule(function(){return i.error(r)}))})})),o}):new ka(et(r))}Ws;function Vs(e,r){if(!e)throw new Error("Iterable cannot be null");return r?new ka(function(n){var t,o=new ab;return o.add(function(){t&&"function"==typeof t.return&&t.return()}),o.add(r.schedule(function(){t=e[Aj](),o.add(r.schedule(function(){if(!n.closed){var e,r;try{var o=t.next();e=o.value,r=o.done}catch($){return void n.error($)}r?n.complete():(n.next(e),this.schedule())}}))})),o}):new ka(ct(e))}Vs;function Us(e,r){return r?new ka(function(o){var $=new ab;return $.add(r.schedule(function(){var b=e[sg]();$.add(b.subscribe({next:function(e){$.add(r.schedule(function(){return o.next(e)}))},error:function(e){$.add(r.schedule(function(){return o.error(e)}))},complete:function(){$.add(r.schedule(function(){return o.complete()}))}}))})),$}):new ka(bt(e))}Us;Zs;function Ej(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Ol(PE,e)}function Ol(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(Ol(function(r,n){return Zs(e(r,n)).pipe(Nf(function(e,i){return t(r,e,n,i)}))},r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new kF(e,r))})}Ol;var kF=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new lF(e,this.project,this.concurrent))},e}();var lF=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return G(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=new ft(this,void 0,void 0);this.destination.add(n),Ef(this,e,t,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(yj);Ej;var IQ=Object.prototype.toString;function ke(e,t,r,n){return gh(r)&&(n=r,r=void 0),n?ke(e,t,r).pipe(Nf(function(e){return It(e)?n.apply(void 0,e):n(e)})):new ka(function(n){Rs(e,t,function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)},n,r)})}function Rs(e,t,r,n,i){var o;if(rF(e)){var $=e;e.addEventListener(t,r,i),o=function(){return $.removeEventListener(t,r,i)}}else if(qF(e)){var Z=e;e.on(t,r),o=function(){return Z.off(t,r)}}else if(pF(e)){var u=e;e.addListener(t,r),o=function(){return u.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var v=0,a=e.length;v<a;v++)Rs(e[v],t,r,n,i)}n.add(o)}function pF(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function qF(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}function rF(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}function Qs(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var $=Number.POSITIVE_INFINITY,i=null,g=e[e.length-1];return IE(g)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&($=e.pop())):"number"==typeof g&&($=e.pop()),null===i&&1===e.length&&e[0]instanceof ka?e[0]:Ej($)(Tl(e,i))}Qs;function Nl(r,t){return function(i){return i.lift(new uF(r,t))}}Nl;var uF=function(){function r(r,t){this.predicate=r,this.thisArg=t}return r.prototype.call=function(r,t){return t.subscribe(new vF(r,this.predicate,this.thisArg))},r}(),vF=function(r){function t(t,i,e){var n=r.call(this,t)||this;return n.predicate=i,n.thisArg=e,n.count=0,n}return G(t,r),t.prototype._next=function(r){var t;try{t=this.predicate.call(this.thisArg,r,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(r)},t}(na);function Ml(t,r,o){return function(e){return e.lift(new xF(t,r,o))}}Ml;var xF=function(){function t(t,r,o){this.nextOrObserver=t,this.error=r,this.complete=o}return t.prototype.call=function(t,r){return r.subscribe(new yF(t,this.nextOrObserver,this.error,this.complete))},t}(),yF=function(t){function r(r,o,e,i){var n=t.call(this,r)||this;return n._tapNext=Qb,n._tapError=Qb,n._tapComplete=Qb,n._tapError=e||Qb,n._tapComplete=i||Qb,gh(o)?(n._context=n,n._tapNext=o):o&&(n._context=o,n._tapNext=o.next||Qb,n._tapError=o.error||Qb,n._tapComplete=o.complete||Qb),n}return G(r,t),r.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(r){return void this.destination.error(r)}this.destination.next(t)},r.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},r.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},r}(na);function Ns(t,e){var r=!1;return arguments.length>=2&&(r=!0),function(i){return i.lift(new AF(t,e,r))}}Ns;var AF=function(){function t(t,e,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=e,this.hasSeed=r}return t.prototype.call=function(t,e){return e.subscribe(new BF(t,this.accumulator,this.seed,this.hasSeed))},t}(),BF=function(t){function e(e,r,i,n){var s=t.call(this,e)||this;return s.accumulator=r,s._seed=i,s.hasSeed=n,s.index=0,s}return G(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.accumulator(this.seed,t,r)}catch(i){this.destination.error(i)}this.seed=e,this.destination.next(e)},e}(na);function Ms(t,r){return function(e){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof r)return e.lift(new DF(o,r));var c=Object.create(e,AE);return c.source=e,c.subjectFactory=o,c}}Ms;var DF=function(){function t(t,r){this.subjectFactory=t,this.selector=r}return t.prototype.call=function(t,r){var e=this.selector,o=this.subjectFactory(),c=e(o).subscribe(t);return c.add(r.subscribe(o)),c},t}();function EF(){return new qt}function Hj(){return function(r){return Ul()(Ms(EF)(r))}}Hj;function Ks(e){return function(t){return t.lift(new HF(e))}}Ks;var HF=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new IF(e),i=Ef(r,this.notifier);return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r},e}(),IF=function(e){function t(t){var r=e.call(this,t)||this;return r.seenValue=!1,r}return G(t,e),t.prototype.notifyNext=function(e,t,r,i,n){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(yj);var Kl={leading:!0,trailing:!1};function KF(t,o){return void 0===o&&(o=Kl),function(r){return r.lift(new LF(t,o.leading,o.trailing))}}Kl,KF;var LF=function(){function t(t,o,r){this.durationSelector=t,this.leading=o,this.trailing=r}return t.prototype.call=function(t,o){return o.subscribe(new MF(t,this.durationSelector,this.leading,this.trailing))},t}(),MF=function(t){function o(o,r,e,i){var n=t.call(this,o)||this;return n.destination=o,n.durationSelector=r,n._leading=e,n._trailing=i,n._hasValue=!1,n}return G(o,t),o.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},o.prototype.send=function(){var t=this._hasValue,o=this._sendValue;t&&(this.destination.next(o),this.throttle(o)),this._hasValue=!1,this._sendValue=null},o.prototype.throttle=function(t){var o=this.tryDurationSelector(t);o&&this.add(this._throttled=Ef(this,o))},o.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(o){return this.destination.error(o),null}},o.prototype.throttlingDone=function(){var t=this._throttled,o=this._trailing;t&&t.unsubscribe(),this._throttled=null,o&&this.send()},o.prototype.notifyNext=function(t,o,r,e,i){this.throttlingDone()},o.prototype.notifyComplete=function(){this.throttlingDone()},o}(yj);function Is(t,i,e){return void 0===i&&(i=LE),void 0===e&&(e=Kl),function(r){return r.lift(new OF(t,i,e.leading,e.trailing))}}Is;var OF=function(){function t(t,i,e,r){this.duration=t,this.scheduler=i,this.leading=e,this.trailing=r}return t.prototype.call=function(t,i){return i.subscribe(new PF(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),PF=function(t){function i(i,e,r,n,l){var s=t.call(this,i)||this;return s.duration=e,s.scheduler=r,s.leading=n,s.trailing=l,s._hasTrailingValue=!1,s._trailingValue=null,s}return G(i,t),i.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(QF,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},i.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},i.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},i}(na);function QF(t){t.subscriber.clearThrottle()}function Jl(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){var e;"function"==typeof t[t.length-1]&&(e=t.pop());var o=t;return r.lift(new SF(o,e))}}Jl;var SF=function(){function t(t,r){this.observables=t,this.project=r}return t.prototype.call=function(t,r){return r.subscribe(new TF(t,this.observables,this.project))},t}(),TF=function(t){function r(r,e,o){var i=t.call(this,r)||this;i.observables=e,i.project=o,i.toRespond=[];var s=e.length;i.values=new Array(s);for(var n=0;n<s;n++)i.toRespond.push(n);for(n=0;n<s;n++){var a=e[n];i.add(Ef(i,a,a,n))}return i}return G(r,t),r.prototype.notifyNext=function(t,r,e,o,i){this.values[e]=r;var s=this.toRespond;if(s.length>0){var n=s.indexOf(e);-1!==n&&s.splice(n,1)}},r.prototype.notifyComplete=function(){},r.prototype._next=function(t){if(0===this.toRespond.length){var r=[t].concat(this.values);this.project?this._tryProject(r):this.destination.next(r)}},r.prototype._tryProject=function(t){var r;try{r=this.project.apply(this,t)}catch(e){return void this.destination.error(e)}this.destination.next(r)},r}(yj);var C={};C=THREE;function Gs(e,r){var a=new C.OrbitControls(e,r);return a.dampingFactor=.25,a.enableDamping=!0,a.enableKeys=!1,a.enableZoom=!0,a.maxDistance=30,a.maxPolarAngle=Math.PI/2-.15,a.minDistance=15,a.minPolarAngle=.1,a.panSpeed=.2,a.rotateSpeed=.4,a}THREE.OrbitControls=function(e,t){var n,o,a,i,r;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),d=u.NONE},this.update=(n=new THREE.Vector3,o=new THREE.Quaternion().setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),a=o.clone().inverse(),i=new THREE.Vector3,r=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(o),h.setFromVector3(n),s.autoRotate&&d===u.NONE&&M(2*Math.PI/60/60*s.autoRotateSpeed),h.theta+=E.theta,h.phi+=E.phi,h.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,h.theta)),h.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=b,h.radius=Math.max(s.minDistance,Math.min(s.maxDistance,h.radius)),s.target.add(g),n.setFromSpherical(h),n.applyQuaternion(a),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(E.theta*=1-s.dampingFactor,E.phi*=1-s.dampingFactor,g.multiplyScalar(1-s.dampingFactor)):(E.set(0,0,0),g.set(0,0,0)),b=1,!!(f||i.distanceToSquared(s.object.position)>p||8*(1-r.dot(s.object.quaternion))>p)&&(s.dispatchEvent(c),i.copy(s.object.position),r.copy(s.object.quaternion),f=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",_,!1),s.domElement.removeEventListener("mousedown",U,!1),s.domElement.removeEventListener("wheel",z,!1),s.domElement.removeEventListener("touchstart",I,!1),s.domElement.removeEventListener("touchend",K,!1),s.domElement.removeEventListener("touchmove",X,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Z,!1),window.removeEventListener("keydown",F,!1)};var s=this,c={type:"change"},l={type:"start"},m={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=u.NONE,p=1e-6,h=new THREE.Spherical,E=new THREE.Spherical,b=1,g=new THREE.Vector3,f=!1,T=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,R=new THREE.Vector2,O=new THREE.Vector2,H=new THREE.Vector2,w=new THREE.Vector2,P=new THREE.Vector2,j=new THREE.Vector2;function L(){return Math.pow(.95,s.zoomSpeed)}function M(e){E.theta-=e}function C(e){E.phi-=e}var N,S=(N=new THREE.Vector3,function(e,t){N.setFromMatrixColumn(t,0),N.multiplyScalar(-e),g.add(N)}),A=function(){var e=new THREE.Vector3;return function(t,n){!0===s.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),D=function(){var e=new THREE.Vector3;return function(t,n){var o=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var a=s.object.position;e.copy(a).sub(s.target);var i=e.length();i*=Math.tan(s.object.fov/2*Math.PI/180),S(2*t*i/o.clientHeight,s.object.matrix),A(2*n*i/o.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(S(t*(s.object.right-s.object.left)/s.object.zoom/o.clientWidth,s.object.matrix),A(n*(s.object.top-s.object.bottom)/s.object.zoom/o.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function x(e){s.object.isPerspectiveCamera?b/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function k(e){s.object.isPerspectiveCamera?b*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function V(e){R.set(e.clientX,e.clientY)}function U(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;V(e),d=u.PAN}else{if(!1===s.enableRotate)return;!function(e){T.set(e.clientX,e.clientY)}(e),d=u.ROTATE}break;case s.mouseButtons.MIDDLE:if(!1===s.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),d=u.DOLLY;break;case s.mouseButtons.RIGHT:if(!1===s.enablePan)return;V(e),d=u.PAN;}d!==u.NONE&&(document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",Z,!1),s.dispatchEvent(l))}}function Y(e){if(!1!==s.enabled)switch(e.preventDefault(),d){case u.ROTATE:if(!1===s.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,T).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*y.x/t.clientHeight),C(2*Math.PI*y.y/t.clientHeight),T.copy(v),s.update()}(e);break;case u.DOLLY:if(!1===s.enableZoom)return;!function(e){P.set(e.clientX,e.clientY),j.subVectors(P,w),j.y>0?x(L()):j.y<0&&k(L()),w.copy(P),s.update()}(e);break;case u.PAN:if(!1===s.enablePan)return;!function(e){O.set(e.clientX,e.clientY),H.subVectors(O,R).multiplyScalar(s.panSpeed),D(H.x,H.y),R.copy(O),s.update()}(e);}}function Z(e){!1!==s.enabled&&(document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Z,!1),s.dispatchEvent(m),d=u.NONE)}function z(e){!1===s.enabled||!1===s.enableZoom||d!==u.NONE&&d!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(l),function(e){e.deltaY<0?k(L()):e.deltaY>0&&x(L()),s.update()}(e),s.dispatchEvent(m))}function F(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:D(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:D(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:D(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:D(-s.keyPanSpeed,0),s.update();}}(e)}function I(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=u.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);w.set(0,o)}if(s.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);R.set(a,i)}}(e),d=u.TOUCH_DOLLY_PAN;break;default:d=u.NONE;}d!==u.NONE&&s.dispatchEvent(l)}}function X(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(d!==u.TOUCH_ROTATE)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY),y.subVectors(v,T).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*y.x/t.clientHeight),C(2*Math.PI*y.y/t.clientHeight),T.copy(v),s.update()}(e);break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;if(d!==u.TOUCH_DOLLY_PAN)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);P.set(0,o),j.set(0,Math.pow(P.y/w.y,s.zoomSpeed)),x(j.y),w.copy(P)}if(s.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);O.set(a,i),H.subVectors(O,R).multiplyScalar(s.panSpeed),D(H.x,H.y),R.copy(O)}s.update()}(e);break;default:d=u.NONE;}}function K(e){!1!==s.enabled&&(s.dispatchEvent(m),d=u.NONE)}function _(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",_,!1),s.domElement.addEventListener("mousedown",U,!1),s.domElement.addEventListener("wheel",z,!1),s.domElement.addEventListener("touchstart",I,!1),s.domElement.addEventListener("touchend",K,!1),s.domElement.addEventListener("touchmove",X,!1),window.addEventListener("keydown",F,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});Gs;function Fs(e){void 0===e&&(e=!0);var r=new C.PlaneGeometry(3,3,1,1),i=new C.MeshBasicMaterial({color:"red",side:C.DoubleSide}),$=new C.Mesh(r,i);return $.userData.pts=function(){return $.updateMatrixWorld(!0),[$.position,$.localToWorld(new C.Vector3(0,0,1)),$.localToWorld(new C.Vector3(0,1,0))]},$.visible=e,$}Fs;function Es(e){var r=e.size;return React.createElement(Cs,{thing:function(e,$){return new C.GridHelper(r*e.gridSize,r,new C.Color(14540253),new C.Color(14540253))}})}var Il={};yb();var ZF=Il&&Il.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$F=function(t){function e(e){var r=t.call(this,e)||this;return r.thing=e.thing(r.props.project,r.props.scene),r}return ZF(e,t),e.prototype.componentDidMount=function(){this.props.scene.add(this.thing)},e.prototype.componentWillUnmount=function(){this.props.scene.remove(this.thing)},e.prototype.render=function(){return null},e}(m.Component),Cs=sf(Xc("project","scene"),Bb)($F);Il.default=Cs;yb(),Es;var Hl={};var As="object"==typeof gc&&gc&&gc.Object===Object&&gc;var cG="object"==typeof self&&self&&self.Object===Object&&self,Lb=As||cG||Function("return this")();var Bc=Lb.Symbol;var zs=Object.prototype,gG=zs.hasOwnProperty,hG=zs.toString,ch=Bc?Bc.toStringTag:void 0;function jG($){var r=gG.call($,ch),t=$[ch];try{$[ch]=void 0;var n=!0}catch(o){}var a=hG.call($);return n&&(r?$[ch]=t:delete $[ch]),a}var kG=Object.prototype,lG=kG.toString;function mG(t){return lG.call(t)}var nG="[object Null]",oG="[object Undefined]",ys=Bc?Bc.toStringTag:void 0;function qf($){return null==$?void 0===$?oG:nG:ys&&ys in Object($)?jG($):mG($)}function ve(t){return null!=t&&"object"==typeof t}var sG="[object Symbol]";function Fl($){return"symbol"==typeof $||ve($)&&qf($)==sG}function uG(e,r){for(var t=-1,$=null==e?0:e.length,a=Array($);++t<$;)a[t]=r(e[t],t,e);return a}var Hb=Array.isArray;var wG=1/0,us=Bc?Bc.prototype:void 0,ts=us?us.toString:void 0;function ss($){if("string"==typeof $)return $;if(Hb($))return uG($,ss)+"";if(Fl($))return ts?ts.call($):"";var r=$+"";return"0"==r&&1/$==-wG?"-0":r}function Dl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function BG(r){return r}function Jc(t,e){var $=WG(t,e);return VG($)?$:void 0}var DG="[object AsyncFunction]",EG="[object Function]",FG="[object GeneratorFunction]",GG="[object Proxy]";function ps($){if(!Dl($))return!1;var t=qf($);return t==EG||t==FG||t==DG||t==GG}var Bl=Lb["__core-js_shared__"];var ns=function(){var $=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}();function KG($){return!!ns&&ns in $}var LG=Function.prototype,MG=LG.toString;function md(t){if(null!=t){try{return MG.call(t)}catch(r){}try{return t+""}catch(r){}}return""}var OG=/[\\^$.*+?()[\]{}|]/g,PG=/^\[object .+?Constructor\]$/,QG=Function.prototype,RG=Object.prototype,SG=QG.toString,TG=RG.hasOwnProperty,UG=RegExp("^"+SG.call(TG).replace(OG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function VG($){return!(!Dl($)||KG($))&&(ps($)?UG:PG).test(md($))}function WG($,t){return null==$?void 0:$[t]}Jc;var Al=Jc(Lb,"WeakMap");var ls=function(){try{var t=Jc(Object,"defineProperty");return t({},"",{}),t}catch(r){}}();var ZG=9007199254740991,$G=/^(?:0|[1-9]\d*)$/;function ks($,o){var r=typeof $;return!!(o=null==o?ZG:o)&&("number"==r||"symbol"!=r&&$G.test($))&&$>-1&&$%1==0&&$<o}function js(e,r,$){"__proto__"==r&&ls?ls(e,r,{configurable:!0,enumerable:!0,value:$,writable:!0}):e[r]=$}js;function is($,t){return $===t||$!=$&&t!=t}function zl($){return null!=$&&yl($.length)&&!ps($)}var dH=9007199254740991;function yl($){return"number"==typeof $&&$>-1&&$%1==0&&$<=dH}zl;var fH=Object.prototype;function gH(t){var o=t&&t.constructor;return t===("function"==typeof o&&o.prototype||fH)}function Ij(r){return zl(r)?YH(r):bI(r)}function iH(r,$){for(var t=-1,e=Array(r);++t<r;)e[t]=$(t);return e}var jH="[object Arguments]";function es(e){return ve(e)&&qf(e)==jH}var ds=Object.prototype,mH=ds.hasOwnProperty,nH=ds.propertyIsEnumerable,cs=es(function(){return arguments}())?es:function(r){return ve(r)&&mH.call(r,"callee")&&!nH.call(r,"callee")};function pH(){return!1}var bs=function(){var t={exports:this};this.__esModule=!0;var e="object"==typeof this&&this&&!this.nodeType&&this,r=e&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===e?Lb.Buffer:void 0,s=(o?o.isBuffer:void 0)||pH;return this.default=s,t.exports}.call({});var rH="[object Arguments]",sH="[object Array]",tH="[object Boolean]",uH="[object Date]",vH="[object Error]",wH="[object Function]",xH="[object Map]",yH="[object Number]",zH="[object Object]",AH="[object RegExp]",BH="[object Set]",CH="[object String]",DH="[object WeakMap]",EH="[object ArrayBuffer]",FH="[object DataView]",GH="[object Float32Array]",HH="[object Float64Array]",IH="[object Int8Array]",JH="[object Int16Array]",KH="[object Int32Array]",LH="[object Uint8Array]",Gy="[object Uint8ClampedArray]",NH="[object Uint16Array]",OH="[object Uint32Array]",e={};function as($){return ve($)&&yl($.length)&&!!e[qf($)]}e[GH]=e[HH]=e[IH]=e[JH]=e[KH]=e[LH]=e[Gy]=e[NH]=e[OH]=!0,e[rH]=e[sH]=e[EH]=e[tH]=e[FH]=e[uH]=e[vH]=e[wH]=e[xH]=e[yH]=e[zH]=e[AH]=e[BH]=e[CH]=e[DH]=!1,as;function RH(t){return function($){return t($)}}var SH=function(){var e={exports:this};this.__esModule=!0;var t="object"==typeof this&&this&&!this.nodeType&&this,r=t&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===t&&As.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();return this.default=i,e.exports}.call({});var _r=ma(SH);var Xr=_r.d&&_r.d.isTypedArray,Wr=Xr?RH(Xr):as;var WH=Object.prototype,XH=WH.hasOwnProperty;function YH(r,e){var $wmt$$interop$default=ma(bs);var $=Hb(r),a=!$&&cs(r),t=!$&&!a&&$wmt$$interop$default.d(r),s=!$&&!a&&!t&&Wr(r),i=$||a||t||s,x=i?iH(r.length,String):[],A=x.length;for(var p in r)!e&&!XH.call(r,p)||i&&("length"==p||t&&("offset"==p||"parent"==p)||s&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||ks(p,A))||x.push(p);return x}function ZH(t,u){return function($){return t(u($))}}var $H=ZH(Object.keys,Object);var _H=Object.prototype,aI=_H.hasOwnProperty;function bI(r){if(!gH(r))return $H(r);var $=[];for(var t in Object(r))aI.call(r,t)&&"constructor"!=t&&$.push(t);return $}Ij;function Vr(e,$,r){var t=null==e?void 0:ul(e,$);return void 0===t?r:t}function ul(e,$){for(var t=0,r=($=tl($,e)).length;null!=e&&t<r;)e=e[rk($[t++])];return t&&t==r?e:void 0}function tl(r,$){return Hb(r)?r:ql(r,$)?[r]:TI(Zp(r))}var fI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gI=/^\w*$/;function ql(r,$){if(Hb(r))return!1;var e=typeof r;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=r&&!Fl(r))||gI.test(r)||!fI.test(r)||null!=$&&r in Object($)}function pb(e){var $=-1,t=null==e?0:e.length;for(this.clear();++$<t;){var a=e[$];this.set(a[0],a[1])}}function Ir(){this.size=0,this.__data__={hash:new pc,map:new(fh||Fb),string:new pc}}function pc(t){var e=-1,$=null==t?0:t.length;for(this.clear();++e<$;){var r=t[e];this.set(r[0],r[1])}}function Cr(){this.__data__=Cf?Cf(null):{},this.size=0}var Cf=Jc(Object,"create");Cr;function nI(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var oI="__lodash_hash_undefined__",pI=Object.prototype,qI=pI.hasOwnProperty;function rI(r){var $=this.__data__;if(Cf){var e=$[r];return e===oI?void 0:e}return qI.call($,r)?$[r]:void 0}var sI=Object.prototype,tI=sI.hasOwnProperty;function uI(r){var $=this.__data__;return Cf?void 0!==$[r]:tI.call($,r)}var vI="__lodash_hash_undefined__";function wI($,e){var i=this.__data__;return this.size+=this.has($)?0:1,i[$]=Cf&&void 0===e?vI:e,this}pc.prototype.clear=Cr,pc.prototype.delete=nI,pc.prototype.get=rI,pc.prototype.has=uI,pc.prototype.set=wI,pc;function Fb(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var l=e[t];this.set(l[0],l[1])}}function yI(){this.__data__=[],this.size=0}function xh(e,r){for(var $=e.length;$--;)if(is(e[$][0],r))return $;return-1}xh;var AI=Array.prototype,BI=AI.splice;function CI($){var r=this.__data__,a=xh(r,$);return!(a<0)&&(a==r.length-1?r.pop():BI.call(r,a,1),--this.size,!0)}function yr($){var e=this.__data__,r=xh(e,$);return r<0?void 0:e[r][1]}yr;function Nq($){return xh(this.__data__,$)>-1}Nq;function Hq($,e){var t=this.__data__,r=xh(t,$);return r<0?(++this.size,t.push([$,e])):t[r][1]=e,this}Hq;Fb.prototype.clear=yI,Fb.prototype.delete=CI,Fb.prototype.get=yr,Fb.prototype.has=Nq,Fb.prototype.set=Hq,Fb;var fh=Jc(Lb,"Map");Ir;function zq(e){var t=ah(this,e).delete(e);return this.size-=t?1:0,t}function ah(e,$){var r=e.__data__;return JI($)?r["string"==typeof $?"string":"hash"]:r.map}function JI(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}ah;zq;function qq(t){return ah(this,t).get(t)}qq;function pq(t){return ah(this,t).has(t)}pq;function oq(t,e){var $=ah(this,t),a=$.size;return $.set(t,e),this.size+=$.size==a?0:1,this}oq;pb.prototype.clear=Ir,pb.prototype.delete=zq,pb.prototype.get=qq,pb.prototype.has=pq,pb.prototype.set=oq,pb;var NI="Expected a function";function Tj(e,$){if("function"!=typeof e||null!=$&&"function"!=typeof $)throw new TypeError(NI);var t=function(){var a=arguments,r=$?$.apply(this,a):a[0],p=t.cache;if(p.has(r))return p.get(r);var c=e.apply(this,a);return t.cache=p.set(r,c)||p,c};return t.cache=new(Tj.Cache||pb),t}Tj.Cache=pb,Tj;var PI=500;function QI($){var e=Tj($,function($){return r.size===PI&&r.clear(),$}),r=e.cache;return e}var RI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,SI=/\\(\\)?/g,TI=QI(function(e){var $=[];return 46===e.charCodeAt(0)&&$.push(""),e.replace(RI,function(e,r,a,p){$.push(a?p.replace(SI,"$1"):r||e)}),$});function Zp($){return null==$?"":ss($)}Zp;tl;var VI=1/0;function rk($){if("string"==typeof $||Fl($))return $;var r=$+"";return"0"==r&&1/$==-VI?"-0":r}ul;Vr;function XI(t,e){for(var $=-1,r=e.length,o=t.length;++$<r;)t[o+$]=e[$];return t}function Eb(e){var t=this.__data__=new Fb(e);this.size=t.size}function rp(){this.__data__=new Fb,this.size=0}rp;function $I(t){var e=this.__data__,$=e.delete(t);return this.size=e.size,$}function _I(t){return this.__data__.get(t)}function aJ(t){return this.__data__.has(t)}var bJ=200;function cJ(p,$){var e=this.__data__;if(e instanceof Fb){var a=e.__data__;if(!fh||a.length<bJ-1)return a.push([p,$]),this.size=++e.size,this;e=this.__data__=new pb(a)}return e.set(p,$),this.size=e.size,this}Eb.prototype.clear=rp,Eb.prototype.delete=$I,Eb.prototype.get=_I,Eb.prototype.has=aJ,Eb.prototype.set=cJ,Eb;function dJ(r,t){for(var u=-1,$=null==r?0:r.length,e=0,d=[];++u<$;){var a=r[u];t(a,u,r)&&(d[e++]=a)}return d}function eJ(){return[]}var fJ=Object.prototype,gJ=fJ.propertyIsEnumerable,kp=Object.getOwnPropertySymbols,iJ=kp?function(r){return null==r?[]:(r=Object(r),dJ(kp(r),function($){return gJ.call(r,$)}))}:eJ;function uk(e){return ip(e,Ij,iJ)}function ip(r,$,e){var a=$(r);return Hb(r)?a:XI(a,e(r))}ip;uk;var vk=Jc(Lb,"DataView");var Ak=Jc(Lb,"Promise");var Bk=Jc(Lb,"Set");var ap="[object Map]",pJ="[object Object]",_o="[object Promise]",$o="[object Set]",Yo="[object WeakMap]",To="[object DataView]",uJ=md(vk),vJ=md(fh),wJ=md(Ak),xJ=md(Bk),yJ=md(Al),Re=qf;(vk&&Re(new vk(new ArrayBuffer(1)))!=To||fh&&Re(new fh)!=ap||Ak&&Re(Ak.resolve())!=_o||Bk&&Re(new Bk)!=$o||Al&&Re(new Al)!=Yo)&&(Re=function($){var r=qf($),a=r==pJ?$.constructor:void 0,e=a?md(a):"";if(e)switch(e){case uJ:return To;case vJ:return ap;case wJ:return _o;case xJ:return $o;case yJ:return Yo;}return r});var So=Re;var Mo=Lb.Uint8Array;function Io(e){return"function"==typeof e?e:null==e?BG:"object"==typeof e?Hb(e)?AK(e[0],e[1]):Fo(e):ix(e)}function Fo(t){var e=yx(t);return 1==e.length&&e[0][2]?ux(e[0][0],e[0][1]):function(r){return r===t||rK(r,t,e)}}function ik(e,$,k,r,t){return e===$||(null==e||null==$||!ve(e)&&!ve($)?e!=e&&$!=$:oK(e,$,k,r,ik,t))}function Lg(r){var e=-1,$=null==r?0:r.length;for(this.__data__=new pb;++e<$;)this.add(r[e])}var GJ="__lodash_hash_undefined__";function HJ($){return this.__data__.set($,GJ),this}function IJ(a){return this.__data__.has(a)}Lg.prototype.add=Lg.prototype.push=HJ,Lg.prototype.has=IJ,Lg;function JJ(r,t){for(var e=-1,$=null==r?0:r.length;++e<$;)if(t(r[e],e,r))return!0;return!1}function KJ(t,$){return t.has($)}var LJ=1,MJ=2;function ty(e,r,$,a,u,t){var d=$&LJ,i=e.length,y=r.length;if(i!=y&&!(d&&y>i))return!1;var U=t.get(e);if(U&&t.get(r))return U==r;var f=-1,o=!0,n=$&MJ?new Lg:void 0;for(t.set(e,r),t.set(r,e);++f<i;){var v=e[f],c=r[f];if(a)var A=d?a(c,v,f,r,e,t):a(v,c,f,e,r,t);if(void 0!==A){if(A)continue;o=!1;break}if(n){if(!JJ(r,function(e,r){if(!KJ(n,r)&&(v===e||u(v,e,$,a,t)))return n.push(r)})){o=!1;break}}else if(v!==c&&!u(v,c,$,a,t)){o=!1;break}}return t.delete(e),t.delete(r),o}function OJ(r){var t=-1,$=Array(r.size);return r.forEach(function(r,e){$[++t]=[e,r]}),$}function PJ(r){var t=-1,$=Array(r.size);return r.forEach(function(r){$[++t]=r}),$}var QJ=1,RJ=2,SJ="[object Boolean]",TJ="[object Date]",UJ="[object Error]",VJ="[object Map]",WJ="[object Number]",XJ="[object RegExp]",YJ="[object Set]",ZJ="[object String]",$J="[object Symbol]",_J="[object ArrayBuffer]",aK="[object DataView]",jy=Bc?Bc.prototype:void 0,Mk=jy?jy.valueOf:void 0;function dK($,r,a,e,t,j,o){switch(a){case aK:if($.byteLength!=r.byteLength||$.byteOffset!=r.byteOffset)return!1;$=$.buffer,r=r.buffer;case _J:return!($.byteLength!=r.byteLength||!j(new Mo($),new Mo(r)));case SJ:case TJ:case WJ:return is(+$,+r);case UJ:return $.name==r.name&&$.message==r.message;case XJ:case ZJ:return $==r+"";case VJ:var I=OJ;case YJ:var Y=e&QJ;if(I||(I=PJ),$.size!=r.size&&!Y)return!1;var s=o.get($);if(s)return s==r;e|=RJ,o.set($,r);var v=ty(I($),I(r),e,t,j,o);return o.delete($),v;case $J:if(Mk)return Mk.call($)==Mk.call(r);}return!1}var eK=1,fK=Object.prototype,gK=fK.hasOwnProperty;function hK(r,t,e,o,$,s){var a=e&eK,n=uk(r),c=n.length;if(c!=uk(t).length&&!a)return!1;for(var f=c;f--;){var i=n[f];if(!(a?i in t:gK.call(t,i)))return!1}var v=s.get(r);if(v&&s.get(t))return v==t;var x=!0;s.set(r,t),s.set(t,r);for(var l=a;++f<c;){var u=r[i=n[f]],p=t[i];if(o)var B=a?o(p,u,i,t,r,s):o(u,p,i,r,t,s);if(!(void 0===B?u===p||$(u,p,e,o,s):B)){x=!1;break}l||(l="constructor"==i)}if(x&&!l){var U=r.constructor,A=t.constructor;U!=A&&"constructor"in r&&"constructor"in t&&!("function"==typeof U&&U instanceof U&&"function"==typeof A&&A instanceof A)&&(x=!1)}return s.delete(r),s.delete(t),x}var iK=1,Rx="[object Arguments]",Kx="[object Array]",_j="[object Object]",mK=Object.prototype,zx=mK.hasOwnProperty;function oK($,r,a,i,e,t){var S=Hb($),F=Hb(r),o=S?Kx:So($),p=F?Kx:So(r),s=(o=o==Rx?_j:o)==_j,c=(p=p==Rx?_j:p)==_j,u=o==p;var $wmt$$interop$default=ma(bs);if(u&&$wmt$$interop$default.d($)){if(!$wmt$$interop$default.d(r))return!1;S=!0,s=!1}if(u&&!s)return t||(t=new Eb),S||Wr($)?ty($,r,a,i,e,t):dK($,r,o,a,i,e,t);if(!(a&iK)){var v=s&&zx.call($,"__wrapped__"),g=c&&zx.call(r,"__wrapped__");if(v||g){var l=v?$.value():$,j=g?r.value():r;return t||(t=new Eb),e(l,j,a,i,t)}}return!!u&&(t||(t=new Eb),hK($,r,a,i,e,t))}ik;var pK=1,qK=2;function rK(r,a,$,e){var t=$.length,i=t,u=!e;if(null==r)return!i;for(r=Object(r);t--;){var T=$[t];if(u&&T[2]?T[1]!==r[T[0]]:!(T[0]in r))return!1}for(;++t<i;){var v=(T=$[t])[0],f=r[v],n=T[1];if(u&&T[2]){if(void 0===f&&!(v in r))return!1}else{var A=new Eb;if(e)var l=e(f,n,v,r,a,A);if(!(void 0===l?ik(n,f,pK|qK,e,A):l))return!1}}return!0}function yx(r){for(var $=Ij(r),e=$.length;e--;){var t=$[e],a=r[t];$[e]=[t,a,Nk(a)]}return $}function Nk($){return $==$&&!Dl($)}Nk;yx;function ux(t,o){return function(e){return null!=e&&e[t]===o&&(void 0!==o||t in Object(e))}}Fo;function sx($,e){return null!=$&&px($,e,wK)}function wK(t,$){return null!=t&&$ in Object(t)}function px(r,$,i){for(var e=-1,t=($=tl($,r)).length,s=!1;++e<t;){var a=rk($[e]);if(!(s=null!=r&&i(r,a)))break;r=r[a]}return s||++e!=t?s:!!(t=null==r?0:r.length)&&yl(t)&&ks(a,t)&&(Hb(r)||cs(r))}px;sx;var yK=1,zK=2;function AK($,r){return ql($)&&Nk(r)?ux(rk($),r):function(e){var a=Vr(e,$);return void 0===a&&a===r?sx(e,$):ik(r,a,yK|zK)}}function ix(e){return ql(e)?CK(rk(e)):ax(e)}function CK(t){return function($){return null==$?void 0:$[t]}}function ax(e){return function($){return ul($,e)}}ax;ix;Io;function _w(r,e){return function($,a){var t=Hb($)?FK:Zw,o=e?e():{};return t($,r,Io(a,2),o)}}function FK(r,t,$,e){for(var v=-1,a=null==r?0:r.length;++v<a;){var l=r[v];t(e,l,$(l),r)}return e}function Zw(a,$,e,r){return LK(a,function(a,t,o){$(r,a,e(a),o)}),r}function Yw($,e){return $&&JK($,e,Ij)}function IK(r){return function(t,e,o){for(var $=-1,z=Object(t),a=o(t),f=a.length;f--;){var n=a[r?f:++$];if(!1===e(z[n],n,z))break}return t}}var JK=IK();Yw;function Sw(r,e){return function(n,t){if(null==n)return n;if(!zl(n))return r(n,t);for(var $=n.length,u=e?$:-1,i=Object(n);(e?u--:++u<$)&&!1!==t(i[u],u,i););return n}}Sw;var LK=Sw(Yw);Zw;_w;var MK=Object.prototype,NK=MK.hasOwnProperty,OK=_w(function(r,$,e){NK.call(r,e)?r[e].push($):js(r,e,[$])});var PK=function(){function e(e,t,i){var r=this;this.hanger=e,this.faces=t,this.vertices=i,this.faces.forEach(function(e){e.surface=r}),this.resetOriginalVertices=this.resetOriginalVertices.bind(this),this.addVector=this.addVector.bind(this),this.resetOriginalVertices()}return e.prototype.resetOriginalVertices=function(){this.originalVertices=this.vertices.map(function(e){return e.clone()})},e.prototype.addVector=function(e){var t=this;this.vertices.forEach(function(i,r){i.copy(t.originalVertices[r].clone().add(e))}),this.hanger.geometry.verticesNeedUpdate=!0,this.hanger.geometry.computeBoundingSphere(),this.hanger.geometry.computeBoundingBox(),this.hanger.geometry.computeFlatVertexNormals(),this.hanger.geometry.mergeVertices(),this.hanger.bbox.setFromObject(this.hanger.mesh);this.hanger.bbox.max.x,this.hanger.bbox.min.x,this.hanger.bbox.max.y,this.hanger.bbox.min.y,this.hanger.bbox.max.z,this.hanger.bbox.min.z},e.prototype.pushPull=function(e){},e.prototype.focus=function(){this.faces.forEach(function(e){e.color.set(65280)})},e.prototype.blur=function(){},e}();yb();var QK=Hl&&Hl.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),RK={depth:10,steps:1,bevelEnabled:!1},SK=new C.LineBasicMaterial({color:0,linewidth:1,transparent:!1}),TK=function(e){function r(r){var t=e.call(this,r)||this;t.bbox=new C.Box3,t.surfaces=[],t.material=new C.MeshBasicMaterial({opacity:.7,transparent:!0,color:16777215,side:C.DoubleSide});var o=r.project.hanger,$=o.width3d,n=o.height3d,a=o.length3d,i=new C.Shape(r.project.hanger.profile.map(function(e){var r=e[0],t=e[1];return new C.Vector2(r,t)}));t.geometry=new C.ExtrudeBufferGeometry(i,RK),t.geometry.translate(0,n/2,0),t.mesh=new C.Mesh(t.geometry,t.material);var p=new C.BoxGeometry($,n,a);p.translate(0,n,0);var h=new C.Mesh(p,t.material);t.mesh.add(h);var s=new C.EdgesGeometry(t.geometry,1),c=new C.LineSegments(s,SK);t.mesh.add(c);var m=OK(t.geometry.faces,"materialIndex");return Object.keys(m).forEach(function(e){var r=m[e],o=r.reduce(function(e,r){return e.add(t.geometry.vertices[r.a]),e.add(t.geometry.vertices[r.b]),e.add(t.geometry.vertices[r.c]),e},new Set);t.surfaces.push(new PK(t,r,Array.from(o)))}),t}return QK(r,e),r.prototype.componentDidMount=function(){this.props.scene.add(this.mesh)},r.prototype.componentWillUnmount=function(){this.props.scene.remove(this.mesh)},r.prototype.render=function(){return null},r}(m.Component),Pw=sf(Xc("scene","project"),Bb)(TK);Hl.default=Pw;yb();var VK=gm&&gm.__extends||function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r])})(e,r)};return function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),WK=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.plane=new C.Plane,e.planeIntersection=new C.Vector3,e.raycaster=new C.Raycaster,e.renderer=new C.WebGLRenderer({antialias:!0}),e.height=500,e.width=500,e.animate=function(){e.renderer.render(e.props.scene,e.camera)},e.handleResize=function(n){void 0===n&&(n=null);var r=e.container,t=r.clientWidth,o=r.clientHeight;e.renderer.setSize(t,o),e.camera.aspect=t/o,e.camera.updateProjectionMatrix(),requestAnimationFrame(e.animate)},e}return VK(e,n),e.prototype.componentDidMount=function(){var n=this,e=this.renderer.domElement;this.renderer.setClearColor(15658734),this.camera=new C.PerspectiveCamera(75,1,.1,1e3),this.camera.position.set(-8,12,8),this.camera.lookAt(0,0,0),this.container.appendChild(e),this.orbitControls=Gs(this.camera,e),this.debugPlane=Fs(!1),this.props.scene.add(this.debugPlane);var r=Is(0,OE),t=ke(e,"mousemove").pipe(r,Hj());e.dispatchEvent(new Event("mousemove"));var o=ke(e,"wheel").pipe(r),i=ke(e,"mousedown"),a=ke(document,"mouseup").pipe(Hj()),$=ke(e,"click");a.subscribe(function(){n.orbitControls.enabled=!0}),Qs(t,o).subscribe(function(){requestAnimationFrame(n.animate)});var p=t.pipe(Ns(function(e,r){return e.x=r.layerX/n.width*2-1,e.y=r.layerY/n.height*-2+1,e},{x:0,y:0})).pipe(Nf(function(e){return n.raycaster.setFromCamera(e,n.camera),[]}),Hj());p.subscribe(function(n){n.length}),$.pipe(Jl(p),Nl(function(n){n[0];return n[1].length>0}),Ej()).subscribe(function(){}),i.pipe(Jl(p),Nl(function(n){n[0];return n[1].length>0}),Ml(function(e){e[0];var r=e[1];n.orbitControls.enabled=!1,n.intersection=r[0],n.normal=n.intersection.face.normal.clone().normalize(),n.normal.x+n.normal.y+n.normal.z<0&&n.normal.negate(),n.debugPlane.position.copy(n.intersection.point),n.debugPlane.lookAt(n.intersection.point.clone().add(n.intersection.face.normal));var t=n.debugPlane.userData.pts(),o=t[0],i=t[1],a=t[2];n.plane.setFromCoplanarPoints(o,i,a)}),Nf(function(){return t.pipe(Ml(function(){n.raycaster.ray.intersectPlane(n.plane,n.planeIntersection);var e=new C.Vector3().multiplyVectors(n.normal,n.planeIntersection.clone().sub(n.intersection.point)),r=n.props.project,t=r.gridSizeWidth,o=r.gridSizeHeight,i=r.gridSizeLength;e.x=Math.round(e.x/t)*t,e.y=Math.round(e.y/o)*o,e.z=Math.round(e.z/i)*i,n.intersection.face.surface.addVector(e)}),Ks(a))}),Ej()).subscribe(function(){}),this.handleResize()},e.prototype.render=function(){var n=this;return React.createElement("div",{ref:function(e){return n.container=e},style:{width:"100%",height:"100vh"}},React.createElement(Es,{size:100}),React.createElement(Pw,null))},e}(m.Component),Jw=sf(Xc("project","scene"),Bb)(WK);gm.default=Jw;var Qk={};var ZK={};var Hw,_K=false;function Ew(){if(_K)return;_K=true;Hw={};Hw=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}}}var bL,cL=false;function Dw(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function eL(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&Dw(r.slice(0,0))}function fL(){if(cL)return;cL=true;bL={};bL=function(r){return null!=r&&(Dw(r)||eL(r)||!!r._isBuffer)}}var Ya,hL,iL,Ve,kL=false;function xw(r){return"[object Array]"===Ve.call(r)}function mL(r){return"[object ArrayBuffer]"===Ve.call(r)}function nL(r){return"undefined"!=typeof FormData&&r instanceof FormData}function oL(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function pL(r){return"string"==typeof r}function qL(r){return"number"==typeof r}function rL(r){return void 0===r}function ww(r){return null!==r&&"object"==typeof r}function tL(r){return"[object Date]"===Ve.call(r)}function uL(r){return"[object File]"===Ve.call(r)}function vL(r){return"[object Blob]"===Ve.call(r)}function vw(r){return"[object Function]"===Ve.call(r)}function xL(r){return ww(r)&&vw(r.pipe)}function yL(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function zL(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function AL(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document}function Sk(r,$){if(null!=r)if("object"!=typeof r&&(r=[r]),xw(r))for(var e=0,f=r.length;e<f;e++)$.call(null,r[e],e,r);else for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&$.call(null,r[a],a,r)}function tw(){var r={};function $($,e){"object"==typeof r[e]&&"object"==typeof $?r[e]=tw(r[e],$):r[e]=$}for(var e=0,f=arguments.length;e<f;e++)Sk(arguments[e],$);return r}function DL(r,$,e){return Sk($,function($,f){r[f]=e&&"function"==typeof $?hL($,e):$}),r}function Ta(){if(kL)return;kL=true;Ya={};hL=(Ew(),Hw);iL=(fL(),bL);Ve=Object.prototype.toString;Ya={isArray:xw,isArrayBuffer:mL,isBuffer:iL,isFormData:nL,isArrayBufferView:oL,isString:pL,isNumber:qL,isObject:ww,isUndefined:rL,isDate:tL,isFile:uL,isBlob:vL,isFunction:vw,isStream:xL,isURLSearchParams:yL,isStandardBrowserEnv:AL,forEach:Sk,merge:tw,extend:DL,trim:zL}}var FL={},GL=(Ta(),Ya);FL=function(e,$){GL.forEach(e,function(r,l){l!==$&&l.toUpperCase()===$.toUpperCase()&&(e[$]=r,delete e[l])})};var HL,IL=false;function JL(){if(IL)return;IL=true;HL={};HL=function(e,r,s,o,n){return e.config=r,s&&(e.code=s),e.request=o,e.response=n,e}}var sw,LL,ML=false;function qw(){if(ML)return;ML=true;sw={};LL=(JL(),HL);sw=function(r,e,$,n,a){var i=new Error(r);return LL(i,e,$,n,a)}}var OL,PL,QL=false;function RL(){if(QL)return;QL=true;OL={};PL=(qw(),sw);OL=function(r,a,t){var e=t.config.validateStatus;t.status&&e&&!e(t.status)?a(PL("Request failed with status code "+t.status,t.config,null,t.request,t)):r(t)}}var SL,We,UL=false;function pw(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function WL(){if(UL)return;UL=true;SL={};We=(Ta(),Ya);SL=function(r,e,$){if(!e)return r;var i;if($)i=$(e);else if(We.isURLSearchParams(e))i=e.toString();else{var o=[];We.forEach(e,function(r,e){null!=r&&(We.isArray(r)?e+="[]":r=[r],We.forEach(r,function(r){We.isDate(r)?r=r.toISOString():We.isObject(r)&&(r=JSON.stringify(r)),o.push(pw(e)+"="+pw(r))}))}),i=o.join("&")}return i&&(r+=(-1===r.indexOf("?")?"?":"&")+i),r}}var XL,Tk,ZL,$L=false;function _L(){if($L)return;$L=true;XL={};Tk=(Ta(),Ya);ZL=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];XL=function(e){var r,t,i,o={};return e?(Tk.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),r=Tk.trim(e.substr(0,i)).toLowerCase(),t=Tk.trim(e.substr(i+1)),r){if(o[r]&&ZL.indexOf(r)>=0)return;o[r]="set-cookie"===r?(o[r]?o[r]:[]).concat([t]):o[r]?o[r]+", "+t:t}}),o):o}}var aM,mw,cM=false;function dM(){if(cM)return;cM=true;aM={};mw=(Ta(),Ya);aM=mw.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function a(t){var a=t;return r&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=a(window.location.href),function(r){var e=mw.isString(r)?a(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0}}var eM,fM,gM=false;function Vj(){this.message="String contains an invalid character"}function iM(r){for(var $,a,m=String(r),t="",o=0,e=fM;m.charAt(0|o)||(e="=",o%1);t+=e.charAt(63&$>>8-o%1*8)){if((a=m.charCodeAt(o+=.75))>255)throw new Vj;$=$<<8|a}return t}function jM(){if(gM)return;gM=true;eM={};fM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Vj.prototype=new Error,Vj.prototype.code=5,Vj.prototype.name="InvalidCharacterError",eM=iM}var kM,Uj,mM=false;function nM(){if(mM)return;mM=true;kM={};Uj=(Ta(),Ya);kM=Uj.isStandardBrowserEnv()?{write:function(n,e,r,t,i,o){var u=[];u.push(n+"="+encodeURIComponent(e)),Uj.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),Uj.isString(t)&&u.push("path="+t),Uj.isString(i)&&u.push("domain="+i),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}var ew,Vk,qM,rM,sM,Tv,Rv,vM,wM=false;function Lv(){if(wM)return;wM=true;ew={};Vk=(Ta(),Ya);qM=(RL(),OL);rM=(WL(),SL);sM=(_L(),XL);Tv=(dM(),aM);Rv=(qw(),sw);vM="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||(jM(),eM);ew=function(e){return new Promise(function(r,t){var o=e.data,a=e.headers;Vk.isFormData(o)&&delete a["Content-Type"];var s=new XMLHttpRequest,n="onreadystatechange",u=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in s||Tv(e.url)||(s=new window.XDomainRequest,n="onload",u=!0,s.onprogress=function(){},s.ontimeout=function(){}),e.auth){var i=e.auth.username||"",$=e.auth.password||"";a.Authorization="Basic "+vM(i+":"+$)}if(s.open(e.method.toUpperCase(),rM(e.url,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,s[n]=function(){if(s&&(4===s.readyState||u)&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in s?sM(s.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?s.response:s.responseText,status:1223===s.status?204:s.status,statusText:1223===s.status?"No Content":s.statusText,headers:o,config:e,request:s};qM(r,t,a),s=null}},s.onerror=function(){t(Rv("Network Error",e,null,s)),s=null},s.ontimeout=function(){t(Rv("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",s)),s=null},Vk.isStandardBrowserEnv()){var l=(nM(),kM),d=(e.withCredentials||Tv(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;d&&(a[e.xsrfHeaderName]=d)}if("setRequestHeader"in s&&Vk.forEach(a,function(e,r){void 0===o&&"content-type"===r.toLowerCase()?delete a[r]:s.setRequestHeader(r,e)}),e.withCredentials&&(s.withCredentials=!0),e.responseType)try{s.responseType=e.responseType}catch(p){if("json"!==e.responseType)throw p}"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){s&&(s.abort(),t(e),s=null)}),void 0===o&&(o=null),s.send(o)})}}var HL,IL=false;function JL(){if(IL)return;IL=true;HL={};HL=function(e,r,s,o,n){return e.config=r,s&&(e.code=s),e.request=o,e.response=n,e}}var sw,LL,ML=false;function qw(){if(ML)return;ML=true;sw={};LL=(JL(),HL);sw=function(r,e,$,n,a){var i=new Error(r);return LL(i,e,$,n,a)}}var OL,PL,QL=false;function RL(){if(QL)return;QL=true;OL={};PL=(qw(),sw);OL=function(r,a,t){var e=t.config.validateStatus;t.status&&e&&!e(t.status)?a(PL("Request failed with status code "+t.status,t.config,null,t.request,t)):r(t)}}var SL,We,UL=false;function pw(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function WL(){if(UL)return;UL=true;SL={};We=(Ta(),Ya);SL=function(r,e,$){if(!e)return r;var i;if($)i=$(e);else if(We.isURLSearchParams(e))i=e.toString();else{var o=[];We.forEach(e,function(r,e){null!=r&&(We.isArray(r)?e+="[]":r=[r],We.forEach(r,function(r){We.isDate(r)?r=r.toISOString():We.isObject(r)&&(r=JSON.stringify(r)),o.push(pw(e)+"="+pw(r))}))}),i=o.join("&")}return i&&(r+=(-1===r.indexOf("?")?"?":"&")+i),r}}var XL,Tk,ZL,$L=false;function _L(){if($L)return;$L=true;XL={};Tk=(Ta(),Ya);ZL=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];XL=function(e){var r,t,i,o={};return e?(Tk.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),r=Tk.trim(e.substr(0,i)).toLowerCase(),t=Tk.trim(e.substr(i+1)),r){if(o[r]&&ZL.indexOf(r)>=0)return;o[r]="set-cookie"===r?(o[r]?o[r]:[]).concat([t]):o[r]?o[r]+", "+t:t}}),o):o}}var aM,mw,cM=false;function dM(){if(cM)return;cM=true;aM={};mw=(Ta(),Ya);aM=mw.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function a(t){var a=t;return r&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=a(window.location.href),function(r){var e=mw.isString(r)?a(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0}}var eM,fM,gM=false;function Vj(){this.message="String contains an invalid character"}function iM(r){for(var $,a,m=String(r),t="",o=0,e=fM;m.charAt(0|o)||(e="=",o%1);t+=e.charAt(63&$>>8-o%1*8)){if((a=m.charCodeAt(o+=.75))>255)throw new Vj;$=$<<8|a}return t}function jM(){if(gM)return;gM=true;eM={};fM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Vj.prototype=new Error,Vj.prototype.code=5,Vj.prototype.name="InvalidCharacterError",eM=iM}var kM,Uj,mM=false;function nM(){if(mM)return;mM=true;kM={};Uj=(Ta(),Ya);kM=Uj.isStandardBrowserEnv()?{write:function(n,e,r,t,i,o){var u=[];u.push(n+"="+encodeURIComponent(e)),Uj.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),Uj.isString(t)&&u.push("path="+t),Uj.isString(i)&&u.push("domain="+i),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}var ew,Vk,qM,rM,sM,Tv,Rv,vM,wM=false;function Lv(){if(wM)return;wM=true;ew={};Vk=(Ta(),Ya);qM=(RL(),OL);rM=(WL(),SL);sM=(_L(),XL);Tv=(dM(),aM);Rv=(qw(),sw);vM="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||(jM(),eM);ew=function(e){return new Promise(function(r,t){var o=e.data,a=e.headers;Vk.isFormData(o)&&delete a["Content-Type"];var s=new XMLHttpRequest,n="onreadystatechange",u=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in s||Tv(e.url)||(s=new window.XDomainRequest,n="onload",u=!0,s.onprogress=function(){},s.ontimeout=function(){}),e.auth){var i=e.auth.username||"",$=e.auth.password||"";a.Authorization="Basic "+vM(i+":"+$)}if(s.open(e.method.toUpperCase(),rM(e.url,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,s[n]=function(){if(s&&(4===s.readyState||u)&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in s?sM(s.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?s.response:s.responseText,status:1223===s.status?204:s.status,statusText:1223===s.status?"No Content":s.statusText,headers:o,config:e,request:s};qM(r,t,a),s=null}},s.onerror=function(){t(Rv("Network Error",e,null,s)),s=null},s.ontimeout=function(){t(Rv("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",s)),s=null},Vk.isStandardBrowserEnv()){var l=(nM(),kM),d=(e.withCredentials||Tv(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;d&&(a[e.xsrfHeaderName]=d)}if("setRequestHeader"in s&&Vk.forEach(a,function(e,r){void 0===o&&"content-type"===r.toLowerCase()?delete a[r]:s.setRequestHeader(r,e)}),e.withCredentials&&(s.withCredentials=!0),e.responseType)try{s.responseType=e.responseType}catch(p){if("json"!==e.responseType)throw p}"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){s&&(s.abort(),t(e),s=null)}),void 0===o&&(o=null),s.send(o)})}}var Pj={},ua=(Ta(),Ya),AM={"Content-Type":"application/x-www-form-urlencoded"};function Av(e,r){!ua.isUndefined(e)&&ua.isUndefined(e["Content-Type"])&&(e["Content-Type"]=r)}function CM(){var e;return"undefined"!=typeof XMLHttpRequest?e=(Lv(),ew):void 0!==Dh&&(e=(Lv(),ew)),e}var kl={adapter:CM(),transformRequest:[function(e,r){return FL(r,"Content-Type"),ua.isFormData(e)||ua.isArrayBuffer(e)||ua.isBuffer(e)||ua.isStream(e)||ua.isFile(e)||ua.isBlob(e)?e:ua.isArrayBufferView(e)?e.buffer:ua.isURLSearchParams(e)?(Av(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ua.isObject(e)?(Av(r,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(r){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ua.forEach(["delete","get","head"],function(e){kl.headers[e]={}}),ua.forEach(["post","put","patch"],function(e){kl.headers[e]=ua.merge(AM)}),Pj=kl;var iv={},FM=(Ta(),Ya);function Jj(){this.handlers=[]}Jj.prototype.use=function(r,e){return this.handlers.push({fulfilled:r,rejected:e}),this.handlers.length-1},Jj.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)},Jj.prototype.forEach=function(r){FM.forEach(this.handlers,function(e){null!==e&&r(e)})},iv=Jj;var xl={},IM=(Ta(),Ya);xl=function(t,$,r){return IM.forEach(r,function(r){t=r(t,$)}),t};var Ku={};Ku=function(r){return!(!r||!r.__CANCEL__)};var KM={};KM=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};var LM={};LM=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};var MM={},Bu=(Ta(),Ya);function Ll(e){e.cancelToken&&e.cancelToken.throwIfRequested()}MM=function(e){return Ll(e),e.baseURL&&!KM(e.url)&&(e.url=LM(e.baseURL,e.url)),e.headers=e.headers||{},e.data=xl(e.data,e.headers,e.transformRequest),e.headers=Bu.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),Bu.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]}),(e.adapter||Pj.adapter)(e).then(function(a){return Ll(e),a.data=xl(a.data,a.headers,e.transformResponse),a},function(a){return Ku(a)||(Ll(e),a&&a.response&&(a.response.data=xl(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})};var Gj={},Ye=(Ta(),Ya);function Cj(e){this.defaults=e,this.interceptors={request:new iv,response:new iv}}Cj.prototype.request=function(e){"string"==typeof e&&(e=Ye.merge({url:arguments[0]},arguments[1])),(e=Ye.merge(Pj,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var r=[MM,void 0],t=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){r.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){r.push(e.fulfilled,e.rejected)});r.length;)t=t.then(r.shift(),r.shift());return t},Ye.forEach(["delete","get","head","options"],function(e){Cj.prototype[e]=function(r,t){return this.request(Ye.merge(t||{},{method:e,url:r}))}}),Ye.forEach(["post","put","patch"],function(e){Cj.prototype[e]=function(r,t,$){return this.request(Ye.merge($||{},{method:e,url:r,data:t}))}}),Gj=Cj;var SM={},Ql=(Ta(),Ya),UM=(Ew(),Hw);function cu($){var i=new Gj($),r=UM(Gj.prototype.request,i);return Ql.extend(r,Gj.prototype,i),Ql.extend(r,i),r}var Ob=cu(Pj);var au={};function Rl(e){this.message=e}Rl.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Rl.prototype.__CANCEL__=!0,au=Rl;var ZM={};function wj(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var t=this;e(function(e){t.reason||(t.reason=new au(e),n(t.reason))})}wj.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},wj.source=function(){var e;return{token:new wj(function(n){e=n}),cancel:e}},ZM=wj;var _M={};_M=function(n){return function(r){return n.apply(null,r)}};Ob.Axios=Gj,Ob.create=function($){return cu(Ql.merge(Pj,$))},Ob.Cancel=au,Ob.CancelToken=ZM,Ob.isCancel=Ku,Ob.all=function($){return Promise.all($)},Ob.spread=_M,(SM=Ob).default=Ob;ZK=SM;var aN=function(e,t){return(aN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function P(e,t){function r(){this.constructor=e}aN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Xl=function(){return(Xl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var $ in t=arguments[r])Object.prototype.hasOwnProperty.call(t,$)&&(e[$]=t[$]);return e}).apply(this,arguments)};function dN(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var $=0;for(n=Object.getOwnPropertySymbols(e);$<n.length;$++)t.indexOf(n[$])<0&&(r[n[$]]=e[n[$]])}return r}function zc(e,t,r,n){var $,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)($=e[i])&&(o=(a<3?$(o):a>3?$(t,r,o):$(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function Od(e){return f(e).type}function gN(e,t){return f(e).getChildType(t)}function Jt(e,t){return f(e).onPatch(t)}function iN(e,t){return f(e).onSnapshot(t)}function tj(e,t){f(e).applyPatches(xp(t))}function kN(e){var t=null;function r(){t||(t=Jt(e,function(e,t){n.rawPatches.push([e,t])}))}var n={rawPatches:[],get patches(){return this.rawPatches.map(function(e){return e[0]})},get inversePatches(){return this.rawPatches.map(function(e){e[0];return e[1]})},stop:function(){t&&t(),t=null},resume:r,replay:function(t){tj(t||e,n.patches)},undo:function(t){tj(t||e,n.inversePatches.slice().reverse())}};return r(),n}function lN(e){var t=f(e);t.isRoot||d("`protect` can only be invoked on root nodes"),t.isProtectionEnabled=!0}function mN(e){var t=f(e);t.isRoot||d("`unprotect` can only be invoked on root nodes"),t.isProtectionEnabled=!1}function nN(e){return f(e).isProtected}function ht(e,t){return f(e).applySnapshot(t)}function pN(e,t){void 0===t&&(t=!0);var r=f(e);return t?r.snapshot:_g(r.type.getSnapshot(r,!1))}function qN(e,t){void 0===t&&(t=1);for(var r=f(e).parent;r;){if(0==--t)return!0;r=r.parent}return!1}function dt(e,t){void 0===t&&(t=1);for(var r=t,n=f(e).parent;n;){if(0==--r)return n.storedValue;n=n.parent}return d("Failed to find the parent of "+f(e)+" at depth "+t)}function sN(e,t){for(var r=f(e).parent;r;){if(t.is(r.storedValue))return!0;r=r.parent}return!1}function tN(e,t){for(var r=f(e).parent;r;){if(t.is(r.storedValue))return r.storedValue;r=r.parent}return d("Failed to find the parent of "+f(e)+" of a given type")}function Ts(e){return f(e).root.storedValue}function vN(e){return f(e).path}function wN(e){return Ne(f(e).path)}function xN(e){return f(e).isRoot}function yN(e,t){var r=gq(f(e),t);return r?r.value:void 0}function zN(e,t,r){var n=f(t).root.identifierCache.resolve(e,""+r);return n?n.value:void 0}function AN(e){return f(e).identifier}function Ls(e,t){var r=gq(f(e),t,!1);if(void 0!==r)try{return r.value}catch(n){return}}function CN(e,t){return iq(f(e),f(t))}function DN(e,t){void 0===t&&(t=!0);var r=f(e);return r.type.create(r.snapshot,!0===t?r.root._environment:!1===t?void 0:t)}function EN(e){return f(e).detach(),e}function FN(e){var t=f(e);t.isRoot?t.die():t.parent.removeChild(t.subpath)}function GN(e){return f(e).isAlive}function HN(e,t){return f(e).addDisposer(t),t}function IN(e){var t=f(e).root._environment;return t||ue}function Js(e,t){var r=f(e);r.getChildren().forEach(function(e){H(e.storedValue)&&Js(e.storedValue,t)}),t(r.storedValue)}function Ds(e){var t;return{name:(t=H(e)?Od(e):e).name,properties:Xl({},t.properties)}}function LN(e){var t=f(e).type,r=Xl({},Ds(t),{actions:[],volatile:[],views:[]});return Object.getOwnPropertyNames(e).forEach(function(t){if(!(t in r.properties)){var n=Object.getOwnPropertyDescriptor(e,t);n.get?bm(e,t)?r.views.push(t):r.volatile.push(t):!0===n.value._isMSTAction?r.actions.push(t):wt(e,t)?r.volatile.push(t):r.views.push(t)}}),r}function MN(e){return e}function NN(e){return e}function ON(e){return e}var om=function(){function e(e,t,r,n,$){this.parent=null,this.subpath="",this.state=S.INITIALIZING,this._environment=void 0,this._initialSnapshot=$,this.type=e,this.parent=t,this.subpath=r;var a=!0;try{this.storedValue=e.createNewInstance(this,{},$),this.state=S.CREATED,a=!1}finally{a&&(this.state=S.DEAD)}}return Object.defineProperty(e.prototype,"path",{get:function(){return this.parent?this.parent.path+"/"+cc(this.subpath):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.parent?this.parent.root:d("This scalar node is not part of a tree")},enumerable:!0,configurable:!0}),e.prototype.setParent=function(e,t){if(void 0===t&&(t=null),this.parent!==e||this.subpath!==t)if(this.parent&&!e)this.die();else{var r=null===t?"":t;this.subpath!==r&&(this.subpath=r),e&&e!==this.parent&&(this.parent=e)}},Object.defineProperty(e.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){return _g(this.getSnapshot())},enumerable:!0,configurable:!0}),e.prototype.getSnapshot=function(){return this.type.getSnapshot(this)},Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==S.DEAD},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.type.name+"@"+(this.path||"<root>")+(this.isAlive?"":"[dead]")},e.prototype.die=function(){this.state=S.DEAD},e}(),QN=1,RN="warn";function SN(e){RN=e}var u,UN={onError:function(e){throw e}},tf=function(){function e(e,t,r,n,$){if(this.nodeId=++QN,this.subpathAtom=qi("path"),this.subpath="",this.parent=null,this.state=S.INITIALIZING,this.isProtectionEnabled=!0,this.middlewares=null,this._autoUnbox=!0,this._environment=void 0,this._isRunningAction=!1,this._hasSnapshotReaction=!1,this._disposers=null,this._patchSubscribers=null,this._snapshotSubscribers=null,this._observableInstanceCreated=!1,this._cachedInitialSnapshot=null,this._environment=n,this._initialSnapshot=_g($),this.type=e,this.parent=t,this.subpath=r,this.escapedSubpath=cc(this.subpath),this.identifierAttribute=e.identifierAttribute,t||(this.identifierCache=new CO),this._childNodes=e.initializeChildNodes(this,this._initialSnapshot),this.identifier=null,this.unnormalizedIdentifier=null,this.identifierAttribute&&this._initialSnapshot){var a=this._initialSnapshot[this.identifierAttribute];if(void 0===a){var o=this._childNodes[this.identifierAttribute];o&&(a=o.value)}"string"!=typeof a&&"number"!=typeof a&&d("Instance identifier '"+this.identifierAttribute+"' for type '"+this.type.name+"' must be a string or a number"),this.identifier=""+a,this.unnormalizedIdentifier=a}t?t.root.identifierCache.addNodeToCache(this):this.identifierCache.addNodeToCache(this)}return e.prototype.applyPatches=function(e){this._observableInstanceCreated||this._createObservableInstance(),this.applyPatches(e)},e.prototype.applySnapshot=function(e){this._observableInstanceCreated||this._createObservableInstance(),this.applySnapshot(e)},e.prototype._createObservableInstance=function(){var e=this.type;this.storedValue=e.createNewInstance(this,this._childNodes,this._initialSnapshot),this.preboot();var t=!0;this._observableInstanceCreated=!0;try{this._isRunningAction=!0,e.finalizeNewInstance(this,this.storedValue),this._isRunningAction=!1,this.fireHook("afterCreate"),this.state=S.CREATED,t=!1}finally{t&&(this.state=S.DEAD)}iP(this,"snapshot"),this.isRoot&&this._addSnapshotReaction(),this.finalizeCreation(),this._childNodes=ue},Object.defineProperty(e.prototype,"path",{get:function(){return this.subpathAtom.reportObserved(),this.parent?this.parent.path+"/"+this.escapedSubpath:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=this.parent;return e?e.root:this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!0,configurable:!0}),e.prototype.setParent=function(e,t){if(void 0===t&&(t=null),this.parent!==e||this.subpath!==t)if(this.parent&&!e)this.die();else{var r=null===t?"":t;this.subpath!==r&&(this.subpath=r,this.escapedSubpath=cc(this.subpath),this.subpathAtom.reportChanged()),e&&e!==this.parent&&(e.root.identifierCache.mergeCache(this),this.parent=e,this.subpathAtom.reportChanged(),this.fireHook("afterAttach"))}},e.prototype.fireHook=function(e){var t=this,r=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[e];"function"==typeof r&&(nn?nn(function(){r.apply(t.storedValue)}):r.apply(this.storedValue))},e.prototype.createObservableInstanceIfNeeded=function(){this._observableInstanceCreated||this._createObservableInstance()},Object.defineProperty(e.prototype,"isObservableInstanceCreated",{get:function(){return this._observableInstanceCreated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){if(this.createObservableInstanceIfNeeded(),this.isAlive)return this.type.getValue(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){if(this.isAlive)return _g(this.getSnapshot())},enumerable:!0,configurable:!0}),e.prototype.getSnapshot=function(){if(this.isAlive)return this._observableInstanceCreated?this._getActualSnapshot():this._getInitialSnapshot()},e.prototype._getActualSnapshot=function(){return this.type.getSnapshot(this)},e.prototype._getInitialSnapshot=function(){if(this.isAlive){if(!this._initialSnapshot)return this._initialSnapshot;if(this._cachedInitialSnapshot)return this._cachedInitialSnapshot;var e=this.type,t=this._childNodes,r=this._initialSnapshot;return this._cachedInitialSnapshot=e.processInitialSnapshot(t,r),this._cachedInitialSnapshot}},e.prototype.isRunningAction=function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()},Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==S.DEAD},enumerable:!0,configurable:!0}),e.prototype.assertAlive=function(){if(!this.isAlive){var e="[mobx-state-tree][error] You are trying to read or write to an object that is no longer part of a state tree. (Object type was '"+this.type.name+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree.";switch(RN){case"error":throw new Error(e);case"warn":console.warn(e+" Use setLivelynessChecking(\"error\") to simplify debugging this error.");}}},e.prototype.getChildNode=function(e){this.assertAlive(),this._autoUnbox=!1;try{return this._observableInstanceCreated?this.type.getChildNode(this,e):this._childNodes[e]}finally{this._autoUnbox=!0}},e.prototype.getChildren=function(){this.assertAlive(),this._autoUnbox=!1;try{return this._observableInstanceCreated?this.type.getChildren(this):bq(this._childNodes)}finally{this._autoUnbox=!0}},e.prototype.getChildType=function(e){return this.type.getChildType(e)},Object.defineProperty(e.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!0,configurable:!0}),e.prototype.assertWritable=function(){this.assertAlive(),!this.isRunningAction()&&this.isProtected&&d("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")},e.prototype.removeChild=function(e){this.type.removeChild(this,e)},e.prototype.unbox=function(e){return e&&e.parent&&e.parent.assertAlive(),e&&e.parent&&e.parent._autoUnbox?e.value:e},e.prototype.toString=function(){var e=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+(this.path||"<root>")+e+(this.isAlive?"":"[dead]")},e.prototype.finalizeCreation=function(){if(this.state===S.CREATED){if(this.parent){if(this.parent.state!==S.FINALIZED)return;this.fireHook("afterAttach")}this.state=S.FINALIZED;for(var t=0,r=this.getChildren();t<r.length;t++){var n=r[t];n instanceof e&&n.finalizeCreation()}}},e.prototype.detach=function(){this.isAlive||d("Error while detaching, node is not alive."),this.isRoot||(this.fireHook("beforeDetach"),this._environment=this.root._environment,this.state=S.DETACHING,this.identifierCache=this.root.identifierCache.splitCache(this),this.parent.removeChild(this.subpath),this.parent=null,this.subpath=this.escapedSubpath="",this.subpathAtom.reportChanged(),this.state=S.FINALIZED)},e.prototype.preboot=function(){var e=this;this.applyPatches=Dm(this.storedValue,"@APPLY_PATCHES",function(t){t.forEach(function(t){var r=Ne(t.path);fq(e,r.slice(0,-1)).applyPatchLocally(r[r.length-1],t)})}),this.applySnapshot=Dm(this.storedValue,"@APPLY_SNAPSHOT",function(t){if(t!==e.snapshot)return e.type.applySnapshot(e,t)}),qg(this.storedValue,"$treenode",this),qg(this.storedValue,"toJSON",IO)},e.prototype.die=function(){this.state!==S.DETACHING&&H(this.storedValue)&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.aboutToDie=function(){this.getChildren().forEach(function(t){t instanceof e&&t.aboutToDie()}),this.fireHook("beforeDestroy"),this._disposers&&(this._disposers.forEach(function(e){return e()}),this._disposers=null)},e.prototype.finalizeDeath=function(){this.getChildren().forEach(function(t){t instanceof e&&t.finalizeDeath()}),this.root.identifierCache.notifyDied(this),eP(this,"snapshot",this.snapshot),this._patchSubscribers&&(this._patchSubscribers=null),this._snapshotSubscribers&&(this._snapshotSubscribers=null),this.state=S.DEAD,this.subpath=this.escapedSubpath="",this.parent=null,this.subpathAtom.reportChanged()},e.prototype.onSnapshot=function(e){return this._addSnapshotReaction(),this._snapshotSubscribers||(this._snapshotSubscribers=[]),Do(this._snapshotSubscribers,e)},e.prototype.emitSnapshot=function(e){this._snapshotSubscribers&&this._snapshotSubscribers.forEach(function(t){return t(e)})},e.prototype.onPatch=function(e){return this._patchSubscribers||(this._patchSubscribers=[]),Do(this._patchSubscribers,e)},e.prototype.emitPatch=function(e,t){var r=this._patchSubscribers;if(r&&r.length){var n=mP(YO({},e,{path:t.path.substr(this.path.length)+"/"+e.path})),$=n[0],a=n[1];r.forEach(function(e){return e($,a)})}this.parent&&this.parent.emitPatch(e,t)},e.prototype.hasDisposer=function(e){return!!this._disposers&&this._disposers.indexOf(e)>=0},e.prototype.addDisposer=function(e){this._disposers?this.hasDisposer(e)?d("cannot add a disposer when it is already registered for execution"):this._disposers.unshift(e):this._disposers=[e]},e.prototype.removeDisposer=function(e){var t="cannot remove a disposer which was never registered for execution";if(!this._disposers)return d(t);var r=this._disposers.indexOf(e);if(r<0)return d(t);this._disposers.splice(r,1)},e.prototype.removeMiddleware=function(e){this.middlewares&&(this.middlewares=this.middlewares.filter(function(t){return t.handler!==e}))},e.prototype.addMiddleWare=function(e,t){var r=this;return void 0===t&&(t=!0),this.middlewares?this.middlewares.push({handler:e,includeHooks:t}):this.middlewares=[{handler:e,includeHooks:t}],function(){r.removeMiddleware(e)}},e.prototype.applyPatchLocally=function(e,t){this.assertWritable(),this._observableInstanceCreated||this._createObservableInstance(),this.type.applyPatchLocally(this,e,t)},e.prototype._addSnapshotReaction=function(){var e=this;if(!this._hasSnapshotReaction){var t=$r(function(){return e.snapshot},function(t){return e.emitSnapshot(t)},UN);this.addDisposer(t),this._hasSnapshotReaction=!0}},zc([Q],e.prototype,"_createObservableInstance",null),zc([Ii],e.prototype,"snapshot",null),zc([Q],e.prototype,"detach",null),zc([Q],e.prototype,"die",null),e}();!function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined",e[e.Integer=131072]="Integer"}(u||(u={}));var jj=function(){function e(e){this.isType=!0,this.name=e}return e.prototype.create=function(e,t){return void 0===e&&(e=this.getDefaultSnapshot()),Wb(this,e),this.instantiate(null,"",t,e).value},e.prototype.initializeChildNodes=function(e,t){return ue},e.prototype.createNewInstance=function(e,t,r){return r},e.prototype.finalizeNewInstance=function(e,t){},e.prototype.processInitialSnapshot=function(e,t){return t},e.prototype.isAssignableFrom=function(e){return e===this},e.prototype.validate=function(e,t){return H(e)?Od(e)===this||this.isAssignableFrom(Od(e))?wa():Ia(t,e):this.isValidSnapshot(e,t)},e.prototype.is=function(e){return 0===this.validate(e,[{path:"",type:this}]).length},e.prototype.reconcile=function(e,t){if(e.snapshot===t)return e;if(H(t)&&f(t)===e)return e;if(e.type===this&&jp(t)&&!H(t)&&(!e.identifierAttribute||e.identifier===""+t[e.identifierAttribute]))return e.applySnapshot(t),e;var r=e.parent,n=e.subpath;if(e.die(),H(t)&&this.isAssignableFrom(Od(t))){var $=f(t);return $.setParent(r,n),$}return this.instantiate(r,n,e._environment,t)},Object.defineProperty(e.prototype,"Type",{get:function(){return d("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SnapshotType",{get:function(){return d("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CreationType",{get:function(){return d("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!0,configurable:!0}),zc([Q],e.prototype,"create",null),e}(),Cb=function(e){function t(t){return e.call(this,t)||this}return P(t,e),t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.getDefaultSnapshot=function(){},t.prototype.applySnapshot=function(e,t){d("Immutable types do not support applying snapshots")},t.prototype.applyPatchLocally=function(e,t,r){d("Immutable types do not support applying patches")},t.prototype.getChildren=function(e){return qc},t.prototype.getChildNode=function(e,t){return d("No child '"+t+"' available in type: "+this.name)},t.prototype.getChildType=function(e){return d("No child '"+e+"' available in type: "+this.name)},t.prototype.reconcile=function(e,t){if(e.type===this&&e.storedValue===t)return e;var r=this.instantiate(e.parent,e.subpath,e._environment,t);return e.die(),r},t.prototype.removeChild=function(e,t){return d("No child '"+t+"' available in type: "+this.name)},t}(jj);function sa(e){return"object"==typeof e&&e&&!0===e.isType}var Ab=new Map;function $N(e){return function(t,r,n){switch(t.type){case"action":if(e.filter&&!0!==e.filter(t))return r(t);var $=e.onStart(t);e.onResume(t,$),Ab.set(t.id,{call:t,context:$,async:!1});try{var a=r(t);return e.onSuspend(t,$),!1===Ab.get(t.id).async&&(Ab.delete(t.id),e.onSuccess(t,$,a)),a}catch(i){throw Ab.delete(t.id),e.onFail(t,$,i),i}case"flow_spawn":return(o=Ab.get(t.rootId)).async=!0,r(t);case"flow_resume":case"flow_resume_error":var o=Ab.get(t.rootId);e.onResume(t,o.context);try{return r(t)}finally{e.onSuspend(t,o.context)}case"flow_throw":o=Ab.get(t.rootId);return Ab.delete(t.rootId),e.onFail(t,o.context,t.args[0]),r(t);case"flow_return":o=Ab.get(t.rootId);return Ab.delete(t.rootId),e.onSuccess(t,o.context,t.args[0]),r(t);}}}function _N(e,t,r,n){if(n instanceof Date)return{$MST_DATE:n.getTime()};if(ze(n))return n;if(H(n))return gj("[MSTNode: "+Od(n).name+"]");if("function"==typeof n)return gj("[function]");if("object"==typeof n&&!ld(n)&&!Tm(n))return gj("[object "+(n&&n.constructor&&n.constructor.name||"Complex Object")+"]");try{return JSON.stringify(n),n}catch($){return gj(""+$)}}function aO(e,t){return t&&"object"==typeof t&&"$MST_DATE"in t?new Date(t.$MST_DATE):t}function gj(e){return{$MST_UNSERIALIZABLE:!0,type:e}}function ur(e,t){Kr(function(){xp(t).forEach(function(t){return dO(e,t)})})}function dO(e,t){var r=Ls(e,t.path||"");if(!r)return d("Invalid action path: "+(t.path||""));var n=f(r);return"@APPLY_PATCHES"===t.name?tj.call(null,r,t.args[0]):"@APPLY_SNAPSHOT"===t.name?ht.call(null,r,t.args[0]):("function"!=typeof r[t.name]&&d("Action '"+t.name+"' does not exist in '"+n.path+"'"),r[t.name].apply(r,t.args?t.args.map(function(e){return aO(n,e)}):[]))}function eO(e){var t={actions:[],stop:function(){return r()},replay:function(e){ur(e,t.actions)}},r=sr(e,t.actions.push.bind(t.actions));return t}function sr(e,t,r){return void 0===r&&(r=!1),Pq(e,function(n,$){if("action"===n.type&&n.id===n.rootId){var a=f(n.context),o={name:n.name,path:iq(f(e),a),args:n.args.map(function(e,t){return _N(a,n.name,t,e)})};if(r){var i=$(n);return t(o),i}return t(o),$(n)}return $(n)})}var gO=1,Vb=null;function Yq(){return gO++}function Am(e,t){var r=f(e.context),n=r._isRunningAction,$=Vb;"action"===e.type&&r.assertAlive(),r._isRunningAction=!0,Vb=e;try{return pO(r,e,t)}finally{Vb=$,r._isRunningAction=n}}function kO(){return Vb||d("Not running an action!")}function Dm(e,t,r){var n=function(){var n=Yq();return Am({type:"action",name:t,id:n,args:Dy(arguments),context:e,tree:Ts(e),rootId:Vb?Vb.rootId:n,parentId:Vb?Vb.id:0,allParentIds:Vb?Vb.allParentIds.concat([Vb.id]):[]},r)};return n._isMSTAction=!0,n}function Pq(e,t,r){void 0===r&&(r=!0);var n=f(e);return n.addMiddleWare(t,r)}function nO(e,t){var r={handler:e,includeHooks:!0};return t.$mst_middleware&&t.$mst_middleware.push(r),t.$mst_middleware=[r],t}function oO(e,t,r){for(var n=r.$mst_middleware||qc,$=e;$;)$.middlewares&&(n=n.concat($.middlewares)),$=$.parent;return n}function pO(e,t,r){var n=oO(e,t,r);if(!n.length)return Q(r).apply(null,t.args);var $=0,a=null;return function e(t){var o=n[$++],i=o&&o.handler;function s(t,r){a=r?r(e(t)||a):e(t)}function p(e){a=e}var u=function(){return i(t,s,p),a};return i&&o.includeHooks?u():i&&!o.includeHooks?mi[t.name]?e(t):u():Q(r).apply(null,t.args)}(t)}function qO(e){try{return JSON.stringify(e)}catch(t){return"<Unserializable: "+t+">"}}function Bq(e){return"function"==typeof e?"<function"+(e.name?" "+e.name:"")+">":H(e)?"<"+e+">":"`"+qO(e)+"`"}function sO(e){return e.length<280?e:e.substring(0,272)+"......"+e.substring(e.length-8)}function tO(e){var t=e.value,r=e.context[e.context.length-1].type,n=e.context.map(function(e){return e.path}).filter(function(e){return e.length>0}).join("/"),$=n.length>0?"at path \"/"+n+"\" ":"",a=H(t)?"value of type "+f(t).type.name+":":ze(t)?"value":"snapshot",o=r&&H(t)&&r.is(f(t).snapshot);return""+$+a+" "+Bq(t)+" is not assignable "+(r?"to type: `"+r.name+"`":"")+(e.message?" ("+e.message+")":"")+(r?Fp(r)||ze(t)?".":", expected an instance of `"+r.name+"` or a snapshot like `"+r.describe()+"` instead."+(o?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function Jm(e,t,r){return e.concat([{path:t,type:r}])}function wa(){return qc}function Ia(e,t,r){return[{context:e,value:t,message:r}]}function $i(e){return e.reduce(function(e,t){return e.concat(t)},[])}function Wb(e,t){}function zO(e,t){var r=e.validate(t,[{path:"",type:e}]);r.length>0&&d("Error while converting "+sO(Bq(t))+" to `"+e.name+"`:\n\n    "+r.map(tO).join("\n    "))}var S,BO=0,CO=function(){function e(){this.cacheId=BO++,this.cache=V.map(),this.lastCacheModificationPerId=V.map()}return e.prototype.updateLastCacheModificationPerId=function(e){var t=this.lastCacheModificationPerId.get(e);this.lastCacheModificationPerId.set(e,void 0===t?1:t+1)},e.prototype.getLastCacheModificationPerId=function(e){var t=this.lastCacheModificationPerId.get(e)||0;return this.cacheId+"-"+t},e.prototype.addNodeToCache=function(e,t){if(void 0===t&&(t=!0),e.identifierAttribute){var r=e.identifier;this.cache.has(r)||this.cache.set(r,V.array([],Wi));var n=this.cache.get(r);-1!==n.indexOf(e)&&d("Already registered"),n.push(e),t&&this.updateLastCacheModificationPerId(r)}},e.prototype.mergeCache=function(e){var t=this;Yl(e.identifierCache.cache).forEach(function(e){return e.forEach(function(e){t.addNodeToCache(e)})})},e.prototype.notifyDied=function(e){if(e.identifierAttribute){var t=e.identifier,r=this.cache.get(t);r&&(r.remove(e),r.length||this.cache.delete(t),this.updateLastCacheModificationPerId(e.identifier))}},e.prototype.splitCache=function(t){var r=this,n=new e,$=t.path;return Ct(this.cache).forEach(function(e){for(var t=e[0],a=e[1],o=!1,i=a.length-1;i>=0;i--)0===a[i].path.indexOf($)&&(n.addNodeToCache(a[i],!1),a.splice(i,1),o=!0);o&&r.updateLastCacheModificationPerId(t)}),n},e.prototype.resolve=function(e,t){var r=this.cache.get(""+t);if(!r)return null;var n=r.filter(function(t){return e.isAssignableFrom(t.type)});switch(n.length){case 0:return null;case 1:var $=n[0];if($){for(var a=[],o=$.parent;o&&!o.isObservableInstanceCreated;)a.unshift(o),o=o.parent;for(var i=0,s=a;i<s.length;i++){s[i].createObservableInstanceIfNeeded()}}return $;default:return d("Cannot resolve a reference to type '"+e.name+"' with id: '"+t+"' unambigously, there are multiple candidates: "+n.map(function(e){return e.path}).join(", "));}},e}();function zb(e,t,r,n,$){var a=HO($);if(a){if(a.isRoot)return a.setParent(t,r),a;d("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+r+"', but it lives already at '"+a.path+"'")}return new(e.shouldAttachNode?tf:om)(e,t,r,n,$)}function EO(e){return e instanceof om||e instanceof tf}function H(e){return!(!e||!e.$treenode)}function f(e){return H(e)?e.$treenode:d("Value "+e+" is no MST Node")}function HO(e){return e&&e.$treenode||null}function IO(){return f(this).snapshot}!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"}(S||(S={}));var JO=function(e){return".."};function iq(e,t){e.root!==t.root&&d("Cannot calculate relative path: objects '"+e+"' and '"+t+"' are not part of the same object tree");for(var r=Ne(e.path),n=Ne(t.path),$=0;$<r.length&&r[$]===n[$];$++);return r.slice($).map(JO).join("/")+zi(n.slice($))}function gq(e,t,r){return void 0===r&&(r=!0),fq(e,Ne(t),r)}function fq(e,t,r){void 0===r&&(r=!0);for(var n=e,$=0;$<t.length;$++){var a=t[$];if(""!==a){if(".."===a){if(n=n.parent)continue}else{if("."===a||""===a)continue;if(n){if(n instanceof om)try{var o=n.value;H(o)&&(n=f(o))}catch(i){if(!r)return;throw i}if(n instanceof tf)if(n.getChildType(a)&&(n=n.getChildNode(a)))continue}}return r?d("Could not resolve '"+a+"' in path '"+(zi(t.slice(0,$))||"/")+"' while resolving '"+zi(t)+"'"):void 0}n=n.root}return n}function bq(e){if(!e)return qc;var t=Object.keys(e);if(!t.length)return qc;var r=new Array(t.length);return t.forEach(function(t,n){r[n]=e[t]}),r}var OO="See https://github.com/mobxjs/mobx-state-tree/issues/399 for more information. Note that the middleware event types starting with `process` now start with `flow`.";function PO(e){return sy("process","`process()` has been renamed to `flow()`. "+OO),sn(e)}var qc=Object.freeze([]),ue=Object.freeze({}),Wi="string"==typeof l?{deep:!1}:{deep:!1,proxy:!1};function d(e){throw void 0===e&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function UO(e){return e}Object.freeze(Wi);var VO=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Tm(e){return!(!Array.isArray(e)&&!X(e))}function xp(e){return e?Tm(e)?e:[e]:qc}function YO(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++){var $=t[n];for(var a in $)e[a]=$[a]}return e}function ld(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function jp(e){return!(null===e||"object"!=typeof e||e instanceof Date||e instanceof RegExp)}function ze(e){return null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||e instanceof Date}function _g(e){return e}function bP(e){return e}function cP(e){return"function"!=typeof e}function qg(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function eP(e,t,r){Object.defineProperty(e,t,{enumerable:!0,writable:!1,configurable:!0,value:r})}function fP(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}function Do(e,t){return e.push(t),function(){fP(e,t)}}function Dy(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}function iP(e,t){Pa(e,t).trackAndCompute()}var sy=function(e,t){};function sn(e){return lP(e.name,e)}function lP(e,t){var r=function(){var n=Yq(),$=kO(),a=arguments;function o(t,a,o){t.$mst_middleware=r.$mst_middleware,Am({name:e,type:a,id:n,args:[o],tree:$.tree,context:$.context,parentId:$.id,allParentIds:$.allParentIds.concat([$.id]),rootId:$.rootId},t)}return new Promise(function(i,s){var p,u=function(){p=t.apply(null,arguments),c(void 0)};function c(e){var t;try{o(function(e){t=p.next(e)},"flow_resume",e)}catch(r){return void setImmediate(function(){o(function(e){s(r)},"flow_throw",r)})}h(t)}function l(e){var t;try{o(function(e){t=p.throw(e)},"flow_resume_error",e)}catch(r){return void setImmediate(function(){o(function(e){s(r)},"flow_throw",r)})}h(t)}function h(e){if(!e.done)return e.value&&"function"==typeof e.value.then||d("Only promises can be yielded to `async`, got: "+e),e.value.then(c,l);setImmediate(function(){o(function(e){i(e)},"flow_return",e.value)})}u.$mst_middleware=r.$mst_middleware,Am({name:e,type:"flow_spawn",id:n,args:Dy(a),tree:$.tree,context:$.context,parentId:$.id,allParentIds:$.allParentIds.concat([$.id]),rootId:$.rootId},u)})};return r}function mP(e){return"oldValue"in e||d("Patches without `oldValue` field cannot be inversed"),[nP(e),oP(e)]}function nP(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value};}}function oP(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue};}}function pP(e){return"number"==typeof e}function cc(e){return!0===pP(e)?""+e:e.replace(/~/g,"~1").replace(/\//g,"~0")}function ow(e){return e.replace(/~0/g,"/").replace(/~1/g,"~")}function zi(e){return 0===e.length?"":"/"+e.map(cc).join("/")}function Ne(e){var t=e.split("/").map(ow);return""===t[0]?t.slice(1):t}sy.ids={};var Fc,xv="Map.put can only be used to store complex values that have an identifier type attribute";function wi(e,t){if(e instanceof Gn)t.push(e);else if(e instanceof Ay){if(!wi(e.type,t))return!1}else if(e instanceof tp)for(var r=0;r<e.types.length;r++){if(!wi(e.types[r],t))return!1}else if(e instanceof Iw){var n=e.getSubType(!1);if(!n)return!1;wi(n,t)}return!0}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"}(Fc||(Fc={}));var xP=function(e){function t(t){return e.call(this,t,V.ref.enhancer)||this}return P(t,e),t.prototype.get=function(t){return e.prototype.get.call(this,""+t)},t.prototype.has=function(t){return e.prototype.has.call(this,""+t)},t.prototype.delete=function(t){return e.prototype.delete.call(this,""+t)},t.prototype.set=function(t,r){return e.prototype.set.call(this,""+t,r)},t.prototype.put=function(e){if(e||d("Map.put cannot be used to set empty values"),H(e)){var t=f(e);0;var r=t.identifier;return this.set(r,t.value),t.value}if(jp(e)){r=void 0;var n=f(this).type;return n.identifierMode===Fc.NO?d(xv):n.identifierMode===Fc.YES?(r=""+e[n.mapIdentifierAttribute],this.set(r,e),this.get(r)):d(xv)}return d("Map.put can only be used to store complex values")},t}(Kj),Ou=function(e){function t(t,r){var n=e.call(this,t)||this;return n.shouldAttachNode=!0,n.identifierMode=Fc.UNKNOWN,n.mapIdentifierAttribute=void 0,n.flags=u.Map,n.subType=r,n._determineIdentifierMode(),n}return P(t,e),t.prototype.instantiate=function(e,t,r,n){return this.identifierMode===Fc.UNKNOWN&&this._determineIdentifierMode(),zb(this,e,t,r,n)},t.prototype._determineIdentifierMode=function(){var e=[];if(wi(this.subType,e)){var t=void 0;e.forEach(function(e){e.identifierAttribute&&(t&&t!==e.identifierAttribute&&d("The objects in a map should all have the same identifier attribute, expected '"+t+"', but child of type '"+e.name+"' declared attribute '"+e.identifierAttribute+"' as identifier"),t=e.identifierAttribute)}),t?(this.identifierMode=Fc.YES,this.mapIdentifierAttribute=t):this.identifierMode=Fc.NO}},t.prototype.initializeChildNodes=function(e,t){void 0===t&&(t={});var r=e.type.subType,n=e._environment,$={};return Object.keys(t).forEach(function(a){$[a]=r.instantiate(e,a,n,t[a])}),$},t.prototype.createNewInstance=function(e,t,r){return new xP(t)},t.prototype.finalizeNewInstance=function(e,t){jm(t,e.unbox),nj(t,this.willChange),uj(t,this.didChange)},t.prototype.describe=function(){return"Map<string, "+this.subType.describe()+">"},t.prototype.getChildren=function(e){return Yl(e.storedValue)},t.prototype.getChildNode=function(e,t){var r=e.storedValue.get(""+t);return r||d("Not a child "+t),r},t.prototype.willChange=function(e){var t=f(e.object),r=e.name;t.assertWritable();var n=t.type,$=n.subType;switch(e.type){case"update":var a=e.newValue;if(a===e.object.get(r))return null;Wb($,a),e.newValue=$.reconcile(t.getChildNode(r),e.newValue),n.processIdentifier(r,e.newValue);break;case"add":Wb($,e.newValue),e.newValue=$.instantiate(t,r,void 0,e.newValue),n.processIdentifier(r,e.newValue);}return e},t.prototype.processIdentifier=function(e,t){if(this.identifierMode===Fc.YES&&t instanceof tf){var r=t.identifier;r!==e&&d("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+r+"', but expected: '"+e+"'")}},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){var t={};return e.getChildren().forEach(function(e){t[e.subpath]=e.snapshot}),t},t.prototype.processInitialSnapshot=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t].getSnapshot()}),r},t.prototype.didChange=function(e){var t=f(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:cc(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:cc(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":var r=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:cc(e.name),oldValue:r},t);}},t.prototype.applyPatchLocally=function(e,t,r){var n=e.storedValue;switch(r.op){case"add":case"replace":n.set(t,r.value);break;case"remove":n.delete(t);}},t.prototype.applySnapshot=function(e,t){Wb(this,t);var r=e.storedValue,n={};for(var $ in Array.from(r.keys()).forEach(function(e){n[e]=!1}),t)r.set($,t[$]),n[""+$]=!0;Object.keys(n).forEach(function(e){!1===n[e]&&r.delete(e)})},t.prototype.getChildType=function(e){return this.subType},t.prototype.isValidSnapshot=function(e,t){var r=this;return ld(e)?$i(Object.keys(e).map(function(n){return r.subType.validate(e[n],Jm(t,n,r.subType))})):Ia(t,e,"Value is not a plain object")},t.prototype.getDefaultSnapshot=function(){return ue},t.prototype.removeChild=function(e,t){e.storedValue.delete(t)},zc([Q],t.prototype,"applySnapshot",null),t}(jj);function zP(e){return new Ou("map<string, "+e.name+">",e)}function AP(e){return sa(e)&&(e.flags&u.Map)>0}var yo=function(e){function t(t,r){var n=e.call(this,t)||this;return n.shouldAttachNode=!0,n.flags=u.Array,n.subType=r,n}return P(t,e),t.prototype.instantiate=function(e,t,r,n){return zb(this,e,t,r,n)},t.prototype.initializeChildNodes=function(e,t){void 0===t&&(t=[]);var r=e.type.subType,n=e._environment,$={};return t.forEach(function(t,a){var o=""+a;$[o]=r.instantiate(e,o,n,t)}),$},t.prototype.createNewInstance=function(e,t,r){return V.array(bq(t),Wi)},t.prototype.finalizeNewInstance=function(e,t){Oa(t).dehancer=e.unbox,nj(t,this.willChange),uj(t,this.didChange)},t.prototype.describe=function(){return this.subType.describe()+"[]"},t.prototype.getChildren=function(e){return e.storedValue.slice()},t.prototype.getChildNode=function(e,t){var r=parseInt(t,10);return r<e.storedValue.length?e.storedValue[r]:d("Not a child: "+t)},t.prototype.willChange=function(e){var t=f(e.object);t.assertWritable();var r=t.type.subType,n=t.getChildren(),$=null;switch(e.type){case"update":if(e.newValue===e.object[e.index])return null;if(!($=ru(t,r,[n[e.index]],[e.newValue],[e.index])))return null;e.newValue=$[0];break;case"splice":var a=e.index,o=e.removedCount,i=e.added;if(!($=ru(t,r,n.slice(a,a+o),i,i.map(function(e,t){return a+t}))))return null;e.added=$;for(var s=a+o;s<n.length;s++)n[s].setParent(t,""+(s+i.length-o));}return e},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){return e.getChildren().map(function(e){return e.snapshot})},t.prototype.processInitialSnapshot=function(e,t){var r=[];return Object.keys(e).forEach(function(t){r.push(e[t].getSnapshot())}),r},t.prototype.didChange=function(e){var t=f(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(var r=e.removedCount-1;r>=0;r--)t.emitPatch({op:"remove",path:""+(e.index+r),oldValue:e.removed[r].snapshot},t);for(r=0;r<e.addedCount;r++)t.emitPatch({op:"add",path:""+(e.index+r),value:t.getChildNode(""+(e.index+r)).snapshot,oldValue:void 0},t);return;}},t.prototype.applyPatchLocally=function(e,t,r){var n=e.storedValue,$="-"===t?n.length:parseInt(t);switch(r.op){case"replace":n[$]=r.value;break;case"add":n.splice($,0,r.value);break;case"remove":n.splice($,1);}},t.prototype.applySnapshot=function(e,t){Wb(this,t),e.storedValue.replace(t)},t.prototype.getChildType=function(e){return this.subType},t.prototype.isValidSnapshot=function(e,t){var r=this;return Tm(e)?$i(e.map(function(e,n){return r.subType.validate(e,Jm(t,""+n,r.subType))})):Ia(t,e,"Value is not an array")},t.prototype.getDefaultSnapshot=function(){return qc},t.prototype.removeChild=function(e,t){e.storedValue.splice(parseInt(t,10),1)},zc([Q],t.prototype,"applySnapshot",null),t}(jj);function CP(e){return new yo(e.name+"[]",e)}function ru(e,t,r,n,$){for(var a,o,i=!1,s=void 0,p=!0,u=0;i=u<=n.length-1,a=r[u],EO(o=i?n[u]:void 0)&&(o=o.storedValue),a||i;u++)if(i){if(a){if(hu(a,o))r[u]=yn(t,e,""+$[u],o,a);else{s=void 0;for(var c=u;c<r.length;c++)if(hu(r[c],o)){s=r.splice(c,1)[0];break}r.splice(u,0,yn(t,e,""+$[u],o,s)),p=!1}}else H(o)&&f(o).parent===e&&d("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+$[u]+"', but it lives already at '"+f(o).path+"'"),r.splice(u,0,yn(t,e,""+$[u],o)),p=!1;}else a.die(),r.splice(u,1),u--,p=!1;return p?null:r}function yn(e,t,r,n,$){var a;if((Wb(e,n),H(n))&&((a=f(n)).assertAlive(),null!==a.parent&&a.parent===t))return a.setParent(t,r),$&&$!==a&&$.die(),a;return $?((a=e.reconcile($,n)).setParent(t,r),a):e.instantiate(t,r,t._environment,n)}function hu(e,t){return H(t)?f(t)===e:e.snapshot===t||!!(e instanceof tf&&null!==e.identifier&&e.identifierAttribute&&ld(t)&&e.identifier===""+t[e.identifierAttribute]&&e.type.is(t))}function GP(e){return sa(e)&&(e.flags&u.Array)>0}var mi,Lt="preProcessSnapshot",Dt="postProcessSnapshot";function KP(){return f(this).toString()}!function(e){e.afterCreate="afterCreate",e.afterAttach="afterAttach",e.beforeDetach="beforeDetach",e.beforeDestroy="beforeDestroy"}(mi||(mi={}));var Fn={name:"AnonymousModel",properties:{},initializers:qc};function MP(e){return Object.keys(e).reduce(function(e,t){var r,n,$;if(t in mi)return d("Hook '"+t+"' was defined as property. Hooks should be defined as part of the actions");var a=Object.getOwnPropertyDescriptor(e,t);"get"in a&&d("Getters are not supported as properties. Please use views instead");var o=a.value;if(null==o)d("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");else{if(ze(o))return Object.assign({},e,((r={})[t]=Ed($P(o),o),r));if(o instanceof Ou)return Object.assign({},e,((n={})[t]=Ed(o,{}),n));if(o instanceof yo)return Object.assign({},e,(($={})[t]=Ed(o,[]),$));if(sa(o))return e;d("Invalid type definition for property '"+t+"', cannot infer a type from a value like '"+o+"' ("+typeof o+")")}},e)}var Gn=function(e){function t(t){var r=e.call(this,t.name||Fn.name)||this;r.flags=u.Object,r.shouldAttachNode=!0;var n=t.name||Fn.name;return /^\w[\w\d_]*$/.test(n)||d("Typename should be a valid identifier: "+n),Object.assign(r,Fn,t),r.properties=MP(r.properties),_g(r.properties),r.propertyNames=Object.keys(r.properties),r.identifierAttribute=r._getIdentifierAttribute(),r}return P(t,e),t.prototype._getIdentifierAttribute=function(){var e=void 0;return this.forAllProps(function(t,r){r.flags&u.Identifier&&(e&&d("Cannot define property '"+t+"' as object identifier, property '"+e+"' is already defined as identifier property"),e=t)}),e},t.prototype.cloneAndEnhance=function(e){return new t({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor,postProcessor:e.postProcessor||this.postProcessor})},t.prototype.actions=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){return t.instantiateActions(r,e(r)),r}]})},t.prototype.instantiateActions=function(e,t){ld(t)||d("actions initializer should return a plain object containing actions"),Object.keys(t).forEach(function(r){r===Lt&&d("Cannot define action '"+Lt+"', it should be defined using 'type.preProcessSnapshot(fn)' instead"),r===Dt&&d("Cannot define action '"+Dt+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var n=t[r],$=e[r];if(r in mi&&$){var a=n;n=function(){$.apply(null,arguments),a.apply(null,arguments)}}var o=n.$mst_middleware,i=n.bind(t);i.$mst_middleware=o;var s=Dm(e,r,i);t[r]=s,qg(e,r,s)})},t.prototype.named=function(e){return this.cloneAndEnhance({name:e})},t.prototype.props=function(e){return this.cloneAndEnhance({properties:e})},t.prototype.volatile=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){return t.instantiateVolatileState(r,e(r)),r}]})},t.prototype.instantiateVolatileState=function(e,t){ld(t)||d("volatile state initializer should return a plain object containing state"),sj(e,t)},t.prototype.extend=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){var n=e(r),$=n.actions,a=n.views,o=n.state,i=dN(n,["actions","views","state"]);for(var s in i)d("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+s+"'");return o&&t.instantiateVolatileState(r,o),a&&t.instantiateViews(r,a),$&&t.instantiateActions(r,$),r}]})},t.prototype.views=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){return t.instantiateViews(r,e(r)),r}]})},t.prototype.instantiateViews=function(e,t){ld(t)||d("views initializer should return a plain object containing views"),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r),$=n.value;if("get"in n){if(bm(e,r)){var a=Oa(e,r);a.derivation=n.get,a.scope=e,n.set&&(a.setter=Q(a.name+"-setter",n.set))}else Ii(e,r,n,!0);}else"function"==typeof $?qg(e,r,$):d("A view member should either be a function or getter based property")})},t.prototype.preProcessSnapshot=function(e){var t=this.preProcessor;return t?this.cloneAndEnhance({preProcessor:function(r){return t(e(r))}}):this.cloneAndEnhance({preProcessor:e})},t.prototype.postProcessSnapshot=function(e){var t=this.postProcessor;return t?this.cloneAndEnhance({postProcessor:function(r){return e(t(r))}}):this.cloneAndEnhance({postProcessor:e})},t.prototype.instantiate=function(e,t,r,n){return zb(this,e,t,r,H(n)?n:this.applySnapshotPreProcessor(n))},t.prototype.initializeChildNodes=function(e,t){void 0===t&&(t={});var r=e.type,n={};return r.forAllProps(function(r,$){n[r]=$.instantiate(e,r,e._environment,t[r])}),n},t.prototype.createNewInstance=function(e,t,r){return V.object(t,ue,Wi)},t.prototype.finalizeNewInstance=function(e,t){qg(t,"toString",KP),this.forAllProps(function(r){jm(t,r,e.unbox)}),this.initializers.reduce(function(e,t){return t(e)},t),nj(t,this.willChange),uj(t,this.didChange)},t.prototype.willChange=function(e){var t=f(e.object);t.assertWritable();var r=t.type.properties[e.name];return r&&(Wb(r,e.newValue),e.newValue=r.reconcile(t.getChildNode(e.name),e.newValue)),e},t.prototype.didChange=function(e){var t=f(e.object);if(t.type.properties[e.name]){var r=e.oldValue?e.oldValue.snapshot:void 0;t.emitPatch({op:"replace",path:cc(e.name),value:e.newValue.snapshot,oldValue:r},t)}},t.prototype.getChildren=function(e){var t=this,r=[];return this.forAllProps(function(n,$){r.push(t.getChildNode(e,n))}),r},t.prototype.getChildNode=function(e,t){if(!(t in this.properties))return d("Not a value property: "+t);var r=Oa(e.storedValue,t).value;return r||d("Node not available for property "+t)},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e,t){var r=this;void 0===t&&(t=!0);var n={};return this.forAllProps(function(t,$){Pa(e.storedValue,t).reportObserved(),n[t]=r.getChildNode(e,t).snapshot}),t?this.applySnapshotPostProcessor(n):n},t.prototype.processInitialSnapshot=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t].getSnapshot()}),this.applySnapshotPostProcessor(this.applyOptionalValuesToSnapshot(r))},t.prototype.applyPatchLocally=function(e,t,r){"replace"!==r.op&&"add"!==r.op&&d("object does not support operation "+r.op),e.storedValue[t]=r.value},t.prototype.applySnapshot=function(e,t){var r=this.applySnapshotPreProcessor(t);Wb(this,r),this.forAllProps(function(t,n){e.storedValue[t]=r[t]})},t.prototype.applySnapshotPreProcessor=function(e){var t=this.preProcessor;return t?t.call(null,e):e},t.prototype.applyOptionalValuesToSnapshot=function(e){return e&&(e=Object.assign({},e),this.forAllProps(function(t,r){if(!(t in e)){var n=In(r);n&&(e[t]=n.getDefaultValueSnapshot())}})),e},t.prototype.applySnapshotPostProcessor=function(e){var t=this.postProcessor;return t?t.call(null,e):e},t.prototype.getChildType=function(e){return this.properties[e]},t.prototype.isValidSnapshot=function(e,t){var r=this,n=this.applySnapshotPreProcessor(e);return ld(n)?$i(this.propertyNames.map(function(e){return r.properties[e].validate(n[e],Jm(t,e,r.properties[e]))})):Ia(t,n,"Value is not a plain object")},t.prototype.forAllProps=function(e){var t=this;this.propertyNames.forEach(function(r){return e(r,t.properties[r])})},t.prototype.describe=function(){var e=this;return"{ "+this.propertyNames.map(function(t){return t+": "+e.properties[t].describe()}).join("; ")+" }"},t.prototype.getDefaultSnapshot=function(){return ue},t.prototype.removeChild=function(e,t){e.storedValue[t]=void 0},zc([Q],t.prototype,"applySnapshot",null),t}(jj);function OP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():"AnonymousModel",n=e.shift()||{};return new Gn({name:r,properties:n})}function PP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():"AnonymousModel";return e.reduce(function(e,t){return e.cloneAndEnhance({name:e.name+"_"+t.name,properties:t.properties,initializers:t.initializers,preProcessor:function(r){return t.applySnapshotPreProcessor(e.applySnapshotPreProcessor(r))},postProcessor:function(r){return t.applySnapshotPostProcessor(e.applySnapshotPostProcessor(r))}})}).named(r)}function QP(e){return sa(e)&&(e.flags&u.Object)>0}function In(e){if(e)return e.flags&u.Union&&e.types?e.types.find(In):e.flags&u.Late&&e.getSubType&&e.getSubType(!1)?In(e.subType):e.flags&u.Optional?e:void 0}var Ad=function(e){function t(t,r,n,$){void 0===$&&($=UO);var a=e.call(this,t)||this;return a.shouldAttachNode=!1,a.flags=r,a.checker=n,a.initializer=$,a}return P(t,e),t.prototype.describe=function(){return this.name},t.prototype.instantiate=function(e,t,r,n){return zb(this,e,t,r,n)},t.prototype.createNewInstance=function(e,t,r){return this.initializer(r)},t.prototype.isValidSnapshot=function(e,t){return ze(e)&&this.checker(e)?wa():Ia(t,e,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))},t}(Cb),Wq=new Ad("string",u.String,function(e){return"string"==typeof e}),Vq=new Ad("number",u.Number,function(e){return"number"==typeof e}),VP=new Ad("integer",u.Integer,function(e){return VO(e)}),uq=new Ad("boolean",u.Boolean,function(e){return"boolean"==typeof e}),nq=new Ad("null",u.Null,function(e){return null===e}),hq=new Ad("undefined",u.Undefined,function(e){return void 0===e}),Sn=new Ad("Date",u.Date,function(e){return"number"==typeof e||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});function $P(e){switch(typeof e){case"string":return Wq;case"number":return Vq;case"boolean":return uq;case"object":if(e instanceof Date)return Sn;}return d("Cannot determine primitive type from value "+e)}function Fp(e){return sa(e)&&(e.flags&(u.String|u.Number|u.Integer|u.Boolean|u.Date))>0}Sn.getSnapshot=function(e){return e.storedValue.getTime()};var aQ=function(e){function t(t){var r=e.call(this,JSON.stringify(t))||this;return r.shouldAttachNode=!1,r.flags=u.Literal,r.value=t,r}return P(t,e),t.prototype.instantiate=function(e,t,r,n){return zb(this,e,t,r,n)},t.prototype.describe=function(){return JSON.stringify(this.value)},t.prototype.isValidSnapshot=function(e,t){return ze(e)&&e===this.value?wa():Ia(t,e,"Value is not a literal "+JSON.stringify(this.value))},t}(Cb);function yp(e){return new aQ(e)}function cQ(e){return sa(e)&&(e.flags&u.Literal)>0}var dQ=function(e){function t(t,r,n,$){var a=e.call(this,t)||this;return a.type=r,a.predicate=n,a.message=$,a}return P(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this.type.flags|u.Refinement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.type.shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.describe=function(){return this.name},t.prototype.instantiate=function(e,t,r,n){return this.type.instantiate(e,t,r,n)},t.prototype.isAssignableFrom=function(e){return this.type.isAssignableFrom(e)},t.prototype.isValidSnapshot=function(e,t){var r=this.type.validate(e,t);if(r.length>0)return r;var n=H(e)?f(e).snapshot:e;return this.predicate(n)?wa():Ia(t,e,this.message(e))},t}(Cb);function eQ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():sa(e[0])?e[0].name:null,n=e[0],$=e[1],a=e[2]?e[2]:function(e){return"Value does not respect the refinement predicate"};return new dQ(r,n,$,a)}function fQ(e){return(e.flags&u.Refinement)>0}function gQ(e,t){var r="string"==typeof e?t:e;var n=Xh.apply(void 0,r.map(function(e){return yp(""+e)}));return"string"==typeof e&&(n.name=e),n}var tp=function(e){function t(t,r,n){var $=e.call(this,t)||this;return $.eager=!0,n=Xl({eager:!0,dispatcher:void 0},n),$.dispatcher=n.dispatcher,n.eager||($.eager=!1),$.types=r,$}return P(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){var e=u.Union;return this.types.forEach(function(t){e|=t.flags}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.types.some(function(e){return e.shouldAttachNode})},enumerable:!0,configurable:!0}),t.prototype.isAssignableFrom=function(e){return this.types.some(function(t){return t.isAssignableFrom(e)})},t.prototype.describe=function(){return"("+this.types.map(function(e){return e.describe()}).join(" | ")+")"},t.prototype.instantiate=function(e,t,r,n){var $=this.determineType(n,void 0);return $?$.instantiate(e,t,r,n):d("No matching type for union "+this.describe())},t.prototype.reconcile=function(e,t){var r=this.determineType(t,e.type);return r?r.reconcile(e,t):d("No matching type for union "+this.describe())},t.prototype.determineType=function(e,t){return this.dispatcher?this.dispatcher(e):t?t.is(e)?t:this.types.filter(function(e){return e!==t}).find(function(t){return t.is(e)}):this.types.find(function(t){return t.is(e)})},t.prototype.isValidSnapshot=function(e,t){if(this.dispatcher)return this.dispatcher(e).validate(e,t);for(var r=[],n=0,$=0;$<this.types.length;$++){var a=this.types[$].validate(e,t);if(0===a.length){if(this.eager)return wa();n++}else r.push(a)}return 1===n?wa():Ia(t,e,"No type is applicable for the union").concat($i(r))},t}(Cb);function Xh(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=sa(e)?void 0:e,$=sa(e)?[e].concat(t):t,a="("+$.map(function(e){return e.name}).join(" | ")+")";return new tp(a,$,n)}function jQ(e){return(e.flags&u.Union)>0}var Ay=function(e){function t(t,r){var n=e.call(this,t.name)||this;return n.type=t,n.defaultValue=r,n}return P(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this.type.flags|u.Optional},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.type.shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.describe=function(){return this.type.describe()+"?"},t.prototype.instantiate=function(e,t,r,n){if(void 0===n){var $=this.getDefaultInstanceOrSnapshot();return this.type.instantiate(e,t,r,$)}return this.type.instantiate(e,t,r,n)},t.prototype.reconcile=function(e,t){return this.type.reconcile(e,this.type.is(t)&&void 0!==t?t:this.getDefaultInstanceOrSnapshot())},t.prototype.getDefaultInstanceOrSnapshot=function(){var e="function"==typeof this.defaultValue?this.defaultValue():this.defaultValue;return"function"==typeof this.defaultValue&&Wb(this,e),e},t.prototype.getDefaultValueSnapshot=function(){var e=this.getDefaultInstanceOrSnapshot();return H(e)?f(e).snapshot:e},t.prototype.isValidSnapshot=function(e,t){return void 0===e?wa():this.type.validate(e,t)},t.prototype.isAssignableFrom=function(e){return this.type.isAssignableFrom(e)},t}(Cb);function Ed(e,t){return"function"!=typeof t&&H(t)&&d("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead"),new Ay(e,t)}function mQ(e){return sa(e)&&(e.flags&u.Optional)>0}var nQ=Ed(hq,void 0),oQ=Ed(nq,null);function pQ(e){return Xh(e,nQ)}function qQ(e){return Xh(e,oQ)}var Iw=function(e){function t(t,r){var n=e.call(this,t)||this;return n._subType=null,n.definition=r,n}return P(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|u.Late},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.getSubType(!0).shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.getSubType=function(e){if(null===this._subType){var t=void 0;try{t=this.definition()}catch(r){if(!(r instanceof ReferenceError))throw r;t=void 0}if(e&&void 0===t&&d("Late type seems to be used too early, the definition (still) returns undefined"),t)return this._subType=t,t}return this._subType},t.prototype.instantiate=function(e,t,r,n){return this.getSubType(!0).instantiate(e,t,r,n)},t.prototype.reconcile=function(e,t){return this.getSubType(!0).reconcile(e,t)},t.prototype.describe=function(){var e=this.getSubType(!1);return e?e.name:"<uknown late type>"},t.prototype.isValidSnapshot=function(e,t){var r=this.getSubType(!1);return r?r.validate(e,t):wa()},t.prototype.isAssignableFrom=function(e){var t=this.getSubType(!1);return!!t&&t.isAssignableFrom(e)},t}(Cb);function RO(e,t){var r="string"==typeof e?e:"late("+e.toString()+")",n="string"==typeof e?t:e;return new Iw(r,n)}function xM(e){return sa(e)&&(e.flags&u.Late)>0}var gw=function(e){function t(t){var r=e.call(this,t?"frozen("+t.name+")":"frozen")||this;return r.subType=t,r.shouldAttachNode=!1,r.flags=u.Frozen,r}return P(t,e),t.prototype.describe=function(){return"<any immutable value>"},t.prototype.instantiate=function(e,t,r,n){return zb(this,e,t,r,bP(n))},t.prototype.isValidSnapshot=function(e,t){return cP(e)?this.subType?this.subType.validate(e,t):wa():Ia(t,e,"Value is not serializable and cannot be frozen")},t}(Cb),fu=new gw;function hM(e){return 0===arguments.length?fu:sa(e)?new gw(e):Ed(fu,e)}function bM(e){return sa(e)&&(e.flags&u.Frozen)>0}var YL=function(){function e(e,t){if(this.targetType=t,"string"==typeof e||"number"==typeof e)this.identifier=e;else{if(!H(e))return d("Can only store references to tree nodes or identifiers, got: '"+e+"'");var r=f(e);if(!r.identifierAttribute)return d("Can only store references with a defined identifier attribute.");var n=r.unnormalizedIdentifier;if(null==n)return d("Can only store references to tree nodes with a defined identifier.");this.identifier=n}}return e.prototype.updateResolvedReference=function(){var e=""+this.identifier,t=this.node,r=t.root.identifierCache.getLastCacheModificationPerId(e);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==r){var n=this.targetType,$=t.root.identifierCache.resolve(n,e);$||d("Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")"),this.resolvedReference={node:$,lastCacheModification:r}}},Object.defineProperty(e.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(),this.resolvedReference.node.value},enumerable:!0,configurable:!0}),e}(),zt=function(e){function t(t){var r=e.call(this,"reference("+t.name+")")||this;return r.targetType=t,r.shouldAttachNode=!1,r.flags=u.Reference,r}return P(t,e),t.prototype.describe=function(){return this.name},t.prototype.isAssignableFrom=function(e){return this.targetType.isAssignableFrom(e)},t.prototype.isValidSnapshot=function(e,t){return"string"==typeof e||"number"==typeof e?wa():Ia(t,e,"Value is not a valid identifier, which is a string or a number")},t}(Cb),NL=function(e){function t(t){return e.call(this,t)||this}return P(t,e),t.prototype.getValue=function(e){if(e.isAlive)return e.storedValue.resolvedValue},t.prototype.getSnapshot=function(e){return e.storedValue.identifier},t.prototype.instantiate=function(e,t,r,n){var $,a=zb(this,e,t,r,$=new YL(n,this.targetType));return $.node=a,a},t.prototype.reconcile=function(e,t){if(e.type===this){var r=H(t),n=e.storedValue;if(!r&&n.identifier===t)return e;if(r&&n.resolvedValue===t)return e}var $=this.instantiate(e.parent,e.subpath,e._environment,t);return e.die(),$},t}(zt),KL=function(e){function t(t,r){var n=e.call(this,t)||this;return n.options=r,n}return P(t,e),t.prototype.getValue=function(e){if(e.isAlive)return this.options.get(e.storedValue,e.parent?e.parent.storedValue:null)},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.instantiate=function(e,t,r,n){return zb(this,e,t,r,H(n)?this.options.set(n,e?e.storedValue:null):n)},t.prototype.reconcile=function(e,t){var r=H(t)?this.options.set(t,e?e.storedValue:null):t;if(e.type===this&&e.storedValue===r)return e;var n=this.instantiate(e.parent,e.subpath,e._environment,r);return e.die(),n},t}(zt);function CL(e,t){return t?new KL(e,t):new NL(e)}function BL(e){return(e.flags&u.Reference)>0}var Xq=function(e){function t(){var t=e.call(this,"identifier")||this;return t.shouldAttachNode=!1,t.flags=u.Identifier,t}return P(t,e),t.prototype.instantiate=function(e,t,r,n){return e&&e.type instanceof Gn||d("Identifier types can only be instantiated as direct child of a model type"),zb(this,e,t,r,n)},t.prototype.reconcile=function(e,t){return e.storedValue!==t?d("Tried to change identifier from '"+e.storedValue+"' to '"+t+"'. Changing identifiers is not allowed."):e},t.prototype.describe=function(){return"identifier"},t.prototype.isValidSnapshot=function(e,t){return"string"!=typeof e?Ia(t,e,"Value is not a valid identifier, expected a string"):wa()},t}(Cb),sL=function(e){function t(){var t=e.call(this)||this;return t.name="identifierNumber",t}return P(t,e),t.prototype.instantiate=function(t,r,n,$){return e.prototype.instantiate.call(this,t,r,n,$)},t.prototype.isValidSnapshot=function(e,t){return"number"==typeof e?wa():Ia(t,e,"Value is not a valid identifierNumber, expected a number")},t.prototype.reconcile=function(t,r){return e.prototype.reconcile.call(this,t,r)},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.describe=function(){return"identifierNumber"},t}(Xq),lL=new Xq,jL=new sL;function gL(e){return sa(e)&&(e.flags&u.Identifier)>0}function dL(e){return new aL(e)}var aL=function(e){function t(t){var r=e.call(this,t.name)||this;return r.options=t,r.flags=u.Reference,r.shouldAttachNode=!1,r}return P(t,e),t.prototype.describe=function(){return this.name},t.prototype.isAssignableFrom=function(e){return e===this},t.prototype.isValidSnapshot=function(e,t){if(this.options.isTargetType(e))return wa();var r=this.options.getValidationMessage(e);return r?Ia(t,e,"Invalid value for type '"+this.name+"': "+r):wa()},t.prototype.getValue=function(e){if(e.isAlive)return e.storedValue},t.prototype.getSnapshot=function(e){return this.options.toSnapshot(e.storedValue)},t.prototype.instantiate=function(e,t,r,n){return zb(this,e,t,r,this.options.isTargetType(n)?n:this.options.fromSnapshot(n))},t.prototype.reconcile=function(e,t){var r=!this.options.isTargetType(t);if(e.type===this&&(r?t===e.snapshot:t===e.storedValue))return e;var n=r?this.options.fromSnapshot(t):t,$=this.instantiate(e.parent,e.subpath,e._environment,n);return e.die(),$},t}(Cb),T={enumeration:gQ,model:OP,compose:PP,custom:dL,reference:CL,union:Xh,optional:Ed,literal:yp,maybe:pQ,maybeNull:qQ,refinement:eQ,string:Wq,boolean:uq,number:Vq,integer:VP,Date:Sn,map:zP,array:CP,frozen:hM,identifier:lL,identifierNumber:jL,late:RO,undefined:hq,null:nq};jQ,fQ,BL,Fp,mQ,QP,AP,cQ,xM,gL,bM,GP,sa,ON,NN,MN,Ds,LN,Js,IN,HN,GN,FN,EN,DN,CN,Ls,AN,zN,yN,xN,wN,vN,Ts,tN,sN,dt,qN,pN,ht,nN,mN,lN,kN,tj,iN,Jt,gN,Od,SN,$N,eO,sr,ur,sn,H,PO,Pq,nO,Ne,zi,ow,cc,zO,T;var YK=T.model("Hanger",{profile:T.optional(T.array(T.array(T.number)),[[0,0],[5,0],[5,3],[2,5],[0,4]]),left:T.number,right:T.number,front:T.number,back:T.number,height:T.number,leftWallHeight:3,rightWallHeight:4,ridgeOffset:0,wallThickness:.4}).views(function(t){return{get project(){return dt(t)},get width(){return Math.abs(t.left-t.right)},get length(){return Math.abs(t.front-t.back)},get width3d(){return t.width*t.project.gridSizeWidth},get length3d(){return t.length*t.project.gridSizeLength},get height3d(){return t.height*t.project.gridSizeHeight},get floorArea(){return t.width3d*t.length3d},get claddingArea(){return t.length3d*t.height3d*2},get roofingArea(){return t.floorArea},get internalWidth(){return t.width3d-2*t.wallThickness},get internalLength(){return t.length3d-2*t.wallThickness},get internalHeight(){return t.height3d-2*t.wallThickness},get internalFlooringArea(){return t.internalWidth*t.internalLength},get internalWallArea(){return t.internalHeight*t.internalLength*2},get insulationVolume(){return 1}}}).actions(function(t){return{adjust:function(e,r){t[e]=r}}});var XK=Qk&&Qk.__generator||function(e,r){var t,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function p(i){return function(p){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue;}i=r.call(e,o)}catch(p){i=[6,p],n=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,p])}}},yu=T.model("Project",{id:T.identifier,name:T.string,description:T.string,defaultCurrency:"EUR",hanger:YK,state:T.optional(T.enumeration("State",["updating","done","error"]),"done")}).views(function(e){return{get gridSize(){return .3},get gridSizeWidth(){return e.gridSize},get gridSizeHeight(){return e.gridSize},get gridSizeLength(){return 4*e.gridSize},get buttonText(){switch(e.state){case"updating":return"Updating engine...";case"done":return"Save to engine \u2192";case"error":return"There was an error";}}}}).actions(function(e){return{updateSpreadSheet:sn(function(){var r;return XK(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e.state="updating",[4,ZK.post("https://patternweb-google-sheets.herokuapp.com/update",{range:"Dashboard!C6:D47",values:[["12345"],["H4.0 Demo"],["From presentation"],["Alastair Parvin"],["Open Systems Lab"],["\u20AC EURO"],["United Kingdom"],["London"],["217 Mare Street"],["E8 3QE"],[],[e.hanger.width],[e.hanger.length],[],[e.hanger.leftWallHeight],[e.hanger.rightWallHeight],[e.hanger.height],[e.hanger.ridgeOffset],[1],[],[],[],[e.hanger.wallThickness],[e.hanger.wallThickness],[e.hanger.wallThickness],[],[],[1],[1],[],[],[],[],[void 0,e.hanger.insulationVolume],[],[void 0,e.hanger.claddingArea],[void 0,e.hanger.roofingArea],[],[void 0,e.hanger.internalWallArea],[void 0,e.hanger.internalWallArea],[],[]]})];case 1:return t.sent(),e.state="done",[3,3];case 2:return r=t.sent(),e.state="error",console.error(r),[3,3];case 3:return[2];}})})}});Qk.default=yu;yb();var CE=new zf,rC=yu.create({id:"1",name:"Pionierswoning WHAlm",description:"Tiny House",defaultCurrency:"EUR",hanger:{left:-3,right:3,front:1,back:-1,height:4}});function rQ(){return React.createElement(Qf,{project:rC,scene:CE},React.createElement(m.Fragment,null,React.createElement(vD,null),React.createElement(Jw,null)))}yb(),Ff.render(React.createElement(rQ,null),document.getElementById("app"));})();