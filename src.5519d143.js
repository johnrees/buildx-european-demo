(function () {function ma(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Sb=this;var _e,Ce,vk={},O=vk={};function zo(){throw new Error("setTimeout has not been defined")}function yo(){throw new Error("clearTimeout has not been defined")}function bq($){if(_e===setTimeout)return setTimeout($,0);if((_e===zo||!_e)&&setTimeout)return _e=setTimeout,setTimeout($,0);try{return _e($,0)}catch(e){try{return _e.call(null,$,0)}catch(e){return _e.call(this,$,0)}}}function mF($){if(Ce===clearTimeout)return clearTimeout($);if((Ce===yo||!Ce)&&clearTimeout)return Ce=clearTimeout,clearTimeout($);try{return Ce($)}catch(e){try{return Ce.call(null,$)}catch(e){return Ce.call(this,$)}}}!function(){try{_e="function"==typeof setTimeout?setTimeout:zo}catch($){_e=zo}try{Ce="function"==typeof clearTimeout?clearTimeout:yo}catch($){Ce=yo}}();var uh,Uc=[],vo=!1,bt=-1;function fG(){vo&&uh&&(vo=!1,uh.length?Uc=uh.concat(Uc):bt=-1,Uc.length&&tu())}function tu(){if(!vo){var $=bq(fG);vo=!0;for(var e=Uc.length;e;){for(uh=Uc,Uc=[];++bt<e;)uh&&uh[bt].run();bt=-1,e=Uc.length}uh=null,vo=!1,mF($)}}function Nu($,e){this.fun=$,this.array=e}function Nb(){}O.nextTick=function($){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Uc.push(new Nu($,e)),1!==Uc.length||vo||bq(tu)},Nu.prototype.run=function(){this.fun.apply(null,this.array)},O.title="browser",O.browser=!0,O.env={},O.argv=[],O.version="",O.versions={},O.on=Nb,O.addListener=Nb,O.once=Nb,O.off=Nb,O.removeListener=Nb,O.removeAllListeners=Nb,O.emit=Nb,O.prependListener=Nb,O.prependOnceListener=Nb,O.listeners=function($){return[]},O.binding=function($){throw new Error("process.binding is not supported")},O.cwd=function(){return"/"},O.chdir=function($){throw new Error("process.chdir is not supported")},O.umask=function(){return 0};var pG={},IQ=arguments[0];!function(e,t){if(!e.setImmediate){var n,a,s,r,o,c=1,i={},l=!1,f=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?n=function(e){vk.nextTick(function(){g(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){g(e.data)},n=function(e){s.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(a=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){g(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(g,0,e)}:(r="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&g(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(r+t,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var s={callback:e,args:t};return i[c]=s,n(c),c++},u.clearImmediate=p}function p(e){delete i[e]}function g(e){if(l)setTimeout(g,0,e);else{var n=i[e];if(n){l=!0;try{!function(e){var n=e.callback,a=e.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(t,a);}}(n)}finally{p(e),l=!1}}}}}("undefined"==typeof self?"undefined"==typeof Sb?pG:Sb:self);var m,qG=false;function zb(){if(qG)return;qG=true;m={};m=React}var fh={};function Ev(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ev)}catch(c){console.error(c)}}}var rG,ox,tG,vG,IG=false;function cH(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function uQ(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(r){return e[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}function tQ(){if(IG)return;IG=true;rG={};ox=Object.getOwnPropertySymbols;tG=Object.prototype.hasOwnProperty;vG=Object.prototype.propertyIsEnumerable;rG=uQ()?Object.assign:function(r,e){for(var t,n,o=cH(r),a=1;a<arguments.length;a++){for(var $ in t=Object(arguments[a]))tG.call(t,$)&&(o[$]=t[$]);if(ox){n=ox(t);for(var s=0;s<n.length;s++)vG.call(t,n[s])&&(o[n[s]]=t[n[s]])}}return o}}var t,n,st,zd,uf,zu,qQ,kQ,jQ,hQ,Tv,gQ,uw,aQ,$P,YP,ux,Cx,XP,WP,VP,TP,SP,RP,QP,MP,KP,IP,HP,GP=false;function Sg(){if(!qQ){var $=n.expirationTime;kQ?gQ():kQ=!0,Tv(EP,$)}}function Un(){var $=n,v=n.next;if(n===v)n=null;else{var r=n.previous;n=r.next=v,v.previous=r}$.next=$.previous=null,r=$.callback,v=$.expirationTime,$=$.priorityLevel;var a=zd,e=zu;zd=$,zu=v;try{var t=r()}finally{zd=a,zu=e}if("function"==typeof t)if(t={callback:t,priorityLevel:$,expirationTime:v,next:null,previous:null},null===n)n=t.next=t.previous=t;else{r=null,$=n;do{if($.expirationTime>=v){r=$;break}$=$.next}while($!==n);null===r?r=n:r===n&&(n=t,Sg()),(v=r.previous).next=r.previous=t,t.next=r,t.previous=v}}function Tn(){if(-1===uf&&null!==n&&1===n.priorityLevel){qQ=!0;try{do{Un()}while(null!==n&&1===n.priorityLevel)}finally{qQ=!1,null!==n?Sg():kQ=!1}}}function EP($){qQ=!0;var v=st;st=$;try{if($)for(;null!==n;){var r=t.unstable_now();if(!(n.expirationTime<=r))break;do{Un()}while(null!==n&&n.expirationTime<=r)}else if(null!==n)do{Un()}while(null!==n&&!uw())}finally{qQ=!1,st=v,null!==n?Sg():kQ=!1,Tn()}}function Sn($){jQ=ux(function(v){YP(hQ),$(v)}),hQ=$P(function(){Cx(jQ),$(t.unstable_now())},100)}function DP(){if(GP)return;GP=true;t={};Object.defineProperty(t,"__esModule",{value:!0});n=null;st=!1;zd=3;uf=-1;zu=-1;qQ=!1;kQ=!1;aQ=Date;$P="function"==typeof setTimeout?setTimeout:void 0;YP="function"==typeof clearTimeout?clearTimeout:void 0;ux="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0;Cx="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;if("object"==typeof performance&&"function"==typeof performance.now){var $IvP$var$F=performance,$IvP$export$unstable_now=function(){return $IvP$var$F.now()};t.unstable_now=$IvP$export$unstable_now}else $IvP$export$unstable_now=function(){return aQ.now()},t.unstable_now=$IvP$export$unstable_now;if("undefined"!=typeof window&&window._schedMock){var $IvP$var$G=window._schedMock;Tv=$IvP$var$G[0],gQ=$IvP$var$G[1],uw=$IvP$var$G[2]}else if("undefined"==typeof window||"function"!=typeof window.addEventListener){var $IvP$var$H=null,$IvP$var$I=-1,$IvP$var$J=function($,v){if(null!==$IvP$var$H){var r=$IvP$var$H;$IvP$var$H=null;try{$IvP$var$I=v,r($)}finally{$IvP$var$I=-1}}};Tv=function($,v){-1!==$IvP$var$I?setTimeout(Tv,0,$,v):($IvP$var$H=$,setTimeout($IvP$var$J,v,!0,v),setTimeout($IvP$var$J,1073741823,!1,1073741823))},gQ=function(){$IvP$var$H=null},uw=function(){return!1},$IvP$export$unstable_now=function(){return-1===$IvP$var$I?0:$IvP$var$I},t.unstable_now=$IvP$export$unstable_now}else{"undefined"!=typeof console&&("function"!=typeof ux&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof Cx&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var $IvP$var$K=null,$IvP$var$L=!1,$IvP$var$M=-1,$IvP$var$N=!1,$IvP$var$O=!1,$IvP$var$P=0,$IvP$var$R=33,$IvP$var$S=33;uw=function(){return $IvP$var$P<=t.unstable_now()};var $IvP$var$T="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function($){if($.source===window&&$.data===$IvP$var$T){$IvP$var$L=!1,$=$IvP$var$K;var v=$IvP$var$M;$IvP$var$K=null,$IvP$var$M=-1;var r=t.unstable_now(),a=!1;if(0>=$IvP$var$P-r){if(!(-1!==v&&v<=r))return $IvP$var$N||($IvP$var$N=!0,Sn($IvP$var$U)),$IvP$var$K=$,void($IvP$var$M=v);a=!0}if(null!==$){$IvP$var$O=!0;try{$(a)}finally{$IvP$var$O=!1}}}},!1);var $IvP$var$U=function($){if(null!==$IvP$var$K){Sn($IvP$var$U);var v=$-$IvP$var$P+$IvP$var$S;v<$IvP$var$S&&$IvP$var$R<$IvP$var$S?(8>v&&(v=8),$IvP$var$S=v<$IvP$var$R?$IvP$var$R:v):$IvP$var$R=v,$IvP$var$P=$+$IvP$var$S,$IvP$var$L||($IvP$var$L=!0,window.postMessage($IvP$var$T,"*"))}else $IvP$var$N=!1};Tv=function($,v){$IvP$var$K=$,$IvP$var$M=v,$IvP$var$O||0>v?window.postMessage($IvP$var$T,"*"):$IvP$var$N||($IvP$var$N=!0,Sn($IvP$var$U))},gQ=function(){$IvP$var$K=null,$IvP$var$L=!1,$IvP$var$M=-1}}XP=1;t.unstable_ImmediatePriority=XP;WP=2;t.unstable_UserBlockingPriority=WP;VP=3;t.unstable_NormalPriority=VP;TP=5;t.unstable_IdlePriority=TP;SP=4;t.unstable_LowPriority=SP;RP=function($,v){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3;}var r=zd,a=uf;zd=$,uf=t.unstable_now();try{return v()}finally{zd=r,uf=a,Tn()}};t.unstable_runWithPriority=RP;QP=function($,v){var r=-1!==uf?uf:t.unstable_now();if("object"==typeof v&&null!==v&&"number"==typeof v.timeout)v=r+v.timeout;else switch(zd){case 1:v=r+-1;break;case 2:v=r+250;break;case 5:v=r+1073741823;break;case 4:v=r+1e4;break;default:v=r+5e3;}if($={callback:$,priorityLevel:zd,expirationTime:v,next:null,previous:null},null===n)n=$.next=$.previous=$,Sg();else{r=null;var a=n;do{if(a.expirationTime>v){r=a;break}a=a.next}while(a!==n);null===r?r=n:r===n&&(n=$,Sg()),(v=r.previous).next=r.previous=$,$.next=r,$.previous=v}return $};t.unstable_scheduleCallback=QP;MP=function($){var v=$.next;if(null!==v){if(v===$)n=null;else{$===n&&(n=v);var r=$.previous;r.next=v,v.previous=r}$.next=$.previous=null}};t.unstable_cancelCallback=MP;KP=function($){var v=zd;return function(){var r=zd,a=uf;zd=v,uf=t.unstable_now();try{return $.apply(this,arguments)}finally{zd=r,uf=a,Tn()}}};t.unstable_wrapCallback=KP;IP=function(){return zd};t.unstable_getCurrentPriorityLevel=IP;HP=function(){return!st&&(null!==n&&n.expirationTime<zu||uw())};t.unstable_shouldYield=HP}var CP,AP=false;function xP(){if(AP)return;AP=true;CP={};CP=(DP(),t)}var vP,ak,oa,Bd,Su,uP,Cv,tP,sP,mn,se,Pj,$m,te,Tm,tx,rP,qP,Jm,Im,pp,cc,Fj,oc,ze,Em,pP,iq,kq,pq,wq,vf,wf,jP,tr,iP,gP,fP,wm,yj,cP,Gs,Hs,Vb,_O,vj,$O,tt,uj,tj,ZO,YO,cm,WO,ab,sj,Md,Cc,_l,rj,gv,uv,Zl,Xl,fj,Ll,_v,dw,VO,mw,ow,pw,sa,Al,Tw,Uw,zl,nx,SO,Tf,RO,QO,PO,MO,LO,Vf,By,Wf,KO,JO,FO,EO,CO,zO,xO,wO,vO,uO,tO,qO,lO,uq,nl,zq,Dq,aj,Oq,Rq,kO,Yi,iO,Ir,Xi,hO,Rr,gO,eO,al,os,qs,fg,bO,aO,YN,XN,WN,Ns,Yk,gg,Kc,Ba,_a,Oe,At,Bt,Vi,Mk,Mt,Nt,VN,Fg,Hb,Hg,Ig,Di,Ku,Bi,yi,$e,Qm,Fm,xv,zv,UN,SN,Iv,ON,JN,IN,si,$v,em,ri,Ha,qi,Xa,pi,AN,A,zw,tN,Jw,bf,Dd,Hc,Vw,_w,vb,Jd,Za,cf,Tl,qN,Pc,Ax,ni,mi,Ql,gc,by,nN,Ay,iN,Iy,Fo,Lo,Uo,gN=false;function eN(t,e,$,r,a,i,n,l){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=[$,r,a,i,n,l],v=0;(t=Error(e.replace(/%s/g,function(){return o[v++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}function j(t){for(var e=arguments.length-1,$="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)$+="&args[]="+encodeURIComponent(arguments[r+1]);eN(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",$)}function dN(t,e,$,r,a,i,n,l,o){var v=Array.prototype.slice.call(arguments,3);try{e.apply($,v)}catch(u){this.onError(u)}}function bN(t,e,$,r,a,i,n,l,o){Su=!1,uP=null,dN.apply(sP,arguments)}function aN(t,e,$,r,a,i,n,l,o){if(bN.apply(this,arguments),Su){if(Su){var v=uP;Su=!1,uP=null}else j("198"),v=void 0;Cv||(Cv=!0,tP=v)}}function Ap(){if(mn)for(var t in se){var e=se[t],$=mn.indexOf(t);if(-1<$||j("96",t),!Pj[$])for(var r in e.extractEvents||j("97",t),Pj[$]=e,$=e.eventTypes){var a=void 0,i=$[r],n=e,l=r;$m.hasOwnProperty(l)&&j("99",l),$m[l]=i;var o=i.phasedRegistrationNames;if(o){for(a in o)o.hasOwnProperty(a)&&Ep(o[a],n,l);a=!0}else i.registrationName?(Ep(i.registrationName,n,l),a=!0):a=!1;a||j("98",r,t)}}}function Ep(t,e,$){te[t]&&j("100",t),te[t]=e,Tm[t]=e.eventTypes[$].dependencies}function Kp(t,e,$){var r=t.type||"unknown-event";t.currentTarget=qP($),aN(r,e,void 0,t),t.currentTarget=null}function ef(t,e){return null==e&&j("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function Ao(t,e,$){Array.isArray(t)?t.forEach(e,$):t&&e.call($,t)}function ZM(t){if(t){var e=t._dispatchListeners,$=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)Kp(t,e[r],$[r]);else e&&Kp(t,e,$);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function fq(t,e){var $=t.stateNode;if(!$)return null;var r=tx($);if(!r)return null;$=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1;}return t?null:($&&"function"!=typeof $&&j("231",e,typeof $),$)}function jn(t){if(null!==t&&(Jm=ef(Jm,t)),t=Jm,Jm=null,t&&(Ao(t,ZM),Jm&&j("95"),Cv))throw t=tP,Cv=!1,tP=null,t}function bi(t){if(t[cc])return t[cc];for(;!t[cc];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[cc]).tag||6===t.tag?t:null}function jq(t){return!(t=t[cc])||5!==t.tag&&6!==t.tag?null:t}function ed(t){if(5===t.tag||6===t.tag)return t.stateNode;j("33")}function Ym(t){return t[Fj]||null}function ac(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function sq(t,e,$){(e=fq(t,$.dispatchConfig.phasedRegistrationNames[e]))&&($._dispatchListeners=ef($._dispatchListeners,e),$._dispatchInstances=ef($._dispatchInstances,t))}function XM(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,$=[];e;)$.push(e),e=ac(e);for(e=$.length;0<e--;)sq($[e],"captured",t);for(e=0;e<$.length;e++)sq($[e],"bubbled",t)}}function Um(t,e,$){t&&$&&$.dispatchConfig.registrationName&&(e=fq(t,$.dispatchConfig.registrationName))&&($._dispatchListeners=ef($._dispatchListeners,e),$._dispatchInstances=ef($._dispatchInstances,t))}function WM(t){t&&t.dispatchConfig.registrationName&&Um(t._targetInst,null,t)}function mf(t){Ao(t,XM)}function Ph(t,e){var $={};return $[t.toLowerCase()]=e.toLowerCase(),$["Webkit"+t]="webkit"+e,$["Moz"+t]="moz"+e,$}function Oh(t){if(Em[t])return Em[t];if(!ze[t])return t;var e,$=ze[t];for(e in $)if($.hasOwnProperty(e)&&e in pP)return Em[t]=$[e];return t}function Hq(){if(tr)return tr;var t,e,$=jP,r=$.length,a="value"in wf?wf.value:wf.textContent,i=a.length;for(t=0;t<r&&$[t]===a[t];t++);var n=r-t;for(e=1;e<=n&&$[r-e]===a[i-e];e++);return tr=a.slice(t,1<e?1-e:void 0)}function Mh(){return!0}function Jh(){return!1}function Ia(t,e,$,r){for(var a in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=$,t=this.constructor.Interface)t.hasOwnProperty(a)&&((e=t[a])?this[a]=e($):"target"===a?this.target=r:this[a]=$[a]);return this.isDefaultPrevented=(null!=$.defaultPrevented?$.defaultPrevented:!1===$.returnValue)?Mh:Jh,this.isPropagationStopped=Jh,this}function VM(t,e,$,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,t,e,$,r),a}return new this(t,e,$,r)}function UM(t){t instanceof this||j("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Vq(t){t.eventPool=[],t.getPooled=VM,t.release=UM}function Wq(t,e){switch(t){case"keyup":return-1!==fP.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1;}}function rr(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}function SM(t,e){switch(t){case"compositionend":return rr(e);case"keypress":return 32!==e.which?null:(_O=!0,Hs);case"textInput":return(t=e.data)===Hs&&_O?null:t;default:return null;}}function QM(t,e){if(vj)return"compositionend"===t||!wm&&Wq(t,e)?(t=Hq(),tr=jP=wf=null,vj=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gs&&"ko"!==e.locale?null:e.data;default:return null;}}function ur(t){if(t=rP(t)){"function"!=typeof tt&&j("280");var e=tx(t.stateNode);tt(t.stateNode,t.type,e)}}function Ar(t){uj?tj?tj.push(t):tj=[t]:uj=t}function Cr(){if(uj){var t=uj,e=tj;if(tj=uj=null,ur(t),e)for(t=0;t<e.length;t++)ur(e[t])}}function PM(t,e){return t(e)}function OM(t,e,$){return t(e,$)}function NM(){}function Or(t,e){if(ZO)return t(e);ZO=!0;try{return PM(t,e)}finally{ZO=!1,(null!==uj||null!==tj)&&(NM(),Cr())}}function Qr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!YO[t.type]:"textarea"===e}function Rl(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Sr(t){if(!oc)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function Wr(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function MM(t){var e=Wr(t)?"checked":"value",$=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==$&&"function"==typeof $.get&&"function"==typeof $.set){var a=$.get,i=$.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(t){r=""+t,i.call(this,t)}}),Object.defineProperty(t,e,{enumerable:$.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gi(t){t._valueTracker||(t._valueTracker=MM(t))}function bs(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var $=e.getValue(),r="";return t&&(r=Wr(t)?t.checked?"true":"false":t.value),(t=r)!==$&&(e.setValue(t),!0)}function kh(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=dw&&t[dw]||t["@@iterator"])?t:null}function xc(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case Zl:return"ConcurrentMode";case Cc:return"Fragment";case Md:return"Portal";case rj:return"Profiler";case _l:return"StrictMode";case fj:return"Suspense";}if("object"==typeof t)switch(t.$$typeof){case uv:return"Context.Consumer";case gv:return"Context.Provider";case Xl:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case Ll:return xc(t.type);case _v:if(t=1===t._status?t._result:null)return xc(t);}return null}function wk(t){var e="";do{t:switch(t.tag){case 2:case 16:case 0:case 1:case 5:case 8:case 13:var $=t._debugOwner,r=t._debugSource,a=xc(t.type),i=null;$&&(i=xc($.type)),$=a,a="",r?a=" (at "+r.fileName.replace(WO,"")+":"+r.lineNumber+")":i&&(a=" (created by "+i+")"),i="\n    in "+($||"Unknown")+a;break t;default:i="";}e+=i,t=t.return}while(t);return e}function IM(t){return!!mw.call(pw,t)||!mw.call(ow,t)&&(VO.test(t)?pw[t]=!0:(ow[t]=!0,!1))}function GM(t,e,$,r){if(null!==$&&0===$.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==$?!$.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1;}}function FM(t,e,$,r){if(null==e||GM(t,e,$,r))return!0;if(r)return!1;if(null!==$)switch($.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e;}return!1}function Ta(t,e,$,r,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=$,this.propertyName=t,this.type=e}function Ml(t){return t[1].toUpperCase()}function bm(t,e,$,r){var a=sa.hasOwnProperty(e)?sa[e]:null;(null!==a?0===a.type:!r&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(FM(e,$,a,r)&&($=null),r||null===a?IM(e)&&(null===$?t.removeAttribute(e):t.setAttribute(e,""+$)):a.mustUseProperty?t[a.propertyName]=null===$?3!==a.type&&"":$:(e=a.attributeName,r=a.attributeNamespace,null===$?t.removeAttribute(e):($=3===(a=a.type)||4===a&&!0===$?"":""+$,r?t.setAttributeNS(r,e,$):t.setAttribute(e,$))))}function tc(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return"";}}function nm(t,e){var $=e.checked;return oa({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=$?$:t._wrapperState.initialChecked})}function Js(t,e){var $=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;$=tc(null!=e.value?e.value:$),t._wrapperState={initialChecked:r,initialValue:$,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ls(t,e){null!=(e=e.checked)&&bm(t,"checked",e,!1)}function ym(t,e){Ls(t,e);var $=tc(e.value),r=e.type;if(null!=$)"number"===r?(0===$&&""===t.value||t.value!=$)&&(t.value=""+$):t.value!==""+$&&(t.value=""+$);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Om(t,e.type,$):e.hasOwnProperty("defaultValue")&&Om(t,e.type,tc(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Vs(t,e,$){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,$||e===t.value||(t.value=e),t.defaultValue=e}""!==($=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==$&&(t.name=$)}function Om(t,e,$){"number"===e&&t.ownerDocument.activeElement===t||(null==$?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+$&&(t.defaultValue=""+$))}function $s(t,e,$){return(t=Ia.getPooled(Tw.change,t,e,$)).type="change",Ar($),mf(t),t}function DM(t){jn(t)}function Ai(t){if(bs(ed(t)))return t}function CM(t,e){if("change"===t)return e}function dt(){Uw&&(Uw.detachEvent("onpropertychange",et),zl=Uw=null)}function et(t){"value"===t.propertyName&&Ai(zl)&&Or(DM,t=$s(zl,t,Rl(t)))}function AM(t,e,$){"focus"===t?(dt(),zl=$,(Uw=e).attachEvent("onpropertychange",et)):"blur"===t&&dt()}function yM(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ai(zl)}function xM(t,e){if("click"===t)return Ai(e)}function wM(t,e){if("input"===t||"change"===t)return Ai(e)}function tM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=RO[t])&&!!e[t]}function wn(){return tM}function zt(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function Kg(t,e){if(zt(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var $=Object.keys(t),r=Object.keys(e);if($.length!==r.length)return!1;for(r=0;r<$.length;r++)if(!JO.call(e,$[r])||!zt(t[$[r]],e[$[r]]))return!1;return!0}function Jg(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function Ct(t){2!==Jg(t)&&j("188")}function sM(t){var e=t.alternate;if(!e)return 3===(e=Jg(t))&&j("188"),1===e?null:t;for(var $=t,r=e;;){var a=$.return,i=a?a.alternate:null;if(!a||!i)break;if(a.child===i.child){for(var n=a.child;n;){if(n===$)return Ct(a),t;if(n===r)return Ct(a),e;n=n.sibling}j("188")}if($.return!==r.return)$=a,r=i;else{n=!1;for(var l=a.child;l;){if(l===$){n=!0,$=a,r=i;break}if(l===r){n=!0,r=a,$=i;break}l=l.sibling}if(!n){for(l=i.child;l;){if(l===$){n=!0,$=i,r=a;break}if(l===r){n=!0,r=i,$=a;break}l=l.sibling}n||j("189")}}$.alternate!==r&&j("190")}return 3!==$.tag&&j("188"),$.stateNode.current===$?t:e}function Et(t){if(!(t=sM(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Ji(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Ht(t,e){var $=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[$],isInteractive:e},uq[t]=e,nl[$]=e}function oM(t){var e=t.targetInst,$=e;do{if(!$){t.ancestors.push($);break}var r;for(r=$;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push($),$=bi(r)}while($);for($=0;$<t.ancestors.length;$++){e=t.ancestors[$];var a=Rl(t.nativeEvent);r=t.topLevelType;for(var i=t.nativeEvent,n=null,l=0;l<Pj.length;l++){var o=Pj[l];o&&(o=o.extractEvents(r,e,i,a))&&(n=ef(n,o))}jn(n)}}function J(t,e){if(!e)return null;var $=(Dq(t)?Ot:Ri).bind(null,t);e.addEventListener(t,$,!1)}function Ni(t,e){if(!e)return null;var $=(Dq(t)?Ot:Ri).bind(null,t);e.addEventListener(t,$,!0)}function Ot(t,e){OM(Ri,t,e)}function Ri(t,e){if(Oq){var $=Rl(e);if(null===($=bi($))||"number"!=typeof $.tag||2===Jg($)||($=null),aj.length){var r=aj.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=$,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:$,ancestors:[]};try{Or(oM,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>aj.length&&aj.push(t)}}}function Vt(t){return Object.prototype.hasOwnProperty.call(t,Yi)||(t[Yi]=kO++,Rq[t[Yi]]={}),Rq[t[Yi]]}function Xk(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function eu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gu(t,e){var $,r=eu(t);for(t=0;r;){if(3===r.nodeType){if($=t+r.textContent.length,t<=e&&$>=e)return{node:r,offset:e-t};t=$}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=eu(r)}}function hu(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hu(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function ku(){for(var t=window,e=Xk();e instanceof t.HTMLIFrameElement;){try{t=e.contentDocument.defaultView}catch($){break}e=Xk(t.document)}return e}function il(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function nu(t,e){var $=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return gO||null==Xi||Xi!==Xk($)?null:("selectionStart"in($=Xi)&&il($)?$={start:$.selectionStart,end:$.selectionEnd}:$={anchorNode:($=($.ownerDocument&&$.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:$.anchorOffset,focusNode:$.focusNode,focusOffset:$.focusOffset},Rr&&Kg(Rr,$)?null:(Rr=$,(t=Ia.getPooled(Ir.select,hO,t,e)).type="select",t.target=Xi,mf(t),t))}function nM(t){var e="";return ak.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}function jl(t,e){return t=oa({children:void 0},e),(e=nM(e.children))&&(t.children=e),t}function Le(t,e,$,r){if(t=t.options,e){e={};for(var a=0;a<$.length;a++)e["$"+$[a]]=!0;for($=0;$<t.length;$++)a=e.hasOwnProperty("$"+t[$].value),t[$].selected!==a&&(t[$].selected=a),a&&r&&(t[$].defaultSelected=!0)}else{for($=""+tc($),e=null,a=0;a<t.length;a++){if(t[a].value===$)return t[a].selected=!0,void(r&&(t[a].defaultSelected=!0));null!==e||t[a].disabled||(e=t[a])}null!==e&&(e.selected=!0)}}function sl(t,e){return null!=e.dangerouslySetInnerHTML&&j("91"),oa({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bu(t,e){var $=e.value;null==$&&($=e.defaultValue,null!=(e=e.children)&&(null!=$&&j("92"),Array.isArray(e)&&(1>=e.length||j("93"),e=e[0]),$=e),null==$&&($="")),t._wrapperState={initialValue:tc($)}}function Cu(t,e){var $=tc(e.value),r=tc(e.defaultValue);null!=$&&(($=""+$)!==t.value&&(t.value=$),null==e.defaultValue&&t.defaultValue!==$&&(t.defaultValue=$)),null!=r&&(t.defaultValue=""+r)}function Du(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function Gu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function yl(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Gu(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function Qf(t,e){if(e){var $=t.firstChild;if($&&$===t.lastChild&&3===$.nodeType)return void($.nodeValue=e)}t.textContent=e}function Ou(t,e,$){return null==e||"boolean"==typeof e||""===e?"":$||"number"!=typeof e||0===e||fg.hasOwnProperty(t)&&fg[t]?(""+e).trim():e+"px"}function Ru(t,e){for(var $ in t=t.style,e)if(e.hasOwnProperty($)){var r=0===$.indexOf("--"),a=Ou($,e[$],r);"float"===$&&($="cssFloat"),r?t.setProperty($,a):t[$]=a}}function fm(t,e){e&&(aO[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&j("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&j("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||j("61")),null!=e.style&&"object"!=typeof e.style&&j("62",""))}function hm(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function Yb(t,e){var $=Vt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=Tm[e];for(var r=0;r<e.length;r++){var a=e[r];if(!$.hasOwnProperty(a)||!$[a]){switch(a){case"scroll":Ni("scroll",t);break;case"focus":case"blur":Ni("focus",t),Ni("blur",t),$.blur=!0,$.focus=!0;break;case"cancel":case"close":Sr(a)&&Ni(a,t);break;case"invalid":case"submit":case"reset":break;default:-1===vf.indexOf(a)&&J(a,t);}$[a]=!0}}}function wj(){}function vv(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus;}return!1}function vm(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}function Hm(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Av(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Ca(t){0>gg||(t.current=Yk[gg],Yk[gg]=null,gg--)}function Ra(t,e){Yk[++gg]=t.current,t.current=e}function ve(t,e){var $=t.type.contextTypes;if(!$)return Kc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in $)i[a]=e[a];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Da(t){return null!=(t=t.childContextTypes)}function Rj(t){Ca(_a,t),Ca(Ba,t)}function en(t){Ca(_a,t),Ca(Ba,t)}function Qv(t,e,$){Ba.current!==Kc&&j("168"),Ra(Ba,e,t),Ra(_a,$,t)}function Sv(t,e,$){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return $;for(var a in r=r.getChildContext())a in t||j("108",xc(e)||"Unknown",a);return oa({},$,r)}function Tj(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Kc,Oe=Ba.current,Ra(Ba,e,t),Ra(_a,_a.current,t),!0}function Uv(t,e,$){var r=t.stateNode;r||j("169"),$?(e=Sv(t,e,Oe),r.__reactInternalMemoizedMergedChildContext=e,Ca(_a,t),Ca(Ba,t),Ra(Ba,e,t)):Ca(_a,t),Ra(_a,$,t)}function Xv(t){return function(e){try{return t(e)}catch($){}}}function kM(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var $=e.inject(t);At=Xv(function(t){return e.onCommitFiberRoot($,t)}),Bt=Xv(function(t){return e.onCommitFiberUnmount($,t)})}catch(r){}return!0}function gM(t,e,$,r){this.tag=t,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Eb(t,e,$,r){return new gM(t,e,$,r)}function rn(t){return!(!(t=t.prototype)||!t.isReactComponent)}function aM(t){if("function"==typeof t)return rn(t)?1:0;if(null!=t){if((t=t.$$typeof)===Xl)return 11;if(t===Ll)return 14}return 2}function Ad(t,e){var $=t.alternate;return null===$?(($=Eb(t.tag,e,t.key,t.mode)).elementType=t.elementType,$.type=t.type,$.stateNode=t.stateNode,$.alternate=t,t.alternate=$):($.pendingProps=e,$.effectTag=0,$.nextEffect=null,$.firstEffect=null,$.lastEffect=null),$.childExpirationTime=t.childExpirationTime,$.expirationTime=t.expirationTime,$.child=t.child,$.memoizedProps=t.memoizedProps,$.memoizedState=t.memoizedState,$.updateQueue=t.updateQueue,$.firstContextDependency=t.firstContextDependency,$.sibling=t.sibling,$.index=t.index,$.ref=t.ref,$}function gk(t,e,$,r,a,i){var n=2;if(r=t,"function"==typeof t)rn(t)&&(n=1);else if("string"==typeof t)n=5;else t:switch(t){case Cc:return Gc($.children,a,i,e);case Zl:return qw($,3|a,i,e);case _l:return qw($,2|a,i,e);case rj:return(t=Eb(12,$,e,4|a)).elementType=rj,t.type=rj,t.expirationTime=i,t;case fj:return(t=Eb(13,$,e,a)).elementType=fj,t.type=fj,t.expirationTime=i,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case gv:n=10;break t;case uv:n=9;break t;case Xl:n=11;break t;case Ll:n=14;break t;case _v:n=16,r=null;break t;}j("130",null==t?t:typeof t,"");}return(e=Eb(n,$,e,a)).elementType=t,e.type=r,e.expirationTime=i,e}function Gc(t,e,$,r){return(t=Eb(7,t,r,e)).expirationTime=$,t}function qw(t,e,$,r){return t=Eb(8,t,r,e),e=0==(1&e)?_l:Zl,t.elementType=e,t.type=e,t.expirationTime=$,t}function Pn(t,e,$){return(t=Eb(6,t,null,e)).expirationTime=$,t}function Xn(t,e,$){return(e=Eb(4,null!==t.children?t.children:[],t.key,e)).expirationTime=$,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vg(t,e){t.didError=!1;var $=t.earliestPendingTime;0===$?t.earliestPendingTime=t.latestPendingTime=e:$<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),qk(e,t)}function Dw(t,e){t.didError=!1;var $=t.latestPingedTime;0!==$&&$>=e&&(t.latestPingedTime=0),$=t.earliestPendingTime;var r=t.latestPendingTime;$===e?t.earliestPendingTime=r===e?t.latestPendingTime=0:r:r===e&&(t.latestPendingTime=$),$=t.earliestSuspendedTime,r=t.latestSuspendedTime,0===$?t.earliestSuspendedTime=t.latestSuspendedTime=e:$<e?t.earliestSuspendedTime=e:r>e&&(t.latestSuspendedTime=e),qk(e,t)}function Gw(t,e){var $=t.earliestPendingTime;return $>e&&(e=$),(t=t.earliestSuspendedTime)>e&&(e=t),e}function qk(t,e){var $=e.earliestSuspendedTime,r=e.latestSuspendedTime,a=e.earliestPendingTime,i=e.latestPingedTime;0===(a=0!==a?a:i)&&(0===t||r<t)&&(a=r),0!==(t=a)&&$>t&&(t=$),e.nextExpirationTimeToWorkOn=a,e.expirationTime=t}function rk(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function so(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Lc(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function uk(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function kc(t,e){var $=t.alternate;if(null===$){var r=t.updateQueue,a=null;null===r&&(r=t.updateQueue=rk(t.memoizedState))}else r=t.updateQueue,a=$.updateQueue,null===r?null===a?(r=t.updateQueue=rk(t.memoizedState),a=$.updateQueue=rk($.memoizedState)):r=t.updateQueue=so(a):null===a&&(a=$.updateQueue=so(r));null===a||r===a?uk(r,e):null===r.lastUpdate||null===a.lastUpdate?(uk(r,e),uk(a,e)):(uk(r,e),a.lastUpdate=e)}function Ww(t,e){var $=t.updateQueue;null===($=null===$?t.updateQueue=rk(t.memoizedState):Xw(t,$)).lastCapturedUpdate?$.firstCapturedUpdate=$.lastCapturedUpdate=e:($.lastCapturedUpdate.next=e,$.lastCapturedUpdate=e)}function Xw(t,e){var $=t.alternate;return null!==$&&e===$.updateQueue&&(e=t.updateQueue=so(e)),e}function Yw(t,e,$,r,a,i){switch($.tag){case 1:return"function"==typeof(t=$.payload)?t.call(i,r,a):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null==(a="function"==typeof(t=$.payload)?t.call(i,r,a):t))break;return oa({},r,a);case 2:Vi=!0;}return r}function yf(t,e,$,r,a){Vi=!1;for(var i=(e=Xw(t,e)).baseState,n=null,l=0,o=e.firstUpdate,v=i;null!==o;){var u=o.expirationTime;u<a?(null===n&&(n=o,i=v),l<u&&(l=u)):(v=Yw(t,e,o,v,$,r),null!==o.callback&&(t.effectTag|=32,o.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=o:(e.lastEffect.nextEffect=o,e.lastEffect=o))),o=o.next}for(u=null,o=e.firstCapturedUpdate;null!==o;){var c=o.expirationTime;c<a?(null===u&&(u=o,null===n&&(i=v)),l<c&&(l=c)):(v=Yw(t,e,o,v,$,r),null!==o.callback&&(t.effectTag|=32,o.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=o:(e.lastCapturedEffect.nextEffect=o,e.lastCapturedEffect=o))),o=o.next}null===n&&(e.lastUpdate=null),null===u?e.lastCapturedUpdate=null:t.effectTag|=32,null===n&&null===u&&(i=v),e.baseState=i,e.firstUpdate=n,e.firstCapturedUpdate=u,t.expirationTime=l,t.memoizedState=v}function fx(t,e,$){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ix(e.firstEffect,$),e.firstEffect=e.lastEffect=null,ix(e.firstCapturedEffect,$),e.firstCapturedEffect=e.lastCapturedEffect=null}function ix(t,e){for(;null!==t;){var $=t.callback;if(null!==$){t.callback=null;var r=e;"function"!=typeof $&&j("191",$),$.call(r)}t=t.nextEffect}}function ki(t,e){return{value:t,source:e,stack:wk(e)}}function lx(t,e){var $=t.type._context;Ra(Mk,$._currentValue,t),$._currentValue=e}function Bo(t){var e=Mk.current;Ca(Mk,t),t.type._context._currentValue=e}function Od(t){Mt=t,VN=Nt=null,t.firstContextDependency=null}function sx(t,e){return VN!==t&&!1!==e&&0!==e&&("number"==typeof e&&1073741823!==e||(VN=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Nt?(null===Mt&&j("293"),Mt.firstContextDependency=Nt=e):Nt=Nt.next=e),t._currentValue}function Kd(t){return t===Fg&&j("174"),t}function wo(t,e){Ra(Ig,e,t),Ra(Hg,t,t),Ra(Hb,Fg,t);var $=e.nodeType;switch($){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yl(null,"");break;default:e=yl(e=($=8===$?e.parentNode:e).namespaceURI||null,$=$.tagName);}Ca(Hb,t),Ra(Hb,e,t)}function Qd(t){Ca(Hb,t),Ca(Hg,t),Ca(Ig,t)}function xx(t){Kd(Ig.current);var e=Kd(Hb.current),$=yl(e,t.type);e!==$&&(Ra(Hg,t,t),Ra(Hb,$,t))}function to(t){Hg.current===t&&(Ca(Hb,t),Ca(Hg,t))}function Fb(t,e){if(t&&t.defaultProps)for(var $ in e=oa({},e),t=t.defaultProps)void 0===e[$]&&(e[$]=t[$]);return e}function XL(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:throw t._status=0,(e=(e=t._ctor)()).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)}),t._result=e,e;}}function tk(t,e,$,r){$=null==($=$(r,e=t.memoizedState))?e:oa({},e,$),t.memoizedState=$,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=$)}function Ix(t,e,$,r,a,i,n){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,i,n):!e.prototype||!e.prototype.isPureReactComponent||!Kg($,r)||!Kg(a,i)}function Tx(t,e,$){var r=!1,a=Kc,i=e.contextType;return"object"==typeof i&&null!==i?i=Di.currentDispatcher.readContext(i):(a=Da(e)?Oe:Ba.current,i=(r=null!=(r=e.contextTypes))?ve(t,a):Kc),e=new e($,i),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Bi,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ux(t,e,$,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps($,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps($,r),e.state!==t&&Bi.enqueueReplaceState(e,e.state,null)}function po(t,e,$,r){var a=t.stateNode;a.props=$,a.state=t.memoizedState,a.refs=Ku;var i=e.contextType;"object"==typeof i&&null!==i?a.context=Di.currentDispatcher.readContext(i):(i=Da(e)?Oe:Ba.current,a.context=ve(t,i)),null!==(i=t.updateQueue)&&(yf(t,i,$,a,r),a.state=t.memoizedState),"function"==typeof(i=e.getDerivedStateFromProps)&&(tk(t,e,i,$),a.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(e=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),e!==a.state&&Bi.enqueueReplaceState(a,a.state,null),null!==(i=t.updateQueue)&&(yf(t,i,$,a,r),a.state=t.memoizedState)),"function"==typeof a.componentDidMount&&(t.effectTag|=4)}function Zg(t,e,$){if(null!==(t=$.ref)&&"function"!=typeof t&&"object"!=typeof t){if($._owner){$=$._owner;var r=void 0;$&&(1!==$.tag&&j("289"),r=$.stateNode),r||j("147",t);var a=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===a?e.ref:((e=function(t){var e=r.refs;e===Ku&&(e=r.refs={}),null===t?delete e[a]:e[a]=t})._stringRef=a,e)}"string"!=typeof t&&j("284"),$._owner||j("290",t)}return t}function sk(t,e){"textarea"!==t.type&&j("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function dy(t){function e(e,$){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=$,e.lastEffect=$):e.firstEffect=e.lastEffect=$,$.nextEffect=null,$.effectTag=8}}function $($,r){if(!t)return null;for(;null!==r;)e($,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(t,e,$){return(t=Ad(t,e,$)).index=0,t.sibling=null,t}function i(e,$,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<$?(e.effectTag=2,$):r:(e.effectTag=2,$):$}function n(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,$,r){return null===e||6!==e.tag?((e=Pn($,t.mode,r)).return=t,e):((e=a(e,$,r)).return=t,e)}function o(t,e,$,r){return null!==e&&e.elementType===$.type?((r=a(e,$.props,r)).ref=Zg(t,e,$),r.return=t,r):((r=gk($.type,$.key,$.props,null,t.mode,r)).ref=Zg(t,e,$),r.return=t,r)}function v(t,e,$,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==$.containerInfo||e.stateNode.implementation!==$.implementation?((e=Xn($,t.mode,r)).return=t,e):((e=a(e,$.children||[],r)).return=t,e)}function u(t,e,$,r,i){return null===e||7!==e.tag?((e=Gc($,t.mode,r,i)).return=t,e):((e=a(e,$,r)).return=t,e)}function c(t,e,$){if("string"==typeof e||"number"==typeof e)return(e=Pn(""+e,t.mode,$)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case sj:return($=gk(e.type,e.key,e.props,null,t.mode,$)).ref=Zg(t,null,e),$.return=t,$;case Md:return(e=Xn(e,t.mode,$)).return=t,e;}if(yi(e)||kh(e))return(e=Gc(e,t.mode,$,null)).return=t,e;sk(t,e)}return null}function f(t,e,$,r){var a=null!==e?e.key:null;if("string"==typeof $||"number"==typeof $)return null!==a?null:l(t,e,""+$,r);if("object"==typeof $&&null!==$){switch($.$$typeof){case sj:return $.key===a?$.type===Cc?u(t,e,$.props.children,r,a):o(t,e,$,r):null;case Md:return $.key===a?v(t,e,$,r):null;}if(yi($)||kh($))return null!==a?null:u(t,e,$,r,null);sk(t,$)}return null}function s(t,e,$,r,a){if("string"==typeof r||"number"==typeof r)return l(e,t=t.get($)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case sj:return t=t.get(null===r.key?$:r.key)||null,r.type===Cc?u(e,t,r.props.children,a,r.key):o(e,t,r,a);case Md:return v(e,t=t.get(null===r.key?$:r.key)||null,r,a);}if(yi(r)||kh(r))return u(e,t=t.get($)||null,r,a,null);sk(e,r)}return null}function d(a,n,l,o){for(var v=null,u=null,d=n,p=n=0,h=null;null!==d&&p<l.length;p++){d.index>p?(h=d,d=null):h=d.sibling;var m=f(a,d,l[p],o);if(null===m){null===d&&(d=h);break}t&&d&&null===m.alternate&&e(a,d),n=i(m,n,p),null===u?v=m:u.sibling=m,u=m,d=h}if(p===l.length)return $(a,d),v;if(null===d){for(;p<l.length;p++)(d=c(a,l[p],o))&&(n=i(d,n,p),null===u?v=d:u.sibling=d,u=d);return v}for(d=r(a,d);p<l.length;p++)(h=s(d,a,p,l[p],o))&&(t&&null!==h.alternate&&d.delete(null===h.key?p:h.key),n=i(h,n,p),null===u?v=h:u.sibling=h,u=h);return t&&d.forEach(function(t){return e(a,t)}),v}function p(a,n,l,o){var v=kh(l);"function"!=typeof v&&j("150"),null==(l=v.call(l))&&j("151");for(var u=v=null,d=n,p=n=0,h=null,m=l.next();null!==d&&!m.done;p++,m=l.next()){d.index>p?(h=d,d=null):h=d.sibling;var g=f(a,d,m.value,o);if(null===g){d||(d=h);break}t&&d&&null===g.alternate&&e(a,d),n=i(g,n,p),null===u?v=g:u.sibling=g,u=g,d=h}if(m.done)return $(a,d),v;if(null===d){for(;!m.done;p++,m=l.next())null!==(m=c(a,m.value,o))&&(n=i(m,n,p),null===u?v=m:u.sibling=m,u=m);return v}for(d=r(a,d);!m.done;p++,m=l.next())null!==(m=s(d,a,p,m.value,o))&&(t&&null!==m.alternate&&d.delete(null===m.key?p:m.key),n=i(m,n,p),null===u?v=m:u.sibling=m,u=m);return t&&d.forEach(function(t){return e(a,t)}),v}return function(t,r,i,l){var o="object"==typeof i&&null!==i&&i.type===Cc&&null===i.key;o&&(i=i.props.children);var v="object"==typeof i&&null!==i;if(v)switch(i.$$typeof){case sj:t:{for(v=i.key,o=r;null!==o;){if(o.key===v){if(7===o.tag?i.type===Cc:o.elementType===i.type){$(t,o.sibling),(r=a(o,i.type===Cc?i.props.children:i.props,l)).ref=Zg(t,o,i),r.return=t,t=r;break t}$(t,o);break}e(t,o),o=o.sibling}i.type===Cc?((r=Gc(i.props.children,t.mode,l,i.key)).return=t,t=r):((l=gk(i.type,i.key,i.props,null,t.mode,l)).ref=Zg(t,r,i),l.return=t,t=l)}return n(t);case Md:t:{for(o=i.key;null!==r;){if(r.key===o){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){$(t,r.sibling),(r=a(r,i.children||[],l)).return=t,t=r;break t}$(t,r);break}e(t,r),r=r.sibling}(r=Xn(i,t.mode,l)).return=t,t=r}return n(t);}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?($(t,r.sibling),(r=a(r,i,l)).return=t,t=r):($(t,r),(r=Pn(i,t.mode,l)).return=t,t=r),n(t);if(yi(i))return d(t,r,i,l);if(kh(i))return p(t,r,i,l);if(v&&sk(t,i),void 0===i&&!o)switch(t.tag){case 1:case 0:j("152",(l=t.type).displayName||l.name||"Component");}return $(t,r)}}function jy(t,e){var $=Eb(5,null,null,0);$.elementType="DELETED",$.type="DELETED",$.stateNode=e,$.return=t,$.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=$,t.lastEffect=$):t.firstEffect=t.lastEffect=$}function ny(t,e){switch(t.tag){case 5:var $=t.type;return null!==(e=1!==e.nodeType||$.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1;}}function ty(t){if(zv){var e=xv;if(e){var $=e;if(!ny(t,e)){if(!(e=Hm($))||!ny(t,e))return t.effectTag|=2,zv=!1,void(Fm=t);jy(Fm,$)}Fm=t,xv=Av(e)}else t.effectTag|=2,zv=!1,Fm=t}}function xy(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;Fm=t}function no(t){if(t!==Fm)return!1;if(!zv)return xy(t),zv=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vm(e,t.memoizedProps))for(e=xv;e;)jy(t,e),e=Hm(e);return xy(t),xv=Fm?Hm(t.stateNode):null,!0}function lo(){xv=Fm=null,zv=!1}function gb(t,e,$,r){e.child=null===t?Qm(e,null,$,r):$e(e,t.child,$,r)}function Dy(t,e,$,r,a){$=$.render;var i=e.ref;return Od(e,a),r=$(r,i),e.effectTag|=1,gb(t,e,r,a),e.child}function Ey(t,e,$,r,a,i){if(null===t){var n=$.type;return"function"!=typeof n||rn(n)||void 0!==n.defaultProps||null!==$.compare?((t=gk($.type,null,r,null,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=n,Fy(t,e,n,r,a,i))}return n=t.child,a<i&&(a=n.memoizedProps,($=null!==($=$.compare)?$:Kg)(a,r)&&t.ref===e.ref)?Gd(t,e,i):(e.effectTag|=1,(t=Ad(n,r,i)).ref=e.ref,t.return=e,e.child=t)}function Fy(t,e,$,r,a,i){return null!==t&&a<i&&Kg(t.memoizedProps,r)&&t.ref===e.ref?Gd(t,e,i):jo(t,e,$,r,i)}function Gy(t,e){var $=e.ref;(null===t&&null!==$||null!==t&&t.ref!==$)&&(e.effectTag|=128)}function jo(t,e,$,r,a){var i=Da($)?Oe:Ba.current;return i=ve(e,i),Od(e,a),$=$(r,i),e.effectTag|=1,gb(t,e,$,a),e.child}function Do(t,e,$,r,a){if(Da($)){var i=!0;Tj(e)}else i=!1;if(Od(e,a),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Tx(e,$,r,a),po(e,$,r,a),r=!0;else if(null===t){var n=e.stateNode,l=e.memoizedProps;n.props=l;var o=n.context,v=$.contextType;"object"==typeof v&&null!==v?v=Di.currentDispatcher.readContext(v):v=ve(e,v=Da($)?Oe:Ba.current);var u=$.getDerivedStateFromProps,c="function"==typeof u||"function"==typeof n.getSnapshotBeforeUpdate;c||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(l!==r||o!==v)&&Ux(e,n,r,v),Vi=!1;var f=e.memoizedState;o=n.state=f;var s=e.updateQueue;null!==s&&(yf(e,s,r,n,a),o=e.memoizedState),l!==r||f!==o||_a.current||Vi?("function"==typeof u&&(tk(e,$,u,r),o=e.memoizedState),(l=Vi||Ix(e,$,l,r,f,o,v))?(c||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||("function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"==typeof n.componentDidMount&&(e.effectTag|=4)):("function"==typeof n.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=o),n.props=r,n.state=o,n.context=v,r=l):("function"==typeof n.componentDidMount&&(e.effectTag|=4),r=!1)}else n=e.stateNode,l=e.memoizedProps,n.props=e.type===e.elementType?l:Fb(e.type,l),o=n.context,"object"==typeof(v=$.contextType)&&null!==v?v=Di.currentDispatcher.readContext(v):v=ve(e,v=Da($)?Oe:Ba.current),(c="function"==typeof(u=$.getDerivedStateFromProps)||"function"==typeof n.getSnapshotBeforeUpdate)||"function"!=typeof n.UNSAFE_componentWillReceiveProps&&"function"!=typeof n.componentWillReceiveProps||(l!==r||o!==v)&&Ux(e,n,r,v),Vi=!1,o=e.memoizedState,f=n.state=o,null!==(s=e.updateQueue)&&(yf(e,s,r,n,a),f=e.memoizedState),l!==r||o!==f||_a.current||Vi?("function"==typeof u&&(tk(e,$,u,r),f=e.memoizedState),(u=Vi||Ix(e,$,l,r,o,f,v))?(c||"function"!=typeof n.UNSAFE_componentWillUpdate&&"function"!=typeof n.componentWillUpdate||("function"==typeof n.componentWillUpdate&&n.componentWillUpdate(r,f,v),"function"==typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(r,f,v)),"function"==typeof n.componentDidUpdate&&(e.effectTag|=4),"function"==typeof n.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof n.componentDidUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=4),"function"!=typeof n.getSnapshotBeforeUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),n.props=r,n.state=f,n.context=v,r=u):("function"!=typeof n.componentDidUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=4),"function"!=typeof n.getSnapshotBeforeUpdate||l===t.memoizedProps&&o===t.memoizedState||(e.effectTag|=256),r=!1);return io(t,e,$,r,i,a)}function io(t,e,$,r,a,i){Gy(t,e);var n=0!=(64&e.effectTag);if(!r&&!n)return a&&Uv(e,$,!1),Gd(t,e,i);r=e.stateNode,UN.current=e;var l=n&&"function"!=typeof $.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&n?(e.child=$e(e,t.child,null,i),e.child=$e(e,null,l,i)):gb(t,e,l,i),e.memoizedState=r.state,a&&Uv(e,$,!0),e.child}function Io(t){var e=t.stateNode;e.pendingContext?Qv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qv(t,e.context,!1),wo(t,e.containerInfo)}function Jo(t,e,$){var r=e.mode,a=e.pendingProps,i=e.memoizedState;if(0==(64&e.effectTag)){i=null;var n=!1}else i={timedOutAt:null!==i?i.timedOutAt:0},n=!0,e.effectTag&=-65;return null===t?n?(n=a.fallback,a=Gc(null,r,0,null),0==(1&e.mode)&&(a.child=null!==e.memoizedState?e.child.child:e.child),r=Gc(n,r,$,null),a.sibling=r,($=a).return=r.return=e):$=r=Qm(e,null,a.children,$):null!==t.memoizedState?(t=(r=t.child).sibling,n?($=a.fallback,a=Ad(r,r.pendingProps,0),0==(1&e.mode)&&(n=null!==e.memoizedState?e.child.child:e.child)!==r.child&&(a.child=n),r=a.sibling=Ad(t,$,t.expirationTime),$=a,a.childExpirationTime=0,$.return=r.return=e):$=r=$e(e,r.child,a.children,$)):(t=t.child,n?(n=a.fallback,(a=Gc(null,r,0,null)).child=t,0==(1&e.mode)&&(a.child=null!==e.memoizedState?e.child.child:e.child),(r=a.sibling=Gc(n,r,$,null)).effectTag|=2,$=a,a.childExpirationTime=0,$.return=r.return=e):r=$=$e(e,t,a.children,$)),e.memoizedState=i,e.child=$,r}function Gd(t,e,$){if(null!==t&&(e.firstContextDependency=t.firstContextDependency),e.childExpirationTime<$)return null;if(null!==t&&e.child!==t.child&&j("153"),null!==e.child){for($=Ad(t=e.child,t.pendingProps,t.expirationTime),e.child=$,$.return=e;null!==t.sibling;)t=t.sibling,($=$.sibling=Ad(t,t.pendingProps,t.expirationTime)).return=e;$.sibling=null}return e.child}function UL(t,e,$){var r=e.expirationTime;if(null!==t&&t.memoizedProps===e.pendingProps&&!_a.current&&r<$){switch(e.tag){case 3:Io(e),lo();break;case 5:xx(e);break;case 1:Da(e.type)&&Tj(e);break;case 4:wo(e,e.stateNode.containerInfo);break;case 10:lx(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=$?Jo(t,e,$):null!==(e=Gd(t,e,$))?e.sibling:null;}return Gd(t,e,$)}switch(e.expirationTime=0,e.tag){case 2:r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var a=ve(e,Ba.current);if(Od(e,$),a=r(t,a),e.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(e.tag=1,Da(r)){var i=!0;Tj(e)}else i=!1;e.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;var n=r.getDerivedStateFromProps;"function"==typeof n&&tk(e,r,n,t),a.updater=Bi,e.stateNode=a,a._reactInternalFiber=e,po(e,r,t,$),e=io(null,e,r,!0,i,$)}else e.tag=0,gb(null,e,a,$),e=e.child;return e;case 16:switch(a=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),i=e.pendingProps,t=XL(a),e.type=t,a=e.tag=aM(t),i=Fb(t,i),n=void 0,a){case 0:n=jo(null,e,t,i,$);break;case 1:n=Do(null,e,t,i,$);break;case 11:n=Dy(null,e,t,i,$);break;case 14:n=Ey(null,e,t,Fb(t.type,i),r,$);break;default:j("283",t);}return n;case 0:return r=e.type,a=e.pendingProps,jo(t,e,r,a=e.elementType===r?a:Fb(r,a),$);case 1:return r=e.type,a=e.pendingProps,Do(t,e,r,a=e.elementType===r?a:Fb(r,a),$);case 3:return Io(e),null===(r=e.updateQueue)&&j("282"),a=null!==(a=e.memoizedState)?a.element:null,yf(e,r,e.pendingProps,null,$),(r=e.memoizedState.element)===a?(lo(),e=Gd(t,e,$)):(a=e.stateNode,(a=(null===t||null===t.child)&&a.hydrate)&&(xv=Av(e.stateNode.containerInfo),Fm=e,a=zv=!0),a?(e.effectTag|=2,e.child=Qm(e,null,r,$)):(gb(t,e,r,$),lo()),e=e.child),e;case 5:return xx(e),null===t&&ty(e),r=e.type,a=e.pendingProps,i=null!==t?t.memoizedProps:null,n=a.children,vm(r,a)?n=null:null!==i&&vm(r,i)&&(e.effectTag|=16),Gy(t,e),1!==$&&1&e.mode&&a.hidden?(e.expirationTime=1,e=null):(gb(t,e,n,$),e=e.child),e;case 6:return null===t&&ty(e),null;case 13:return Jo(t,e,$);case 4:return wo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=$e(e,null,r,$):gb(t,e,r,$),e.child;case 11:return r=e.type,a=e.pendingProps,Dy(t,e,r,a=e.elementType===r?a:Fb(r,a),$);case 7:return gb(t,e,e.pendingProps,$),e.child;case 8:case 12:return gb(t,e,e.pendingProps.children,$),e.child;case 10:t:{if(r=e.type._context,a=e.pendingProps,n=e.memoizedProps,lx(e,i=a.value),null!==n){var l=n.value;if(0===(i=l===i&&(0!==l||1/l==1/i)||l!=l&&i!=i?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(n.children===a.children&&!_a.current){e=Gd(t,e,$);break t}}else for(null!==(n=e.child)&&(n.return=e);null!==n;){if(null!==(l=n.firstContextDependency))do{if(l.context===r&&0!=(l.observedBits&i)){if(1===n.tag){var o=Lc($);o.tag=2,kc(n,o)}n.expirationTime<$&&(n.expirationTime=$),null!==(o=n.alternate)&&o.expirationTime<$&&(o.expirationTime=$);for(var v=n.return;null!==v;){if(o=v.alternate,v.childExpirationTime<$)v.childExpirationTime=$,null!==o&&o.childExpirationTime<$&&(o.childExpirationTime=$);else{if(!(null!==o&&o.childExpirationTime<$))break;o.childExpirationTime=$}v=v.return}}o=n.child,l=l.next}while(null!==l);else o=10===n.tag&&n.type===e.type?null:n.child;if(null!==o)o.return=n;else for(o=n;null!==o;){if(o===e){o=null;break}if(null!==(n=o.sibling)){n.return=o.return,o=n;break}o=o.return}n=o}}gb(t,e,a.children,$),e=e.child}return e;case 9:return a=e.type,r=(i=e.pendingProps).children,Od(e,$),r=r(a=sx(a,i.unstable_observedBits)),e.effectTag|=1,gb(t,e,r,$),e.child;case 14:return Ey(t,e,a=e.type,i=Fb(a.type,e.pendingProps),r,$);case 15:return Fy(t,e,e.type,e.pendingProps,r,$);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:Fb(r,a),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Da(r)?(t=!0,Tj(e)):t=!1,Od(e,$),Tx(e,r,a,$),po(e,r,a,$),io(null,e,r,!0,t,$);default:j("156");}}function Pf(t){t.effectTag|=4}function Vo(t,e){var $=e.source,r=e.stack;null===r&&null!==$&&(r=wk($)),null!==$&&xc($.type),e=e.value,null!==t&&1===t.tag&&xc(t.type);try{console.error(e)}catch(a){setTimeout(function(){throw a})}}function Wo(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch($){Wd(t,$)}else e.current=null}function Xo(t){switch("function"==typeof Bt&&Bt(t),t.tag){case 0:case 11:case 14:case 15:var e=t.updateQueue;if(null!==e&&null!==(e=e.lastEffect)){var $=e=e.next;do{var r=$.destroy;if(null!==r){var a=t;try{r()}catch(i){Wd(a,i)}}$=$.next}while($!==e)}break;case 1:if(Wo(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Wd(t,i)}break;case 5:Wo(t);break;case 4:kp(t);}}function bp(t){return 5===t.tag||3===t.tag||4===t.tag}function fp(t){t:{for(var e=t.return;null!==e;){if(bp(e)){var $=e;break t}e=e.return}j("160"),$=void 0}var r=e=void 0;switch($.tag){case 5:e=$.stateNode,r=!1;break;case 3:case 4:e=$.stateNode.containerInfo,r=!0;break;default:j("161");}16&$.effectTag&&(Qf(e,""),$.effectTag&=-17);t:e:for($=t;;){for(;null===$.sibling;){if(null===$.return||bp($.return)){$=null;break t}$=$.return}for($.sibling.return=$.return,$=$.sibling;5!==$.tag&&6!==$.tag;){if(2&$.effectTag)continue e;if(null===$.child||4===$.tag)continue e;$.child.return=$,$=$.child}if(!(2&$.effectTag)){$=$.stateNode;break t}}for(var a=t;;){if(5===a.tag||6===a.tag){if($){if(r){var i=e,n=a.stateNode,l=$;8===i.nodeType?i.parentNode.insertBefore(n,l):i.insertBefore(n,l)}else e.insertBefore(a.stateNode,$);}else r?(n=e,l=a.stateNode,8===n.nodeType?(i=n.parentNode).insertBefore(l,n):(i=n).appendChild(l),null!=(n=n._reactRootContainer)||null!==i.onclick||(i.onclick=wj)):e.appendChild(a.stateNode);}else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function kp(t){for(var e=t,$=!1,r=void 0,a=void 0;;){if(!$){$=e.return;t:for(;;){switch(null===$&&j("160"),$.tag){case 5:r=$.stateNode,a=!1;break t;case 3:case 4:r=$.stateNode.containerInfo,a=!0;break t;}$=$.return}$=!0}if(5===e.tag||6===e.tag){t:for(var i=e,n=i;;)if(Xo(n),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===i)break;for(;null===n.sibling;){if(null===n.return||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}a?(i=r,n=e.stateNode,8===i.nodeType?i.parentNode.removeChild(n):i.removeChild(n)):r.removeChild(e.stateNode)}else if(4===e.tag?(r=e.stateNode.containerInfo,a=!0):Xo(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&($=!1)}e.sibling.return=e.return,e=e.sibling}}function lp(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var $=e.stateNode;if(null!=$){var r=e.memoizedProps,a=null!==t?t.memoizedProps:r;t=e.type;var i=e.updateQueue;if(e.updateQueue=null,null!==i){for($[Fj]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Ls($,r),hm(t,a),e=hm(t,r),a=0;a<i.length;a+=2){var n=i[a],l=i[a+1];"style"===n?Ru($,l):"dangerouslySetInnerHTML"===n?qs($,l):"children"===n?Qf($,l):bm($,n,l,e)}switch(t){case"input":ym($,r);break;case"textarea":Cu($,r);break;case"select":e=$._wrapperState.wasMultiple,$._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Le($,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Le($,!!r.multiple,r.defaultValue,!0):Le($,!!r.multiple,r.multiple?[]:"",!1));}}}break;case 6:null===e.stateNode&&j("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(t=e,null===($=e.memoizedState)?r=!1:(r=!0,t=e.child,0===$.timedOutAt&&($.timedOutAt=Ic())),null!==t)t:for(e=$=t;;){if(5===e.tag)t=e.stateNode,r?t.style.display="none":(t=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,t.style.display=Ou("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){(t=e.child.sibling).return=e,e=t;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===$)break t;for(;null===e.sibling;){if(null===e.return||e.return===$)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}break;case 17:break;default:j("163");}}function fo(t,e,$){($=Lc($)).tag=3,$.payload={element:null};var r=e.value;return $.callback=function(){Dn(r),Vo(t,e)},$}function op(t,e,$){($=Lc($)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var a=e.value;$.payload=function(){return r(a)}}var i=t.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&($.callback=function(){"function"!=typeof r&&(null===bf?bf=new Set([this]):bf.add(this));var $=e.value,a=e.stack;Vo(t,e),this.componentDidCatch($,{componentStack:null!==a?a:""})}),$}function SL(t){switch(t.tag){case 1:Da(t.type)&&Rj(t);var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return Qd(t),en(t),0!=(64&(e=t.effectTag))&&j("285"),t.effectTag=-2049&e|64,t;case 5:return to(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 4:return Qd(t),null;case 10:return Bo(t),null;default:return null;}}function qp(){if(null!==Ha)for(var t=Ha.return;null!==t;){var e=t;switch(e.tag){case 1:var $=e.type.childContextTypes;null!=$&&Rj(e);break;case 3:Qd(e),en(e);break;case 5:to(e);break;case 4:Qd(e);break;case 10:Bo(e);}t=t.return}qi=null,Xa=0,pi=-1,AN=!1,Ha=null}function _f(){null!==Jw&&(Bd.unstable_cancelCallback(tN),Jw())}function tp(t){for(;;){var e=t.alternate,$=t.return,r=t.sibling;if(0==(1024&t.effectTag)){Ha=t;t:{var a=e,i=Xa,n=(e=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Da(e.type)&&Rj(e);break;case 3:Qd(e),en(e),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==a&&null!==a.child||(no(e),e.effectTag&=-3),Iv(e);break;case 5:to(e);var l=Kd(Ig.current);if(i=e.type,null!==a&&null!=e.stateNode)ON(a,e,i,n,l),a.ref!==e.ref&&(e.effectTag|=128);else if(n){var o=Kd(Hb.current);if(no(e)){a=(n=e).stateNode;var v=n.type,u=n.memoizedProps,c=l;switch(a[cc]=n,a[Fj]=u,i=void 0,l=v){case"iframe":case"object":J("load",a);break;case"video":case"audio":for(v=0;v<vf.length;v++)J(vf[v],a);break;case"source":J("error",a);break;case"img":case"image":case"link":J("error",a),J("load",a);break;case"form":J("reset",a),J("submit",a);break;case"details":J("toggle",a);break;case"input":Js(a,u),J("invalid",a),Yb(c,"onChange");break;case"select":a._wrapperState={wasMultiple:!!u.multiple},J("invalid",a),Yb(c,"onChange");break;case"textarea":Bu(a,u),J("invalid",a),Yb(c,"onChange");}for(i in fm(l,u),v=null,u)u.hasOwnProperty(i)&&(o=u[i],"children"===i?"string"==typeof o?a.textContent!==o&&(v=["children",o]):"number"==typeof o&&a.textContent!==""+o&&(v=["children",""+o]):te.hasOwnProperty(i)&&null!=o&&Yb(c,i));switch(l){case"input":gi(a),Vs(a,u,!0);break;case"textarea":gi(a),Du(a,u);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(a.onclick=wj);}i=v,n.updateQueue=i,(n=null!==i)&&Pf(e)}else{u=e,a=i,c=n,v=9===l.nodeType?l:l.ownerDocument,o===al.html&&(o=Gu(a)),o===al.html?"script"===a?((a=v.createElement("div")).innerHTML="<script></script>",v=a.removeChild(a.firstChild)):"string"==typeof c.is?v=v.createElement(a,{is:c.is}):(v=v.createElement(a),"select"===a&&c.multiple&&(v.multiple=!0)):v=v.createElementNS(o,a),(a=v)[cc]=u,a[Fj]=n,SN(a,e,!1,!1),c=a;var f=l,s=hm(v=i,u=n);switch(v){case"iframe":case"object":J("load",c),l=u;break;case"video":case"audio":for(l=0;l<vf.length;l++)J(vf[l],c);l=u;break;case"source":J("error",c),l=u;break;case"img":case"image":case"link":J("error",c),J("load",c),l=u;break;case"form":J("reset",c),J("submit",c),l=u;break;case"details":J("toggle",c),l=u;break;case"input":Js(c,u),l=nm(c,u),J("invalid",c),Yb(f,"onChange");break;case"option":l=jl(c,u);break;case"select":c._wrapperState={wasMultiple:!!u.multiple},l=oa({},u,{value:void 0}),J("invalid",c),Yb(f,"onChange");break;case"textarea":Bu(c,u),l=sl(c,u),J("invalid",c),Yb(f,"onChange");break;default:l=u;}fm(v,l),o=void 0;var d=v,p=c,h=l;for(o in h)if(h.hasOwnProperty(o)){var m=h[o];"style"===o?Ru(p,m):"dangerouslySetInnerHTML"===o?null!=(m=m?m.__html:void 0)&&qs(p,m):"children"===o?"string"==typeof m?("textarea"!==d||""!==m)&&Qf(p,m):"number"==typeof m&&Qf(p,""+m):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(te.hasOwnProperty(o)?null!=m&&Yb(f,o):null!=m&&bm(p,o,m,s))}switch(v){case"input":gi(c),Vs(c,u,!1);break;case"textarea":gi(c),Du(c,u);break;case"option":null!=u.value&&c.setAttribute("value",""+tc(u.value));break;case"select":(l=c).multiple=!!u.multiple,null!=(c=u.value)?Le(l,!!u.multiple,c,!1):null!=u.defaultValue&&Le(l,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof l.onClick&&(c.onclick=wj);}(n=vv(i,n))&&Pf(e),e.stateNode=a}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&j("166");break;case 6:a&&null!=e.stateNode?JN(a,e,a.memoizedProps,n):("string"!=typeof n&&null===e.stateNode&&j("166"),a=Kd(Ig.current),Kd(Hb.current),no(e)?(i=(n=e).stateNode,a=n.memoizedProps,i[cc]=n,(n=i.nodeValue!==a)&&Pf(e)):(i=e,(n=(9===a.nodeType?a:a.ownerDocument).createTextNode(n))[cc]=e,i.stateNode=n));break;case 11:break;case 13:if(n=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=i,Ha=e;break t}n=null!==n,i=null!==a&&null!==a.memoizedState,null!==a&&!n&&i&&null!==(a=a.child.sibling)&&(null!==(l=e.firstEffect)?(e.firstEffect=a,a.nextEffect=l):(e.firstEffect=e.lastEffect=a,a.nextEffect=null),a.effectTag=8),(n!==i||0==(1&e.effectTag)&&n)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Qd(e),Iv(e);break;case 10:Bo(e);break;case 9:case 14:break;case 17:Da(e.type)&&Rj(e);break;default:j("156");}Ha=null}if(e=t,1===Xa||1!==e.childExpirationTime){for(n=0,i=e.child;null!==i;)(a=i.expirationTime)>n&&(n=a),(l=i.childExpirationTime)>n&&(n=l),i=i.sibling;e.childExpirationTime=n}if(null!==Ha)return Ha;null!==$&&0==(1024&$.effectTag)&&(null===$.firstEffect&&($.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==$.lastEffect&&($.lastEffect.nextEffect=t.firstEffect),$.lastEffect=t.lastEffect),1<t.effectTag&&(null!==$.lastEffect?$.lastEffect.nextEffect=t:$.firstEffect=t,$.lastEffect=t))}else{if(null!==(t=SL(t,Xa)))return t.effectTag&=1023,t;null!==$&&($.firstEffect=$.lastEffect=null,$.effectTag|=1024)}if(null!==r)return r;if(null===$)break;t=$}return null}function up(t){var e=UL(t.alternate,t,Xa);return t.memoizedProps=t.pendingProps,null===e&&(e=tp(t)),si.current=null,e}function vp(t,e){ri&&j("243"),_f(),ri=!0,si.currentDispatcher=IN;var $=t.nextExpirationTimeToWorkOn;$===Xa&&t===qi&&null!==Ha||(qp(),Xa=$,Ha=Ad((qi=t).current,null,Xa),t.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(e)for(;null!==Ha&&!mk();)Ha=up(Ha);else for(;null!==Ha;)Ha=up(Ha)}catch(d){if(VN=Nt=Mt=null,null===Ha)r=!0,Dn(d);else{null===Ha&&j("271");var a=Ha,i=a.return;if(null!==i){t:{var n=t,l=i,o=a,v=d;if(i=Xa,o.effectTag|=1024,o.firstEffect=o.lastEffect=null,null!==v&&"object"==typeof v&&"function"==typeof v.then){var u=v;v=l;var c=-1,f=-1;do{if(13===v.tag){var s=v.alternate;if(null!==s&&null!==(s=s.memoizedState)){f=10*(1073741822-s.timedOutAt);break}"number"==typeof(s=v.pendingProps.maxDuration)&&(0>=s?c=0:(-1===c||s<c)&&(c=s))}v=v.return}while(null!==v);v=l;do{if((s=13===v.tag)&&(s=void 0!==v.memoizedProps.fallback&&null===v.memoizedState),s){if(l=ML.bind(null,n,v,o,0==(1&v.mode)?1073741823:i),u.then(l,l),0==(1&v.mode)){v.effectTag|=64,o.effectTag&=-1957,1===o.tag&&null===o.alternate&&(o.tag=17),o.expirationTime=i;break t}-1===c?n=1073741823:(-1===f&&(f=10*(1073741822-Gw(n,i))-5e3),n=f+c),0<=n&&pi<n&&(pi=n),v.effectTag|=2048,v.expirationTime=i;break t}v=v.return}while(null!==v);v=Error((xc(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+wk(o))}AN=!0,v=ki(v,o),n=l;do{switch(n.tag){case 3:o=v,n.effectTag|=2048,n.expirationTime=i,Ww(n,i=fo(n,o,i));break t;case 1:if(o=v,l=n.type,u=n.stateNode,0==(64&n.effectTag)&&("function"==typeof l.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===bf||!bf.has(u)))){n.effectTag|=2048,n.expirationTime=i,Ww(n,i=op(n,o,i));break t}}n=n.return}while(null!==n)}Ha=tp(a);continue}r=!0,Dn(d)}}break}if(ri=!1,VN=Nt=Mt=si.currentDispatcher=null,r)qi=null,t.finishedWork=null;else if(null!==Ha)t.finishedWork=null;else{if(null===(r=t.current.alternate)&&j("281"),qi=null,AN){if(a=t.latestPendingTime,i=t.latestSuspendedTime,n=t.latestPingedTime,0!==a&&a<$||0!==i&&i<$||0!==n&&n<$)return Dw(t,$),void co(t,r,$,t.expirationTime,-1);if(!t.didError&&e)return t.didError=!0,$=t.nextExpirationTimeToWorkOn=$,e=t.expirationTime=1073741823,void co(t,r,$,e,-1)}e&&-1!==pi?(Dw(t,$),(e=10*(1073741822-Gw(t,$)))<pi&&(pi=e),e=10*(1073741822-Ic()),e=pi-e,co(t,r,$,t.expirationTime,0>e?0:e)):(t.pendingCommitExpirationTime=$,t.finishedWork=r)}}function Wd(t,e){for(var $=t.return;null!==$;){switch($.tag){case 1:var r=$.stateNode;if("function"==typeof $.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===bf||!bf.has(r)))return kc($,t=op($,t=ki(e,t),1073741823)),void Fd($,1073741823);break;case 3:return kc($,t=fo($,t=ki(e,t),1073741823)),void Fd($,1073741823);}$=$.return}3===t.tag&&(kc(t,$=fo(t,$=ki(e,t),1073741823)),Fd(t,1073741823))}function og(t,e){return 0!==em?t=em:ri?t=zw?1073741823:Xa:1&e.mode?(t=ni?1073741822-10*(1+((1073741822-t+15)/10|0)):1073741822-25*(1+((1073741822-t+500)/25|0)),null!==qi&&t===Xa&&--t):t=1073741823,ni&&(0===cf||t<cf)&&(cf=t),t}function ML(t,e,$,r){var a=t.earliestSuspendedTime,i=t.latestSuspendedTime;if(0!==a&&r<=a&&r>=i){i=a=r,t.didError=!1;var n=t.latestPingedTime;(0===n||n>i)&&(t.latestPingedTime=i),qk(i,t)}else vg(t,a=og(a=Ic(),e));0!=(1&e.mode)&&t===qi&&Xa===r&&(qi=null),eo(e,a),0==(1&e.mode)&&(eo($,a),1===$.tag&&null!==$.stateNode&&((e=Lc(a)).tag=2,kc($,e))),0!==($=t.expirationTime)&&Zp(t,$)}function eo(t,e){t.expirationTime<e&&(t.expirationTime=e);var $=t.alternate;null!==$&&$.expirationTime<e&&($.expirationTime=e);var r=t.return,a=null;if(null===r&&3===t.tag)a=t.stateNode;else for(;null!==r;){if($=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==$&&$.childExpirationTime<e&&($.childExpirationTime=e),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return a}function Fd(t,e){null!==(t=eo(t,e))&&(!ri&&0!==Xa&&e>Xa&&qp(),vg(t,e),ri&&!zw&&qi===t||Zp(t,t.expirationTime),Ay>nN&&(Ay=0,j("185")))}function Bp(t,e,$,r,a){var i=em;em=1073741823;try{return t(e,$,r,a)}finally{em=i}}function Eg(){gc=1073741822-((Bd.unstable_now()-Ql)/10|0)}function Fp(t,e){if(0!==Vw){if(e<Vw)return;null!==_w&&Bd.unstable_cancelCallback(_w)}Vw=e,t=Bd.unstable_now()-Ql,_w=Bd.unstable_scheduleCallback(DL,{timeout:10*(1073741822-e)-t})}function co(t,e,$,r,a){t.expirationTime=r,0!==a||mk()?0<a&&(t.timeoutHandle=WN(JL.bind(null,t,e,$),a)):(t.pendingCommitExpirationTime=$,t.finishedWork=e)}function JL(t,e,$){t.pendingCommitExpirationTime=$,t.finishedWork=e,Eg(),by=gc,hq(t,$)}function Ic(){return vb?by:(nk(),0!==Za&&1!==Za||(Eg(),by=gc),by)}function Zp(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===Hc?(Dd=Hc=t,t.nextScheduledRoot=t):(Hc=Hc.nextScheduledRoot=t).nextScheduledRoot=Dd):e>t.expirationTime&&(t.expirationTime=e),vb||(Pc?Ax&&(Jd=t,Za=1073741823,ek(t,1073741823,!1)):1073741823===e?Tb(1073741823,!1):Fp(t,e))}function nk(){var t=0,e=null;if(null!==Hc)for(var $=Hc,r=Dd;null!==r;){var a=r.expirationTime;if(0===a){if((null===$||null===Hc)&&j("244"),r===r.nextScheduledRoot){Dd=Hc=r.nextScheduledRoot=null;break}if(r===Dd)Dd=a=r.nextScheduledRoot,Hc.nextScheduledRoot=a,r.nextScheduledRoot=null;else{if(r===Hc){(Hc=$).nextScheduledRoot=Dd,r.nextScheduledRoot=null;break}$.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=$.nextScheduledRoot}else{if(a>t&&(t=a,e=r),r===Hc)break;if(1073741823===t)break;$=r,r=r.nextScheduledRoot}}Jd=e,Za=t}function mk(){return!!Iy||!!Bd.unstable_shouldYield()&&(Iy=!0)}function DL(){try{if(!mk()&&null!==Dd){Eg();var t=Dd;do{var e=t.expirationTime;0!==e&&gc<=e&&(t.nextExpirationTimeToWorkOn=gc),t=t.nextScheduledRoot}while(t!==Dd)}Tb(0,!0)}finally{Iy=!1}}function Tb(t,e){if(nk(),e)for(Eg(),by=gc;null!==Jd&&0!==Za&&t<=Za&&!(Iy&&gc>Za);)ek(Jd,Za,gc>Za),nk(),Eg(),by=gc;else for(;null!==Jd&&0!==Za&&t<=Za;)ek(Jd,Za,!1),nk();if(e&&(Vw=0,_w=null),0!==Za&&Fp(Jd,Za),Ay=0,iN=null,null!==mi)for(t=mi,mi=null,e=0;e<t.length;e++){var $=t[e];try{$._onComplete()}catch(r){Tl||(Tl=!0,qN=r)}}if(Tl)throw t=qN,qN=null,Tl=!1,t}function hq(t,e){vb&&j("253"),Jd=t,Za=e,ek(t,e,!1),Tb(1073741823,!1)}function ek(t,e,$){if(vb&&j("245"),vb=!0,$){var r=t.finishedWork;null!==r?ck(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,Ns(r)),vp(t,$),null!==(r=t.finishedWork)&&(mk()?t.finishedWork=r:ck(t,r,e)))}else null!==(r=t.finishedWork)?ck(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,Ns(r)),vp(t,$),null!==(r=t.finishedWork)&&ck(t,r,e));vb=!1}function ck(t,e,$){var r=t.firstBatch;if(null!==r&&r._expirationTime>=$&&(null===mi?mi=[r]:mi.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===iN?Ay++:(iN=t,Ay=0),zw=ri=!0,t.current===e&&j("177"),0===($=t.pendingCommitExpirationTime)&&j("261"),t.pendingCommitExpirationTime=0,r=e.expirationTime;var a=e.childExpirationTime;if(r=a>r?a:r,t.didError=!1,0===r?(t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0):(0!==(a=t.latestPendingTime)&&(a>r?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>r&&(t.earliestPendingTime=t.latestPendingTime)),0===(a=t.earliestSuspendedTime)?vg(t,r):r<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,vg(t,r)):r>a&&vg(t,r)),qk(0,t),si.current=null,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,r=e.firstEffect):r=e:r=e.firstEffect,YN=Oq,il(a=ku())){if("selectionStart"in a)var i={start:a.selectionStart,end:a.selectionEnd};else t:{var n=(i=(i=a.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var l=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{i.nodeType,o.nodeType}catch(F){i=null;break t}var v=0,u=-1,c=-1,f=0,s=0,d=a,p=null;e:for(;;){for(var h;d!==i||0!==l&&3!==d.nodeType||(u=v+l),d!==o||0!==n&&3!==d.nodeType||(c=v+n),3===d.nodeType&&(v+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===a)break e;if(p===i&&++f===l&&(u=v),p===o&&++s===n&&(c=v),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}i=-1===u||-1===c?null:{start:u,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(XN={focusedElem:a,selectionRange:i},Oq=!1,A=r;null!==A;){a=!1,i=void 0;try{for(;null!==A;){if(256&A.effectTag)t:{var m=A.alternate;switch((l=A).tag){case 0:case 11:case 15:break t;case 1:if(256&l.effectTag&&null!==m){var g=m.memoizedProps,y=m.memoizedState,b=l.stateNode,k=b.getSnapshotBeforeUpdate(l.elementType===l.type?g:Fb(l.type,g),y);b.__reactInternalSnapshotBeforeUpdate=k}break t;case 3:case 5:case 6:case 4:case 17:break t;default:j("163");}}A=A.nextEffect}}catch(F){a=!0,i=F}a&&(null===A&&j("178"),Wd(A,i),null!==A&&(A=A.nextEffect))}for(A=r;null!==A;){m=!1,g=void 0;try{for(;null!==A;){var T=A.effectTag;if(16&T&&Qf(A.stateNode,""),128&T){var x=A.alternate;if(null!==x){var w=x.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(14&T){case 2:fp(A),A.effectTag&=-3;break;case 6:fp(A),A.effectTag&=-3,lp(A.alternate,A);break;case 4:lp(A.alternate,A);break;case 8:kp(y=A),y.return=null,y.child=null,y.alternate&&(y.alternate.child=null,y.alternate.return=null);}A=A.nextEffect}}catch(F){m=!0,g=F}m&&(null===A&&j("178"),Wd(A,g),null!==A&&(A=A.nextEffect))}if(w=XN,x=ku(),T=w.focusedElem,g=w.selectionRange,x!==T&&T&&T.ownerDocument&&hu(T.ownerDocument.documentElement,T)){null!==g&&il(T)&&(x=g.start,void 0===(w=g.end)&&(w=x),"selectionStart"in T?(T.selectionStart=x,T.selectionEnd=Math.min(w,T.value.length)):(w=(x=T.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),y=T.textContent.length,m=Math.min(g.start,y),g=void 0===g.end?m:Math.min(g.end,y),!w.extend&&m>g&&(y=g,g=m,m=y),y=gu(T,m),b=gu(T,g),y&&b&&(1!==w.rangeCount||w.anchorNode!==y.node||w.anchorOffset!==y.offset||w.focusNode!==b.node||w.focusOffset!==b.offset)&&((x=x.createRange()).setStart(y.node,y.offset),w.removeAllRanges(),m>g?(w.addRange(x),w.extend(b.node,b.offset)):(x.setEnd(b.node,b.offset),w.addRange(x))))),x=[];for(w=T;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof T.focus&&T.focus(),T=0;T<x.length;T++)(w=x[T]).element.scrollLeft=w.left,w.element.scrollTop=w.top}for(XN=null,Oq=!!YN,YN=null,t.current=e,A=r;null!==A;){r=!1,T=void 0;try{for(x=$;null!==A;){var E=A.effectTag;if(36&E){var C=A.alternate;switch(m=x,(w=A).tag){case 0:case 11:case 15:break;case 1:var S=w.stateNode;if(4&w.effectTag)if(null===C)S.componentDidMount();else{var P=w.elementType===w.type?C.memoizedProps:Fb(w.type,C.memoizedProps);S.componentDidUpdate(P,C.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var _=w.updateQueue;null!==_&&fx(w,_,S,m);break;case 3:var N=w.updateQueue;if(null!==N){if(g=null,null!==w.child)switch(w.child.tag){case 5:g=w.child.stateNode;break;case 1:g=w.child.stateNode;}fx(w,N,g,m)}break;case 5:var U=w.stateNode;null===C&&4&w.effectTag&&vv(w.type,w.memoizedProps)&&U.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:j("163");}}if(128&E){var I=A.ref;if(null!==I){var M=A.stateNode;switch(A.tag){case 5:var D=M;break;default:D=M;}"function"==typeof I?I(D):I.current=D}}A=A.nextEffect}}catch(F){r=!0,T=F}r&&(null===A&&j("178"),Wd(A,T),null!==A&&(A=A.nextEffect))}ri=zw=!1,"function"==typeof At&&At(e.stateNode),E=e.expirationTime,0===(e=(e=e.childExpirationTime)>E?e:E)&&(bf=null),t.expirationTime=e,t.finishedWork=null}function Dn(t){null===Jd&&j("246"),Jd.expirationTime=0,Tl||(Tl=!0,qN=t)}function lq(t,e){var $=Pc;Pc=!0;try{return t(e)}finally{(Pc=$)||vb||Tb(1073741823,!1)}}function mq(t,e){if(Pc&&!Ax){Ax=!0;try{return t(e)}finally{Ax=!1}}return t(e)}function nq(t,e,$){if(ni)return t(e,$);Pc||vb||0===cf||(Tb(cf,!1),cf=0);var r=ni,a=Pc;Pc=ni=!0;try{return t(e,$)}finally{ni=r,(Pc=a)||vb||Tb(1073741823,!1)}}function oq(t,e,$,r,a){var i=e.current;t:if($){e:{2===Jg($=$._reactInternalFiber)&&1===$.tag||j("170");var n=$;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Da(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);j("171"),n=void 0}if(1===$.tag){var l=$.type;if(Da(l)){$=Sv($,l,n);break t}}$=n}else $=Kc;return null===e.context?e.context=$:e.pendingContext=$,e=a,(a=Lc(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(a.callback=e),_f(),kc(i,a),Fd(i,r),r}function Cn(t,e,$,r){var a=e.current;return oq(t,e,$,a=og(Ic(),a),r)}function An(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode;}}function BL(t,e,$){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Md,key:null==r?null:""+r,children:t,containerInfo:e,implementation:$}}function tf(t){var e=1073741822-25*(1+((1073741822-Ic()+500)/25|0));e>=$v&&(e=$v-1),this._expirationTime=$v=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function _d(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ae(t,e,$){t={current:e=Eb(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:$,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function _j(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function AL(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var $;$=t.lastChild;)t.removeChild($);return new ae(t,!1,e)}function $j(t,e,$,r,a){_j($)||j("200");var i=$._reactRootContainer;if(i){if("function"==typeof a){var n=a;a=function(){var t=An(i._internalRoot);n.call(t)}}null!=t?i.legacy_renderSubtreeIntoContainer(t,e,a):i.render(e,a)}else{if(i=$._reactRootContainer=AL($,r),"function"==typeof a){var l=a;a=function(){var t=An(i._internalRoot);l.call(t)}}mq(function(){null!=t?i.legacy_renderSubtreeIntoContainer(t,e,a):i.render(e,a)})}return An(i._internalRoot)}function Bq(t,e){var $=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return _j(e)||j("200"),BL(t,e,null,$)}function vL(){if(gN)return;gN=true;vP={};ak=(zb(),m);oa=(tQ(),rG);Bd=(xP(),CP);ak||j("227");Su=!1;uP=null;Cv=!1;tP=null;sP={onError:function(t){Su=!0,uP=t}};mn=null;se={};Pj=[];$m={};te={};Tm={};tx=null;rP=null;qP=null;Jm=null;Im={injectEventPluginOrder:function(t){mn&&j("101"),mn=Array.prototype.slice.call(t),Ap()},injectEventPluginsByName:function(t){var e,$=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];se.hasOwnProperty(e)&&se[e]===r||(se[e]&&j("102",e),se[e]=r,$=!0)}$&&Ap()}};pp=Math.random().toString(36).slice(2);cc="__reactInternalInstance$"+pp;Fj="__reactEventHandlers$"+pp;oc=!("undefined"==typeof window||!window.document||!window.document.createElement);ze={animationend:Ph("Animation","AnimationEnd"),animationiteration:Ph("Animation","AnimationIteration"),animationstart:Ph("Animation","AnimationStart"),transitionend:Ph("Transition","TransitionEnd")};Em={};pP={};oc&&(pP=document.createElement("div").style,"AnimationEvent"in window||(delete ze.animationend.animation,delete ze.animationiteration.animation,delete ze.animationstart.animation),"TransitionEvent"in window||delete ze.transitionend.transition);iq=Oh("animationend");kq=Oh("animationiteration");pq=Oh("animationstart");wq=Oh("transitionend");vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");wf=null;jP=null;tr=null;oa(Ia.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){this.isPersistent=Mh},isPersistent:Jh,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Jh,this._dispatchInstances=this._dispatchListeners=null}}),Ia.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ia.extend=function(t){function e(){}function $(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var a=new e;return oa(a,$.prototype),$.prototype=a,$.prototype.constructor=$,$.Interface=oa({},r.Interface,t),$.extend=r.extend,Vq($),$},Vq(Ia);iP=Ia.extend({data:null});gP=Ia.extend({data:null});fP=[9,13,27,32];wm=oc&&"CompositionEvent"in window;yj=null;oc&&"documentMode"in document&&(yj=document.documentMode);cP=oc&&"TextEvent"in window&&!yj;Gs=oc&&(!wm||yj&&8<yj&&11>=yj);Hs=String.fromCharCode(32);Vb={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}};_O=!1;vj=!1;$O={eventTypes:Vb,extractEvents:function(t,e,$,r){var a=void 0,i=void 0;if(wm)t:{switch(t){case"compositionstart":a=Vb.compositionStart;break t;case"compositionend":a=Vb.compositionEnd;break t;case"compositionupdate":a=Vb.compositionUpdate;break t;}a=void 0}else vj?Wq(t,$)&&(a=Vb.compositionEnd):"keydown"===t&&229===$.keyCode&&(a=Vb.compositionStart);return a?(Gs&&"ko"!==$.locale&&(vj||a!==Vb.compositionStart?a===Vb.compositionEnd&&vj&&(i=Hq()):(jP="value"in(wf=r)?wf.value:wf.textContent,vj=!0)),a=iP.getPooled(a,e,$,r),i?a.data=i:null!==(i=rr($))&&(a.data=i),mf(a),i=a):i=null,(t=cP?SM(t,$):QM(t,$))?((e=gP.getPooled(Vb.beforeInput,e,$,r)).data=t,mf(e)):e=null,null===i?e:null===e?i:[i,e]}};tt=null;uj=null;tj=null;ZO=!1;YO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};cm=ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;WO=/^(.*)[\\\/]/;ab="function"==typeof Symbol&&Symbol.for;sj=ab?Symbol.for("react.element"):60103;Md=ab?Symbol.for("react.portal"):60106;Cc=ab?Symbol.for("react.fragment"):60107;_l=ab?Symbol.for("react.strict_mode"):60108;rj=ab?Symbol.for("react.profiler"):60114;gv=ab?Symbol.for("react.provider"):60109;uv=ab?Symbol.for("react.context"):60110;Zl=ab?Symbol.for("react.concurrent_mode"):60111;Xl=ab?Symbol.for("react.forward_ref"):60112;fj=ab?Symbol.for("react.suspense"):60113;Ll=ab?Symbol.for("react.memo"):60115;_v=ab?Symbol.for("react.lazy"):60116;dw="function"==typeof Symbol&&Symbol.iterator;VO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/;mw=Object.prototype.hasOwnProperty;ow={};pw={};sa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sa[t]=new Ta(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sa[e]=new Ta(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){sa[t]=new Ta(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sa[t]=new Ta(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sa[t]=new Ta(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){sa[t]=new Ta(t,3,!0,t,null)}),["capture","download"].forEach(function(t){sa[t]=new Ta(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){sa[t]=new Ta(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){sa[t]=new Ta(t,5,!1,t.toLowerCase(),null)});Al=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Al,Ml);sa[e]=new Ta(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Al,Ml);sa[e]=new Ta(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Al,Ml);sa[e]=new Ta(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),sa.tabIndex=new Ta("tabIndex",1,!1,"tabindex",null);Tw={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};Uw=null;zl=null;nx=!1;oc&&(nx=Sr("input")&&(!document.documentMode||9<document.documentMode));SO={eventTypes:Tw,_isInputEventSupported:nx,extractEvents:function(t,e,$,r){var a=e?ed(e):window,i=void 0,n=void 0,l=a.nodeName&&a.nodeName.toLowerCase();if("select"===l||"input"===l&&"file"===a.type?i=CM:Qr(a)?nx?i=wM:(i=yM,n=AM):(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(i=xM),i&&(i=i(t,e)))return $s(i,$,r);n&&n(t,a,e),"blur"===t&&(t=a._wrapperState)&&t.controlled&&"number"===a.type&&Om(a,"number",a.value)}};Tf=Ia.extend({view:null,detail:null});RO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};QO=0;PO=0;MO=!1;LO=!1;Vf=Tf.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:wn,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=QO;return QO=t.screenX,MO?"mousemove"===t.type?t.screenX-e:0:(MO=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=PO;return PO=t.screenY,LO?"mousemove"===t.type?t.screenY-e:0:(LO=!0,0)}});By=Vf.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null});Wf={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}};KO={eventTypes:Wf,extractEvents:function(t,e,$,r){var a="mouseover"===t||"pointerover"===t,i="mouseout"===t||"pointerout"===t;if(a&&($.relatedTarget||$.fromElement)||!i&&!a)return null;if(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,i?(i=e,e=(e=$.relatedTarget||$.toElement)?bi(e):null):i=null,i===e)return null;var n=void 0,l=void 0,o=void 0,v=void 0;"mouseout"===t||"mouseover"===t?(n=Vf,l=Wf.mouseLeave,o=Wf.mouseEnter,v="mouse"):"pointerout"!==t&&"pointerover"!==t||(n=By,l=Wf.pointerLeave,o=Wf.pointerEnter,v="pointer");var u=null==i?a:ed(i);if(a=null==e?a:ed(e),(t=n.getPooled(l,i,$,r)).type=v+"leave",t.target=u,t.relatedTarget=a,($=n.getPooled(o,e,$,r)).type=v+"enter",$.target=a,$.relatedTarget=u,r=e,i&&r)t:{for(a=r,v=0,n=e=i;n;n=ac(n))v++;for(n=0,o=a;o;o=ac(o))n++;for(;0<v-n;)e=ac(e),v--;for(;0<n-v;)a=ac(a),n--;for(;v--;){if(e===a||e===a.alternate)break t;e=ac(e),a=ac(a)}e=null}else e=null;for(a=e,e=[];i&&i!==a&&(null===(v=i.alternate)||v!==a);)e.push(i),i=ac(i);for(i=[];r&&r!==a&&(null===(v=r.alternate)||v!==a);)i.push(r),r=ac(r);for(r=0;r<e.length;r++)Um(e[r],"bubbled",t);for(r=i.length;0<r--;)Um(i[r],"captured",$);return[t,$]}};JO=Object.prototype.hasOwnProperty;FO=Ia.extend({animationName:null,elapsedTime:null,pseudoElement:null});EO=Ia.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}});CO=Tf.extend({relatedTarget:null});zO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};xO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};wO=Tf.extend({key:function(t){if(t.key){var e=zO[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Ji(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xO[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:wn,charCode:function(t){return"keypress"===t.type?Ji(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ji(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}});vO=Vf.extend({dataTransfer:null});uO=Tf.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:wn});tO=Ia.extend({propertyName:null,elapsedTime:null,pseudoElement:null});qO=Vf.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null});lO=[["abort","abort"],[iq,"animationEnd"],[kq,"animationIteration"],[pq,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[wq,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]];uq={};nl={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){Ht(t,!0)}),lO.forEach(function(t){Ht(t,!1)});zq={eventTypes:uq,isInteractiveTopLevelEventType:function(t){return void 0!==(t=nl[t])&&!0===t.isInteractive},extractEvents:function(t,e,$,r){var a=nl[t];if(!a)return null;switch(t){case"keypress":if(0===Ji($))return null;case"keydown":case"keyup":t=wO;break;case"blur":case"focus":t=CO;break;case"click":if(2===$.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=vO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=uO;break;case iq:case kq:case pq:t=FO;break;case wq:t=tO;break;case"scroll":t=Tf;break;case"wheel":t=qO;break;case"copy":case"cut":case"paste":t=EO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=By;break;default:t=Ia;}return mf(e=t.getPooled(a,e,$,r)),e}};Dq=zq.isInteractiveTopLevelEventType;aj=[];Oq=!0;Rq={};kO=0;Yi="_reactListenersID"+(""+Math.random()).slice(2);iO=oc&&"documentMode"in document&&11>=document.documentMode;Ir={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}};Xi=null;hO=null;Rr=null;gO=!1;eO={eventTypes:Ir,extractEvents:function(t,e,$,r){var a,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(a=!i)){t:{i=Vt(i),a=Tm.onSelect;for(var n=0;n<a.length;n++){var l=a[n];if(!i.hasOwnProperty(l)||!i[l]){i=!1;break t}}i=!0}a=!i}if(a)return null;switch(i=e?ed(e):window,t){case"focus":(Qr(i)||"true"===i.contentEditable)&&(Xi=i,hO=e,Rr=null);break;case"blur":Rr=hO=Xi=null;break;case"mousedown":gO=!0;break;case"contextmenu":case"mouseup":case"dragend":return gO=!1,nu($,r);case"selectionchange":if(iO)break;case"keydown":case"keyup":return nu($,r);}return null}};Im.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),tx=Ym,rP=jq,qP=ed,Im.injectEventPluginsByName({SimpleEventPlugin:zq,EnterLeaveEventPlugin:KO,ChangeEventPlugin:SO,SelectEventPlugin:eO,BeforeInputEventPlugin:$O});al={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};os=void 0;qs=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,$,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,$)})}:t}(function(t,e){if(t.namespaceURI!==al.svg||"innerHTML"in t)t.innerHTML=e;else{for((os=os||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=os.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});fg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};bO=["Webkit","ms","Moz","O"];Object.keys(fg).forEach(function(t){bO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fg[e]=fg[t]})});aO=oa({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});YN=null;XN=null;WN="function"==typeof setTimeout?setTimeout:void 0;Ns="function"==typeof clearTimeout?clearTimeout:void 0;new Set;Yk=[];gg=-1;Kc={};Ba={current:Kc};_a={current:!1};Oe=Kc;At=null;Bt=null;Vi=!1;Mk={current:null};Mt=null;Nt=null;VN=null;Fg={};Hb={current:Fg};Hg={current:Fg};Ig={current:Fg};Di=cm.ReactCurrentOwner;Ku=new ak.Component().refs;Bi={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===Jg(t)},enqueueSetState:function(t,e,$){t=t._reactInternalFiber;var r=Ic(),a=Lc(r=og(r,t));a.payload=e,null!=$&&(a.callback=$),_f(),kc(t,a),Fd(t,r)},enqueueReplaceState:function(t,e,$){t=t._reactInternalFiber;var r=Ic(),a=Lc(r=og(r,t));a.tag=1,a.payload=e,null!=$&&(a.callback=$),_f(),kc(t,a),Fd(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var $=Ic(),r=Lc($=og($,t));r.tag=2,null!=e&&(r.callback=e),_f(),kc(t,r),Fd(t,$)}};yi=Array.isArray;$e=dy(!0);Qm=dy(!1);Fm=null;xv=null;zv=!1;UN=cm.ReactCurrentOwner;SN=void 0;Iv=void 0;ON=void 0;JN=void 0;SN=function(t,e){for(var $=e.child;null!==$;){if(5===$.tag||6===$.tag)t.appendChild($.stateNode);else if(4!==$.tag&&null!==$.child){$.child.return=$,$=$.child;continue}if($===e)break;for(;null===$.sibling;){if(null===$.return||$.return===e)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},Iv=function(){},ON=function(t,e,$,r,a){var i=t.memoizedProps;if(i!==r){var n=e.stateNode;switch(Kd(Hb.current),t=null,$){case"input":i=nm(n,i),r=nm(n,r),t=[];break;case"option":i=jl(n,i),r=jl(n,r),t=[];break;case"select":i=oa({},i,{value:void 0}),r=oa({},r,{value:void 0}),t=[];break;case"textarea":i=sl(n,i),r=sl(n,r),t=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(n.onclick=wj);}fm($,r),n=$=void 0;var l=null;for($ in i)if(!r.hasOwnProperty($)&&i.hasOwnProperty($)&&null!=i[$])if("style"===$){var o=i[$];for(n in o)o.hasOwnProperty(n)&&(l||(l={}),l[n]="")}else"dangerouslySetInnerHTML"!==$&&"children"!==$&&"suppressContentEditableWarning"!==$&&"suppressHydrationWarning"!==$&&"autoFocus"!==$&&(te.hasOwnProperty($)?t||(t=[]):(t=t||[]).push($,null));for($ in r){var v=r[$];if(o=null!=i?i[$]:void 0,r.hasOwnProperty($)&&v!==o&&(null!=v||null!=o))if("style"===$){if(o){for(n in o)!o.hasOwnProperty(n)||v&&v.hasOwnProperty(n)||(l||(l={}),l[n]="");for(n in v)v.hasOwnProperty(n)&&o[n]!==v[n]&&(l||(l={}),l[n]=v[n])}else l||(t||(t=[]),t.push($,l)),l=v;}else"dangerouslySetInnerHTML"===$?(v=v?v.__html:void 0,o=o?o.__html:void 0,null!=v&&o!==v&&(t=t||[]).push($,""+v)):"children"===$?o===v||"string"!=typeof v&&"number"!=typeof v||(t=t||[]).push($,""+v):"suppressContentEditableWarning"!==$&&"suppressHydrationWarning"!==$&&(te.hasOwnProperty($)?(null!=v&&Yb(a,$),t||o===v||(t=[])):(t=t||[]).push($,v))}l&&(t=t||[]).push("style",l),a=t,(e.updateQueue=a)&&Pf(e)}},JN=function(t,e,$,r){$!==r&&Pf(e)};IN={readContext:sx};si=cm.ReactCurrentOwner;$v=1073741822;em=0;ri=!1;Ha=null;qi=null;Xa=0;pi=-1;AN=!1;A=null;zw=!1;tN=null;Jw=null;bf=null;Dd=null;Hc=null;Vw=0;_w=void 0;vb=!1;Jd=null;Za=0;cf=0;Tl=!1;qN=null;Pc=!1;Ax=!1;ni=!1;mi=null;Ql=Bd.unstable_now();gc=1073741822-(Ql/10|0);by=gc;nN=50;Ay=0;iN=null;Iy=!1;tt=function(t,e,$){switch(e){case"input":if(ym(t,$),e=$.name,"radio"===$.type&&null!=e){for($=t;$.parentNode;)$=$.parentNode;for($=$.querySelectorAll("input[name="+JSON.stringify(""+e)+"][type=\"radio\"]"),e=0;e<$.length;e++){var r=$[e];if(r!==t&&r.form===t.form){var a=Ym(r);a||j("90"),bs(r),ym(r,a)}}}break;case"textarea":Cu(t,$);break;case"select":null!=(e=$.value)&&Le(t,!!$.multiple,e,!1);}},tf.prototype.render=function(t){this._defer||j("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,$=this._expirationTime,r=new _d;return oq(t,e,null,$,r._onCommit),r},tf.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},tf.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||j("251"),this._hasChildren){var $=this._expirationTime;if(e!==this){this._hasChildren&&($=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,a=e;a!==this;)r=a,a=a._next;null===r&&j("251"),r._next=a._next,this._next=e,t.firstBatch=this}this._defer=!1,hq(t,$),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},tf.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},_d.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},_d.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var $=t[e];"function"!=typeof $&&j("191",$),$()}}},ae.prototype.render=function(t,e){var $=this._internalRoot,r=new _d;return null!==(e=void 0===e?null:e)&&r.then(e),Cn(t,$,null,r._onCommit),r},ae.prototype.unmount=function(t){var e=this._internalRoot,$=new _d;return null!==(t=void 0===t?null:t)&&$.then(t),Cn(null,e,null,$._onCommit),$},ae.prototype.legacy_renderSubtreeIntoContainer=function(t,e,$){var r=this._internalRoot,a=new _d;return null!==($=void 0===$?null:$)&&a.then($),Cn(e,r,t,a._onCommit),a},ae.prototype.createBatch=function(){var t=new tf(this),e=t._expirationTime,$=this._internalRoot,r=$.firstBatch;if(null===r)$.firstBatch=t,t._next=null;else{for($=null;null!==r&&r._expirationTime>=e;)$=r,r=r._next;t._next=r,null!==$&&($._next=t)}return t},PM=lq,OM=nq,NM=function(){vb||0===cf||(Tb(cf,!1),cf=0)};Fo={createPortal:Bq,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"==typeof t.render?j("188"):j("268",Object.keys(t))),t=null===(t=Et(e))?null:t.stateNode},hydrate:function(t,e,$){return $j(null,t,e,!0,$)},render:function(t,e,$){return $j(null,t,e,!1,$)},unstable_renderSubtreeIntoContainer:function(t,e,$,r){return(null==t||void 0===t._reactInternalFiber)&&j("38"),$j(t,e,$,!1,r)},unmountComponentAtNode:function(t){return _j(t)||j("40"),!!t._reactRootContainer&&(mq(function(){$j(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Bq.apply(void 0,arguments)},unstable_batchedUpdates:lq,unstable_interactiveUpdates:nq,flushSync:function(t,e){vb&&j("187");var $=Pc;Pc=!0;try{return Bp(t,e)}finally{Pc=$,Tb(1073741823,!1)}},unstable_flushControlled:function(t){var e=Pc;Pc=!0;try{Bp(t)}finally{(Pc=e)||vb||Tb(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[jq,ed,Ym,Im.injectEventPluginsByName,$m,mf,function(t){Ao(t,WM)},Ar,Cr,Ri,jn]},unstable_createRoot:function(t,e){return _j(t)||j("299","unstable_createRoot"),new ae(t,!0,null!=e&&!0===e.hydrate)}};!function(t){var e=t.findFiberByHostInstance;kM(oa({},t,{findHostInstanceByFiber:function(t){return null===(t=Et(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:bi,bundleType:0,version:"16.6.3",rendererPackageName:"react-dom"});Lo={default:Fo};Uo=Lo&&Fo||Lo;vP=Uo.default||Uo}Ev(),fh=(vL(),vP);function If(e){return(If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Jq(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Yj(e,r,t){return r&&Jq(e.prototype,r),t&&Jq(e,t),e}function de(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function rL(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(r){de(e,r,t[r])})}return e}function un(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&kL(e,r)}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kL(e,r){return(kL=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function iL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e,r){return!r||"object"!=typeof r&&"function"!=typeof r?iL(e):r}function fL(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xq(e,r){return e(r={exports:{}},r.exports),r.exports}var cL,a=arguments[0],ZK=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,$){e.__proto__=$}||function(e,$){for(var r in $)$.hasOwnProperty(r)&&(e[r]=$[r])};function XK(e,$){function r(){this.constructor=e}ZK(e,$),e.prototype=null===$?Object.create($):(r.prototype=$.prototype,new r)}var pn=Object.assign||function(e){for(var $,r=1,t=arguments.length;r<t;r++)for(var i in $=arguments[r])Object.prototype.hasOwnProperty.call($,i)&&(e[i]=$[i]);return e};function Xj(e){var $="function"==typeof Symbol&&e[Symbol.iterator],r=0;return $?$.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function je(e,$){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,i,a=r.call(e),n=[];try{for(;(void 0===$||$-->0)&&!(t=a.next()).done;)n.push(t.value)}catch(o){i={error:o}}finally{try{t&&!t.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return n}function WK(){for(var e=[],$=0;$<arguments.length;$++)e=e.concat(je(arguments[$]));return e}var TK="An invariant failed, however the error is obfuscated because this is an production build.",Wj=[];Object.freeze(Wj);var ln={};function za(){return++l.mobxGuid}function y(e){throw vd(!1,e),"X"}function vd(e,$){if(!e)throw new Error("[mobx] "+($||TK))}Object.freeze(ln);function KK(e,$){return!1}function Nr(e){var $=!1;return function(){if(!$)return $=!0,e.apply(this,arguments)}}var Sj=function(){};function HK(e){var $=[];return e.forEach(function(e){-1===$.indexOf(e)&&$.push(e)}),$}function fn(e){return null!==e&&"object"==typeof e}function me(e){if(null===e||"object"!=typeof e)return!1;var $=Object.getPrototypeOf(e);return $===Object.prototype||null===$}function ne(e,$,r){Object.defineProperty(e,$,{enumerable:!1,writable:!0,configurable:!0,value:r})}function GK(e,$,r){Object.defineProperty(e,$,{enumerable:!1,writable:!1,configurable:!0,value:r})}function EK(e,$){var r=Object.getOwnPropertyDescriptor(e,$);return!r||!1!==r.configurable&&!1!==r.writable}function DK(e,$){0}function ud(e,$){var r="isMobX"+e;return $.prototype[r]=!0,function(e){return fn(e)&&!0===e[r]}}function BK(e){return Array.isArray(e)||ka(e)}function pe(e){return e instanceof Map}function xK(e){return me(e)?Object.keys(e):Array.isArray(e)?e.map(function(e){return je(e,1)[0]}):pe(e)||R(e)?Array.from(e.keys()):y("Cannot get keys from '"+e+"'")}function $r(e){return null===e?null:"object"==typeof e?""+e:e}var s=Symbol("mobx administration"),re=function(){function e(e){void 0===e&&(e="Atom@"+za()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=C.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return mu(this)},e.prototype.reportChanged=function(){lb(),lJ(this),nb()},e.prototype.toString=function(){return this.name},e}(),bn=ud("Atom",re);function Oj(e,$,r){void 0===$&&($=Sj),void 0===r&&(r=Sj);var t=new re(e);return Tu(t,$),Uu(t,r),t}function vK(e,$){return e===$}function uK(e,$){return $w(e,$)}function tK(e,$){return Object.is(e,$)}var ue={identity:vK,structural:uK,default:tK},Lj=Symbol("mobx did run lazy initializers"),hh=Symbol("mobx pending decorators"),sK={},nK={};function lK(e,$){var r=$?sK:nK;return r[e]||(r[e]={configurable:!0,enumerable:$,get:function(){return rd(this),this[e]},set:function($){rd(this),this[e]=$}})}function rd(e){if(!0!==e[Lj]){var $=e[hh];if($)for(var r in ne(e,Lj,!0),$){var t=$[r];t.propertyCreator(e,t.prop,t.descriptor,t.decoratorTarget,t.decoratorArguments)}}}function As(e,$){return function(){var r,t=function(t,i,a,n){if(!0===n)return $(t,i,a,t,r),null;if(!Object.prototype.hasOwnProperty.call(t,hh)){var o=t[hh];ne(t,hh,pn({},o))}return t[hh][i]={prop:i,propertyCreator:$,descriptor:a,decoratorTarget:t,decoratorArguments:r},lK(i,e)};return kK(arguments)?(r=Wj,t.apply(null,arguments)):(r=Array.prototype.slice.call(arguments),t)}}function kK(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function Jj(e,$,r){return sg(e)?e:Array.isArray(e)?V.array(e,{name:r}):me(e)?V.object(e,void 0,{name:r}):pe(e)?V.map(e,{name:r}):e}function jK(e,$,r){return null==e?e:Y(e)||ka(e)||R(e)?e:Array.isArray(e)?V.array(e,{name:r,deep:!1}):me(e)?V.object(e,void 0,{name:r,deep:!1}):pe(e)?V.map(e,{name:r,deep:!1}):y(!1)}function Hj(e){return e}function cK(e,$,r){return $w(e,$)?$:e}function Gj(e){vd(e);var $=As(!0,function($,r,t,i,a){var n=t?t.initializer?t.initializer.call($):t.value:void 0;Co($).addObservableProp(r,n,e)}),r=(void 0!==vk&&vk.env,$);return r.enhancer=e,r}var Ks={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function vh(e){return null==e?Ks:"string"==typeof e?{name:e,deep:!0,proxy:!0}:e}Object.freeze(Ks);var Lm=Gj(Jj),bK=Gj(jK),Ts=Gj(Hj),NJ=Gj(cK);function Km(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?Hj:Jj}function FJ(e,$,r){if("string"==typeof arguments[1])return Lm.apply(null,arguments);if(sg(e))return e;var t=me(e)?V.object(e,$,r):Array.isArray(e)?V.array(e,$):pe(e)?V.map(e,$):e;if(t!==e)return t;y(!1)}var Zs={box:function(e,$){arguments.length>2&&Ej("box");var r=vh($);return new jd(e,Km(r),r.name)},array:function(e,$){arguments.length>2&&Ej("array");var r=vh($);return PH(e,Km(r),r.name)},map:function(e,$){arguments.length>2&&Ej("map");var r=vh($);return new wi(e,Km(r),r.name)},object:function(e,$,r){"string"==typeof arguments[1]&&Ej("object");var t=vh(r);if(!1===t.proxy)return Dk({},e,$,t);var i=bv(t),a=UH(Dk({},void 0,void 0,t));return cv(a,e,$,i),a},ref:Ts,shallow:bK,deep:Lm,struct:NJ},V=FJ;function Ej(e){y("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(Zs).forEach(function(e){return V[e]=Zs[e]});var Dj=As(!1,function(e,$,r,t,i){var a=r.get,n=r.set,o=i[0]||{};Co(e).addComputedProp(t,$,pn({get:a,set:n,context:e},o))}),EJ=Dj({equals:ue.structural}),Bj=function(e,$,r){if("string"==typeof $)return Dj.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return Dj.apply(null,arguments);var t="object"==typeof $?$:{};return t.get=e,t.set="function"==typeof $?$:t.set,t.name=t.name||e.name||"",new De(t)};function vc(e,$){var r=function(){return gt(e,$,this,arguments)};return r.isMobxAction=!0,r}function gt(e,$,r,t){var i=DJ(e,$,r,t);try{return $.apply(r,t)}finally{CJ(i)}}function DJ(e,$,r,t){var i=la()&&!!e,a=0,n=Ie();return lb(),{prevDerivation:n,prevAllowStateChanges:sm(!0),notifySpy:i,startTime:a}}function CJ(e){lm(e.prevAllowStateChanges),nb(),rc(e.prevDerivation),e.notifySpy}function pt(e,$){var r,t=sm(e);try{r=$()}finally{lm(t)}return r}function sm(e){var $=l.allowStateChanges;return l.allowStateChanges=e,$}function lm(e){l.allowStateChanges=e}function km(e){var $,r=l.computationDepth;l.computationDepth=0;try{$=e()}finally{l.computationDepth=r}return $}Bj.struct=EJ;var C,Zb,Ef={},jd=function(e){function $($,r,t,i){void 0===t&&(t="ObservableValue@"+za()),void 0===i&&(i=!0);var a=e.call(this,t)||this;return a.enhancer=r,a.hasUnreportedChange=!1,a.value=r($,void 0,t),i&&la(),a}return XK($,e),$.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},$.prototype.set=function(e){this.value;if((e=this.prepareNewValue(e))!==Ef){la();0,this.setNewValue(e)}},$.prototype.prepareNewValue=function(e){if(ej(this),mc(this)){var $=nc(this,{object:this,type:"update",newValue:e});if(!$)return Ef;e=$.newValue}return e=this.enhancer(e,this.value,this.name),this.value!==e?e:Ef},$.prototype.setNewValue=function(e){var $=this.value;this.value=e,this.reportChanged(),ec(this)&&dc(this,{type:"update",object:this,newValue:e,oldValue:$})},$.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},$.prototype.intercept=function(e){return Hi(this,e)},$.prototype.observe=function(e,$){return $&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),Fi(this,e)},$.prototype.toJSON=function(){return this.get()},$.prototype.toString=function(){return this.name+"["+this.value+"]"},$.prototype.valueOf=function(){return $r(this.get())},$.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},$}(re),am=ud("ObservableValue",jd),De=function(){function e(e){this.dependenciesState=C.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=C.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+za(),this.value=new mj(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Zb.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+za(),e.set&&(this.setter=vc(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?ue.structural:ue.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){jJ(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&y("Cycle detected in computation "+this.name+": "+this.derivation),0!==l.inBatch||0!==this.observers.size||this.keepAlive?(mu(this),Kl(this)&&this.trackAndCompute()&&kJ(this)):Kl(this)&&(this.warnAboutUntrackedRead(),lb(),this.value=this.computeValue(!1),nb());var e=this.value;if(Kf(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(Kf(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){vd(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else vd(!1,!1)},e.prototype.trackAndCompute=function(){la();var e=this.value,$=this.dependenciesState===C.NOT_TRACKING,r=this.computeValue(!0),t=$||Kf(e)||Kf(r)||!this.equals(e,r);return t&&(this.value=r),t},e.prototype.computeValue=function(e){var $;if(this.isComputing=!0,l.computationDepth++,e)$=It(this,this.derivation,this.scope);else if(!0===l.disableErrorBoundaries)$=this.derivation.call(this.scope);else try{$=this.derivation.call(this.scope)}catch(r){$=new mj(r)}return l.computationDepth--,this.isComputing=!1,$},e.prototype.suspend=function(){this.keepAlive||(Gl(this),this.value=void 0)},e.prototype.observe=function(e,$){var r=this,t=!0,i=void 0;return Vk(function(){var a=r.get();if(!t||$){var n=Ie();e({type:"update",object:r,newValue:a,oldValue:i}),rc(n)}t=!1,i=a})},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return $r(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(),Ee=ud("ComputedValue",De);!function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(C||(cL=C={},C,cL)),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Zb||(Zb={}));var mj=function(){return function(e){this.cause=e}}();function Kf(e){return e instanceof mj}function Kl(e){switch(e.dependenciesState){case C.UP_TO_DATE:return!1;case C.NOT_TRACKING:case C.STALE:return!0;case C.POSSIBLY_STALE:for(var $=Ie(),r=e.observing,t=r.length,i=0;i<t;i++){var a=r[i];if(Ee(a)){if(l.disableErrorBoundaries)a.get();else try{a.get()}catch(n){return rc($),!0}if(e.dependenciesState===C.STALE)return rc($),!0}}return Pt(e),rc($),!1;}}function BJ(){return null!==l.trackingDerivation}function ej(e){var $=e.observers.size>0;l.computationDepth>0&&$&&y(!1),l.allowStateChanges||!$&&"strict"!==l.enforceActions||y(!1)}function It(e,$,r){Pt(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++l.runId;var t,i=l.trackingDerivation;if(l.trackingDerivation=e,!0===l.disableErrorBoundaries)t=$.call(r);else try{t=$.call(r)}catch(a){t=new mj(a)}return l.trackingDerivation=i,AJ(e),t}function AJ(e){for(var $=e.observing,r=e.observing=e.newObserving,t=C.UP_TO_DATE,i=0,a=e.unboundDepsCount,n=0;n<a;n++){0===(o=r[n]).diffValue&&(o.diffValue=1,i!==n&&(r[i]=o),i++),o.dependenciesState>t&&(t=o.dependenciesState)}for(r.length=i,e.newObserving=null,a=$.length;a--;){0===(o=$[a]).diffValue&&iu(o,e),o.diffValue=0}for(;i--;){var o;1===(o=r[i]).diffValue&&(o.diffValue=0,mJ(o,e))}t!==C.UP_TO_DATE&&(e.dependenciesState=t,e.onBecomeStale())}function Gl(e){var $=e.observing;e.observing=[];for(var r=$.length;r--;)iu($[r],e);e.dependenciesState=C.NOT_TRACKING}function Of(e){var $=Ie();try{return e()}finally{rc($)}}function Ie(){var e=l.trackingDerivation;return l.trackingDerivation=null,e}function rc(e){l.trackingDerivation=e}function Pt(e){if(e.dependenciesState!==C.UP_TO_DATE){e.dependenciesState=C.UP_TO_DATE;for(var $=e.observing,r=$.length;r--;)$[r].lowestObserverState=C.UP_TO_DATE}}var zJ=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","disableErrorBoundaries","runId"],Sf=function(){return function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.disableErrorBoundaries=!1}}(),Wt=!0,tJ=!1,l=function(){var e=wl();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Wt=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Sf().version&&(Wt=!1),Wt?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Sf):(setTimeout(function(){tJ||y("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Sf)}();function sJ(){(l.pendingReactions.length||l.inBatch||l.isRunningReactions)&&y("isolateGlobalState should be called before MobX is running any reactions"),tJ=!0,Wt&&(0==--wl().__mobxInstanceCount&&(wl().__mobxGlobals=void 0),l=new Sf)}function rJ(){return l}function qJ(){var e=new Sf;for(var $ in e)-1===zJ.indexOf($)&&(l[$]=e[$]);l.allowStateChanges=!l.enforceActions}function wl(){return"undefined"!=typeof window?window:Sb}function oJ(e){return e.observers&&e.observers.size>0}function nJ(e){return e.observers}function mJ(e,$){e.observers.add($),e.lowestObserverState>$.dependenciesState&&(e.lowestObserverState=$.dependenciesState)}function iu(e,$){e.observers.delete($),0===e.observers.size&&ju(e)}function ju(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,l.pendingUnobservations.push(e))}function lb(){l.inBatch++}function nb(){if(0==--l.inBatch){xu();for(var e=l.pendingUnobservations,$=0;$<e.length;$++){var r=e[$];r.isPendingUnobservation=!1,0===r.observers.size&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBecomeUnobserved()),r instanceof De&&r.suspend())}l.pendingUnobservations=[]}}function mu(e){var $=l.trackingDerivation;return null!==$?($.runId!==e.lastAccessedBy&&(e.lastAccessedBy=$.runId,$.newObserving[$.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.size&&l.inBatch>0&&ju(e),!1)}function lJ(e){e.lowestObserverState!==C.STALE&&(e.lowestObserverState=C.STALE,e.observers.forEach(function($){$.dependenciesState===C.UP_TO_DATE&&($.isTracing!==Zb.NONE&&qu($,e),$.onBecomeStale()),$.dependenciesState=C.STALE}))}function kJ(e){e.lowestObserverState!==C.STALE&&(e.lowestObserverState=C.STALE,e.observers.forEach(function($){$.dependenciesState===C.POSSIBLY_STALE?$.dependenciesState=C.STALE:$.dependenciesState===C.UP_TO_DATE&&(e.lowestObserverState=C.UP_TO_DATE)}))}function jJ(e){e.lowestObserverState===C.UP_TO_DATE&&(e.lowestObserverState=C.POSSIBLY_STALE,e.observers.forEach(function($){$.dependenciesState===C.UP_TO_DATE&&($.dependenciesState=C.POSSIBLY_STALE,$.isTracing!==Zb.NONE&&qu($,e),$.onBecomeStale())}))}function qu(e,$){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+$.name+"'"),e.isTracing===Zb.BREAK){var r=[];su(dv(e),r,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+$.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof De?e.derivation.toString():"")+"\n\nThe dependencies for this derivation are:\n\n"+r.join("\n")+"\n*/\n    ")()}}function su(e,$,r){$.length>=1e3?$.push("(and many more)"):($.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach(function(e){return su(e,$,r+1)}))}var Ne=function(){function e(e,$,r){void 0===e&&(e="Reaction@"+za()),this.name=e,this.onInvalidate=$,this.errorHandler=r,this.observing=[],this.newObserving=[],this.dependenciesState=C.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+za(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Zb.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,l.pendingReactions.push(this),xu())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(lb(),this._isScheduled=!1,Kl(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&la()}catch(e){this.reportExceptionInDerivation(e)}}nb()}},e.prototype.track=function(e){lb();la();this._isRunning=!0;var $=It(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Gl(this),Kf($)&&this.reportExceptionInDerivation($.cause),nb()},e.prototype.reportExceptionInDerivation=function(e){var $=this;if(this.errorHandler)this.errorHandler(e,this);else{if(l.disableErrorBoundaries)throw e;var r="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this;console.error(r,e),la()&&WI({type:"error",name:this.name,message:r,error:""+e}),l.globalReactionErrorHandlers.forEach(function(r){return r(e,$)})}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(lb(),Gl(this),nb()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e[s]=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),Zv(this,e)},e}();function hJ(e){return l.globalReactionErrorHandlers.push(e),function(){var $=l.globalReactionErrorHandlers.indexOf(e);$>=0&&l.globalReactionErrorHandlers.splice($,1)}}var vu=100,wu=function(e){return e()};function xu(){l.inBatch>0||l.isRunningReactions||wu(ZI)}function ZI(){l.isRunningReactions=!0;for(var e=l.pendingReactions,$=0;e.length>0;){++$===vu&&(console.error("Reaction doesn't converge to a stable state after "+vu+" iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var r=e.splice(0),t=0,i=r.length;t<i;t++)r[t].runReaction()}l.isRunningReactions=!1}var _i=ud("Reaction",Ne);function YI(e){var $=wu;wu=function(r){return e(function(){return $(r)})}}function la(){return!1}function WI(e){}function Ah(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function UI(){y(!1)}function Fu(e){return function($,r,t){if(t){if(t.value)return{value:vc(e,t.value),enumerable:!1,configurable:!0,writable:!0};var i=t.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return vc(e,i.call(this))}}}return OI(e).apply(this,arguments)}}function OI(e){return function($,r,t){Object.defineProperty($,r,{configurable:!0,enumerable:!1,get:function(){},set:function($){ne(this,r,Q(e,$))}})}}function MI(e,$,r,t){return!0===t?(Wk(e,$,r.value),null):r?{configurable:!0,enumerable:!1,get:function(){return Wk(this,$,r.value||r.initializer.call(this)),this[$]},set:UI}:{enumerable:!1,configurable:!0,set:function(e){Wk(this,$,e)},get:function(){}}}var Q=function(e,$,r,t){return 1===arguments.length&&"function"==typeof e?vc(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof $?vc(e,$):1===arguments.length&&"string"==typeof e?Fu(e):!0!==t?Fu($).apply(null,arguments):void ne(e,$,vc(e.name||$,r.value))};function Lu(e,$){var r="string"==typeof e?e:e.name||"<unnamed action>",t="function"==typeof e?e:$;return gt(r,t,this,void 0)}function LI(e){return"function"==typeof e&&!0===e.isMobxAction}function Wk(e,$,r){ne(e,$,vc($,r.bind(e)))}function Vk(e,$){void 0===$&&($=ln);var r,t=$&&$.name||e.name||"Autorun@"+za();if(!$.scheduler&&!$.delay)r=new Ne(t,function(){this.track(n)},$.onError);else{var i=Qu($),a=!1;r=new Ne(t,function(){a||(a=!0,i(function(){a=!1,r.isDisposed||r.track(n)}))},$.onError)}function n(){e(r)}return r.schedule(),r.getDisposer()}Q.bound=MI;var KI=function(e){return e()};function Qu(e){return e.scheduler?e.scheduler:e.delay?function($){return setTimeout($,e.delay)}:KI}function Ui(e,$,r){void 0===r&&(r=ln);var t,i=r.name||"Reaction@"+za(),a=Q(i,r.onError?II(r.onError,$):$),n=!r.scheduler&&!r.delay,o=Qu(r),u=!0,s=!1,c=r.compareStructural?ue.structural:r.equals||ue.default,v=new Ne(i,function(){u||n?p():s||(s=!0,o(p))},r.onError);function p(){if(s=!1,!v.isDisposed){var $=!1;v.track(function(){var r=e(v);$=u||!c(t,r),t=r}),u&&r.fireImmediately&&a(t,v),u||!0!==$||a(t,v),u&&(u=!1)}}return v.schedule(),v.getDisposer()}function II(e,$){return function(){try{return $.apply(this,arguments)}catch(r){e.call(this,r)}}}function Tu(e,$,r){return Vu("onBecomeObserved",e,$,r)}function Uu(e,$,r){return Vu("onBecomeUnobserved",e,$,r)}function Vu(e,$,r,t){var i="string"==typeof r?Ka($,r):Ka($),a="string"==typeof r?t:r,n=i[e];return"function"!=typeof n?y(!1):(i[e]=function(){n.call(this),a.call(this)},function(){i[e]=n})}function Xu(e){var $=e.enforceActions,r=e.computedRequiresReaction,t=e.disableErrorBoundaries,i=e.reactionScheduler;if(void 0!==$){"boolean"!=typeof $&&"strict"!==$||KK("Deprecated value for 'enforceActions', use 'false' => '\"never\"', 'true' => '\"observed\"', '\"strict\"' => \"'always'\" instead");var a=void 0;switch($){case!0:case"observed":a=!0;break;case!1:case"never":a=!1;break;case"strict":case"always":a="strict";break;default:y("Invalid value for 'enforceActions': '"+$+"', expected 'never', 'always' or 'observed'");}l.enforceActions=a,l.allowStateChanges=!0!==a&&"strict"!==a}void 0!==r&&(l.computedRequiresReaction=!!r),!0===e.isolateGlobalState&&sJ(),void 0!==t&&(!0===t&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),l.disableErrorBoundaries=!!t),i&&YI(i)}function HI(e,$){var r="function"==typeof e?e.prototype:e,t=function(e){var t=$[e];Array.isArray(t)||(t=[t]);var i=Object.getOwnPropertyDescriptor(r,e),a=t.reduce(function($,t){return t(r,e,$)},i);a&&Object.defineProperty(r,e,a)};for(var i in $)t(i);return e}function Dk(e,$,r,t){var i=bv(t=vh(t));return rd(e),Co(e,t.name,i.enhancer),$&&cv(e,$,r,i),e}function bv(e){return e.defaultDecorator||(!1===e.deep?Ts:Lm)}function cv(e,$,r,t){lb();try{for(var i in $){var a=Object.getOwnPropertyDescriptor($,i);0;var n=r&&i in r?r[i]:a.get?Dj:t;0;var o=n(e,i,a,!0);o&&Object.defineProperty(e,i,o)}}finally{nb()}}function dv(e,$){return fv(Ka(e,$))}function fv(e){var $={name:e.name};return e.observing&&e.observing.length>0&&($.dependencies=HK(e.observing).map(fv)),$}function GI(e,$){return iv(Ka(e,$))}function iv(e){var $={name:e.name};return oJ(e)&&($.observers=Array.from(nJ(e)).map(iv)),$}var FI=0;function EI(e){1!==arguments.length&&y("Flow expects one 1 argument and cannot be used as decorator");var $=e.name||"<unnamed flow>";return function(){var r,t=arguments,i=++FI,a=Q($+" - runid: "+i+" - init",e).apply(this,t),n=void 0,o=new Promise(function(e,t){var o=0;function u(e){var r;n=void 0;try{r=Q($+" - runid: "+i+" - yield "+o++,a.next).call(a,e)}catch(u){return t(u)}c(r)}function s(e){var r;n=void 0;try{r=Q($+" - runid: "+i+" - yield "+o++,a.throw).call(a,e)}catch(u){return t(u)}c(r)}function c($){if(!$||"function"!=typeof $.then)return $.done?e($.value):(n=Promise.resolve($.value)).then(u,s);$.then(c,t)}r=t,u(void 0)});return o.cancel=Q($+" - runid: "+i+" - cancel",function(){try{n&&sv(n);var e=a.return(),$=Promise.resolve(e.value);$.then(Sj,Sj),sv($),r(new Error("FLOW_CANCELLED"))}catch(t){r(t)}}),o}}function sv(e){"function"==typeof e.cancel&&e.cancel()}function Ck(e,$,r){var t;if(R(e)||ka(e)||am(e))t=Ma(e);else{if(!Y(e))return y(!1);if("string"!=typeof $)return y(!1);t=Ma(e,$)}return void 0!==t.dehancer?y(!1):(t.dehancer="function"==typeof $?$:r,function(){t.dehancer=void 0})}function Si(e,$,r){return"function"==typeof r?zI(e,$,r):DI(e,$)}function DI(e,$){return Ma(e).intercept($)}function zI(e,$,r){return Ma(e,$).intercept(r)}function yv(e,$){if(null==e)return!1;if(void 0!==$){if(!1===Y(e))return!1;if(!e[s].values.has($))return!1;var r=Ka(e,$);return Ee(r)}return Ee(e)}function xI(e){return arguments.length>1?y(!1):yv(e)}function zk(e,$){return"string"!=typeof $?y(!1):yv(e,$)}function Bv(e,$){return null!=e&&(void 0!==$?!!Y(e)&&e[s].values.has($):Y(e)||!!e[s]||bn(e)||_i(e)||Ee(e))}function sg(e){return 1!==arguments.length&&y(!1),Bv(e)}function Dv(e,$){return"string"!=typeof $?y(!1):Bv(e,$)}function Te(e){return Y(e)?e[s].getKeys():R(e)?Array.from(e.keys()):ka(e)?e.map(function(e,$){return $}):y(!1)}function yk(e){return Y(e)?Te(e).map(function($){return e[$]}):R(e)?Te(e).map(function($){return e.get($)}):ka(e)?e.slice():y(!1)}function Jv(e){return Y(e)?Te(e).map(function($){return[$,e[$]]}):R(e)?Te(e).map(function($){return[$,e.get($)]}):ka(e)?e.map(function(e,$){return[$,e]}):y(!1)}function Qi(e,$,r){if(2!==arguments.length){if(Y(e)){var t=e[s];t.values.get($)?t.write($,r):t.addObservableProp($,r,t.defaultEnhancer)}else if(R(e))e.set($,r);else{if(!ka(e))return y(!1);"number"!=typeof $&&($=parseInt($,10)),vd($>=0,"Not a valid index: '"+$+"'"),lb(),$>=e.length&&(e.length=$+1),e[$]=r,nb()}}else{lb();var i=$;try{for(var a in i)Qi(e,a,i[a])}finally{nb()}}}function mI(e,$){if(Y(e))e[s].remove($);else if(R(e))e.delete($);else{if(!ka(e))return y(!1);"number"!=typeof $&&($=parseInt($,10)),vd($>=0,"Not a valid index: '"+$+"'"),e.splice($,1)}}function Mv(e,$){return Y(e)?Ma(e).has($):R(e)?e.has($):ka(e)?$>=0&&$<e.length:y(!1)}function lI(e,$){if(Mv(e,$))return Y(e)?e[$]:R(e)?e.get($):ka(e)?e[$]:y(!1)}function Pi(e,$,r,t){return"function"==typeof r?jI(e,$,r,t):kI(e,$,r)}function kI(e,$,r){return Ma(e).observe($,r)}function jI(e,$,r,t){return Ma(e,$).observe(r,t)}var iI={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Mi(e,$,r,t){return t.detectCycles&&e.set($,r),r}function Xe(e,$,r){if(!$.recurseEverything&&!sg(e))return e;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(am(e))return Xe(e.get(),$,r);if(sg(e)&&Te(e),!0===$.detectCycles&&null!==e&&r.has(e))return r.get(e);if(ka(e)||Array.isArray(e)){var t=Mi(r,e,[],$),i=e.map(function(e){return Xe(e,$,r)});t.length=i.length;for(var a=0,n=i.length;a<n;a++)t[a]=i[a];return t}if(R(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===$.exportMapsAsObjects){var o=Mi(r,e,new Map,$);return e.forEach(function(e,t){o.set(t,Xe(e,$,r))}),o}var u=Mi(r,e,{},$);return e.forEach(function(e,t){u[t]=Xe(e,$,r)}),u}var s=Mi(r,e,{},$);for(var c in e)s[c]=Xe(e[c],$,r);return s}function hI(e,$){var r;return"boolean"==typeof $&&($={detectCycles:$}),$||($=iI),$.detectCycles=void 0===$.detectCycles?!0===$.recurseEverything:!0===$.detectCycles,$.detectCycles&&(r=new Map),Xe(e,$,r)}function Zv(){for(var e=[],$=0;$<arguments.length;$++)e[$]=arguments[$];var r=!1;"boolean"==typeof e[e.length-1]&&(r=e.pop());var t=eI(e);if(!t)return y(!1);t.isTracing===Zb.NONE&&console.log("[mobx.trace] '"+t.name+"' tracing enabled"),t.isTracing=r?Zb.BREAK:Zb.LOG}function eI(e){switch(e.length){case 0:return l.trackingDerivation;case 1:return Ka(e[0]);case 2:return Ka(e[0],e[1]);}}function Ye(e,$){void 0===$&&($=void 0),lb();try{return e.apply($)}finally{nb()}}function dI(e,$,r){return 1===arguments.length||$&&"object"==typeof $?cI(e,$):ew(e,$,r||{})}function ew(e,$,r){var t;"number"==typeof r.timeout&&(t=setTimeout(function(){if(!a[s].isDisposed){a();var e=new Error("WHEN_TIMEOUT");if(!r.onError)throw e;r.onError(e)}},r.timeout)),r.name=r.name||"When@"+za();var i=vc(r.name+"-effect",$),a=Vk(function($){e()&&($.dispose(),t&&clearTimeout(t),i())},r);return a}function cI(e,$){var r;var t=new Promise(function(t,i){var a=ew(e,t,pn({},$,{onError:i}));r=function(){a(),i("WHEN_CANCELLED")}});return t.cancel=r,t}function Ki(e){return e[s]}var VH={has:function(e,$){if($===s||"constructor"===$||$===Lj)return!0;var r=Ki(e);return"string"==typeof $?r.has($):$ in e},get:function(e,$){if($===s||"constructor"===$||$===Lj)return e[$];var r=Ki(e),t=r.values.get($);if(t instanceof re){var i=t.get();return void 0===i&&r.has($),i}return"string"==typeof $&&r.has($),e[$]},set:function(e,$,r){return"string"==typeof $&&(Qi(e,$,r),!0)},deleteProperty:function(e,$){return"string"==typeof $&&(Ki(e).remove($),!0)},ownKeys:function(e){return Ki(e).keysAtom.reportObserved(),Reflect.ownKeys(e)},preventExtensions:function(e){return y("Dynamic observable objects cannot be frozen"),!1}};function UH(e){var $=new Proxy(e,VH);return e[s].proxy=$,$}function mc(e){return void 0!==e.interceptors&&e.interceptors.length>0}function Hi(e,$){var r=e.interceptors||(e.interceptors=[]);return r.push($),Nr(function(){var e=r.indexOf($);-1!==e&&r.splice(e,1)})}function nc(e,$){var r=Ie();try{var t=e.interceptors;if(t)for(var i=0,a=t.length;i<a&&(vd(!($=t[i]($))||$.type,"Intercept handlers should return nothing or a change object"),$);i++);return $}finally{rc(r)}}function ec(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function Fi(e,$){var r=e.changeListeners||(e.changeListeners=[]);return r.push($),Nr(function(){var e=r.indexOf($);-1!==e&&r.splice(e,1)})}function dc(e,$){var r=Ie(),t=e.changeListeners;if(t){for(var i=0,a=(t=t.slice()).length;i<a;i++)t[i]($);rc(r)}}var TH=1e4,QH={get:function(e,$){return $===s?e[s]:"length"===$?e[s].getArrayLength():"number"==typeof $?Tc.get.call(e,$):"string"!=typeof $||isNaN($)?Tc.hasOwnProperty($)?Tc[$]:e[$]:Tc.get.call(e,parseInt($))},set:function(e,$,r){return"length"===$?(e[s].setArrayLength(r),!0):"number"==typeof $?(Tc.set.call(e,$,r),!0):!isNaN($)&&(Tc.set.call(e,parseInt($),r),!0)},preventExtensions:function(e){return y("Observable arrays cannot be frozen"),!1}};function PH(e,$,r,t){void 0===r&&(r="ObservableArray@"+za()),void 0===t&&(t=!1);var i=new vw(r,$,t);GK(i.values,s,i);var a=new Proxy(i.values,QH);if(i.proxy=a,e&&e.length){var n=sm(!0);i.spliceWithArray(0,0,e),lm(n)}return a}var vw=function(){function e(e,$,r){this.owned=r,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new re(e||"ObservableArray@"+za()),this.enhancer=function(r,t){return $(r,t,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&this.values.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return Hi(this,e)},e.prototype.observe=function(e,$){return void 0===$&&($=!1),$&&e({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Fi(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var $=this.values.length;if(e!==$)if(e>$){for(var r=new Array(e-$),t=0;t<e-$;t++)r[t]=void 0;this.spliceWithArray($,0,r)}else this.spliceWithArray(e,$-e)},e.prototype.updateArrayLength=function(e,$){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=$},e.prototype.spliceWithArray=function(e,$,r){var t=this;ej(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),$=1===arguments.length?i-e:null==$?0:Math.max(0,Math.min($,i-e)),void 0===r&&(r=Wj),mc(this)){var a=nc(this,{object:this.proxy,type:"splice",index:e,removedCount:$,added:r});if(!a)return Wj;$=a.removedCount,r=a.added}r=0===r.length?r:r.map(function(e){return t.enhancer(e,void 0)});var n=this.spliceItemsIntoValues(e,$,r);return 0===$&&0===r.length||this.notifyArraySplice(e,r,n),this.dehanceValues(n)},e.prototype.spliceItemsIntoValues=function(e,$,r){var t;if(r.length<TH)return(t=this.values).splice.apply(t,WK([e,$],r));var i=this.values.slice(e,e+$);return this.values=this.values.slice(0,e).concat(r,this.values.slice(e+$)),i},e.prototype.notifyArrayChildUpdate=function(e,$,r){var t=!this.owned&&la(),i=ec(this),a=i||t?{object:this.proxy,type:"update",index:e,newValue:$,oldValue:r}:null;this.atom.reportChanged(),i&&dc(this,a)},e.prototype.notifyArraySplice=function(e,$,r){var t=!this.owned&&la(),i=ec(this),a=i||t?{object:this.proxy,type:"splice",index:e,removed:r,added:$,removedCount:r.length,addedCount:$.length}:null;this.atom.reportChanged(),i&&dc(this,a)},e}(),Tc={intercept:function(e){return this[s].intercept(e)},observe:function(e,$){return void 0===$&&($=!1),this[s].observe(e,$)},clear:function(){return this.splice(0)},replace:function(e){var $=this[s];return $.spliceWithArray(0,$.values.length,e)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(e,$){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];var i=this[s];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(e);case 2:return i.spliceWithArray(e,$);}return i.spliceWithArray(e,$,r)},spliceWithArray:function(e,$,r){return this[s].spliceWithArray(e,$,r)},push:function(){for(var e=[],$=0;$<arguments.length;$++)e[$]=arguments[$];var r=this[s];return r.spliceWithArray(r.values.length,0,e),r.values.length},pop:function(){return this.splice(Math.max(this[s].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=[],$=0;$<arguments.length;$++)e[$]=arguments[$];var r=this[s];return r.spliceWithArray(0,0,e),r.values.length},reverse:function(){var e=this.slice();return e.reverse.apply(e,arguments)},sort:function(e){var $=this.slice();return $.sort.apply($,arguments)},remove:function(e){var $=this[s],r=$.dehanceValues($.values).indexOf(e);return r>-1&&(this.splice(r,1),!0)},get:function(e){var $=this[s];if($){if(e<$.values.length)return $.atom.reportObserved(),$.dehanceValue($.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+$.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(e,$){var r=this[s],t=r.values;if(e<t.length){ej(r.atom);var i=t[e];if(mc(r)){var a=nc(r,{type:"update",object:this,index:e,newValue:$});if(!a)return;$=a.newValue}($=r.enhancer($,i))!==i&&(t[e]=$,r.notifyArrayChildUpdate(e,$,i))}else{if(e!==t.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+t.length);r.spliceWithArray(e,0,[$])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(e){Tc[e]=function(){var $=this[s];$.atom.reportObserved();var r=$.dehanceValues($.values);return r[e].apply(r,arguments)}});var qH,oH=ud("ObservableArrayAdministration",vw);function ka(e){return fn(e)&&oH(e[s])}var lH={},wi=function(){function e(e,$,r){if(void 0===$&&($=Jj),void 0===r&&(r="ObservableMap@"+za()),this.enhancer=$,this.name=r,this[qH]=lH,this._keysAtom=Oj(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){return this._hasMap.has(e)?this._hasMap.get(e).get():this._updateHasMapEntry(e,!1).get()},e.prototype.set=function(e,$){var r=this._has(e);if(mc(this)){var t=nc(this,{type:r?"update":"add",object:this,newValue:$,name:e});if(!t)return this;$=t.newValue}return r?this._updateValue(e,$):this._addValue(e,$),this},e.prototype.delete=function(e){var $=this;if(mc(this)&&!(i=nc(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var r=la(),t=ec(this),i=t||r?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return Ye(function(){$._keysAtom.reportChanged(),$._updateHasMapEntry(e,!1),$._data.get(e).setNewValue(void 0),$._data.delete(e)}),t&&dc(this,i),!0}return!1},e.prototype._updateHasMapEntry=function(e,$){var r=this._hasMap.get(e);return r?r.setNewValue($):(r=new jd($,Hj,this.name+"."+e+"?",!1),this._hasMap.set(e,r)),r},e.prototype._updateValue=function(e,$){var r=this._data.get(e);if(($=r.prepareNewValue($))!==Ef){var t=la(),i=ec(this),a=i||t?{type:"update",object:this,oldValue:r.value,name:e,newValue:$}:null;0,r.setNewValue($),i&&dc(this,a)}},e.prototype._addValue=function(e,$){var r=this;ej(this._keysAtom),Ye(function(){var t=new jd($,r.enhancer,r.name+"."+e,!1);r._data.set(e,t),$=t.value,r._updateHasMapEntry(e,!0),r._keysAtom.reportChanged()});var t=la(),i=ec(this),a=i||t?{type:"add",object:this,name:e,newValue:$}:null;i&&dc(this,a)},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},e.prototype.values=function(){var e=this,$=0,r=Array.from(this.keys());return dx({next:function(){return $<r.length?{value:e.get(r[$++]),done:!1}:{done:!0}}})},e.prototype.entries=function(){var e=this,$=0,r=Array.from(this.keys());return dx({next:function(){if($<r.length){var t=r[$++];return{value:[t,e.get(t)],done:!1}}return{done:!0}}})},e.prototype[(qH=s,Symbol.iterator)]=function(){return this.entries()},e.prototype.forEach=function(e,$){var r,t;try{for(var i=Xj(this),a=i.next();!a.done;a=i.next()){var n=je(a.value,2),o=n[0],u=n[1];e.call($,u,o,this)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}},e.prototype.merge=function(e){var $=this;return R(e)&&(e=e.toJS()),Ye(function(){me(e)?Object.keys(e).forEach(function(r){return $.set(r,e[r])}):Array.isArray(e)?e.forEach(function(e){var r=je(e,2),t=r[0],i=r[1];return $.set(t,i)}):pe(e)?e.forEach(function(e,r){return $.set(r,e)}):null!=e&&y("Cannot initialize map from "+e)}),this},e.prototype.clear=function(){var e=this;Ye(function(){Of(function(){var $,r;try{for(var t=Xj(e.keys()),i=t.next();!i.done;i=t.next()){var a=i.value;e.delete(a)}}catch(n){$={error:n}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if($)throw $.error}}})})},e.prototype.replace=function(e){var $=this;return Ye(function(){var r=xK(e);Array.from($.keys()).filter(function(e){return-1===r.indexOf(e)}).forEach(function(e){return $.delete(e)}),$.merge(e)}),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e,$,r={};try{for(var t=Xj(this),i=t.next();!i.done;i=t.next()){var a=je(i.value,2),n=a[0],o=a[1];r[""+n]=o}}catch(u){e={error:u}}finally{try{i&&!i.done&&($=t.return)&&$.call(t)}finally{if(e)throw e.error}}return r},e.prototype.toJS=function(){return new Map(this)},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+Array.from(this.keys()).map(function($){return $+": "+e.get($)}).join(", ")+" }]"},e.prototype.observe=function(e,$){return Fi(this,e)},e.prototype.intercept=function(e){return Hi(this,e)},e}(),R=ud("ObservableMap",wi),Iw=function(){function e(e,$,r,t){void 0===$&&($=new Map),this.target=e,this.values=$,this.name=r,this.defaultEnhancer=t,this.keysAtom=new re(r+".keys")}return e.prototype.read=function(e){return this.values.get(e).get()},e.prototype.write=function(e,$){var r=this.target,t=this.values.get(e);if(t instanceof De)t.set($);else{if(mc(this)){if(!(n=nc(this,{type:"update",object:this.proxy||r,name:e,newValue:$})))return;$=n.newValue}if(($=t.prepareNewValue($))!==Ef){var i=ec(this),a=la(),n=i||a?{type:"update",object:this.proxy||r,oldValue:t.value,name:e,newValue:$}:null;0,t.setNewValue($),i&&dc(this,n)}}},e.prototype.has=function(e){var $=this.pendingKeys||(this.pendingKeys=new Map),r=$.get(e);if(r)return r.get();var t=!!this.values.get(e);return r=new jd(t,Hj,this.name+"."+e.toString()+"?",!1),$.set(e,r),r.get()},e.prototype.addObservableProp=function(e,$,r){void 0===r&&(r=this.defaultEnhancer);var t=this.target;if(DK(t,e),mc(this)){var i=nc(this,{object:this.proxy||t,name:e,type:"add",newValue:$});if(!i)return;$=i.newValue}var a=new jd($,r,this.name+"."+e,!1);this.values.set(e,a),$=a.value,Object.defineProperty(t,e,kH(e)),this.notifyPropertyAddition(e,$)},e.prototype.addComputedProp=function(e,$,r){var t=this.target;r.name=r.name||this.name+"."+$,this.values.set($,new De(r)),(e===t||EK(e,$))&&Object.defineProperty(e,$,hH($))},e.prototype.remove=function(e){if(this.values.has(e)){var $=this.target;if(mc(this))if(!(o=nc(this,{object:this.proxy||$,name:e,type:"remove"})))return;try{lb();var r=ec(this),t=la(),i=this.values.get(e),a=i&&i.get();if(i&&i.set(void 0),this.keysAtom.reportChanged(),this.values.delete(e),this.pendingKeys){var n=this.pendingKeys.get(e);n&&n.set(!1)}delete this.target[e];var o=r||t?{type:"remove",object:this.proxy||$,oldValue:a,name:e}:null;0,r&&dc(this,o)}finally{nb()}}},e.prototype.illegalAccess=function(e,$){console.warn("Property '"+$+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,$){return Fi(this,e)},e.prototype.intercept=function(e){return Hi(this,e)},e.prototype.notifyPropertyAddition=function(e,$){var r=ec(this),t=la(),i=r||t?{type:"add",object:this.proxy||this.target,name:e,newValue:$}:null;if(r&&dc(this,i),this.pendingKeys){var a=this.pendingKeys.get(e);a&&a.set(!0)}this.keysAtom.reportChanged()},e.prototype.getKeys=function(){var e,$;this.keysAtom.reportObserved();var r=[];try{for(var t=Xj(this.values),i=t.next();!i.done;i=t.next()){var a=je(i.value,2),n=a[0];a[1]instanceof jd&&r.push(n)}}catch(o){e={error:o}}finally{try{i&&!i.done&&($=t.return)&&$.call(t)}finally{if(e)throw e.error}}return r},e}();function Co(e,$,r){if(void 0===$&&($=""),void 0===r&&(r=Jj),Object.prototype.hasOwnProperty.call(e,s))return e[s];me(e)||($=(e.constructor.name||"ObservableObject")+"@"+za()),$||($="ObservableObject@"+za());var t=new Iw(e,new Map(),$,r);return ne(e,s,t),t}var Kw=Object.create(null),Pw=Object.create(null);function kH(e){return Kw[e]||(Kw[e]={configurable:!0,enumerable:!0,get:function(){return this[s].read(e)},set:function($){this[s].write(e,$)}})}function Rw(e){var $=e[s];return $||(rd(e),e[s])}function hH(e){return Pw[e]||(Pw[e]={configurable:!0,enumerable:!1,get:function(){return Rw(this).read(e)},set:function($){Rw(this).write(e,$)}})}var eH=ud("ObservableObjectAdministration",Iw);function Y(e){return!!fn(e)&&(rd(e),eH(e[s]))}function Ka(e,$){if("object"==typeof e&&null!==e){if(ka(e))return void 0!==$&&y(!1),e[s].atom;if(R(e)){var r=e;return void 0===$?r._keysAtom:((t=r._data.get($)||r._hasMap.get($))||y(!1),t)}var t;if(rd(e),$&&!e[s]&&e[$],Y(e))return $?((t=e[s].values.get($))||y(!1),t):y(!1);if(bn(e)||Ee(e)||_i(e))return e}else if("function"==typeof e&&_i(e[s]))return e[s];return y(!1)}function Ma(e,$){return e||y("Expecting some object"),void 0!==$?Ma(Ka(e,$)):bn(e)||Ee(e)||_i(e)?e:R(e)?e:(rd(e),e[s]?e[s]:void y(!1))}function Wl(e,$){return(void 0!==$?Ka(e,$):Y(e)||R(e)?Ma(e):Ka(e)).name}var EQ,Zw=Object.prototype.toString;function $w(e,$){return Ol(e,$)}function Ol(e,$,r,t){if(e===$)return 0!==e||1/e==1/$;if(null==e||null==$)return!1;if(e!=e)return $!=$;var i=typeof e;return("function"===i||"object"===i||"object"==typeof $)&&bH(e,$,r,t)}function bH(e,$,r,t){e=bx(e),$=bx($);var i=Zw.call(e);if(i!==Zw.call($))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+$;case"[object Number]":return+e!=+e?+$!=+$:0==+e?1/+e==1/$:+e==+$;case"[object Date]":case"[object Boolean]":return+e==+$;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call($);}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof $)return!1;var n=e.constructor,o=$.constructor;if(n!==o&&!("function"==typeof n&&n instanceof n&&"function"==typeof o&&o instanceof o)&&"constructor"in e&&"constructor"in $)return!1}t=t||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return t[u]===$;if(r.push(e),t.push($),a){if((u=e.length)!==$.length)return!1;for(;u--;)if(!Ol(e[u],$[u],r,t))return!1}else{var s,c=Object.keys(e);if(u=c.length,Object.keys($).length!==u)return!1;for(;u--;)if(!aH($,s=c[u])||!Ol(e[s],$[s],r,t))return!1}return r.pop(),t.pop(),!0}function bx(e){return ka(e)?e.slice():pe(e)||R(e)?Array.from(e.entries()):e}function aH(e,$){return Object.prototype.hasOwnProperty.call(e,$)}function dx(e){return e[Symbol.iterator]=_G,e}function _G(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Ah,extras:{getDebugName:Wl},$mobx:s}),Ck,hJ,BJ,s,BK,km,pt,Ma,Ka,Wl,rJ,qJ,GI,dv,Zv,hI,EI,Uu,Tu,Xu,HI,lI,Mv,mI,Qi,Jv,yk,Te,Lu,LI,Q,dI,Ui,Vk,Si,Pi,Dk,zk,xI,Dv,sg,Bj,V,Ye,R,wi,ka,am,Y,ue,Ah,Oj,C,Of,Ne;zb();var K=Xq(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t="function"==typeof Symbol&&Symbol.for,o=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,$=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,s=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.placeholder"):60113;function u(e){if("object"==typeof e&&null!==e){var r=e.$$typeof;switch(r){case o:switch(e=e.type){case c:case i:case a:case $:return e;default:switch(e=e&&e.$$typeof){case s:case p:case l:return e;default:return r;}}case n:return r;}}}r.typeOf=u,r.AsyncMode=c,r.ContextConsumer=s,r.ContextProvider=l,r.Element=o,r.ForwardRef=p,r.Fragment=i,r.Profiler=a,r.Portal=n,r.StrictMode=$,r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===c||e===a||e===$||e===v||"object"==typeof e&&null!==e&&("function"==typeof e.then||e.$$typeof===l||e.$$typeof===s||e.$$typeof===p)},r.isAsyncMode=function(e){return u(e)===c},r.isContextConsumer=function(e){return u(e)===s},r.isContextProvider=function(e){return u(e)===l},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},r.isForwardRef=function(e){return u(e)===p},r.isFragment=function(e){return u(e)===i},r.isProfiler=function(e){return u(e)===a},r.isPortal=function(e){return u(e)===n},r.isStrictMode=function(e){return u(e)===$}});fL(K);var gx,c=K.typeOf,i=K.AsyncMode,o=K.ContextConsumer,p=K.ContextProvider,r=K.Element,yQ=K.ForwardRef,zQ=K.Fragment,AQ=K.Profiler,BQ=K.Portal,CQ=K.StrictMode,DQ=K.isValidElementType,RQ=K.isAsyncMode,FQ=K.isContextConsumer,GQ=K.isContextProvider,HQ=K.isElement,JQ=K.isForwardRef,KQ=K.isFragment,LQ=K.isProfiler,MQ=K.isPortal,NQ=K.isStrictMode,bG=Xq(function(e){e.exports=K});function Rn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Dx={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aG={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Gx=Rn({},bG.ForwardRef,(Rn(gx={},"$$typeof",!0),Rn(gx,"render",!0),gx)),_F=Object.defineProperty,YF=Object.getOwnPropertyNames,Jx=Object.getOwnPropertySymbols,XF=Object.getOwnPropertyDescriptor,WF=Object.getPrototypeOf,Mx=Object.prototype;function Nx(e,r,t){if("string"!=typeof r){if(Mx){var o=WF(r);o&&o!==Mx&&Nx(e,o,t)}var n=YF(r);Jx&&(n=n.concat(Jx(r)));for(var i=Gx[e.$$typeof]||Dx,$=Gx[r.$$typeof]||Dx,a=0;a<n.length;++a){var l=n[a];if(!(aG[l]||t&&t[l]||$&&$[l]||i&&i[l])){var s=XF(r,l);try{_F(e,l,s)}catch(c){}}}return e}return e}var Ox=Nx,Px=function(){function e(){Zj(this,e),this.listeners=[]}return Yj(e,[{key:"on",value:function(e){var r=this;return this.listeners.push(e),function(){var t=r.listeners.indexOf(e);-1!==t&&r.listeners.splice(t,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(r){return r(e)})}}]),e}();function Qx(e){function r(r,t,o,n,i,$){for(var a=arguments.length,l=new Array(a>6?a-6:0),s=6;s<a;s++)l[s-6]=arguments[s];return Of(function(){if(n=n||"<<anonymous>>",$=$||o,null==t[o]){if(r){var a=null===t[o]?"null":"undefined";return new Error("The "+i+" `"+$+"` is marked as required in `"+n+"`, but its value is `"+a+"`.")}return null}return e.apply(void 0,[t,o,n,i,$].concat(l))})}var t=r.bind(null,!1);return t.isRequired=r.bind(null,!0),t}function VF(e,r){return"symbol"===e||"Symbol"===r["@@toStringTag"]||"function"==typeof Symbol&&r instanceof Symbol}function Sx(e){var r=If(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":VF(r,e)?"symbol":r}function UF(e){var r=Sx(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function lf(e,r){return Qx(function(t,o,n,i,$){return Of(function(){if(e&&Sx(t[o])===r.toLowerCase())return null;var i;switch(r){case"Array":i=ka;break;case"Object":i=Y;break;case"Map":i=R;break;default:throw new Error("Unexpected mobxType: ".concat(r));}var a=t[o];if(!i(a)){var l=UF(a),s=e?" or javascript `"+r.toLowerCase()+"`":"";return new Error("Invalid prop `"+$+"` of type `"+l+"` supplied to `"+n+"`, expected `mobx.Observable"+r+"`"+s+".")}return null})})}function Vx(e,r){return Qx(function(t,o,n,i,$){for(var a=arguments.length,l=new Array(a>5?a-5:0),s=5;s<a;s++)l[s-5]=arguments[s];return Of(function(){if("function"!=typeof r)return new Error("Property `"+$+"` of component `"+n+"` has invalid PropType notation.");var a=lf(e,"Array")(t,o,n);if(a instanceof Error)return a;for(var s=t[o],c=0;c<s.length;c++)if((a=r.apply(void 0,[s,c,n,i,$+"["+c+"]"].concat(l)))instanceof Error)return a;return null})})}var RF=lf(!1,"Array"),NF=Vx.bind(null,!1),JF=lf(!1,"Map"),GF=lf(!1,"Object"),FF=lf(!0,"Array"),CF=Vx.bind(null,!0),Lh=lf(!0,"Object"),ey=Object.freeze({observableArray:RF,observableArrayOf:NF,observableMap:JF,observableObject:GF,arrayOrObservableArray:FF,arrayOrObservableArrayOf:CF,objectOrObservableObject:Lh});function zF(e){return!(e.prototype&&e.prototype.render)}var iy=0;function zc(e){if("function"==typeof Symbol)return Symbol(e);var r="__$mobx-react ".concat(e," (").concat(iy,")");return iy++,r}var ly=zc("patchMixins"),my=zc("patchedDefinition");function wF(e,r){var t=e[ly]=e[ly]||{},o=t[r]=t[r]||{};return o.locks=o.locks||0,o.methods=o.methods||[],o}function oy(e,r){for(var t=this,o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];r.locks++;try{var $;return null!=e&&($=e.apply(this,n)),$}finally{r.locks--,0===r.locks&&r.methods.forEach(function(e){e.apply(t,n)})}}function py(e,r){return function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];oy.call.apply(oy,[this,e,r].concat(o))}}function qy(e,r){for(var t=wF(e,r),o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];for(var $=0;$<n.length;$++){var a=n[$];t.methods.indexOf(a)<0&&t.methods.push(a)}var l=Object.getOwnPropertyDescriptor(e,r);if(!l||!l[my]){var s=e[r],c=ry(e,r,l?l.enumerable:void 0,t,s);Object.defineProperty(e,r,c)}}function ry(e,r,t,o,n){var i,$=py(n,o);return de(i={},my,!0),de(i,"get",function(){return $}),de(i,"set",function(n){if(this===e)$=py(n,o);else{var i=ry(this,r,t,o,n);Object.defineProperty(this,r,i)}}),de(i,"configurable",!0),de(i,"enumerable",t),i}var sy={mobxStores:Lh};Object.seal(sy);var tF={contextTypes:{get:function(){return sy},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function uy(e,r,t){var o="inject-"+(r.displayName||r.name||r.constructor&&r.constructor.name||"Unknown");t&&(o+="-with-"+t);var n=function(t){function o(){var e,r;Zj(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(r=sn(this,(e=tn(o)).call.apply(e,[this].concat(n)))).storeRef=function(e){r.wrappedInstance=e},r}return un(o,m.Component),Yj(o,[{key:"render",value:function(){var t={};for(var o in this.props)this.props.hasOwnProperty(o)&&(t[o]=this.props[o]);var n=e(this.context.mobxStores||{},t,this.context)||{};for(var i in n)t[i]=n[i];return zF(r)||(t.ref=this.storeRef),m.createElement(r,t)}}]),o}();return n.displayName=o,Ox(n,r),n.wrappedComponent=r,Object.defineProperties(n,tF),n}function sF(e){return function(r,t){return e.forEach(function(e){if(!(e in t)){if(!(e in r))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");t[e]=r[e]}}),t}}function xd(){var e;if("function"==typeof arguments[0])return e=arguments[0],function(r){var t=uy(e,r);return t.isMobxInjector=!1,(t=xb(t)).isMobxInjector=!0,t};for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e=sF(r),function(t){return uy(e,t,r.join("-"))}}var cn=s||"$mobx",zy=zc("isUnmounted"),Nd=!1,_k=!1,oF=!1,Ac="undefined"!=typeof WeakMap?new WeakMap:void 0,Ch=new Px,Dh=zc("skipRender"),Eh=zc("isForcingUpdate"),Hy="function"==typeof m.forwardRef&&m.forwardRef(function(e,r){}).$$typeof;function Mb(e,r,t){Object.hasOwnProperty.call(e,r)?e[r]=t:Object.defineProperty(e,r,{enumerable:!1,configurable:!0,writable:!0,value:t})}function Jy(e){if(fh.findDOMNode)try{return fh.findDOMNode(e)}catch(r){return null}return null}function Ky(e){var r=Jy(e);r&&Ac&&Ac.set(r,e),Ch.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:r})}function Ly(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");Nd||(Nd=!0)}function nF(e){_k=e}var Eo=new Px;function jF(e,r){qy(e,r,xo[r])}function Go(e,r){if(Ho(e,r))return!0;if("object"!==If(e)||null===e||"object"!==If(r)||null===r)return!1;var t=Object.keys(e),o=Object.keys(r);if(t.length!==o.length)return!1;for(var n=0;n<t.length;n++)if(!hasOwnProperty.call(r,t[n])||!Ho(e[t[n]],r[t[n]]))return!1;return!0}function Ho(e,r){return e===r?0!==e||1/e==1/r:e!=e&&r!=r}function iF(e){var r=this;if(!0===_k)return e.call(this);function t(){var e=this;$=!1;var r=void 0,t=void 0;if(a.track(function(){Nd&&(e.__$mobRenderStart=Date.now());try{t=pt(!1,i)}catch(o){r=o}Nd&&(e.__$mobRenderEnd=Date.now())}),r)throw Eo.emit(r),r;return t}var o=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",n=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;Mb(this,Dh,!1),Mb(this,Eh,!1);var i=e.bind(this),$=!1,a=new Ne("".concat(o,"#").concat(n,".render()"),function(){if(!$&&($=!0,"function"==typeof r.componentWillReact&&r.componentWillReact(),!0!==r[zy])){var e=!0;try{Mb(r,Eh,!0),r[Dh]||m.Component.prototype.forceUpdate.call(r),e=!1}finally{Mb(r,Eh,!1),e&&a.dispose()}}});return a.reactComponent=this,t[cn]=a,this.render=t,t.call(this)}var xo={componentWillUnmount:function(){if(!0!==_k&&(this.render[cn]&&this.render[cn].dispose(),this[zy]=!0,Nd)){var e=Jy(this);e&&Ac&&Ac.delete(e),Ch.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){Nd&&Ky(this)},componentDidUpdate:function(){Nd&&Ky(this)},shouldComponentUpdate:function(e,r){return _k&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==r||!Go(this.props,e)}};function Ko(e,r){var t=zc("reactProp_".concat(r,"_valueHolder")),o=zc("reactProp_".concat(r,"_atomHolder"));function n(){return this[o]||Mb(this,o,Oj("reactive "+r)),this[o]}Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){return n.call(this).reportObserved(),this[t]},set:function(e){this[Eh]||Go(this[t],e)?Mb(this,t,e):(Mb(this,t,e),Mb(this,Dh,!0),n.call(this).reportChanged(),Mb(this,Dh,!1))}})}function xb(e,r){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return oF||(oF=!0,console.warn("Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject(\"store1\", \"store2\") @observer ComponentClass` or `inject(\"store1\", \"store2\")(observer(componentClass))` instead of `@observer([\"store1\", \"store2\"]) ComponentClass`")),r?xd.apply(null,e)(xb(r)):function(r){return xb(e,r)};var t=e;if(!0===t.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),t.__proto__===m.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),Hy&&t.$$typeof===Hy){var o=t.render;if("function"!=typeof o)throw new Error("render property of ForwardRef was not a function");return rL({},t,{render:function(){var e=arguments;var $h8ka$$interop$default=ma(m);return $h8ka$$interop$default.d.createElement(Hh,null,function(){return o.apply(void 0,e)})}})}if(!("function"!=typeof t||t.prototype&&t.prototype.render||t.isReactClass||m.Component.isPrototypeOf(t))){var n,i,$=xb((i=n=function(e){function r(){return Zj(this,r),sn(this,tn(r).apply(this,arguments))}return un(r,m.Component),Yj(r,[{key:"render",value:function(){return t.call(this,this.props,this.context)}}]),r}(),n.displayName=t.displayName||t.name,n.contextTypes=t.contextTypes,n.propTypes=t.propTypes,n.defaultProps=t.defaultProps,i));return Ox($,t),$}if(!t)throw new Error("Please pass a valid component to 'observer'");var a=t.prototype||t;hF(a),t.isMobXReactObserver=!0,Ko(a,"props"),Ko(a,"state");var l=a.render;return a.render=function(){return iF.call(this,l)},t}function hF(e){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(r){jF(e,r)}),e.shouldComponentUpdate?e.shouldComponentUpdate!==xo.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):e.shouldComponentUpdate=xo.shouldComponentUpdate}var Hh=xb(function(e){var r=e.children,t=e.inject,o=e.render,n=r||o;if(void 0===n)return null;if(!t)return n();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var i=xd(t)(n);var $h8ka$$interop$default=ma(m);return $h8ka$$interop$default.d.createElement(i,null)});Hh.displayName="Observer";var Oo=function(e,r,t,o,n){var i="children"===r?"render":"children";return"function"==typeof e[r]&&"function"==typeof e[i]?new Error("Invalid prop,do not use children and render in the same time in`"+t):"function"!=typeof e[r]&&"function"!=typeof e[i]?new Error("Invalid prop `"+n+"` of type `"+If(e[r])+"` supplied to `"+t+"`, expected `function`."):void 0};function Po(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Qo(e){this.setState(function(r){var t=this.constructor.getDerivedStateFromProps(e,r);return null!=t?t:null}.bind(this))}function Ro(e,r){try{var t=this.props,o=this.state;this.props=e,this.state=r,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,o)}finally{this.props=t,this.state=o}}function gF(e){var r=e.prototype;if(!r||!r.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof r.getSnapshotBeforeUpdate)return e;var t=null,o=null,n=null;if("function"==typeof r.componentWillMount?t="componentWillMount":"function"==typeof r.UNSAFE_componentWillMount&&(t="UNSAFE_componentWillMount"),"function"==typeof r.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof r.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof r.componentWillUpdate?n="componentWillUpdate":"function"==typeof r.UNSAFE_componentWillUpdate&&(n="UNSAFE_componentWillUpdate"),null!==t||null!==o||null!==n){var i=e.displayName||e.name,$="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+$+" but also contains the following legacy lifecycles:"+(null!==t?"\n  "+t:"")+(null!==o?"\n  "+o:"")+(null!==n?"\n  "+n:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(r.componentWillMount=Po,r.componentWillReceiveProps=Qo),"function"==typeof r.getSnapshotBeforeUpdate){if("function"!=typeof r.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");r.componentWillUpdate=Ro;var a=r.componentDidUpdate;r.componentDidUpdate=function(e,r,t){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:t;a.call(this,e,r,o)}}return e}Hh.propTypes={render:Oo,children:Oo},Po.__suppressDeprecationWarning=!0,Qo.__suppressDeprecationWarning=!0,Ro.__suppressDeprecationWarning=!0;var fF={children:!0,key:!0,ref:!0},wh=function(e){function r(e,t){var o;return Zj(this,r),(o=sn(this,tn(r).call(this,e,t))).state={},Rm(e,o.state),o}return un(r,m.Component),Yj(r,[{key:"render",value:function(){return m.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={};return Rm(this.context.mobxStores,e),Rm(this.props,e),{mobxStores:e}}}],[{key:"getDerivedStateFromProps",value:function(e,r){if(!e)return null;if(!r)return e;if(Object.keys(e).filter(Ih).length!==Object.keys(r).filter(Ih).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var t in e)Ih(t)&&r[t]!==e[t]&&console.warn("MobX Provider: Provided store '"+t+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return e}}]),r}();function Rm(e,r){if(e)for(var t in e)Ih(t)&&(r[t]=e[t])}function Ih(e){return!fF[e]&&"suppressChangedStoreWarning"!==e}wh.contextTypes={mobxStores:Lh},wh.childContextTypes={mobxStores:Lh.isRequired},gF(wh);var pf=zc("disposeOnUnmount");function eF(){var e=this;this[pf]&&(this[pf].forEach(function(r){var t="string"==typeof r?e[r]:r;if(null!=t){if("function"!=typeof t)throw new Error("[mobx-react] disposeOnUnmount only works on functions such as disposers returned by reactions, autorun, etc.");t()}}),this[pf]=[])}function Zo(e,r){if(Array.isArray(r))return r.map(function(r){return Zo(e,r)});if(!e instanceof m.Component)throw new Error("[mobx-react] disposeOnUnmount only works on class based React components.");if("string"!=typeof r&&"function"!=typeof r)throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.");var t=!!e[pf];return(e[pf]||(e[pf]=[])).push(r),t||qy(e,"componentWillUnmount",eF),"string"!=typeof r?r:void 0}if(!m.Component)throw new Error("mobx-react requires React to be available");if(!Ah)throw new Error("mobx-react requires mobx to be available");"function"==typeof fh.unstable_batchedUpdates&&Xu({reactionScheduler:fh.unstable_batchedUpdates});var dF=function(e){return Eo.on(e)};if("object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":If(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var cF={spy:Ah,extras:{getDebugName:Wl}},bF={renderReporter:Ch,componentByNodeRegistry:Ac,componentByNodeRegistery:Ac,trackComponents:Ly};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(bF,cF)}Zo,xd,wh,nF,Ly,Ac,Ac,Ch,Hh,xb,dF,ey,ey;function hc(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),Object.assign(hc.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,e)}}}});var cp="98",aF={LEFT:0,MIDDLE:1,RIGHT:2},ep=0,Fn=1,gp=2,_E=3,$E=0,ZE=1,YE=0,hl=1,mp=2,of=0,ha=1,nf=2,$l=1,WE=2,dm=0,mm=1,md=2,sh=0,ld=1,Qh=2,Rh=3,Sh=4,Wn=5,kd=100,Cp=101,Dp=102,Th=103,Uh=104,Gp=200,Hp=201,Ip=202,Jp=203,rl=204,Nl=205,Mp=206,Np=207,Op=208,Pp=209,Qp=210,Rp=0,Sp=1,Tp=2,Vh=3,Vp=4,Wp=5,Xp=6,Yp=7,ph=0,$p=1,_p=2,Wh=0,Vl=1,cq=2,dq=3,eq=4,Xh=300,Yh=301,Zh=302,gm=303,$h=304,Dm=305,_h=306,ai=307,fc=1e3,La=1001,fd=1002,qa=1003,ci=1004,di=1005,xa=1006,vn=1007,oh=1008,ei=1009,xq=1010,yq=1011,nh=1012,Aq=1013,Qn=1014,kf=1015,fi=1016,Eq=1017,Fq=1018,Gq=1019,lh=1020,Iq=1021,gf=1022,rb=1023,Lq=1024,Mq=1025,VE=rb,ad=1026,ff=1027,Qq=1028,xk=33776,Ak=33777,Bk=33778,Kk=33779,Rk=35840,Uk=35841,Zk=35842,dl=35843,Zq=36196,$q=37808,_q=37809,ar=37810,br=37811,cr=37812,dr=37813,er=37814,fr=37815,gr=37816,hr=37817,ir=37818,jr=37819,kr=37820,lr=37821,mr=2200,nr=2201,or=2202,eh=2300,dh=2301,ii=2302,_c=2400,Zc=2401,bh=2402,xl=0,wr=1,xr=2,ah=3e3,zr=3001,Il=3007,Br=3002,UE=3003,Dr=3004,Er=3005,Fr=3006,Gr=3200,Hr=3201,sf=0,Jr=1,ea={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*ea.DEG2RAD},radToDeg:function(e){return e*ea.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function ba(e,t){this.x=e||0,this.y=t||0}function da(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function P(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function aa(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function Z(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(ba.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(ba.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new ba,t=new ba;return function(r,n){return e.set(r,r),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*n+e.x,this.y=i*n+o*r+e.y,this}}),Object.assign(da.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,o,a,s,p,c,$,l,h,u,V,d){var f=this.elements;return f[0]=e,f[4]=t,f[8]=r,f[12]=n,f[1]=i,f[5]=o,f[9]=a,f[13]=s,f[2]=p,f[6]=c,f[10]=$,f[14]=l,f[3]=h,f[7]=u,f[11]=V,f[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new da().fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e=new aa;return function(t){var r=this.elements,n=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=0,r[8]=n[8]*a,r[9]=n[9]*a,r[10]=n[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(n),p=Math.sin(n),c=Math.cos(i),$=Math.sin(i);if("XYZ"===e.order){var l=o*c,h=o*$,u=a*c,V=a*$;t[0]=s*c,t[4]=-s*$,t[8]=p,t[1]=h+u*p,t[5]=l-V*p,t[9]=-a*s,t[2]=V-l*p,t[6]=u+h*p,t[10]=o*s}else if("YXZ"===e.order){var d=s*c,f=s*$,m=p*c,x=p*$;t[0]=d+x*a,t[4]=m*a-f,t[8]=o*p,t[1]=o*$,t[5]=o*c,t[9]=-a,t[2]=f*a-m,t[6]=x+d*a,t[10]=o*s}else if("ZXY"===e.order){d=s*c,f=s*$,m=p*c,x=p*$;t[0]=d-x*a,t[4]=-o*$,t[8]=m+f*a,t[1]=f+m*a,t[5]=o*c,t[9]=x-d*a,t[2]=-o*p,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){l=o*c,h=o*$,u=a*c,V=a*$;t[0]=s*c,t[4]=u*p-h,t[8]=l*p+V,t[1]=s*$,t[5]=V*p+l,t[9]=h*p-u,t[2]=-p,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var v=o*s,g=o*p,y=a*s,b=a*p;t[0]=s*c,t[4]=b-v*$,t[8]=y*$+g,t[1]=$,t[5]=o*c,t[9]=-a*c,t[2]=-p*c,t[6]=g*$+y,t[10]=v-b*$}else if("XZY"===e.order){v=o*s,g=o*p,y=a*s,b=a*p;t[0]=s*c,t[4]=-$,t[8]=p*c,t[1]=v*$+b,t[5]=o*c,t[9]=g*$-y,t[2]=y*$-g,t[6]=a*c,t[10]=b*$+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new aa(0,0,0),t=new aa(1,1,1);return function(r){return this.compose(e,r,t)}}(),lookAt:function(){var e=new aa,t=new aa,r=new aa;return function(n,i,o){var a=this.elements;return r.subVectors(n,i),0===r.lengthSq()&&(r.z=1),r.normalize(),e.crossVectors(o,r),0===e.lengthSq()&&(1===Math.abs(o.z)?r.x+=1e-4:r.z+=1e-4,r.normalize(),e.crossVectors(o,r)),e.normalize(),t.crossVectors(r,e),a[0]=e.x,a[4]=t.x,a[8]=r.x,a[1]=e.y,a[5]=t.y,a[9]=r.y,a[2]=e.z,a[6]=t.z,a[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],p=r[12],c=r[1],$=r[5],l=r[9],h=r[13],u=r[2],V=r[6],d=r[10],f=r[14],m=r[3],x=r[7],v=r[11],g=r[15],y=n[0],b=n[4],_=n[8],M=n[12],w=n[1],S=n[5],T=n[9],E=n[13],L=n[2],A=n[6],C=n[10],P=n[14],B=n[3],R=n[7],G=n[11],D=n[15];return i[0]=o*y+a*w+s*L+p*B,i[4]=o*b+a*S+s*A+p*R,i[8]=o*_+a*T+s*C+p*G,i[12]=o*M+a*E+s*P+p*D,i[1]=c*y+$*w+l*L+h*B,i[5]=c*b+$*S+l*A+h*R,i[9]=c*_+$*T+l*C+h*G,i[13]=c*M+$*E+l*P+h*D,i[2]=u*y+V*w+d*L+f*B,i[6]=u*b+V*S+d*A+f*R,i[10]=u*_+V*T+d*C+f*G,i[14]=u*M+V*E+d*P+f*D,i[3]=m*y+x*w+v*L+g*B,i[7]=m*b+x*S+v*A+g*R,i[11]=m*_+x*T+v*C+g*G,i[15]=m*M+x*E+v*P+g*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new aa;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],p=e[13],c=e[2],$=e[6],l=e[10],h=e[14];return e[3]*(+i*s*$-n*p*$-i*a*l+r*p*l+n*a*h-r*s*h)+e[7]*(+t*s*h-t*p*l+i*o*l-n*o*h+n*p*c-i*s*c)+e[11]*(+t*p*$-t*a*h-i*o*$+r*o*h+i*a*c-r*p*c)+e[15]*(-n*a*c-t*s*$+t*a*l+n*o*$-r*o*l+r*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],o=n[1],a=n[2],s=n[3],p=n[4],c=n[5],$=n[6],l=n[7],h=n[8],u=n[9],V=n[10],d=n[11],f=n[12],m=n[13],x=n[14],v=n[15],g=u*x*l-m*V*l+m*$*d-c*x*d-u*$*v+c*V*v,y=f*V*l-h*x*l-f*$*d+p*x*d+h*$*v-p*V*v,b=h*m*l-f*u*l+f*c*d-p*m*d-h*c*v+p*u*v,_=f*u*$-h*m*$-f*c*V+p*m*V+h*c*x-p*u*x,M=i*g+o*y+a*b+s*_;if(0===M){var w="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(w);return console.warn(w),this.identity()}var S=1/M;return r[0]=g*S,r[1]=(m*V*s-u*x*s-m*a*d+o*x*d+u*a*v-o*V*v)*S,r[2]=(c*x*s-m*$*s+m*a*l-o*x*l-c*a*v+o*$*v)*S,r[3]=(u*$*s-c*V*s-u*a*l+o*V*l+c*a*d-o*$*d)*S,r[4]=y*S,r[5]=(h*x*s-f*V*s+f*a*d-i*x*d-h*a*v+i*V*v)*S,r[6]=(f*$*s-p*x*s-f*a*l+i*x*l+p*a*v-i*$*v)*S,r[7]=(p*V*s-h*$*s+h*a*l-i*V*l-p*a*d+i*$*d)*S,r[8]=b*S,r[9]=(f*u*s-h*m*s-f*o*d+i*m*d+h*o*v-i*u*v)*S,r[10]=(p*m*s-f*c*s+f*o*l-i*m*l-p*o*v+i*c*v)*S,r[11]=(h*c*s-p*u*s-h*o*l+i*u*l+p*o*d-i*c*d)*S,r[12]=_*S,r[13]=(h*m*a-f*u*a+f*o*V-i*m*V-h*o*x+i*u*x)*S,r[14]=(f*c*a-p*m*a-f*o*$+i*m*$+p*o*x-i*c*x)*S,r[15]=(p*u*a-h*c*a+h*o*$-i*u*$-p*o*V+i*c*V)*S,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,p=i*o,c=i*a;return this.set(p*o+r,p*a-n*s,p*s+n*a,0,p*a+n*s,c*a+r,c*s-n*o,0,p*s-n*a,c*s+n*o,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){var n=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,p=i+i,c=o+o,$=a+a,l=i*p,h=i*c,u=i*$,V=o*c,d=o*$,f=a*$,m=s*p,x=s*c,v=s*$,g=r.x,y=r.y,b=r.z;return n[0]=(1-(V+f))*g,n[1]=(h+v)*g,n[2]=(u-x)*g,n[3]=0,n[4]=(h-v)*y,n[5]=(1-(l+f))*y,n[6]=(d+m)*y,n[7]=0,n[8]=(u+x)*b,n[9]=(d-m)*b,n[10]=(1-(l+V))*b,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:function(){var e=new aa,t=new da;return function(r,n,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),p=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),r.x=o[12],r.y=o[13],r.z=o[14],t.copy(this);var c=1/a,$=1/s,l=1/p;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=$,t.elements[5]*=$,t.elements[6]*=$,t.elements[8]*=l,t.elements[9]*=l,t.elements[10]*=l,n.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=p,this}}(),makePerspective:function(e,t,r,n,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),p=2*i/(r-n),c=(t+e)/(t-e),$=(r+n)/(r-n),l=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=p,a[9]=$,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,r,n,i,o){var a=this.elements,s=1/(t-e),p=1/(r-n),c=1/(o-i),$=(t+e)*s,l=(r+n)*p,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-$,a[1]=0,a[5]=2*p,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}),Object.assign(P,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,o,a){var s=r[n+0],p=r[n+1],c=r[n+2],$=r[n+3],l=i[o+0],h=i[o+1],u=i[o+2],V=i[o+3];if($!==V||s!==l||p!==h||c!==u){var d=1-a,f=s*l+p*h+c*u+$*V,m=f>=0?1:-1,x=1-f*f;if(x>Number.EPSILON){var v=Math.sqrt(x),g=Math.atan2(v,f*m);d=Math.sin(d*g)/v,a=Math.sin(a*g)/v}var y=a*m;if(s=s*d+l*y,p=p*d+h*y,c=c*d+u*y,$=$*d+V*y,d===1-a){var b=1/Math.sqrt(s*s+p*p+c*c+$*$);s*=b,p*=b,c*=b,$*=b}}e[t]=s,e[t+1]=p,e[t+2]=c,e[t+3]=$}}),Object.defineProperties(P.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(P.prototype,{isQuaternion:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,p=a(r/2),c=a(n/2),$=a(i/2),l=s(r/2),h=s(n/2),u=s(i/2);return"XYZ"===o?(this._x=l*c*$+p*h*u,this._y=p*h*$-l*c*u,this._z=p*c*u+l*h*$,this._w=p*c*$-l*h*u):"YXZ"===o?(this._x=l*c*$+p*h*u,this._y=p*h*$-l*c*u,this._z=p*c*u-l*h*$,this._w=p*c*$+l*h*u):"ZXY"===o?(this._x=l*c*$-p*h*u,this._y=p*h*$+l*c*u,this._z=p*c*u+l*h*$,this._w=p*c*$-l*h*u):"ZYX"===o?(this._x=l*c*$-p*h*u,this._y=p*h*$+l*c*u,this._z=p*c*u-l*h*$,this._w=p*c*$+l*h*u):"YZX"===o?(this._x=l*c*$+p*h*u,this._y=p*h*$+l*c*u,this._z=p*c*u-l*h*$,this._w=p*c*$-l*h*u):"XZY"===o&&(this._x=l*c*$-p*h*u,this._y=p*h*$-l*c*u,this._z=p*c*u+l*h*$,this._w=p*c*$+l*h*u),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],p=r[9],c=r[2],$=r[6],l=r[10],h=n+s+l;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=($-p)*t,this._y=(o-c)*t,this._z=(a-i)*t):n>s&&n>l?(t=2*Math.sqrt(1+n-s-l),this._w=($-p)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>l?(t=2*Math.sqrt(1+s-n-l),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(p+$)/t):(t=2*Math.sqrt(1+l-n-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(p+$)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new aa;return function(r,n){return void 0===t&&(t=new aa),(e=r.dot(n)+1)<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(ea.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,p=t._z,c=t._w;return this._x=r*c+o*a+n*p-i*s,this._y=n*c+o*s+i*a-r*p,this._z=i*c+o*p+r*s-n*a,this._w=o*c-r*a-n*s-i*p,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*n+t*this._y,this._z=p*i+t*this._z,this.normalize()}var c=Math.sqrt(s),$=Math.atan2(c,a),l=Math.sin((1-t)*$)/c,h=Math.sin(t*$)/c;return this._w=o*l+this._w*h,this._x=r*l+this._x*h,this._y=n*l+this._y*h,this._z=i*l+this._z*h,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(aa.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new P;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new P;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,p=s*t+o*n-a*r,c=s*r+a*t-i*n,$=s*n+i*r-o*t,l=-i*t-o*r-a*n;return this.x=p*s+l*-i+c*-a-$*-o,this.y=c*s+l*-o+$*-i-p*-a,this.z=$*s+l*-a+p*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new da;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new aa,t=new aa;return function(r,n){return e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new aa;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new aa;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(ea.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Z.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,o,a,s,p){var c=this.elements;return c[0]=e,c[1]=n,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=r,c[7]=o,c[8]=p,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new aa;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[3],s=r[6],p=r[1],c=r[4],$=r[7],l=r[2],h=r[5],u=r[8],V=n[0],d=n[3],f=n[6],m=n[1],x=n[4],v=n[7],g=n[2],y=n[5],b=n[8];return i[0]=o*V+a*m+s*g,i[3]=o*d+a*x+s*y,i[6]=o*f+a*v+s*b,i[1]=p*V+c*m+$*g,i[4]=p*d+c*x+$*y,i[7]=p*f+c*v+$*b,i[2]=l*V+h*m+u*g,i[5]=l*d+h*x+u*y,i[8]=l*f+h*v+u*b,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],p=e[7],c=e[8];return t*o*c-t*a*p-r*i*c+r*a*s+n*i*p-n*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],o=r[1],a=r[2],s=r[3],p=r[4],c=r[5],$=r[6],l=r[7],h=r[8],u=h*p-c*l,V=c*$-h*s,d=l*s-p*$,f=i*u+o*V+a*d;if(0===f){var m="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(m);return console.warn(m),this.identity()}var x=1/f;return n[0]=u*x,n[1]=(a*l-h*o)*x,n[2]=(c*o-a*p)*x,n[3]=V*x,n[4]=(h*i-a*$)*x,n[5]=(a*s-c*i)*x,n[6]=d*x,n[7]=(o*$-l*i)*x,n[8]=(p*i-o*s)*x,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,n,i,o,a){var s=Math.cos(i),p=Math.sin(i);this.set(r*s,r*p,-r*(s*o+p*a)+o+e,-n*p,n*s,-n*(-p*o+s*a)+a+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],o=n[3],a=n[6],s=n[1],p=n[4],c=n[7];return n[0]=t*i+r*s,n[3]=t*o+r*p,n[6]=t*a+r*c,n[1]=-r*i+t*s,n[4]=-r*o+t*p,n[7]=-r*a+t*c,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var Fc={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},TE=0;function H(e,t,r,n,i,o,a,s,p,c){Object.defineProperty(this,"id",{value:TE++}),this.uuid=ea.generateUUID(),this.name="",this.image=void 0!==e?e:H.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:H.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:La,this.wrapT=void 0!==n?n:La,this.magFilter=void 0!==i?i:xa,this.minFilter=void 0!==o?o:oh,this.anisotropy=void 0!==p?p:1,this.format=void 0!==a?a:rb,this.type=void 0!==s?s:ei,this.offset=new ba(0,0),this.repeat=new ba(1,1),this.center=new ba(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Z,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:ah,this.version=0,this.onUpdate=null}function fa(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function wd(e,t,r){this.width=e,this.height=t,this.scissor=new fa(0,0,e,t),this.scissorTest=!1,this.viewport=new fa(0,0,e,t),void 0===(r=r||{}).minFilter&&(r.minFilter=xa),this.texture=new H(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.generateMipmaps=void 0===r.generateMipmaps||r.generateMipmaps,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function af(e,t,r){wd.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function sd(e,t,r,n,i,o,a,s,p,c,$,l){H.call(this,null,o,a,s,p,c,n,i,$,l),this.image={data:e,width:t,height:r},this.magFilter=void 0!==p?p:qa,this.minFilter=void 0!==c?c:qa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function ic(e,t){this.min=void 0!==e?e:new aa(1/0,1/0,1/0),this.max=void 0!==t?t:new aa(-1/0,-1/0,-1/0)}function cb(e,t){this.center=void 0!==e?e:new aa,this.radius=void 0!==t?t:0}function Db(e,t){this.normal=void 0!==e?e:new aa(1,0,0),this.constant=void 0!==t?t:0}function ti(e,t,r,n,i,o){this.planes=[void 0!==e?e:new Db,void 0!==t?t:new Db,void 0!==r?r:new Db,void 0!==n?n:new Db,void 0!==i?i:new Db,void 0!==o?o:new Db]}H.DEFAULT_IMAGE=void 0,H.DEFAULT_MAPPING=Xh,H.prototype=Object.assign(Object.create(hc.prototype),{constructor:H,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=ea.generateUUID()),!t&&void 0===e.images[n.uuid]){var i;if(Array.isArray(n)){i=[];for(var o=0,a=n.length;o<a;o++)i.push(Fc.getDataURL(n[o]))}else i=Fc.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==Xh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case fc:e.x=e.x-Math.floor(e.x);break;case La:e.x=e.x<0?0:1;break;case fd:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);}if(e.y<0||e.y>1)switch(this.wrapT){case fc:e.y=e.y-Math.floor(e.y);break;case La:e.y=e.y<0?0:1;break;case fd:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(H.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(fa.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,o=e.elements,a=o[0],s=o[4],p=o[8],c=o[1],$=o[5],l=o[9],h=o[2],u=o[6],V=o[10];if(Math.abs(s-c)<.01&&Math.abs(p-h)<.01&&Math.abs(l-u)<.01){if(Math.abs(s+c)<.1&&Math.abs(p+h)<.1&&Math.abs(l+u)<.1&&Math.abs(a+$+V-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var d=(a+1)/2,f=($+1)/2,m=(V+1)/2,x=(s+c)/4,v=(p+h)/4,g=(l+u)/4;return d>f&&d>m?d<.01?(r=0,n=.707106781,i=.707106781):(n=x/(r=Math.sqrt(d)),i=v/r):f>m?f<.01?(r=.707106781,n=0,i=.707106781):(r=x/(n=Math.sqrt(f)),i=g/n):m<.01?(r=.707106781,n=.707106781,i=0):(r=v/(i=Math.sqrt(m)),n=g/i),this.set(r,n,i,t),this}var y=Math.sqrt((u-l)*(u-l)+(p-h)*(p-h)+(c-s)*(c-s));return Math.abs(y)<.001&&(y=1),this.x=(u-l)/y,this.y=(p-h)/y,this.z=(c-s)/y,this.w=Math.acos((a+$+V-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new fa,t=new fa),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),wd.prototype=Object.assign(Object.create(hc.prototype),{constructor:wd,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),af.prototype=Object.create(wd.prototype),af.prototype.constructor=af,af.prototype.isWebGLRenderTargetCube=!0,sd.prototype=Object.create(H.prototype),sd.prototype.constructor=sd,sd.prototype.isDataTexture=!0,Object.assign(ic.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,p=e.length;s<p;s+=3){var c=e[s],$=e[s+1],l=e[s+2];c<t&&(t=c),$<r&&(r=$),l<n&&(n=l),c>i&&(i=c),$>o&&(o=$),l>a&&(a=l)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,p=e.count;s<p;s++){var c=e.getX(s),$=e.getY(s),l=e.getZ(s);c<t&&(t=c),$<r&&(r=$),l<n&&(n=l),c>i&&(i=c),$>o&&(o=$),l>a&&(a=l)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new aa;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new aa),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new aa),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,r,n=new aa;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,r=a.length;t<r;t++)n.copy(a[t]),n.applyMatrix4(i.matrixWorld),e.expandByPoint(n)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,r=s.count;t<r;t++)n.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(n)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new aa),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new aa;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(){var e=new aa,t=new aa,r=new aa,n=new aa,i=new aa,o=new aa,a=new aa,s=new aa,p=new aa,c=new aa;function $(n){var i,o;for(i=0,o=n.length-3;i<=o;i+=3){a.fromArray(n,i);var s=p.x*Math.abs(a.x)+p.y*Math.abs(a.y)+p.z*Math.abs(a.z),c=e.dot(a),$=t.dot(a),l=r.dot(a);if(Math.max(-Math.max(c,$,l),Math.min(c,$,l))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),p.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),r.subVectors(a.c,s),n.subVectors(t,e),i.subVectors(r,t),o.subVectors(e,r);var l=[0,-n.z,n.y,0,-i.z,i.y,0,-o.z,o.y,n.z,0,-n.x,i.z,0,-i.x,o.z,0,-o.x,-n.y,n.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!$(l)&&!!$(l=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(n,i),$(l=[c.x,c.y,c.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new aa),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new aa;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new aa;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new cb),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new aa,new aa,new aa,new aa,new aa,new aa,new aa,new aa];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(cb.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new ic;return function(t,r){var n=this.center;void 0!==r?n.copy(r):e.setFromPoints(t).getCenter(n);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new aa),t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new ic),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Db.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new aa,t=new aa;return function(r,n,i){var o=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new aa),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new aa;return function(t,r){void 0===r&&(console.warn("THREE.Plane: .intersectLine() target is now required"),r=new aa);var n=t.delta(e),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?r.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:r.copy(n).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new aa),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new aa,t=new Z;return function(r,n){var i=n||t.getNormalMatrix(r),o=this.coplanarPoint(e).applyMatrix4(r),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(ti.prototype,{set:function(e,t,r,n,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],p=r[5],c=r[6],$=r[7],l=r[8],h=r[9],u=r[10],V=r[11],d=r[12],f=r[13],m=r[14],x=r[15];return t[0].setComponents(a-n,$-s,V-l,x-d).normalize(),t[1].setComponents(a+n,$+s,V+l,x+d).normalize(),t[2].setComponents(a+i,$+p,V+h,x+f).normalize(),t[3].setComponents(a-i,$-p,V-h,x-f).normalize(),t[4].setComponents(a-o,$-c,V-u,x-m).normalize(),t[5].setComponents(a+o,$+c,V+u,x+m).normalize(),this},intersectsObject:function(){var e=new cb;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new cb;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(){var e=new aa;return function(t){for(var r=this.planes,n=0;n<6;n++){var i=r[n];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}});var QE="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",KE="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",JE="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",HE="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",GE="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",FE="\nvec3 transformed = vec3( position );\n",zE="\nvec3 objectNormal = vec3( normal );\n",vE="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",uE="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",tE="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",sE="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",qE="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",pE="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",oE="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",nE="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",mE="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",lE="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",jE="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",iE="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",hE="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",gE="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",fE="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",eE="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",dE="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",cE="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",bE="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",aE="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",_D="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",YD="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",XD="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",WD="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",VD="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",UD="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",SD="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",LD="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",JD="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",ID="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",AD="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",zD="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",xD="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",wD="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",uD="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",rD="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",pD="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",oD="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",mD="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lD="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",jD="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",eD="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",_C="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",WC="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",UC="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",HC="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",FC="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",CC="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",AC="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",yC="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",wC="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",uC="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",tC="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",qC="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",pC="#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",oC="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",nC="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",mC="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",kC="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dC="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",cC="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",bC="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",aC="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",_B="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",ZB="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",XB="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",WB="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",JB="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",IB="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",HB="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",kB="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",jB="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",iB="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",hB="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",gB="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",fB="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",eB="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",dB="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",cB="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",bB="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",aB="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",_A="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",$A="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n}\n",ZA="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position, 1.0 );\n\tgl_Position.z = 1.0;\n}\n",YA="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",XA="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",WA="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",VA="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",UA="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",TA="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",SA="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",RA="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",QA="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",PA="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",OA="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",NA="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",MA="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",LA="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",KA="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\tvec4 matcapColor = texture2D( matcap, uv );\n\tmatcapColor = matcapTexelToLinear( matcapColor );\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",JA="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",IA="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",HA="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",GA="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",FA="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",EA="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",CA="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",BA="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",AA="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",zA="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",yA="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",xA="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",wA="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",B={alphamap_fragment:QE,alphamap_pars_fragment:KE,alphatest_fragment:JE,aomap_fragment:HE,aomap_pars_fragment:GE,begin_vertex:FE,beginnormal_vertex:zE,bsdfs:vE,bumpmap_pars_fragment:uE,clipping_planes_fragment:tE,clipping_planes_pars_fragment:sE,clipping_planes_pars_vertex:qE,clipping_planes_vertex:pE,color_fragment:oE,color_pars_fragment:nE,color_pars_vertex:mE,color_vertex:lE,common:jE,cube_uv_reflection_fragment:iE,defaultnormal_vertex:hE,displacementmap_pars_vertex:gE,displacementmap_vertex:fE,emissivemap_fragment:eE,emissivemap_pars_fragment:dE,encodings_fragment:cE,encodings_pars_fragment:bE,envmap_fragment:aE,envmap_pars_fragment:_D,envmap_pars_vertex:YD,envmap_physical_pars_fragment:xD,envmap_vertex:XD,fog_vertex:WD,fog_pars_vertex:VD,fog_fragment:UD,fog_pars_fragment:SD,gradientmap_pars_fragment:LD,lightmap_fragment:JD,lightmap_pars_fragment:ID,lights_lambert_vertex:AD,lights_pars_begin:zD,lights_phong_fragment:wD,lights_phong_pars_fragment:uD,lights_physical_fragment:rD,lights_physical_pars_fragment:pD,lights_fragment_begin:oD,lights_fragment_maps:mD,lights_fragment_end:lD,logdepthbuf_fragment:jD,logdepthbuf_pars_fragment:eD,logdepthbuf_pars_vertex:_C,logdepthbuf_vertex:WC,map_fragment:UC,map_pars_fragment:HC,map_particle_fragment:FC,map_particle_pars_fragment:CC,metalnessmap_fragment:AC,metalnessmap_pars_fragment:yC,morphnormal_vertex:wC,morphtarget_pars_vertex:uC,morphtarget_vertex:tC,normal_fragment_begin:qC,normal_fragment_maps:pC,normalmap_pars_fragment:oC,packing:nC,premultiplied_alpha_fragment:mC,project_vertex:kC,dithering_fragment:dC,dithering_pars_fragment:cC,roughnessmap_fragment:bC,roughnessmap_pars_fragment:aC,shadowmap_pars_fragment:_B,shadowmap_pars_vertex:ZB,shadowmap_vertex:XB,shadowmask_pars_fragment:WB,skinbase_vertex:JB,skinning_pars_vertex:IB,skinning_vertex:HB,skinnormal_vertex:kB,specularmap_fragment:jB,specularmap_pars_fragment:iB,tonemapping_fragment:hB,tonemapping_pars_fragment:gB,uv_pars_fragment:fB,uv_pars_vertex:eB,uv_vertex:dB,uv2_pars_fragment:cB,uv2_pars_vertex:bB,uv2_vertex:aB,worldpos_vertex:_A,background_frag:$A,background_vert:ZA,cube_frag:YA,cube_vert:XA,depth_frag:WA,depth_vert:VA,distanceRGBA_frag:UA,distanceRGBA_vert:TA,equirect_frag:SA,equirect_vert:RA,linedashed_frag:QA,linedashed_vert:PA,meshbasic_frag:OA,meshbasic_vert:NA,meshlambert_frag:MA,meshlambert_vert:LA,meshmatcap_frag:KA,meshmatcap_vert:JA,meshphong_frag:IA,meshphong_vert:HA,meshphysical_frag:GA,meshphysical_vert:FA,normal_frag:EA,normal_vert:CA,points_frag:BA,points_vert:AA,shadow_frag:zA,shadow_vert:yA,sprite_frag:xA,sprite_vert:wA},ga={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e)for(var n in t[r]={},e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}return t}},vA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function z(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}Object.assign(z.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=ea.euclideanModulo(t,1),r=ea.clamp(r,0,1),n=ea.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,o=2*n-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,p=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(a,s,p)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,$=(c=r[1]).length;if(3===$)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===$)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=vA[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,r,n=this.r,i=this.g,o=this.b,a=Math.max(n,i,o),s=Math.min(n,i,o),p=(s+a)/2;if(s===a)t=0,r=0;else{var c=a-s;switch(r=p<=.5?c/(a+s):c/(2-a-s),a){case n:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-n)/c+2;break;case o:t=(n-i)/c+4;}t/=6}return e.h=t,e.s=r,e.l=p,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,r,n){return this.getHSL(e),e.h+=t,e.s+=r,e.l+=n,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(r,n){this.getHSL(e),r.getHSL(t);var i=ea.lerp(e.h,t.h,n),o=ea.lerp(e.s,t.s,n),a=ea.lerp(e.l,t.l,n);return this.setHSL(i,o,a),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var ca={common:{diffuse:{value:new z(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Z},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ba(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new z(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new z(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Z}},sprite:{diffuse:{value:new z(15658734)},opacity:{value:1},center:{value:new ba(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Z}}},Cb={basic:{uniforms:ga.merge([ca.common,ca.specularmap,ca.envmap,ca.aomap,ca.lightmap,ca.fog]),vertexShader:B.meshbasic_vert,fragmentShader:B.meshbasic_frag},lambert:{uniforms:ga.merge([ca.common,ca.specularmap,ca.envmap,ca.aomap,ca.lightmap,ca.emissivemap,ca.fog,ca.lights,{emissive:{value:new z(0)}}]),vertexShader:B.meshlambert_vert,fragmentShader:B.meshlambert_frag},phong:{uniforms:ga.merge([ca.common,ca.specularmap,ca.envmap,ca.aomap,ca.lightmap,ca.emissivemap,ca.bumpmap,ca.normalmap,ca.displacementmap,ca.gradientmap,ca.fog,ca.lights,{emissive:{value:new z(0)},specular:{value:new z(1118481)},shininess:{value:30}}]),vertexShader:B.meshphong_vert,fragmentShader:B.meshphong_frag},standard:{uniforms:ga.merge([ca.common,ca.envmap,ca.aomap,ca.lightmap,ca.emissivemap,ca.bumpmap,ca.normalmap,ca.displacementmap,ca.roughnessmap,ca.metalnessmap,ca.fog,ca.lights,{emissive:{value:new z(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:B.meshphysical_vert,fragmentShader:B.meshphysical_frag},matcap:{uniforms:ga.merge([ca.common,ca.bumpmap,ca.normalmap,ca.displacementmap,ca.fog,{matcap:{value:null}}]),vertexShader:B.meshmatcap_vert,fragmentShader:B.meshmatcap_frag},points:{uniforms:ga.merge([ca.points,ca.fog]),vertexShader:B.points_vert,fragmentShader:B.points_frag},dashed:{uniforms:ga.merge([ca.common,ca.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:B.linedashed_vert,fragmentShader:B.linedashed_frag},depth:{uniforms:ga.merge([ca.common,ca.displacementmap]),vertexShader:B.depth_vert,fragmentShader:B.depth_frag},normal:{uniforms:ga.merge([ca.common,ca.bumpmap,ca.normalmap,ca.displacementmap,{opacity:{value:1}}]),vertexShader:B.normal_vert,fragmentShader:B.normal_frag},sprite:{uniforms:ga.merge([ca.sprite,ca.fog]),vertexShader:B.sprite_vert,fragmentShader:B.sprite_frag},background:{uniforms:{uvTransform:{value:new Z},t2D:{value:null}},vertexShader:B.background_vert,fragmentShader:B.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:B.cube_vert,fragmentShader:B.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:B.equirect_vert,fragmentShader:B.equirect_frag},distanceRGBA:{uniforms:ga.merge([ca.common,ca.displacementmap,{referencePosition:{value:new aa},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:B.distanceRGBA_vert,fragmentShader:B.distanceRGBA_frag},shadow:{uniforms:ga.merge([ca.lights,ca.fog,{color:{value:new z(0)},opacity:{value:1}}]),vertexShader:B.shadow_vert,fragmentShader:B.shadow_frag}};function $k(){var e=null,t=!1,r=null;function n(i,o){!1!==t&&(r(i,o),e.requestAnimationFrame(n))}return{start:function(){!0!==t&&null!==r&&(e.requestAnimationFrame(n),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function uA(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var n=t.get(r);n&&(e.deleteBuffer(n.buffer),t.delete(r))},update:function(r,n){r.isInterleavedBufferAttribute&&(r=r.data);var i=t.get(r);void 0===i?t.set(r,function(t,r){var n=t.array,i=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,n,i),t.onUploadCallback();var a=5126;return n instanceof Float32Array?a=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=5123:n instanceof Int16Array?a=5122:n instanceof Uint32Array?a=5125:n instanceof Int32Array?a=5124:n instanceof Int8Array?a=5120:n instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(r,n)):i.version<r.version&&(function(t,r,n){var i=r.array,o=r.updateRange;e.bindBuffer(n,t),!1===r.dynamic?e.bufferData(n,i,35044):-1===o.count?e.bufferSubData(n,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,r,n),i.version=r.version)}}}function Lb(e,t,r,n,i,o){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new aa,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new z,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function qd(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||qd.DefaultOrder}function bl(){this.mask=1}Cb.physical={uniforms:ga.merge([Cb.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:B.meshphysical_vert,fragmentShader:B.meshphysical_frag},Object.assign(Lb.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),qd.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],qd.DefaultOrder="XYZ",Object.defineProperties(qd.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(qd.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=ea.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],p=i[1],c=i[5],$=i[9],l=i[2],h=i[6],u=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-$,u),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n($,-1,1)),Math.abs($)<.99999?(this._y=Math.atan2(s,u),this._z=Math.atan2(p,c)):(this._y=Math.atan2(-l,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-l,u),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(p,o))):"ZYX"===t?(this._y=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(h,u),this._z=Math.atan2(p,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(-$,c),this._y=Math.atan2(-l,o)):(this._x=0,this._y=Math.atan2(s,u))):"XZY"===t?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-$,u),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new da;return function(t,r,n){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new P;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new aa(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(bl.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var tA=0;function b(){Object.defineProperty(this,"id",{value:tA++}),this.uuid=ea.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=b.DefaultUp.clone();var e=new aa,t=new qd,r=new P,n=new aa(1,1,1);t.onChange(function(){r.setFromEuler(t,!1)}),r.onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new da},normalMatrix:{value:new Z}}),this.matrix=new da,this.matrixWorld=new da,this.matrixAutoUpdate=b.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new bl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}b.DefaultUp=new aa(0,1,0),b.DefaultMatrixAutoUpdate=!0,b.prototype=Object.assign(Object.create(hc.prototype),{constructor:b,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new P;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new P;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new aa(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new aa(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new aa(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new aa;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new aa(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new aa(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new aa(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new da;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new P,t=new da,r=new aa,n=new aa;return function(i,o,a){i.isVector3?r.copy(i):r.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(n,r,this.up):t.lookAt(r,n,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new aa),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new aa,t=new aa;return function(r){return void 0===r&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),r=new P),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldScale:function(){var e=new aa,t=new P;return function(r){return void 0===r&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),r=new aa),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new aa),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,i=0,o=n.length;i<o;i++)n[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function i(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,p=a.length;s<p;s++){var c=a[s];i(e.shapes,c)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var $=[];for(s=0,p=this.material.length;s<p;s++)$.push(i(e.materials,this.material[s]));n.material=$}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object)}if(t){var l=d(e.geometries),h=d(e.materials),u=d(e.textures),V=d(e.images);a=d(e.shapes);l.length>0&&(r.geometries=l),h.length>0&&(r.materials=h),u.length>0&&(r.textures=u),V.length>0&&(r.images=V),a.length>0&&(r.shapes=a)}return r.object=n,r;function d(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}});function v(){Object.defineProperty(this,"id",{value:2}),this.uuid=ea.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function w(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function eg(e,t,r){w.call(this,new Int8Array(e),t,r)}function dg(e,t,r){w.call(this,new Uint8Array(e),t,r)}function cg(e,t,r){w.call(this,new Uint8ClampedArray(e),t,r)}function bg(e,t,r){w.call(this,new Int16Array(e),t,r)}function hd(e,t,r){w.call(this,new Uint16Array(e),t,r)}function ag(e,t,r){w.call(this,new Int32Array(e),t,r)}function gd(e,t,r){w.call(this,new Uint32Array(e),t,r)}function k(e,t,r){w.call(this,new Float32Array(e),t,r)}function $f(e,t,r){w.call(this,new Float64Array(e),t,r)}function Iu(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ju(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}v.prototype=Object.assign(Object.create(hc.prototype),{constructor:v,isGeometry:!0,applyMatrix:function(e){for(var t=new Z().getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new da;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new da;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new da;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new da;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new da;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new b;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,n=e.attributes,i=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,p=void 0!==n.uv2?n.uv2.array:void 0;void 0!==p&&(this.faceVertexUvs[1]=[]);for(var c=0,$=0;c<i.length;c+=3,$+=2)t.vertices.push(new aa().fromArray(i,c)),void 0!==a&&t.colors.push(new z().fromArray(a,c));function l(e,r,n,i){var c=void 0===a?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()],$=new Lb(e,r,n,void 0===o?[]:[new aa().fromArray(o,3*e),new aa().fromArray(o,3*r),new aa().fromArray(o,3*n)],c,i);t.faces.push($),void 0!==s&&t.faceVertexUvs[0].push([new ba().fromArray(s,2*e),new ba().fromArray(s,2*r),new ba().fromArray(s,2*n)]),void 0!==p&&t.faceVertexUvs[1].push([new ba().fromArray(p,2*e),new ba().fromArray(p,2*r),new ba().fromArray(p,2*n)])}var h=e.groups;if(h.length>0)for(c=0;c<h.length;c++)for(var u=h[c],V=u.start,d=($=V,V+u.count);$<d;$+=3)void 0!==r?l(r[$],r[$+1],r[$+2],u.materialIndex):l($,$+1,$+2,u.materialIndex);else if(void 0!==r)for(c=0;c<r.length;c+=3)l(r[c],r[c+1],r[c+2]);else for(c=0;c<i.length/3;c+=3)l(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new aa;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new da;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new aa,t=new aa,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new aa;if(e){var s,p,c,$=new aa,l=new aa;for(n=0,i=this.faces.length;n<i;n++)o=this.faces[n],s=this.vertices[o.a],p=this.vertices[o.b],c=this.vertices[o.c],$.subVectors(c,p),l.subVectors(s,p),$.cross(l),a[o.a].add($),a[o.b].add($),a[o.c].add($)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var h=(o=this.faces[n]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(r=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new v;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)p=new aa,c={a:new aa,b:new aa,c:new aa},a.push(p),s.push(c)}var p,c,$=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],p=$.faceNormals[r],c=$.vertexNormals[r],p.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ic),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new cb),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,p=e.faces,c=this.faceVertexUvs[0],$=e.faceVertexUvs[0],l=this.colors,h=e.colors;void 0===r&&(r=0),void 0!==t&&(n=new Z().getNormalMatrix(t));for(var u=0,V=a.length;u<V;u++){var d=a[u].clone();void 0!==t&&d.applyMatrix4(t),o.push(d)}for(u=0,V=h.length;u<V;u++)l.push(h[u].clone());for(u=0,V=p.length;u<V;u++){var f,m,x,v=p[u],g=v.vertexNormals,y=v.vertexColors;(f=new Lb(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==n&&f.normal.applyMatrix3(n).normalize();for(var b=0,_=g.length;b<_;b++)m=g[b].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),f.vertexNormals.push(m);f.color.copy(v.color);for(b=0,_=y.length;b<_;b++)x=y[b],f.vertexColors.push(x.clone());f.materialIndex=v.materialIndex+r,s.push(f)}for(u=0,V=$.length;u<V;u++){var M=$[u],w=[];if(void 0!==M){for(b=0,_=M.length;b<_;b++)w.push(M[b].clone());c.push(w)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,n,i,o,a,s,p={},c=[],$=[],l=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===p[t=Math.round(e.x*l)+"_"+Math.round(e.y*l)+"_"+Math.round(e.z*l)]?(p[t]=r,c.push(this.vertices[r]),$[r]=c.length-1):$[r]=$[p[t]];var h=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=$[i.a],i.b=$[i.b],i.c=$[i.c],o=[i.a,i.b,i.c];for(var u=0;u<3;u++)if(o[u]===o[(u+1)%3]){h.push(r);break}}for(r=h.length-1;r>=0;r--){var V=h[r];for(this.faces.splice(V,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(V,1)}var d=this.vertices.length-c.length;return this.vertices=c,d},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new aa(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(n=[]),a&&a.length===t&&(i=[]);for(r=0;r<t;r++){var s=e[r]._id;n&&n.push(o[s]),i&&i.push(a[s])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];n.push(o.x,o.y,o.z)}var a=[],s=[],p={},c=[],$={},l=[],h={};for(i=0;i<this.faces.length;i++){var u=this.faces[i],V=void 0!==this.faceVertexUvs[0][i],d=u.normal.length()>0,f=u.vertexNormals.length>0,m=1!==u.color.r||1!==u.color.g||1!==u.color.b,x=u.vertexColors.length>0,v=0;if(v=_(v,0,0),v=_(v,1,!0),v=_(v,2,!1),v=_(v,3,V),v=_(v,4,d),v=_(v,5,f),v=_(v,6,m),v=_(v,7,x),a.push(v),a.push(u.a,u.b,u.c),a.push(u.materialIndex),V){var g=this.faceVertexUvs[0][i];a.push(S(g[0]),S(g[1]),S(g[2]))}if(d&&a.push(M(u.normal)),f){var y=u.vertexNormals;a.push(M(y[0]),M(y[1]),M(y[2]))}if(m&&a.push(w(u.color)),x){var b=u.vertexColors;a.push(w(b[0]),w(b[1]),w(b[2]))}}function _(e,t,r){return r?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==p[t]?p[t]:(p[t]=s.length/3,s.push(e.x,e.y,e.z),p[t])}function w(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==$[t]?$[t]:($[t]=c.length,c.push(e.getHex()),$[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]?h[t]:(h[t]=l.length/2,l.push(e.x,e.y),h[t])}return e.data={},e.data.vertices=n,e.data.normals=s,c.length>0&&(e.data.colors=c),l.length>0&&(e.data.uvs=[l]),e.data.faces=a,e},clone:function(){return new v().copy(this)},copy:function(e){var t,r,n,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var p=e.colors;for(t=0,r=p.length;t<r;t++)this.colors.push(p[t].clone());var c=e.faces;for(t=0,r=c.length;t<r;t++)this.faces.push(c[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var $=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=$.length;n<i;n++){var l=$[n],h=[];for(o=0,a=l.length;o<a;o++){var u=l[o];h.push(u.clone())}this.faceVertexUvs[t].push(h)}}var V=e.morphTargets;for(t=0,r=V.length;t<r;t++){var d={};if(d.name=V[t].name,void 0!==V[t].vertices)for(d.vertices=[],n=0,i=V[t].vertices.length;n<i;n++)d.vertices.push(V[t].vertices[n].clone());if(void 0!==V[t].normals)for(d.normals=[],n=0,i=V[t].normals.length;n<i;n++)d.normals.push(V[t].normals[n].clone());this.morphTargets.push(d)}var f=e.morphNormals;for(t=0,r=f.length;t<r;t++){var m={};if(void 0!==f[t].vertexNormals)for(m.vertexNormals=[],n=0,i=f[t].vertexNormals.length;n<i;n++){var x=f[t].vertexNormals[n],v={};v.a=x.a.clone(),v.b=x.b.clone(),v.c=x.c.clone(),m.vertexNormals.push(v)}if(void 0!==f[t].faceNormals)for(m.faceNormals=[],n=0,i=f[t].faceNormals.length;n<i;n++)m.faceNormals.push(f[t].faceNormals[n].clone());this.morphNormals.push(m)}var g=e.skinWeights;for(t=0,r=g.length;t<r;t++)this.skinWeights.push(g[t].clone());var y=e.skinIndices;for(t=0,r=y.length;t<r;t++)this.skinIndices.push(y[t].clone());var b=e.lineDistances;for(t=0,r=b.length;t<r;t++)this.lineDistances.push(b[t]);var _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(w.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(w.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new z),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new ba),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new aa),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new fa),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),eg.prototype=Object.create(w.prototype),eg.prototype.constructor=eg,dg.prototype=Object.create(w.prototype),dg.prototype.constructor=dg,cg.prototype=Object.create(w.prototype),cg.prototype.constructor=cg,bg.prototype=Object.create(w.prototype),bg.prototype.constructor=bg,hd.prototype=Object.create(w.prototype),hd.prototype.constructor=hd,ag.prototype=Object.create(w.prototype),ag.prototype.constructor=ag,gd.prototype=Object.create(w.prototype),gd.prototype.constructor=gd,k.prototype=Object.create(w.prototype),k.prototype.constructor=k,$f.prototype=Object.create(w.prototype),$f.prototype.constructor=$f,Object.assign(Iu.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,n=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,p=s.length;if(p>0){t=[];for(var c=0;c<p;c++)t[c]={name:s[c].name,data:[]};this.morphTargets.position=t}var $,l=e.morphNormals,h=l.length;if(h>0){$=[];for(c=0;c<h;c++)$[c]={name:l[c].name,data:[]};this.morphTargets.normal=$}var u=e.skinIndices,V=e.skinWeights,d=u.length===n.length,f=V.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<r.length;c++){var m=r[c];this.vertices.push(n[m.a],n[m.b],n[m.c]);var x=m.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var v=m.normal;this.normals.push(v,v,v)}var g,y=m.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{var b=m.color;this.colors.push(b,b,b)}if(!0===o)void 0!==(g=i[0][c])?this.uvs.push(g[0],g[1],g[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new ba,new ba,new ba));if(!0===a)void 0!==(g=i[1][c])?this.uvs2.push(g[0],g[1],g[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new ba,new ba,new ba));for(var _=0;_<p;_++){var M=s[_].vertices;t[_].data.push(M[m.a],M[m.b],M[m.c])}for(_=0;_<h;_++){var w=l[_].vertexNormals[c];$[_].data.push(w.a,w.b,w.c)}d&&this.skinIndices.push(u[m.a],u[m.b],u[m.c]),f&&this.skinWeights.push(V[m.a],V[m.b],V[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});function q(){Object.defineProperty(this,"id",{value:2}),this.uuid=ea.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Me(e,t,r,n,i,o){v.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Yc(e,t,r,n,i,o)),this.mergeVertices()}function Yc(e,t,r,n,i,o){q.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],p=[],c=[],$=[],l=0,h=0;function u(e,t,r,n,i,o,u,V,d,f,m){var x,v,g=o/d,y=u/f,b=o/2,_=u/2,M=V/2,w=d+1,S=f+1,T=0,E=0,L=new aa;for(v=0;v<S;v++){var A=v*y-_;for(x=0;x<w;x++){var C=x*g-b;L[e]=C*n,L[t]=A*i,L[r]=M,p.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[r]=V>0?1:-1,c.push(L.x,L.y,L.z),$.push(x/d),$.push(1-v/f),T+=1}}for(v=0;v<f;v++)for(x=0;x<d;x++){var P=l+x+w*v,B=l+x+w*(v+1),R=l+(x+1)+w*(v+1),G=l+(x+1)+w*v;s.push(P,B,G),s.push(B,R,G),E+=6}a.addGroup(h,E,m),h+=E,l+=T}u("z","y","x",-1,-1,r,t,e,o,i,0),u("z","y","x",1,-1,r,t,-e,o,i,1),u("x","z","y",1,1,e,r,t,n,o,2),u("x","z","y",1,-1,e,r,-t,n,o,3),u("x","y","z",1,-1,e,t,r,n,i,4),u("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.addAttribute("position",new k(p,3)),this.addAttribute("normal",new k(c,3)),this.addAttribute("uv",new k($,2))}function Xf(e,t,r,n){v.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new Rc(e,t,r,n)),this.mergeVertices()}function Rc(e,t,r,n){q.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,p=Math.floor(r)||1,c=Math.floor(n)||1,$=p+1,l=c+1,h=e/p,u=t/c,V=[],d=[],f=[],m=[];for(o=0;o<l;o++){var x=o*u-s;for(i=0;i<$;i++){var v=i*h-a;d.push(v,-x,0),f.push(0,0,1),m.push(i/p),m.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<p;i++){var g=i+$*o,y=i+$*(o+1),b=i+1+$*(o+1),_=i+1+$*o;V.push(g,y,_),V.push(y,b,_)}this.setIndex(V),this.addAttribute("position",new k(d,3)),this.addAttribute("normal",new k(f,3)),this.addAttribute("uv",new k(m,2))}q.prototype=Object.assign(Object.create(hc.prototype),{constructor:q,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Ju(e)>65535?gd:hd)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new w(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;void 0!==r&&(new Z().getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new da;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new da;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new da;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new da;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new da;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new b;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new aa;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new k(3*t.vertices.length,3),n=new k(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new k(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new k(t,3)),this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Iu().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new w(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new w(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new w(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new w(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new w(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],p=e.morphTargets[a],c=0,$=p.length;c<$;c++){var l=p[c],h=new k(3*l.data.length,3);h.name=l.name,s.push(h.copyVector3sArray(l.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var u=new k(4*e.skinIndices.length,4);this.addAttribute("skinIndex",u.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var V=new k(4*e.skinWeights.length,4);this.addAttribute("skinWeight",V.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ic);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var e=new ic,t=new aa;return function(){null===this.boundingSphere&&(this.boundingSphere=new cb);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(n);for(var i=0,o=0,a=r.count;o<a;o++)t.x=r.getX(o),t.y=r.getY(o),t.z=r.getZ(o),i=Math.max(i,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new w(new Float32Array(r.length),3));else for(var n=t.normal.array,i=0,o=n.length;i<o;i++)n[i]=0;var a,s,p,c=t.normal.array,$=new aa,l=new aa,h=new aa,u=new aa,V=new aa;if(e){var d=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*d[i+0],s=3*d[i+1],p=3*d[i+2],$.fromArray(r,a),l.fromArray(r,s),h.fromArray(r,p),u.subVectors(h,l),V.subVectors($,l),u.cross(V),c[a]+=u.x,c[a+1]+=u.y,c[a+2]+=u.z,c[s]+=u.x,c[s+1]+=u.y,c[s+2]+=u.z,c[p]+=u.x,c[p+1]+=u.y,c[p+2]+=u.z}else for(i=0,o=r.length;i<o;i+=9)$.fromArray(r,i),l.fromArray(r,i+3),h.fromArray(r,i+6),u.subVectors(h,l),V.subVectors($,l),u.cross(V),c[i]=u.x,c[i+1]=u.y,c[i+2]=u.z,c[i+3]=u.x,c[i+4]=u.y,c[i+5]=u.z,c[i+6]=u.x,c[i+7]=u.y,c[i+8]=u.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,o=e.attributes[n],a=o.array,s=0,p=o.itemSize*t;s<a.length;s++,p++)i[p]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new aa;return function(){for(var t=this.attributes.normal,r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.normalize(),t.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new q,t=this.index.array,r=this.attributes;for(var n in r){for(var i=r[n],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),p=0,c=0,$=0,l=t.length;$<l;$++){p=t[$]*a;for(var h=0;h<a;h++)s[c++]=o[p++]}e.addAttribute(n,new w(s,a))}var u=this.groups;for($=0,l=u.length;$<l;$++){var V=u[$];e.addGroup(V.start,V.count,V.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var o=this.attributes;for(var r in o){var a=o[r];i=Array.prototype.slice.call(a.array);e.data.attributes[r]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var p=this.boundingSphere;return null!==p&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e},clone:function(){return new q().copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var p=[],c=s[t];for(r=0,n=c.length;r<n;r++)p.push(c[r].clone());this.morphAttributes[t]=p}var $=e.groups;for(r=0,n=$.length;r<n;r++){var l=$[r];this.addGroup(l.start,l.count,l.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Me.prototype=Object.create(v.prototype),Me.prototype.constructor=Me,Yc.prototype=Object.create(q.prototype),Yc.prototype.constructor=Yc,Xf.prototype=Object.create(v.prototype),Xf.prototype.constructor=Xf,Rc.prototype=Object.create(q.prototype),Rc.prototype.constructor=Rc;var sA=0;function u(){Object.defineProperty(this,"id",{value:sA++}),this.uuid=ea.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ld,this.side=of,this.flatShading=!1,this.vertexColors=dm,this.opacity=1,this.transparent=!1,this.blendSrc=rl,this.blendDst=Nl,this.blendEquation=kd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Vh,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function Sa(e){u.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Ld(e,t){this.origin=void 0!==e?e:new aa,this.direction=void 0!==t?t:new aa}function ia(e,t,r){this.a=void 0!==e?e:new aa,this.b=void 0!==t?t:new aa,this.c=void 0!==r?r:new aa}function Ua(e){u.call(this),this.type="MeshBasicMaterial",this.color=new z(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ph,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Fa(e,t){b.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new q,this.material=void 0!==t?t:new Ua({color:16777215*Math.random()}),this.drawMode=xl,this.updateMorphTargets()}function rA(e,t,r,n){var i,o,a=new z(0),s=0;function p(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),p(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){p(a,s=e)},render:function(t,n,c,$){var l=n.background;null===l?p(a,s):l&&l.isColor&&(p(l,1),$=!0),(e.autoClear||$)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),l&&(l.isCubeTexture||l.isWebGLRenderTargetCube)?(void 0===o&&((o=new Fa(new Yc(1,1,1),new Sa({type:"BackgroundCubeMaterial",uniforms:ga.clone(Cb.cube.uniforms),vertexShader:Cb.cube.vertexShader,fragmentShader:Cb.cube.fragmentShader,side:ha,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},r.update(o)),o.material.uniforms.tCube.value=l.isWebGLRenderTargetCube?l.texture:l,o.material.uniforms.tFlip.value=l.isWebGLRenderTargetCube?1:-1,t.push(o,o.geometry,o.material,0,null)):l&&l.isTexture&&(void 0===i&&((i=new Fa(new Rc(2,2),new Sa({type:"BackgroundMaterial",uniforms:ga.clone(Cb.background.uniforms),vertexShader:Cb.background.vertexShader,fragmentShader:Cb.background.fragmentShader,side:of,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),r.update(i)),i.material.uniforms.t2D.value=l,!0===l.matrixAutoUpdate&&l.updateMatrix(),i.material.uniforms.uvTransform.value.copy(l.matrix),t.push(i,i.geometry,i.material,0,null))}}}function oA(e,t,r,n){var i;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.update(n,i)},this.renderInstances=function(o,a,s){var p;if(n.isWebGL2)p=e;else if(null===(p=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),r.update(s,i,o.maxInstancedCount)}}function nA(e,t,r){var n;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==r.precision?r.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var p=!0===r.logarithmicDepthBuffer,c=e.getParameter(34930),$=e.getParameter(35660),l=e.getParameter(3379),h=e.getParameter(34076),u=e.getParameter(34921),V=e.getParameter(36347),d=e.getParameter(36348),f=e.getParameter(36349),m=$>0,x=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==n)return n;var r=t.get("EXT_texture_filter_anisotropic");return n=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:p,maxTextures:c,maxVertexTextures:$,maxTextureSize:l,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:V,maxVaryings:d,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:x,floatVertexTextures:m&&x}}function mA(){var e=this,t=null,r=0,n=!1,i=!1,o=new Db,a=new Z,s={value:null,needsUpdate:!1};function p(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(t,r,n,i){var p=null!==t?t.length:0,c=null;if(0!==p){if(c=s.value,!0!==i||null===c){var $=n+4*p,l=r.matrixWorldInverse;a.getNormalMatrix(l),(null===c||c.length<$)&&(c=new Float32Array($));for(var h=0,u=n;h!==p;++h,u+=4)o.copy(t[h]).applyMatrix4(l,a),o.normal.toArray(c,u),c[u+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=p,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==r||n;return n=i,t=c(e,o,0),r=e.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,p()},this.setState=function(e,o,a,$,l,h){if(!n||null===e||0===e.length||i&&!a)i?c(null):p();else{var u=i?0:r,V=4*u,d=l.clippingState||null;s.value=d,d=c(e,$,V,h);for(var f=0;f!==V;++f)d[f]=t[f];l.clippingState=d,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=u}}}function lA(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r);}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function kA(e,t,r){var n={},i={};function o(e){var a=e.target,s=n[a.id];for(var p in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[p]);a.removeEventListener("dispose",o),delete n[a.id];var c=i[s.id];c&&(t.remove(c),delete i[s.id]),r.memory.geometries--}return{get:function(e,t){var i=n[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new q().setFromObject(e)),i=t._bufferGeometry),n[t.id]=i,r.memory.geometries++,i)},update:function(e){var r=e.index,n=e.attributes;for(var i in null!==r&&t.update(r,34963),n)t.update(n[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,p=a.length;s<p;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var r=i[e.id];if(r)return r;var n,o=[],a=e.index,s=e.attributes;if(null!==a)for(var p=0,c=(n=a.array).length;p<c;p+=3){var $=n[p+0],l=n[p+1],h=n[p+2];o.push($,l,l,h,h,$)}else for(p=0,c=(n=s.position.array).length/3-1;p<c;p+=3)$=p+0,l=p+1,h=p+2,o.push($,l,l,h,h,$);return r=new(Ju(o)>65535?gd:hd)(o,1),t.update(r,34963),i[e.id]=r,r}}}function iA(e,t,r,n){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,n){e.drawElements(i,n,o,t*a),r.update(n,i)},this.renderInstances=function(s,p,c){var $;if(n.isWebGL2)$=e;else if(null===($=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");$[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,c,o,p*a,s.maxInstancedCount),r.update(c,i,s.maxInstancedCount)}}function hA(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,r,n){switch(n=n||1,t.calls++,r){case 4:t.triangles+=n*(e/3);break;case 5:case 6:t.triangles+=n*(e-2);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);}}}}function gA(e,t){return Math.abs(t[1])-Math.abs(e[1])}function fA(e){var t={},r=new Float32Array(8);return{update:function(n,i,o,a){var s=n.morphTargetInfluences,p=s.length,c=t[i.id];if(void 0===c){c=[];for(var $=0;$<p;$++)c[$]=[$,0];t[i.id]=c}var l=o.morphTargets&&i.morphAttributes.position,h=o.morphNormals&&i.morphAttributes.normal;for($=0;$<p;$++)0!==(u=c[$])[1]&&(l&&i.removeAttribute("morphTarget"+$),h&&i.removeAttribute("morphNormal"+$));for($=0;$<p;$++)(u=c[$])[0]=$,u[1]=s[$];for(c.sort(gA),$=0;$<8;$++){var u;if(u=c[$]){var V=u[0],d=u[1];if(d){l&&i.addAttribute("morphTarget"+$,l[V]),h&&i.addAttribute("morphNormal"+$,h[V]),r[$]=d;continue}}r[$]=0}a.getUniforms().setValue(e,"morphTargetInfluences",r)}}}function eA(e,t){var r={};return{update:function(n){var i=t.render.frame,o=n.geometry,a=e.get(n,o);return r[a.id]!==i&&(o.isGeometry&&a.updateFromObject(n),e.update(a),r[a.id]=i),a},dispose:function(){r={}}}}function _b(e,t,r,n,i,o,a,s,p,c){e=void 0!==e?e:[],t=void 0!==t?t:Yh,H.call(this,e,t,r,n,i,o,a,s,p,c),this.flipY=!1}function Ge(e,t,r,n){H.call(this,null),this.image={data:e,width:t,height:r,depth:n},this.magFilter=qa,this.minFilter=qa,this.generateMipmaps=!1,this.flipY=!1}u.prototype=Object.assign(Object.create(hc.prototype),{constructor:u,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===$l;}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ld&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==of&&(r.side=this.side),this.vertexColors!==dm&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){var i=n(e.textures),o=n(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Sa.prototype=Object.create(u.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isShaderMaterial=!0,Sa.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ga.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Sa.prototype.toJSON=function(e){var t=u.prototype.toJSON.call(this,e);for(var r in t.uniforms={},this.uniforms){var n=this.uniforms[r].value;n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}return Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Ld.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new aa),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new aa;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new aa),t.subVectors(e,this.origin);var r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new aa;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new aa,t=new aa,r=new aa;return function(n,i,o,a){e.copy(n).add(i).multiplyScalar(.5),t.copy(i).sub(n).normalize(),r.copy(this.origin).sub(e);var s,p,c,$,l=.5*n.distanceTo(i),h=-this.direction.dot(t),u=r.dot(this.direction),V=-r.dot(t),d=r.lengthSq(),f=Math.abs(1-h*h);if(f>0){if(p=h*u-V,$=l*f,(s=h*V-u)>=0){if(p>=-$){if(p<=$){var m=1/f;c=(s*=m)*(s+h*(p*=m)+2*u)+p*(h*s+p+2*V)+d}else p=l,c=-(s=Math.max(0,-(h*p+u)))*s+p*(p+2*V)+d;}else p=-l,c=-(s=Math.max(0,-(h*p+u)))*s+p*(p+2*V)+d;}else p<=-$?c=-(s=Math.max(0,-(-h*l+u)))*s+(p=s>0?-l:Math.min(Math.max(-l,-V),l))*(p+2*V)+d:p<=$?(s=0,c=(p=Math.min(Math.max(-l,-V),l))*(p+2*V)+d):c=-(s=Math.max(0,-(h*l+u)))*s+(p=s>0?l:Math.min(Math.max(-l,-V),l))*(p+2*V)+d;}else p=h>0?-l:l,c=-(s=Math.max(0,-(h*p+u)))*s+p*(p+2*V)+d;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(p).add(e),c}}(),intersectSphere:function(){var e=new aa;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=n-a,p=n+a;return s<0&&p<0?null:s<0?this.at(p,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,o,a,s,p=1/this.direction.x,c=1/this.direction.y,$=1/this.direction.z,l=this.origin;return p>=0?(r=(e.min.x-l.x)*p,n=(e.max.x-l.x)*p):(r=(e.max.x-l.x)*p,n=(e.min.x-l.x)*p),c>=0?(i=(e.min.y-l.y)*c,o=(e.max.y-l.y)*c):(i=(e.max.y-l.y)*c,o=(e.min.y-l.y)*c),r>o||i>n?null:((i>r||r!=r)&&(r=i),(o<n||n!=n)&&(n=o),$>=0?(a=(e.min.z-l.z)*$,s=(e.max.z-l.z)*$):(a=(e.max.z-l.z)*$,s=(e.min.z-l.z)*$),r>s||a>n?null:((a>r||r!=r)&&(r=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(){var e=new aa;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new aa,t=new aa,r=new aa,n=new aa;return function(i,o,a,s,p){t.subVectors(o,i),r.subVectors(a,i),n.crossVectors(t,r);var c,$=this.direction.dot(n);if($>0){if(s)return null;c=1}else{if(!($<0))return null;c=-1,$=-$}e.subVectors(this.origin,i);var l=c*this.direction.dot(r.crossVectors(e,r));if(l<0)return null;var h=c*this.direction.dot(t.cross(e));if(h<0)return null;if(l+h>$)return null;var u=-c*e.dot(n);return u<0?null:this.at(u/$,p)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(ia,{getNormal:function(){var e=new aa;return function(t,r,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new aa),i.subVectors(n,r),e.subVectors(t,r),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new aa,t=new aa,r=new aa;return function(n,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),r.subVectors(n,i);var p=e.dot(e),c=e.dot(t),$=e.dot(r),l=t.dot(t),h=t.dot(r),u=p*l-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new aa),0===u)return s.set(-2,-1,-1);var V=1/u,d=(l*$-c*h)*V,f=(p*h-c*$)*V;return s.set(1-d-f,f,d)}}(),containsPoint:function(){var e=new aa;return function(t,r,n,i){return ia.getBarycoord(t,r,n,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new aa;return function(t,r,n,i,o,a,s,p){return this.getBarycoord(t,r,n,i,e),p.set(0,0),p.addScaledVector(o,e.x),p.addScaledVector(a,e.y),p.addScaledVector(s,e.z),p}}()}),Object.assign(ia.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new aa,t=new aa;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new aa),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ia.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new aa),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ia.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ia.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,r,n,i){return ia.getUV(e,this.a,this.b,this.c,t,r,n,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new aa,t=new aa,r=new aa,n=new aa,i=new aa,o=new aa;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new aa);var p,c,$=this.a,l=this.b,h=this.c;e.subVectors(l,$),t.subVectors(h,$),n.subVectors(a,$);var u=e.dot(n),V=t.dot(n);if(u<=0&&V<=0)return s.copy($);i.subVectors(a,l);var d=e.dot(i),f=t.dot(i);if(d>=0&&f<=d)return s.copy(l);var m=u*f-d*V;if(m<=0&&u>=0&&d<=0)return p=u/(u-d),s.copy($).addScaledVector(e,p);o.subVectors(a,h);var x=e.dot(o),v=t.dot(o);if(v>=0&&x<=v)return s.copy(h);var g=x*V-u*v;if(g<=0&&V>=0&&v<=0)return c=V/(V-v),s.copy($).addScaledVector(t,c);var y=d*v-x*f;if(y<=0&&f-d>=0&&x-v>=0)return r.subVectors(h,l),c=(f-d)/(f-d+(x-v)),s.copy(l).addScaledVector(r,c);var b=1/(y+g+m);return p=g*b,c=m*b,s.copy($).addScaledVector(e,p).addScaledVector(t,c)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Ua.prototype=Object.create(u.prototype),Ua.prototype.constructor=Ua,Ua.prototype.isMeshBasicMaterial=!0,Ua.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Fa.prototype=Object.assign(Object.create(b.prototype),{constructor:Fa,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return b.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)r=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}},raycast:function(){var e=new da,t=new Ld,r=new cb,n=new aa,i=new aa,o=new aa,a=new aa,s=new aa,p=new aa,c=new ba,$=new ba,l=new ba,h=new aa,u=new aa;function V(e,t,r,n,i,o,a,s){if(null===(t.side===ha?n.intersectTriangle(a,o,i,!0,s):n.intersectTriangle(i,o,a,t.side!==nf,s)))return null;u.copy(s),u.applyMatrix4(e.matrixWorld);var p=r.ray.origin.distanceTo(u);return p<r.near||p>r.far?null:{distance:p,point:u.clone(),object:e}}function d(e,t,r,a,s,p,u,d,f){n.fromBufferAttribute(s,u),i.fromBufferAttribute(s,d),o.fromBufferAttribute(s,f);var m=V(e,t,r,a,n,i,o,h);if(m){p&&(c.fromBufferAttribute(p,u),$.fromBufferAttribute(p,d),l.fromBufferAttribute(p,f),m.uv=ia.getUV(h,n,i,o,c,$,l,new ba));var x=new Lb(u,d,f);ia.getNormal(n,i,o,x.normal),m.face=x}return m}return function(u,f){var m,x=this.geometry,v=this.material,g=this.matrixWorld;if(void 0!==v&&(null===x.boundingSphere&&x.computeBoundingSphere(),r.copy(x.boundingSphere),r.applyMatrix4(g),!1!==u.ray.intersectsSphere(r)&&(e.getInverse(g),t.copy(u.ray).applyMatrix4(e),null===x.boundingBox||!1!==t.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var y,b,_,M,w,S,T,E,L,A=x.index,C=x.attributes.position,P=x.attributes.uv,B=x.groups,R=x.drawRange;if(null!==A){if(Array.isArray(v))for(M=0,S=B.length;M<S;M++)for(L=v[(E=B[M]).materialIndex],w=Math.max(E.start,R.start),T=Math.min(E.start+E.count,R.start+R.count);w<T;w+=3)y=A.getX(w),b=A.getX(w+1),_=A.getX(w+2),(m=d(this,L,u,t,C,P,y,b,_))&&(m.faceIndex=Math.floor(w/3),f.push(m));else for(M=Math.max(0,R.start),S=Math.min(A.count,R.start+R.count);M<S;M+=3)y=A.getX(M),b=A.getX(M+1),_=A.getX(M+2),(m=d(this,v,u,t,C,P,y,b,_))&&(m.faceIndex=Math.floor(M/3),f.push(m));}else if(void 0!==C)if(Array.isArray(v))for(M=0,S=B.length;M<S;M++)for(L=v[(E=B[M]).materialIndex],w=Math.max(E.start,R.start),T=Math.min(E.start+E.count,R.start+R.count);w<T;w+=3)(m=d(this,L,u,t,C,P,y=w,b=w+1,_=w+2))&&(m.faceIndex=Math.floor(w/3),f.push(m));else for(M=Math.max(0,R.start),S=Math.min(C.count,R.start+R.count);M<S;M+=3)(m=d(this,v,u,t,C,P,y=M,b=M+1,_=M+2))&&(m.faceIndex=Math.floor(M/3),f.push(m))}else if(x.isGeometry){var G,D,I,O,F=Array.isArray(v),U=x.vertices,N=x.faces,z=x.faceVertexUvs[0];z.length>0&&(O=z);for(var H=0,k=N.length;H<k;H++){var j=N[H],W=F?v[j.materialIndex]:v;if(void 0!==W){if(G=U[j.a],D=U[j.b],I=U[j.c],!0===W.morphTargets){var q=x.morphTargets,X=this.morphTargetInfluences;n.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var Y=0,J=q.length;Y<J;Y++){var Z=X[Y];if(0!==Z){var Q=q[Y].vertices;n.addScaledVector(a.subVectors(Q[j.a],G),Z),i.addScaledVector(s.subVectors(Q[j.b],D),Z),o.addScaledVector(p.subVectors(Q[j.c],I),Z)}}n.add(G),i.add(D),o.add(I),G=n,D=i,I=o}if(m=V(this,W,u,t,G,D,I,h)){if(O&&O[H]){var K=O[H];c.copy(K[0]),$.copy(K[1]),l.copy(K[2]),m.uv=ia.getUV(h,G,D,I,c,$,l,new ba)}m.face=j,m.faceIndex=H,f.push(m)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_b.prototype=Object.create(H.prototype),_b.prototype.constructor=_b,_b.prototype.isCubeTexture=!0,Object.defineProperty(_b.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Ge.prototype=Object.create(H.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isDataTexture3D=!0;var hv=new H,dA=new Ge,jv=new _b;function kv(){this.seq=[],this.map={}}var lv=[],mv=[],nv=new Float32Array(16),ov=new Float32Array(9),pv=new Float32Array(4);function Fe(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,o=lv[i];if(void 0===o&&(o=new Float32Array(i),lv[i]=o),0!==t){n.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function M(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function W(e,t){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}function tv(e,t){var r=mv[t];void 0===r&&(r=new Int32Array(t),mv[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function cA(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function bA(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function aA(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(M(r,t))return;e.uniform2fv(this.addr,t),W(r,t)}}function _z(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)r[0]===t.r&&r[1]===t.g&&r[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(M(r,t))return;e.uniform3fv(this.addr,t),W(r,t)}}function $z(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z&&r[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(M(r,t))return;e.uniform4fv(this.addr,t),W(r,t)}}function Zz(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(M(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),W(r,t)}else{if(M(r,n))return;pv.set(n),e.uniformMatrix2fv(this.addr,!1,pv),W(r,n)}}function Yz(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(M(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),W(r,t)}else{if(M(r,n))return;ov.set(n),e.uniformMatrix3fv(this.addr,!1,ov),W(r,n)}}function Xz(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(M(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),W(r,t)}else{if(M(r,n))return;nv.set(n),e.uniformMatrix4fv(this.addr,!1,nv),W(r,n)}}function Wz(e,t,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2D(t||hv,i)}function Vz(e,t,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||dA,i)}function Uz(e,t,r){var n=this.cache,i=r.allocTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(t||jv,i)}function Fv(e,t){var r=this.cache;M(r,t)||(e.uniform2iv(this.addr,t),W(r,t))}function Gv(e,t){var r=this.cache;M(r,t)||(e.uniform3iv(this.addr,t),W(r,t))}function Hv(e,t){var r=this.cache;M(r,t)||(e.uniform4iv(this.addr,t),W(r,t))}function Tz(e){switch(e){case 5126:return cA;case 35664:return aA;case 35665:return _z;case 35666:return $z;case 35674:return Zz;case 35675:return Yz;case 35676:return Xz;case 35678:case 36198:return Wz;case 35679:return Vz;case 35680:return Uz;case 5124:case 35670:return bA;case 35667:case 35671:return Fv;case 35668:case 35672:return Gv;case 35669:case 35673:return Hv;}}function Sz(e,t){var r=this.cache;M(r,t)||(e.uniform1fv(this.addr,t),W(r,t))}function Rz(e,t){var r=this.cache;M(r,t)||(e.uniform1iv(this.addr,t),W(r,t))}function Qz(e,t){var r=this.cache,n=Fe(t,this.size,2);M(r,n)||(e.uniform2fv(this.addr,n),this.updateCache(n))}function Pz(e,t){var r=this.cache,n=Fe(t,this.size,3);M(r,n)||(e.uniform3fv(this.addr,n),this.updateCache(n))}function Oz(e,t){var r=this.cache,n=Fe(t,this.size,4);M(r,n)||(e.uniform4fv(this.addr,n),this.updateCache(n))}function Nz(e,t){var r=this.cache,n=Fe(t,this.size,4);M(r,n)||(e.uniformMatrix2fv(this.addr,!1,n),this.updateCache(n))}function Mz(e,t){var r=this.cache,n=Fe(t,this.size,9);M(r,n)||(e.uniformMatrix3fv(this.addr,!1,n),this.updateCache(n))}function Lz(e,t){var r=this.cache,n=Fe(t,this.size,16);M(r,n)||(e.uniformMatrix4fv(this.addr,!1,n),this.updateCache(n))}function Kz(e,t,r){var n=this.cache,i=t.length,o=tv(r,i);!1===M(n,o)&&(e.uniform1iv(this.addr,o),W(n,o));for(var a=0;a!==i;++a)r.setTexture2D(t[a]||hv,o[a])}function Jz(e,t,r){var n=this.cache,i=t.length,o=tv(r,i);!1===M(n,o)&&(e.uniform1iv(this.addr,o),W(n,o));for(var a=0;a!==i;++a)r.setTextureCube(t[a]||jv,o[a])}function Iz(e){switch(e){case 5126:return Sz;case 35664:return Qz;case 35665:return Pz;case 35666:return Oz;case 35674:return Nz;case 35675:return Mz;case 35676:return Lz;case 35678:return Kz;case 35680:return Jz;case 5124:case 35670:return Rz;case 35667:case 35671:return Fv;case 35668:case 35672:return Gv;case 35669:case 35673:return Hv;}}function Hz(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Tz(t.type)}function Vv(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Iz(t.type)}function Wv(e){this.id=e,kv.call(this)}Vv.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),W(t,e)},Wv.prototype.setValue=function(e,t,r){for(var n=this.seq,i=0,o=n.length;i!==o;++i){var a=n[i];a.setValue(e,t[a.id],r)}};var im=/([\w\d_]+)(\])?(\[|\.)?/g;function Yv(e,t){e.seq.push(t),e.map[t.id]=t}function Gz(e,t,r){var n=e.name,i=n.length;for(im.lastIndex=0;;){var o=im.exec(n),a=im.lastIndex,s=o[1],p="]"===o[2],c=o[3];if(p&&(s|=0),void 0===c||"["===c&&a+2===i){Yv(r,void 0===c?new Hz(s,e,t):new Vv(s,e,t));break}var $=r.map[s];void 0===$&&Yv(r,$=new Wv(s)),r=$}}function uc(e,t,r){kv.call(this),this.renderer=r;for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var o=e.getActiveUniform(t,i);Gz(o,e.getUniformLocation(t,o.name),this)}}function Bz(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function aw(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),!1===e.getShaderParameter(n,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(n),Bz(r)),n}uc.prototype.setValue=function(e,t,r){var n=this.map[t];void 0!==n&&n.setValue(e,r,this.renderer)},uc.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},uc.upload=function(e,t,r,n){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}},uc.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var o=e[n];o.id in t&&r.push(o)}return r};var xz=0;function cw(e){switch(e){case ah:return["Linear","( value )"];case zr:return["sRGB","( value )"];case Br:return["RGBE","( value )"];case Dr:return["RGBM","( value, 7.0 )"];case Er:return["RGBM","( value, 16.0 )"];case Fr:return["RGBD","( value, 256.0 )"];case Il:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e);}}function xj(e,t){var r=cw(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function wz(e,t){var r=cw(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function vz(e,t){var r;switch(t){case Vl:r="Linear";break;case cq:r="Reinhard";break;case dq:r="Uncharted2";break;case eq:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t);}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function uz(e,t,r){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zf).join("\n")}function tz(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function sz(e,t){for(var r={},n=e.getProgramParameter(t,35721),i=0;i<n;i++){var o=e.getActiveAttrib(t,i).name;r[o]=e.getAttribLocation(t,o)}return r}function zf(e){return""!==e}function kw(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function lw(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function tm(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,t){var r=B[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return tm(r)})}function nw(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,r,n){for(var i="",o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function rz(e,t,r,n,i,o,a){var s=e.context,p=n.defines,c=i.vertexShader,$=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";o.shadowMapType===hl?l="SHADOWMAP_TYPE_PCF":o.shadowMapType===mp&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",V="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case Yh:case Zh:h="ENVMAP_TYPE_CUBE";break;case _h:case ai:h="ENVMAP_TYPE_CUBE_UV";break;case gm:case $h:h="ENVMAP_TYPE_EQUIREC";break;case Dm:h="ENVMAP_TYPE_SPHERE";}switch(n.envMap.mapping){case Zh:case $h:u="ENVMAP_MODE_REFRACTION";}switch(n.combine){case ph:V="ENVMAP_BLENDING_MULTIPLY";break;case $p:V="ENVMAP_BLENDING_MIX";break;case _p:V="ENVMAP_BLENDING_ADD";}}var d,f,m=e.gammaFactor>0?e.gammaFactor:1,x=a.isWebGL2?"":uz(n.extensions,o,t),v=tz(p),g=s.createProgram();if(n.isRawShaderMaterial?((d=[v].filter(zf).join("\n")).length>0&&(d+="\n"),(f=[x,v].filter(zf).join("\n")).length>0&&(f+="\n")):(d=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,v,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+u:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zf).join("\n"),f=[x,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,v,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+u:"",o.envMap?"#define "+V:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Wh?"#define TONE_MAPPING":"",o.toneMapping!==Wh?B.tonemapping_pars_fragment:"",o.toneMapping!==Wh?vz("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?B.encodings_pars_fragment:"",o.mapEncoding?xj("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?xj("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?xj("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?xj("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?wz("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(zf).join("\n")),c=lw(c=kw(c=tm(c),o),o),$=lw($=kw($=tm($),o),o),c=nw(c),$=nw($),a.isWebGL2&&!n.isRawShaderMaterial){var y=!1,b=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==c.match(b)&&null!==$.match(b)&&(y=!0,c=c.replace(b,""),$=$.replace(b,"")),d=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+d,f=["#version 300 es\n","#define varying in",y?"":"out highp vec4 pc_fragColor;",y?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+f}var _=f+$,M=aw(s,35633,d+c),w=aw(s,35632,_);s.attachShader(g,M),s.attachShader(g,w),void 0!==n.index0AttributeName?s.bindAttribLocation(g,0,n.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(g,0,"position"),s.linkProgram(g);var S,T,E=s.getProgramInfoLog(g).trim(),L=s.getShaderInfoLog(M).trim(),A=s.getShaderInfoLog(w).trim(),C=!0,P=!0;return!1===s.getProgramParameter(g,35714)?(C=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(g,35715),"gl.getProgramInfoLog",E,L,A)):""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==L&&""!==A||(P=!1),P&&(this.diagnostics={runnable:C,material:n,programLog:E,vertexShader:{log:L,prefix:d},fragmentShader:{log:A,prefix:f}}),s.deleteShader(M),s.deleteShader(w),this.getUniforms=function(){return void 0===S&&(S=new uc(s,g,e)),S},this.getAttributes=function(){return void 0===T&&(T=sz(s,g)),T},this.destroy=function(){s.deleteProgram(g),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=xz++,this.code=r,this.usedTimes=1,this.program=g,this.vertexShader=M,this.fragmentShader=w,this}function qz(e,t,r){var n=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=ah,r===ah&&t&&(r=Il),r}this.getParameters=function(t,n,o,s,p,c,$){var l=i[t.type],h=$.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(r.floatVertexTextures)return 1024;var n=r.maxVertexUniforms,i=Math.floor((n-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}($):0,u=r.precision;null!==t.precision&&(u=r.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",u,"instead.");var V=e.getRenderTarget();return{shaderID:l,precision:u,supportsVertexTextures:r.vertexTextures,outputEncoding:a(V?V.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:a(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===_h||t.envMap.mapping===ai),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Jr,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:r.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:p,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&$.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===nf,flipSided:t.side===ha,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,r){var n=[];if(r.shaderID?n.push(r.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(var a=0;a<o.length;a++)n.push(r[o[a]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.push(e.gammaFactor),n.join()},this.acquireProgram=function(i,o,a,s){for(var p,c=0,$=n.length;c<$;c++){var l=n[c];if(l.code===s){++(p=l).usedTimes;break}}return void 0===p&&(p=new rz(e,t,s,i,o,a,r),n.push(p)),p},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function pz(){var e=new WeakMap;return{get:function(t){var r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,n){e.get(t)[r]=n},dispose:function(){e=new WeakMap}}}function oz(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function nz(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function mz(){var e=[],t=0,r=[],n=[];return{opaque:r,transparent:n,init:function(){t=0,r.length=0,n.length=0},push:function(i,o,a,s,p){var c=e[t];void 0===c?(c={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:p},e[t]=c):(c.id=i.id,c.object=i,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=i.renderOrder,c.z=s,c.group=p),(!0===a.transparent?n:r).push(c),t++},sort:function(){r.length>1&&r.sort(oz),n.length>1&&n.sort(nz)}}}function lz(){var e={};return{get:function(t,r){var n=t.id+","+r.id,i=e[n];return void 0===i&&(i=new mz,e[n]=i),i},dispose:function(){e={}}}}function kz(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new aa,color:new z,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ba};break;case"SpotLight":r={position:new aa,direction:new aa,color:new z,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ba};break;case"PointLight":r={position:new aa,color:new z,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ba,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new aa,skyColor:new z,groundColor:new z};break;case"RectAreaLight":r={color:new z,position:new aa,halfWidth:new aa,halfHeight:new aa};}return e[t.id]=r,r}}}var jz=0;function iz(){var e=new kz,t={id:jz++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new aa,n=new da,i=new da;return{setup:function(o,a,s){for(var p=0,c=0,$=0,l=0,h=0,u=0,V=0,d=0,f=s.matrixWorldInverse,m=0,x=o.length;m<x;m++){var v=o[m],g=v.color,y=v.intensity,b=v.distance,_=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)p+=g.r*y,c+=g.g*y,$+=g.b*y;else if(v.isDirectionalLight){if((w=e.get(v)).color.copy(v.color).multiplyScalar(v.intensity),w.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(f),w.shadow=v.castShadow,v.castShadow){var M=v.shadow;w.shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize}t.directionalShadowMap[l]=_,t.directionalShadowMatrix[l]=v.shadow.matrix,t.directional[l]=w,l++}else if(v.isSpotLight)(w=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(f),w.color.copy(g).multiplyScalar(y),w.distance=b,w.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(f),w.coneCos=Math.cos(v.angle),w.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),w.decay=v.decay,w.shadow=v.castShadow,v.castShadow&&(M=v.shadow,w.shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize),t.spotShadowMap[u]=_,t.spotShadowMatrix[u]=v.shadow.matrix,t.spot[u]=w,u++;else if(v.isRectAreaLight)(w=e.get(v)).color.copy(g).multiplyScalar(y),w.position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(f),i.identity(),n.copy(v.matrixWorld),n.premultiply(f),i.extractRotation(n),w.halfWidth.set(.5*v.width,0,0),w.halfHeight.set(0,.5*v.height,0),w.halfWidth.applyMatrix4(i),w.halfHeight.applyMatrix4(i),t.rectArea[V]=w,V++;else if(v.isPointLight)(w=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),w.position.applyMatrix4(f),w.color.copy(v.color).multiplyScalar(v.intensity),w.distance=v.distance,w.decay=v.decay,w.shadow=v.castShadow,v.castShadow&&(M=v.shadow,w.shadowBias=M.bias,w.shadowRadius=M.radius,w.shadowMapSize=M.mapSize,w.shadowCameraNear=M.camera.near,w.shadowCameraFar=M.camera.far),t.pointShadowMap[h]=_,t.pointShadowMatrix[h]=v.shadow.matrix,t.point[h]=w,h++;else if(v.isHemisphereLight){var w;(w=e.get(v)).direction.setFromMatrixPosition(v.matrixWorld),w.direction.transformDirection(f),w.direction.normalize(),w.skyColor.copy(v.color).multiplyScalar(y),w.groundColor.copy(v.groundColor).multiplyScalar(y),t.hemi[d]=w,d++}}t.ambient[0]=p,t.ambient[1]=c,t.ambient[2]=$,t.directional.length=l,t.spot.length=u,t.rectArea.length=V,t.point.length=h,t.hemi.length=d,t.hash.stateID=t.id,t.hash.directionalLength=l,t.hash.pointLength=h,t.hash.spotLength=u,t.hash.rectAreaLength=V,t.hash.hemiLength=d,t.hash.shadowsLength=a.length},state:t}}function yw(){var e=new iz,t=[],r=[];return{init:function(){t.length=0,r.length=0},state:{lightsArray:t,shadowsArray:r,lights:e},setupLights:function(n){e.setup(t,r,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){r.push(e)}}}function hz(){var e={};return{get:function(t,r){var n;return void 0===e[t.id]?(n=new yw,e[t.id]={},e[t.id][r.id]=n):void 0===e[t.id][r.id]?(n=new yw,e[t.id][r.id]=n):n=e[t.id][r.id],n},dispose:function(){e={}}}}function sc(e){u.call(this),this.type="MeshDepthMaterial",this.depthPacking=Gr,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function pc(e){u.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new aa,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Cw(e,t,r){for(var n=new ti,i=new da,o=new ba,a=new ba(r,r),s=new aa,p=new aa,c=1,$=2,l=1+(c|$),h=new Array(l),u=new Array(l),V={},d={0:ha,1:of,2:nf},f=[new aa(1,0,0),new aa(-1,0,0),new aa(0,0,1),new aa(0,0,-1),new aa(0,1,0),new aa(0,-1,0)],m=[new aa(0,1,0),new aa(0,1,0),new aa(0,1,0),new aa(0,1,0),new aa(0,0,1),new aa(0,0,-1)],x=[new fa,new fa,new fa,new fa,new fa,new fa],v=0;v!==l;++v){var g=0!=(v&c),y=0!=(v&$),b=new sc({depthPacking:Hr,morphTargets:g,skinning:y});h[v]=b;var _=new pc({morphTargets:g,skinning:y});u[v]=_}var M=this;function w(t,r,n,i,o,a){var s=t.geometry,p=null,l=h,f=t.customDepthMaterial;if(n&&(l=u,f=t.customDistanceMaterial),f)p=f;else{var m=!1;r.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var x=t.isSkinnedMesh&&r.skinning,v=0;m&&(v|=c),x&&(v|=$),p=l[v]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var g=p.uuid,y=r.uuid,b=V[g];void 0===b&&(b={},V[g]=b);var _=b[y];void 0===_&&(_=p.clone(),b[y]=_),p=_}return p.visible=r.visible,p.wireframe=r.wireframe,p.side=null!=r.shadowSide?r.shadowSide:d[r.side],p.clipShadows=r.clipShadows,p.clippingPlanes=r.clippingPlanes,p.clipIntersection=r.clipIntersection,p.wireframeLinewidth=r.wireframeLinewidth,p.linewidth=r.linewidth,n&&p.isMeshDistanceMaterial&&(p.referencePosition.copy(i),p.nearDistance=o,p.farDistance=a),p}function S(r,i,o,a){if(!1!==r.visible){if(r.layers.test(i.layers)&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,r.matrixWorld);var s=t.update(r),c=r.material;if(Array.isArray(c))for(var $=s.groups,l=0,h=$.length;l<h;l++){var u=$[l],V=c[u.materialIndex];if(V&&V.visible){var d=w(r,V,a,p,o.near,o.far);e.renderBufferDirect(o,null,s,d,r,u)}}else if(c.visible){d=w(r,c,a,p,o.near,o.far);e.renderBufferDirect(o,null,s,d,r,null)}}for(var f=r.children,m=0,x=f.length;m<x;m++)S(f[m],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hl,this.render=function(t,r,c){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){e.context;var $,l=e.state;l.disable(3042),l.buffers.color.setClear(1,1,1,1),l.buffers.depth.setTest(!0),l.setScissorTest(!1);for(var h=0,u=t.length;h<u;h++){var V=t[h],d=V.shadow,v=V&&V.isPointLight;if(void 0!==d){var g=d.camera;if(o.copy(d.mapSize),o.min(a),v){var y=o.x,b=o.y;x[0].set(2*y,b,y,b),x[1].set(0,b,y,b),x[2].set(3*y,b,y,b),x[3].set(y,b,y,b),x[4].set(3*y,0,y,b),x[5].set(y,0,y,b),o.x*=4,o.y*=2}if(null===d.map){var _={minFilter:qa,magFilter:qa,format:rb};d.map=new wd(o.x,o.y,_),d.map.texture.name=V.name+".shadowMap",g.updateProjectionMatrix()}d.isSpotLightShadow&&d.update(V);var w=d.map,T=d.matrix;p.setFromMatrixPosition(V.matrixWorld),g.position.copy(p),v?($=6,T.makeTranslation(-p.x,-p.y,-p.z)):($=1,s.setFromMatrixPosition(V.target.matrixWorld),g.lookAt(s),g.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(g.projectionMatrix),T.multiply(g.matrixWorldInverse)),e.setRenderTarget(w),e.clear();for(var E=0;E<$;E++){if(v){s.copy(g.position),s.add(f[E]),g.up.copy(m[E]),g.lookAt(s),g.updateMatrixWorld();var L=x[E];l.viewport(L)}i.multiplyMatrices(g.projectionMatrix,g.matrixWorldInverse),n.setFromMatrix(i),S(r,c,g,v)}}else console.warn("THREE.WebGLShadowMap:",V,"has no shadow.")}M.needsUpdate=!1}}}function gz(e,t,r,n){var i=new function(){var t=!1,r=new fa,n=null,i=new fa(0,0,0,0);return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,o,a,s){!0===s&&(t*=a,n*=a,o*=a),r.set(t,n,o,a),!1===i.equals(r)&&(e.clearColor(t,n,o,a),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,r=null,n=null,i=null;return{setTest:function(e){e?F(2929):U(2929)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case Rp:e.depthFunc(512);break;case Sp:e.depthFunc(519);break;case Tp:e.depthFunc(513);break;case Vh:e.depthFunc(515);break;case Vp:e.depthFunc(514);break;case Wp:e.depthFunc(518);break;case Xp:e.depthFunc(516);break;case Yp:e.depthFunc(517);break;default:e.depthFunc(515);}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}},a=new function(){var t=!1,r=null,n=null,i=null,o=null,a=null,s=null,p=null,c=null;return{setTest:function(e){e?F(2960):U(2960)},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,a){n===t&&i===r&&o===a||(e.stencilFunc(t,r,a),n=t,i=r,o=a)},setOp:function(t,r,n){a===t&&s===r&&p===n||(e.stencilOp(t,r,n),a=t,s=r,p=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,r=null,n=null,i=null,o=null,a=null,s=null,p=null,c=null}}},s=e.getParameter(34921),p=new Uint8Array(s),c=new Uint8Array(s),$=new Uint8Array(s),l={},h=null,u=null,V=null,d=null,f=null,m=null,x=null,v=null,g=null,y=null,b=!1,_=null,M=null,w=null,S=null,T=null,E=e.getParameter(35661),L=!1,A=0,C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(A=parseFloat(/^WebGL\ ([0-9])/.exec(C)[1]),L=A>=1):-1!==C.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(C)[1]),L=A>=2);var P=null,B={},R=new fa,G=new fa;function D(t,r,n){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<n;a++)e.texImage2D(r+a,0,6408,1,1,0,6408,5121,i);return o}var I={};function O(r,i){(p[r]=1,0===c[r]&&(e.enableVertexAttribArray(r),c[r]=1),$[r]!==i)&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,i),$[r]=i)}function F(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function U(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}function N(t,n,i,o,a,s,p,c){if(t!==sh){if(V||(F(3042),V=!0),t===Wn)a=a||n,s=s||i,p=p||o,n===f&&a===v||(e.blendEquationSeparate(r.convert(n),r.convert(a)),f=n,v=a),i===m&&o===x&&s===g&&p===y||(e.blendFuncSeparate(r.convert(i),r.convert(o),r.convert(s),r.convert(p)),m=i,x=o,g=s,y=p),d=t,b=null;else if(t!==d||c!==b){if(f===kd&&v===kd||(e.blendEquation(32774),f=kd,v=kd),c)switch(t){case ld:e.blendFuncSeparate(1,771,1,771);break;case Qh:e.blendFunc(1,1);break;case Rh:e.blendFuncSeparate(0,0,769,771);break;case Sh:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);}else switch(t){case ld:e.blendFuncSeparate(770,771,1,771);break;case Qh:e.blendFunc(770,1);break;case Rh:e.blendFunc(0,769);break;case Sh:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);}m=null,x=null,g=null,y=null,d=t,b=c}}else V&&(U(3042),V=!1)}function z(t){_!==t&&(t?e.frontFace(2304):e.frontFace(2305),_=t)}function H(t){t!==ep?(F(2884),t!==M&&(t===Fn?e.cullFace(1029):t===gp?e.cullFace(1028):e.cullFace(1032))):U(2884),M=t}function k(t,r,n){t?(F(32823),S===r&&T===n||(e.polygonOffset(r,n),S=r,T=n)):U(32823)}function j(t){void 0===t&&(t=33984+E-1),P!==t&&(e.activeTexture(t),P=t)}return I[3553]=D(3553,3553,1),I[34067]=D(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(2929),o.setFunc(Vh),z(!1),H(Fn),F(2884),N(sh),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=p.length;e<t;e++)p[e]=0},enableAttribute:function(e){O(e,0)},enableAttributeAndDivisor:O,disableUnusedAttributes:function(){for(var t=0,r=c.length;t!==r;++t)c[t]!==p[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:F,disable:U,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var r=e.getParameter(34467),n=0;n<r.length;n++)h.push(r[n]);return h},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:N,setMaterial:function(e,t){e.side===nf?U(2884):F(2884);var r=e.side===ha;t&&(r=!r),z(r),e.blending===ld&&!1===e.transparent?N(sh):N(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite),k(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:z,setCullFace:H,setLineWidth:function(t){t!==w&&(L&&e.lineWidth(t),w=t)},setPolygonOffset:k,setScissorTest:function(e){e?F(3089):U(3089)},activeTexture:j,bindTexture:function(t,r){null===P&&j();var n=B[P];void 0===n&&(n={type:void 0,texture:void 0},B[P]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||I[t]),n.type=t,n.texture=r)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===R.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),R.copy(t))},viewport:function(t){!1===G.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),G.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);l={},h=null,P=null,B={},u=null,d=null,_=null,M=null,i.reset(),o.reset(),a.reset()}}}function fz(e,t,r,n,i,o,a){var s,p={};function c(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var r=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height),n}return e}function $(e){return ea.isPowerOfTwo(e.width)&&ea.isPowerOfTwo(e.height)}function l(e,t){return e.generateMipmaps&&t&&e.minFilter!==qa&&e.minFilter!==xa}function h(t,r,i,o){e.generateMipmap(t),n.get(r).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function u(e,t){if(!i.isWebGL2)return e;if(6403===e){if(5126===t)return 33326;if(5131===t)return 33325;if(5121===t)return 33321}if(6407===e){if(5126===t)return 34837;if(5131===t)return 34843;if(5121===t)return 32849}if(6408===e){if(5126===t)return 34836;if(5131===t)return 34842;if(5121===t)return 32856}return e}function V(e){return e===qa||e===ci||e===di?9728:9729}function d(t){var r=t.target;r.removeEventListener("dispose",d),function(t){var r=n.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}n.remove(t)}(r),r.isVideoTexture&&delete p[r.id],a.memory.textures--}function f(t){var r=t.target;r.removeEventListener("dispose",f),function(t){var r=n.get(t),i=n.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[o]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}(r),a.memory.textures--}function m(e,t){var i=n.get(e);if(e.isVideoTexture&&function(e){var t=e.id,r=a.render.frame;p[t]!==r&&(p[t]=r,e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void v(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+t),r.bindTexture(3553,i.__webglTexture)}function x(r,a,s){var p;if(s?(e.texParameteri(r,10242,o.convert(a.wrapS)),e.texParameteri(r,10243,o.convert(a.wrapT)),e.texParameteri(r,10240,o.convert(a.magFilter)),e.texParameteri(r,10241,o.convert(a.minFilter))):(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071),a.wrapS===La&&a.wrapT===La||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(r,10240,V(a.magFilter)),e.texParameteri(r,10241,V(a.minFilter)),a.minFilter!==qa&&a.minFilter!==xa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),p=t.get("EXT_texture_filter_anisotropic")){if(a.type===kf&&null===t.get("OES_texture_float_linear"))return;if(a.type===fi&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(r,p.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function v(t,n,p){var V;V=n.isDataTexture3D?32879:3553,void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",d),t.__webglTexture=e.createTexture(),a.memory.textures++),r.activeTexture(33984+p),r.bindTexture(V,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment);var f=c(n.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==La||e.wrapT!==La||e.minFilter!==qa&&e.minFilter!==xa)})(n)&&!1===$(f)&&(f=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=ea.floorPowerOfTwo(e.width),s.height=ea.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(f));var m=$(f),v=o.convert(n.format),g=o.convert(n.type),y=u(v,g);x(V,n,m);var b,_=n.mipmaps;if(n.isDepthTexture){if(y=6402,n.type===kf){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else i.isWebGL2&&(y=33189);n.format===ad&&6402===y&&n.type!==nh&&n.type!==Qn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=nh,g=o.convert(n.type)),n.format===ff&&(y=34041,n.type!==lh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=lh,g=o.convert(n.type))),r.texImage2D(3553,0,y,f.width,f.height,0,v,g,null)}else if(n.isDataTexture){if(_.length>0&&m){for(var M=0,w=_.length;M<w;M++)b=_[M],r.texImage2D(3553,M,y,b.width,b.height,0,v,g,b.data);n.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else r.texImage2D(3553,0,y,f.width,f.height,0,v,g,f.data),t.__maxMipLevel=0;}else if(n.isCompressedTexture){for(M=0,w=_.length;M<w;M++)b=_[M],n.format!==rb&&n.format!==gf?r.getCompressedTextureFormats().indexOf(v)>-1?r.compressedTexImage2D(3553,M,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,M,y,b.width,b.height,0,v,g,b.data);t.__maxMipLevel=_.length-1}else if(n.isDataTexture3D)r.texImage3D(32879,0,y,f.width,f.height,f.depth,0,v,g,f.data),t.__maxMipLevel=0;else if(_.length>0&&m){for(M=0,w=_.length;M<w;M++)b=_[M],r.texImage2D(3553,M,y,v,g,b);n.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else r.texImage2D(3553,0,y,v,g,f),t.__maxMipLevel=0;l(n,m)&&h(3553,n,f.width,f.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function g(t,i,a,s){var p=o.convert(i.texture.format),c=o.convert(i.texture.type),$=u(p,c);r.texImage2D(s,0,$,i.width,i.height,0,p,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function y(t,r){e.bindRenderbuffer(36161,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(36161,33189,r.width,r.height),e.framebufferRenderbuffer(36160,36096,36161,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(36161,34041,r.width,r.height),e.framebufferRenderbuffer(36160,33306,36161,t)):e.renderbufferStorage(36161,32854,r.width,r.height),e.bindRenderbuffer(36161,null)}function b(t){var r=n.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),m(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===ad)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(r.depthTexture.format!==ff)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),y(r.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),y(r.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}this.setTexture2D=m,this.setTexture3D=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?v(i,e,t):(r.activeTexture(33984+t),r.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,s){var p=n.get(t);if(6===t.image.length)if(t.version>0&&p.__version!==t.version){p.__image__webglTextureCube||(t.addEventListener("dispose",d),p.__image__webglTextureCube=e.createTexture(),a.memory.textures++),r.activeTexture(33984+s),r.bindTexture(34067,p.__image__webglTextureCube),e.pixelStorei(37440,t.flipY);for(var V=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=V||f?f?t.image[v].image:t.image[v]:c(t.image[v],i.maxCubemapSize);var g=m[0],y=$(g),b=o.convert(t.format),_=o.convert(t.type),M=u(b,_);for(x(34067,t,y),v=0;v<6;v++)if(V)for(var w,S=m[v].mipmaps,T=0,E=S.length;T<E;T++)w=S[T],t.format!==rb&&t.format!==gf?r.getCompressedTextureFormats().indexOf(b)>-1?r.compressedTexImage2D(34069+v,T,M,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+v,T,M,w.width,w.height,0,b,_,w.data);else f?r.texImage2D(34069+v,0,M,m[v].width,m[v].height,0,b,_,m[v].data):r.texImage2D(34069+v,0,M,b,_,m[v]);p.__maxMipLevel=V?S.length-1:0,l(t,y)&&h(34067,t,g.width,g.height),p.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(33984+s),r.bindTexture(34067,p.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){r.activeTexture(33984+t),r.bindTexture(34067,n.get(e).__webglTexture)},this.setupRenderTarget=function(t){var i=n.get(t),o=n.get(t.texture);t.addEventListener("dispose",f),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,p=$(t);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(r.bindTexture(34067,o.__webglTexture),x(34067,t.texture,p),c=0;c<6;c++)g(i.__webglFramebuffer[c],t,36064,34069+c);l(t.texture,p)&&h(34067,t.texture,t.width,t.height),r.bindTexture(34067,null)}else r.bindTexture(3553,o.__webglTexture),x(3553,t.texture,p),g(i.__webglFramebuffer,t,36064,3553),l(t.texture,p)&&h(3553,t.texture,t.width,t.height),r.bindTexture(3553,null);t.depthBuffer&&b(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(l(t,$(e))){var i=e.isWebGLRenderTargetCube?34067:3553,o=n.get(t).__webglTexture;r.bindTexture(i,o),h(i,t,e.width,e.height),r.bindTexture(i,null)}}}function Fw(e,t,r){return{convert:function(e){var n;if(e===fc)return 10497;if(e===La)return 33071;if(e===fd)return 33648;if(e===qa)return 9728;if(e===ci)return 9984;if(e===di)return 9986;if(e===xa)return 9729;if(e===vn)return 9985;if(e===oh)return 9987;if(e===ei)return 5121;if(e===Eq)return 32819;if(e===Fq)return 32820;if(e===Gq)return 33635;if(e===xq)return 5120;if(e===yq)return 5122;if(e===nh)return 5123;if(e===Aq)return 5124;if(e===Qn)return 5125;if(e===kf)return 5126;if(e===fi){if(r.isWebGL2)return 5131;if(null!==(n=t.get("OES_texture_half_float")))return n.HALF_FLOAT_OES}if(e===Iq)return 6406;if(e===gf)return 6407;if(e===rb)return 6408;if(e===Lq)return 6409;if(e===Mq)return 6410;if(e===ad)return 6402;if(e===ff)return 34041;if(e===Qq)return 6403;if(e===kd)return 32774;if(e===Cp)return 32778;if(e===Dp)return 32779;if(e===Gp)return 0;if(e===Hp)return 1;if(e===Ip)return 768;if(e===Jp)return 769;if(e===rl)return 770;if(e===Nl)return 771;if(e===Mp)return 772;if(e===Np)return 773;if(e===Op)return 774;if(e===Pp)return 775;if(e===Qp)return 776;if((e===xk||e===Ak||e===Bk||e===Kk)&&null!==(n=t.get("WEBGL_compressed_texture_s3tc"))){if(e===xk)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ak)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Bk)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Kk)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Rk||e===Uk||e===Zk||e===dl)&&null!==(n=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===Rk)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Uk)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Zk)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===dl)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Zq&&null!==(n=t.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((e===$q||e===_q||e===ar||e===br||e===cr||e===dr||e===er||e===fr||e===gr||e===hr||e===ir||e===jr||e===kr||e===lr)&&null!==(n=t.get("WEBGL_compressed_texture_astc")))return e;if(e===Th||e===Uh){if(r.isWebGL2){if(e===Th)return 32775;if(e===Uh)return 32776}if(null!==(n=t.get("EXT_blend_minmax"))){if(e===Th)return n.MIN_EXT;if(e===Uh)return n.MAX_EXT}}if(e===lh){if(r.isWebGL2)return 34042;if(null!==(n=t.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function ye(){b.call(this),this.type="Group"}function Jb(){b.call(this),this.type="Camera",this.matrixWorldInverse=new da,this.projectionMatrix=new da,this.projectionMatrixInverse=new da}function N(e,t,r,n){Jb.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function yh(e){N.call(this),this.cameras=e||[]}sc.prototype=Object.create(u.prototype),sc.prototype.constructor=sc,sc.prototype.isMeshDepthMaterial=!0,sc.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},pc.prototype=Object.create(u.prototype),pc.prototype.constructor=pc,pc.prototype.isMeshDistanceMaterial=!0,pc.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},ye.prototype=Object.assign(Object.create(b.prototype),{constructor:ye,isGroup:!0}),Jb.prototype=Object.assign(Object.create(b.prototype),{constructor:Jb,isCamera:!0,copy:function(e,t){return b.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new aa),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){b.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),N.prototype=Object.assign(Object.create(Jb.prototype),{constructor:N,isPerspectiveCamera:!0,copy:function(e,t){return Jb.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*ea.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*ea.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ea.RAD2DEG*Math.atan(Math.tan(.5*ea.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*ea.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*n/a,t-=o.offsetY*r/s,n*=o.width/a,r*=o.height/s}var p=this.filmOffset;0!==p&&(i+=e*p/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),yh.prototype=Object.assign(Object.create(N.prototype),{constructor:yh,isArrayCamera:!0});var xh,Lw=new aa,Mw=new aa;function Nw(e,t,r){Lw.setFromMatrixPosition(t.matrixWorld),Mw.setFromMatrixPosition(r.matrixWorld);var n=Lw.distanceTo(Mw),i=t.projectionMatrix.elements,o=r.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),p=(i[9]+1)/i[5],c=(i[9]-1)/i[5],$=(i[8]-1)/i[0],l=(o[8]+1)/o[0],h=a*$,u=a*l,V=n/(-$+l),d=V*-$;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(d),e.translateZ(V),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var f=a+V,m=s+V,x=h-d,v=u+(n-d),g=p*s/m*f,y=c*s/m*f;e.projectionMatrix.makePerspective(x,v,g,y,f,m)}function Ow(e){var t=this,r=null,n=null,i=null,o=[],a=new da,s=new da,p=1,c="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",v,!1));var $=new da,l=new P,h=new aa,u=new N;u.bounds=new fa(0,0,.5,1),u.layers.enable(1);var V=new N;V.bounds=new fa(.5,0,.5,1),V.layers.enable(2);var d,f,m=new yh([u,V]);function x(){return null!==r&&!0===r.isPresenting}function v(){if(x()){var n=r.getEyeParameters("left"),i=n.renderWidth*p,o=n.renderHeight*p;f=e.getPixelRatio(),d=e.getSize(),e.setDrawingBufferSize(2*i,o,1),b.start()}else t.enabled&&e.setDrawingBufferSize(d.width,d.height,f),b.stop()}m.layers.enable(1),m.layers.enable(2);var g=[];function y(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),r=0,n=0,i=t.length;r<i;r++){var o=t[r];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(n===e)return o;n++}}}this.enabled=!1,this.getController=function(e){var t=o[e];return void 0===t&&((t=new ye).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),b.setContext(e)},this.setFramebufferScaleFactor=function(e){p=e},this.setFrameOfReferenceType=function(e){c=e},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){var t="stage"===c?1.6:0;if(null===r)return e.position.set(0,t,0),e;if(r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(n),"stage"===c){var p=r.stageParameters;p?a.fromArray(p.sittingToStandingTransform):a.makeTranslation(0,t,0)}var d=n.pose,f=null!==i?i:e;if(f.matrix.copy(a),f.matrix.decompose(f.position,f.quaternion,f.scale),null!==d.orientation&&(l.fromArray(d.orientation),f.quaternion.multiply(l)),null!==d.position&&(l.setFromRotationMatrix(a),h.fromArray(d.position),h.applyQuaternion(l),f.position.add(h)),f.updateMatrixWorld(),!1===r.isPresenting)return e;u.near=e.near,V.near=e.near,u.far=e.far,V.far=e.far,u.matrixWorldInverse.fromArray(n.leftViewMatrix),V.matrixWorldInverse.fromArray(n.rightViewMatrix),s.getInverse(a),"stage"===c&&(u.matrixWorldInverse.multiply(s),V.matrixWorldInverse.multiply(s));var x=f.parent;null!==x&&($.getInverse(x.matrixWorld),u.matrixWorldInverse.multiply($),V.matrixWorldInverse.multiply($)),u.matrixWorld.getInverse(u.matrixWorldInverse),V.matrixWorld.getInverse(V.matrixWorldInverse),u.projectionMatrix.fromArray(n.leftProjectionMatrix),V.projectionMatrix.fromArray(n.rightProjectionMatrix),Nw(m,u,V);var v=r.getLayers();if(v.length){var b=v[0];null!==b.leftBounds&&4===b.leftBounds.length&&u.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&V.bounds.fromArray(b.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],r=y(e);if(void 0!==r&&void 0!==r.pose){if(null===r.pose)return;var n=r.pose;!1===n.hasPosition&&t.position.set(.2,-.6,-.05),null!==n.position&&t.position.fromArray(n.position),null!==n.orientation&&t.quaternion.fromArray(n.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===r.id?0:1;g[e]!==r.buttons[i].pressed&&(g[e]=r.buttons[i].pressed,!0===g[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),m},this.getStandingMatrix=function(){return a},this.isPresenting=x;var b=new $k;this.setAnimationLoop=function(e){b.setAnimationLoop(e)},this.submitFrame=function(){x()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",v)}}function ez(e){var t=e.context,r=null,n=null,i=1,o=null,a="stage",s=null,p=[],c=[];function $(){return null!==n&&null!==o}var l=new N;l.layers.enable(1),l.viewport=new fa;var h=new N;h.layers.enable(2),h.viewport=new fa;var u=new yh([l,h]);function V(e){var t=p[c.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function d(){e.setFramebuffer(null),x.stop()}function f(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}u.layers.enable(1),u.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=p[e];return void 0===t&&((t=new ye).matrixAutoUpdate=!1,t.visible=!1,p[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){i=e},this.setFrameOfReferenceType=function(e){a=e},this.setSession=function(r){null!==(n=r)&&(n.addEventListener("select",V),n.addEventListener("selectstart",V),n.addEventListener("selectend",V),n.addEventListener("end",d),n.baseLayer=new XRWebGLLayer(n,t,{framebufferScaleFactor:i}),n.requestFrameOfReference(a).then(function(t){o=t,e.setFramebuffer(n.baseLayer.framebuffer),x.setContext(n),x.start()}),c=n.getInputSources(),n.addEventListener("inputsourceschange",function(){c=n.getInputSources(),console.log(c);for(var e=0;e<p.length;e++){p[e].userData.inputSource=c[e]}}))},this.getCamera=function(e){if($()){var t=e.parent,r=u.cameras;f(u,t);for(var n=0;n<r.length;n++)f(r[n],t);e.matrixWorld.copy(u.matrixWorld);for(var i=e.children,o=(n=0,i.length);n<o;n++)i[n].updateMatrixWorld(!0);return Nw(u,l,h),u}return e},this.isPresenting=$;var m=null;var x=new $k;x.setAnimationLoop(function(e,t){if(null!==(s=t.getDevicePose(o)))for(var r=n.baseLayer,i=t.views,a=0;a<i.length;a++){var $=i[a],l=r.getViewport($),h=s.getViewMatrix($),V=u.cameras[a];V.matrix.fromArray(h).getInverse(V.matrix),V.projectionMatrix.fromArray($.projectionMatrix),V.viewport.set(l.x,l.y,l.width,l.height),0===a&&u.matrix.copy(V.matrix)}for(a=0;a<p.length;a++){var d=p[a],f=c[a];if(f){var x=t.getInputPose(f,o);if(null!==x){"targetRay"in x?d.matrix.elements=x.targetRay.transformMatrix:"pointerMatrix"in x&&(d.matrix.elements=x.pointerMatrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.visible=!0;continue}}d.visible=!1}m&&m(e)}),this.setAnimationLoop=function(e){m=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function Nm(e){console.log("THREE.WebGLRenderer",cp);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,p=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",$=null,l=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Vl,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var h,u,V,d,f,m,x,v,g,y,b,_,M,w,S,T,E,L,A=this,C=!1,P=null,B=null,R=null,G=-1,D={geometry:null,program:null,wireframe:!1},I=null,O=null,F=new fa,U=new fa,N=null,z=0,H=t.width,k=t.height,j=1,W=new fa(0,0,H,k),q=new fa(0,0,H,k),X=!1,Y=new ti,J=new mA,Z=!1,Q=!1,K=new da,ee=new aa;function te(){return null===B?j:1}try{var re={alpha:n,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:p,powerPreference:c};if(t.addEventListener("webglcontextlost",ae,!1),t.addEventListener("webglcontextrestored",se,!1),null===(h=r||t.getContext("webgl",re)||t.getContext("experimental-webgl",re)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===h.getShaderPrecisionFormat&&(h.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){console.error("THREE.WebGLRenderer: "+ge.message)}function ne(){u=new lA(h),(V=new nA(h,u,e)).isWebGL2||(u.get("WEBGL_depth_texture"),u.get("OES_texture_float"),u.get("OES_texture_half_float"),u.get("OES_texture_half_float_linear"),u.get("OES_standard_derivatives"),u.get("OES_element_index_uint"),u.get("ANGLE_instanced_arrays")),u.get("OES_texture_float_linear"),L=new Fw(h,u,V),(d=new gz(h,u,L,V)).scissor(U.copy(q).multiplyScalar(j)),d.viewport(F.copy(W).multiplyScalar(j)),f=new hA(h),m=new pz,x=new fz(h,u,d,m,V,L,f),v=new uA(h),g=new kA(h,v,f),y=new eA(g,f),S=new fA(h),b=new qz(A,u,V),_=new lz,M=new hz,w=new rA(A,d,y,s),T=new oA(h,u,f,V),E=new iA(h,u,f,V),f.programs=b.programs,A.context=h,A.capabilities=V,A.extensions=u,A.properties=m,A.renderLists=_,A.state=d,A.info=f}ne();var ie=null;"undefined"!=typeof navigator&&(ie="xr"in navigator?new ez(A):new Ow(A)),this.vr=ie;var oe=new Cw(A,y,V.maxTextureSize);function ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1,ne()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){ce(e),m.remove(e)}(t)}function ce(e){var t=m.get(e).program;e.program=void 0,void 0!==t&&b.releaseProgram(t)}this.shadowMap=oe,this.getContext=function(){return h},this.getContextAttributes=function(){return h.getContextAttributes()},this.forceContextLoss=function(){var e=u.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=u.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(e){void 0!==e&&(j=e,this.setSize(H,k,!1))},this.getSize=function(){return{width:H,height:k}},this.setSize=function(e,r,n){ie.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=e,k=r,t.width=e*j,t.height=r*j,!1!==n&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(){return{width:H*j,height:k*j}},this.setDrawingBufferSize=function(e,r,n){H=e,k=r,j=n,t.width=e*n,t.height=r*n,this.setViewport(0,0,e,r)},this.getCurrentViewport=function(){return F},this.setViewport=function(e,t,r,n){W.set(e,k-t-n,r,n),d.viewport(F.copy(W).multiplyScalar(j))},this.setScissor=function(e,t,r,n){q.set(e,k-t-n,r,n),d.scissor(U.copy(q).multiplyScalar(j))},this.setScissorTest=function(e){d.setScissorTest(X=e)},this.getClearColor=function(){return w.getClearColor()},this.setClearColor=function(){w.setClearColor.apply(w,arguments)},this.getClearAlpha=function(){return w.getClearAlpha()},this.setClearAlpha=function(){w.setClearAlpha.apply(w,arguments)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===r||r)&&(n|=1024),h.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ae,!1),t.removeEventListener("webglcontextrestored",se,!1),_.dispose(),M.dispose(),m.dispose(),y.dispose(),ie.dispose(),he.stop()},this.renderBufferImmediate=function(e,t){d.initAttributes();var r=m.get(e);e.hasPositions&&!r.position&&(r.position=h.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=h.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=h.createBuffer()),e.hasColors&&!r.color&&(r.color=h.createBuffer());var n=t.getAttributes();e.hasPositions&&(h.bindBuffer(34962,r.position),h.bufferData(34962,e.positionArray,35048),d.enableAttribute(n.position),h.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(h.bindBuffer(34962,r.normal),h.bufferData(34962,e.normalArray,35048),d.enableAttribute(n.normal),h.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(h.bindBuffer(34962,r.uv),h.bufferData(34962,e.uvArray,35048),d.enableAttribute(n.uv),h.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(h.bindBuffer(34962,r.color),h.bufferData(34962,e.colorArray,35048),d.enableAttribute(n.color),h.vertexAttribPointer(n.color,3,5126,!1,0,0)),d.disableUnusedAttributes(),h.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,n,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;d.setMaterial(n,a);var s=fe(e,t,n,i),p=!1;D.geometry===r.id&&D.program===s.id&&D.wireframe===(!0===n.wireframe)||(D.geometry=r.id,D.program=s.id,D.wireframe=!0===n.wireframe,p=!0),i.morphTargetInfluences&&(S.update(i,r,n,s),p=!0);var c,$=r.index,l=r.attributes.position,f=1;!0===n.wireframe&&($=g.getWireframeAttribute(r),f=2);var m=T;null!==$&&(c=v.get($),(m=E).setIndex(c)),p&&(!function(e,t,r){if(r&&r.isInstancedBufferGeometry&!V.isWebGL2&&null===u.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d.initAttributes();var n=r.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var p=n[a];if(void 0!==p){var c=p.normalized,$=p.itemSize,l=v.get(p);if(void 0===l)continue;var f=l.buffer,m=l.type,x=l.bytesPerElement;if(p.isInterleavedBufferAttribute){var g=p.data,y=g.stride,b=p.offset;g&&g.isInstancedInterleavedBuffer?(d.enableAttributeAndDivisor(s,g.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=g.meshPerAttribute*g.count)):d.enableAttribute(s),h.bindBuffer(34962,f),h.vertexAttribPointer(s,$,m,c,y*x,b*x)}else p.isInstancedBufferAttribute?(d.enableAttributeAndDivisor(s,p.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=p.meshPerAttribute*p.count)):d.enableAttribute(s),h.bindBuffer(34962,f),h.vertexAttribPointer(s,$,m,c,0,0)}else if(void 0!==o){var _=o[a];if(void 0!==_)switch(_.length){case 2:h.vertexAttrib2fv(s,_);break;case 3:h.vertexAttrib3fv(s,_);break;case 4:h.vertexAttrib4fv(s,_);break;default:h.vertexAttrib1fv(s,_);}}}}d.disableUnusedAttributes()}(n,s,r),null!==$&&h.bindBuffer(34963,c.buffer));var x=1/0;null!==$?x=$.count:void 0!==l&&(x=l.count);var y=r.drawRange.start*f,b=r.drawRange.count*f,_=null!==o?o.start*f:0,M=null!==o?o.count*f:1/0,w=Math.max(y,_),L=Math.min(x,y+b,_+M)-1,A=Math.max(0,L-w+1);if(0!==A){if(i.isMesh){if(!0===n.wireframe)d.setLineWidth(n.wireframeLinewidth*te()),m.setMode(1);else switch(i.drawMode){case xl:m.setMode(4);break;case wr:m.setMode(5);break;case xr:m.setMode(6);}}else if(i.isLine){var C=n.linewidth;void 0===C&&(C=1),d.setLineWidth(C*te()),i.isLineSegments?m.setMode(1):i.isLineLoop?m.setMode(2):m.setMode(3)}else i.isPoints?m.setMode(0):i.isSprite&&m.setMode(4);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&m.renderInstances(r,w,A):m.render(w,A)}},this.compile=function(e,t){(l=M.get(e,t)).init(),e.traverse(function(e){e.isLight&&(l.pushLight(e),e.castShadow&&l.pushShadow(e))}),l.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)de(t.material[r],e.fog,t);else de(t.material,e.fog,t)})};var $e=null;var le,he=new $k;function ue(e,t,r,n){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,p=a.geometry,c=void 0===n?a.material:n,$=a.group;if(r.isArrayCamera){O=r;for(var h=r.cameras,u=0,V=h.length;u<V;u++){var f=h[u];if(s.layers.test(f.layers)){if("viewport"in f)d.viewport(F.copy(f.viewport));else{var m=f.bounds,x=m.x*H,v=m.y*k,g=m.z*H,y=m.w*k;d.viewport(F.set(x,v,g,y).multiplyScalar(j))}l.setupLights(f),Ve(s,t,f,p,c,$)}}}else O=null,Ve(s,t,r,p,c,$)}}function Ve(e,t,r,n,i,o){if(e.onBeforeRender(A,t,r,n,i,o),l=M.get(t,O||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){d.setMaterial(i);var a=fe(r,t.fog,i,e);D.geometry=null,D.program=null,D.wireframe=!1,function(e,t){e.render(function(e){A.renderBufferImmediate(e,t)})}(e,a)}else A.renderBufferDirect(r,t.fog,n,i,e,o);e.onAfterRender(A,t,r,n,i,o),l=M.get(t,O||r)}function de(e,t,r){var n=m.get(e),i=l.state.lights,o=l.state.shadowsArray,a=n.lightsHash,s=i.state.hash,p=b.getParameters(e,i.state,o,t,J.numPlanes,J.numIntersection,r),c=b.getProgramCode(e,p),$=n.program,h=!0;if(void 0===$)e.addEventListener("dispose",pe);else if($.code!==c)ce(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,h=!1;else{if(void 0!==p.shaderID)return;h=!1}if(h){if(p.shaderID){var u=Cb[p.shaderID];n.shader={name:e.type,uniforms:ga.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(n.shader,A),c=b.getProgramCode(e,p),$=b.acquireProgram(e,n.shader,p,c),n.program=$,e.program=$}var V=$.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<A.maxMorphTargets;d++)V["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(d=0;d<A.maxMorphNormals;d++)V["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var f=n.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=J.numPlanes,n.numIntersection=J.numIntersection,f.clippingPlanes=J.uniform),n.fog=t,void 0===a&&(n.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(f.ambientLightColor.value=i.state.ambient,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var x=n.program.getUniforms(),v=uc.seqWithValue(x.seq,f);n.uniformsList=v}function fe(e,t,r,n){z=0;var i=m.get(r),o=l.state.lights,a=i.lightsHash,s=o.state.hash;if(Z&&(Q||e!==I)){var p=e===I&&r.id===G;J.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,p)}!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==t?r.needsUpdate=!0:(!r.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===J.numPlanes&&i.numIntersection===J.numIntersection)||(r.needsUpdate=!0)),r.needsUpdate&&(de(r,t,n),r.needsUpdate=!1);var c,$,u=!1,f=!1,x=!1,v=i.program,g=v.getUniforms(),y=i.shader.uniforms;if(d.useProgram(v.program)&&(u=!0,f=!0,x=!0),r.id!==G&&(G=r.id,f=!0),u||I!==e){if(g.setValue(h,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&g.setValue(h,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),I!==e&&(I=e,f=!0,x=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var b=g.map.cameraPosition;void 0!==b&&b.setValue(h,ee.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&g.setValue(h,"viewMatrix",e.matrixWorldInverse)}if(r.skinning){g.setOptional(h,n,"bindMatrix"),g.setOptional(h,n,"bindMatrixInverse");var _=n.skeleton;if(_){var M=_.bones;if(V.floatVertexTextures){if(void 0===_.boneTexture){var w=Math.sqrt(4*M.length);w=ea.ceilPowerOfTwo(w),w=Math.max(w,4);var S=new Float32Array(w*w*4);S.set(_.boneMatrices);var T=new sd(S,w,w,rb,kf);T.needsUpdate=!0,_.boneMatrices=S,_.boneTexture=T,_.boneTextureSize=w}g.setValue(h,"boneTexture",_.boneTexture),g.setValue(h,"boneTextureSize",_.boneTextureSize)}else g.setOptional(h,_,"boneMatrices")}}return f&&(g.setValue(h,"toneMappingExposure",A.toneMappingExposure),g.setValue(h,"toneMappingWhitePoint",A.toneMappingWhitePoint),r.lights&&($=x,(c=y).ambientLightColor.needsUpdate=$,c.directionalLights.needsUpdate=$,c.pointLights.needsUpdate=$,c.spotLights.needsUpdate=$,c.rectAreaLights.needsUpdate=$,c.hemisphereLights.needsUpdate=$),t&&r.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(y,t),r.isMeshBasicMaterial?me(y,r):r.isMeshLambertMaterial?(me(y,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(y,r)):r.isMeshPhongMaterial?(me(y,r),r.isMeshToonMaterial?function(e,t){xe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(y,r):xe(y,r)):r.isMeshStandardMaterial?(me(y,r),r.isMeshPhysicalMaterial?function(e,t){ve(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(y,r):ve(y,r)):r.isMeshMatcapMaterial?(me(y,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,r)):r.isMeshDepthMaterial?(me(y,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,r)):r.isMeshDistanceMaterial?(me(y,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(y,r)):r.isMeshNormalMaterial?(me(y,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(y,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(y,r)):r.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*j,e.scale.value=.5*k,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(y,r):r.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(y,r):r.isShadowMaterial&&(y.color.value=r.color,y.opacity.value=r.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=ca.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=ca.LTC_2),uc.upload(h,i.uniformsList,y,A)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(uc.upload(h,i.uniformsList,y,A),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&g.setValue(h,"center",n.center),g.setValue(h,"modelViewMatrix",n.modelViewMatrix),g.setValue(h,"normalMatrix",n.normalMatrix),g.setValue(h,"modelMatrix",n.matrixWorld),v}function me(e,t){var r;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=m.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}function xe(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function ve(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ha&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ha&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}he.setAnimationLoop(function(e){ie.isPresenting()||$e&&$e(e)}),"undefined"!=typeof window&&he.setContext(window),this.setAnimationLoop=function(e){$e=e,ie.setAnimationLoop(e),he.start()},this.render=function(e,t,r,n){if(t&&t.isCamera){if(!C){D.geometry=null,D.program=null,D.wireframe=!1,G=-1,I=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ie.enabled&&(t=ie.getCamera(t)),(l=M.get(e,t)).init(),e.onBeforeRender(A,e,t,r),K.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Y.setFromMatrix(K),Q=this.localClippingEnabled,Z=J.init(this.clippingPlanes,Q,t),($=_.get(e,t)).init(),function e(t,r,n){if(!1===t.visible)return;var i=t.layers.test(r.layers);if(i)if(t.isLight)l.pushLight(t),t.castShadow&&l.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Y.intersectsSprite(t)){n&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4(K);var o=y.update(t),a=t.material;$.push(t,o,a,ee.z,null)}}else if(t.isImmediateRenderObject)n&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4(K),$.push(t,null,t.material,ee.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Y.intersectsObject(t))){n&&ee.setFromMatrixPosition(t.matrixWorld).applyMatrix4(K);var o=y.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,p=0,c=s.length;p<c;p++){var h=s[p],u=a[h.materialIndex];u&&u.visible&&$.push(t,o,u,ee.z,h)}else a.visible&&$.push(t,o,a,ee.z,null)}var V=t.children;for(var p=0,c=V.length;p<c;p++)e(V[p],r,n)}(e,t,A.sortObjects),!0===A.sortObjects&&$.sort(),Z&&J.beginShadows();var i=l.state.shadowsArray;oe.render(i,e,t),l.setupLights(t),Z&&J.endShadows(),this.info.autoReset&&this.info.reset(),void 0===r&&(r=null),this.setRenderTarget(r),w.render($,e,t,n);var o=$.opaque,a=$.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&ue(o,e,t,s),a.length&&ue(a,e,t,s)}else o.length&&ue(o,e,t),a.length&&ue(a,e,t);r&&x.updateRenderTargetMipmap(r),d.buffers.depth.setTest(!0),d.buffers.depth.setMask(!0),d.buffers.color.setMask(!0),d.setPolygonOffset(!1),e.onAfterRender(A,e,t),ie.enabled&&ie.submitFrame(),$=null,l=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=z;return e>=V.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+V.maxTextures),z+=1,e},this.setTexture2D=(le=!1,function(e,t){e&&e.isWebGLRenderTarget&&(le||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),le=!0),e=e.texture),x.setTexture2D(e,t)}),this.setTexture3D=function(e,t){x.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),x.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?x.setTextureCube(t,r):x.setTextureCubeDynamic(t,r)}}(),this.setFramebuffer=function(e){P=e},this.getRenderTarget=function(){return B},this.setRenderTarget=function(e){B=e,e&&void 0===m.get(e).__webglFramebuffer&&x.setupRenderTarget(e);var t=P,r=!1;if(e){var n=m.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=n[e.activeCubeFace],r=!0):t=n,F.copy(e.viewport),U.copy(e.scissor),N=e.scissorTest}else F.copy(W).multiplyScalar(j),U.copy(q).multiplyScalar(j),N=X;if(R!==t&&(h.bindFramebuffer(36160,t),R=t),d.viewport(F),d.scissor(U),d.setScissorTest(N),r){var i=m.get(e.texture);h.framebufferTexture2D(36160,36064,34069+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,n,i,o){if(e&&e.isWebGLRenderTarget){var a=m.get(e).__webglFramebuffer;if(a){var s=!1;a!==R&&(h.bindFramebuffer(36160,a),s=!0);try{var p=e.texture,c=p.format,$=p.type;if(c!==rb&&L.convert(c)!==h.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!($===ei||L.convert($)===h.getParameter(35738)||$===kf&&(V.isWebGL2||u.get("OES_texture_float")||u.get("WEBGL_color_buffer_float"))||$===fi&&(V.isWebGL2?u.get("EXT_color_buffer_float"):u.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===h.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&h.readPixels(t,r,n,i,L.convert(c),L.convert($),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&h.bindFramebuffer(36160,R)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,r){var n=t.image.width,i=t.image.height,o=L.convert(t.format);this.setTexture2D(t,0),h.copyTexImage2D(3553,r||0,o,e.x,e.y,n,i,0)},this.copyTextureToTexture=function(e,t,r,n){var i=t.image.width,o=t.image.height,a=L.convert(r.format),s=L.convert(r.type);this.setTexture2D(r,0),t.isDataTexture?h.texSubImage2D(3553,n||0,e.x,e.y,i,o,a,s,t.image.data):h.texSubImage2D(3553,n||0,e.x,e.y,a,s,t.image)}}function xe(e,t){this.name="",this.color=new z(e),this.density=void 0!==t?t:25e-5}function we(e,t,r){this.name="",this.color=new z(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function rh(){b.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Wc(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function qh(e,t,r,n){this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function yc(e){u.call(this),this.type="SpriteMaterial",this.color=new z(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function ih(e){if(b.call(this),this.type="Sprite",void 0===xh){xh=new q;var t=new Wc(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);xh.setIndex([0,1,2,0,2,3]),xh.addAttribute("position",new qh(t,3,0,!1)),xh.addAttribute("uv",new qh(t,2,3,!1))}this.geometry=xh,this.material=void 0!==e?e:new yc,this.center=new ba(.5,.5)}function gh(){b.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ch(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new da)}}function Mj(){b.call(this),this.type="Bone"}function Nj(e,t){Fa.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new da,this.bindMatrixInverse=new da;var r=new ch(this.initBones());this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function D(e){u.call(this),this.type="LineBasicMaterial",this.color=new z(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function va(e,t,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),b.call(this),this.type="Line",this.geometry=void 0!==e?e:new q,this.material=void 0!==t?t:new D({color:16777215*Math.random()})}function G(e,t){va.call(this,e,t),this.type="LineSegments"}function Qj(e,t){va.call(this,e,t),this.type="LineLoop"}function ob(e){u.call(this),this.type="PointsMaterial",this.color=new z(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function qe(e,t){b.call(this),this.type="Points",this.geometry=void 0!==e?e:new q,this.material=void 0!==t?t:new ob({color:16777215*Math.random()})}function dn(e,t,r,n,i,o,a,s,p){H.call(this,e,t,r,n,i,o,a,s,p),this.generateMipmaps=!1}function oe(e,t,r,n,i,o,a,s,p,c,$,l){H.call(this,null,o,a,s,p,c,n,i,$,l),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Bg(e,t,r,n,i,o,a,s,p){H.call(this,e,t,r,n,i,o,a,s,p),this.needsUpdate=!0}function zg(e,t,r,n,i,o,a,s,p,c){if((c=void 0!==c?c:ad)!==ad&&c!==ff)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&c===ad&&(r=nh),void 0===r&&c===ff&&(r=lh),H.call(this,null,n,i,o,a,s,c,r,p),this.image={width:e,height:t},this.magFilter=void 0!==a?a:qa,this.minFilter=void 0!==s?s:qa,this.flipY=!1,this.generateMipmaps=!1}function le(e){q.call(this),this.type="WireframeGeometry";var t,r,n,i,o,a,s,p,c,$,l=[],h=[0,0],u={},V=["a","b","c"];if(e&&e.isGeometry){var d=e.faces;for(t=0,n=d.length;t<n;t++){var f=d[t];for(r=0;r<3;r++)s=f[V[r]],p=f[V[(r+1)%3]],h[0]=Math.min(s,p),h[1]=Math.max(s,p),void 0===u[c=h[0]+","+h[1]]&&(u[c]={index1:h[0],index2:h[1]})}for(c in u)a=u[c],$=e.vertices[a.index1],l.push($.x,$.y,$.z),$=e.vertices[a.index2],l.push($.x,$.y,$.z)}else if(e&&e.isBufferGeometry){var m,x,v,g,y,b,_;if($=new aa,null!==e.index){for(m=e.attributes.position,x=e.index,0===(v=e.groups).length&&(v=[{start:0,count:x.count,materialIndex:0}]),i=0,o=v.length;i<o;++i)for(t=y=(g=v[i]).start,n=y+g.count;t<n;t+=3)for(r=0;r<3;r++)s=x.getX(t+r),p=x.getX(t+(r+1)%3),h[0]=Math.min(s,p),h[1]=Math.max(s,p),void 0===u[c=h[0]+","+h[1]]&&(u[c]={index1:h[0],index2:h[1]});for(c in u)a=u[c],$.fromBufferAttribute(m,a.index1),l.push($.x,$.y,$.z),$.fromBufferAttribute(m,a.index2),l.push($.x,$.y,$.z)}else for(t=0,n=(m=e.attributes.position).count/3;t<n;t++)for(r=0;r<3;r++)b=3*t+r,$.fromBufferAttribute(m,b),l.push($.x,$.y,$.z),_=3*t+(r+1)%3,$.fromBufferAttribute(m,_),l.push($.x,$.y,$.z)}this.addAttribute("position",new k(l,3))}function ug(e,t,r){v.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new ke(e,t,r)),this.mergeVertices()}function ke(e,t,r){q.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,o=[],a=[],s=[],p=[],c=new aa,$=new aa,l=new aa,h=new aa,u=new aa;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var V=t+1;for(n=0;n<=r;n++){var d=n/r;for(i=0;i<=t;i++){var f=i/t;e(f,d,$),a.push($.x,$.y,$.z),f-1e-5>=0?(e(f-1e-5,d,l),h.subVectors($,l)):(e(f+1e-5,d,l),h.subVectors(l,$)),d-1e-5>=0?(e(f,d-1e-5,l),u.subVectors($,l)):(e(f,d+1e-5,l),u.subVectors(l,$)),c.crossVectors(h,u).normalize(),s.push(c.x,c.y,c.z),p.push(f,d)}}for(n=0;n<r;n++)for(i=0;i<t;i++){var m=n*V+i,x=n*V+i+1,v=(n+1)*V+i+1,g=(n+1)*V+i;o.push(m,x,g),o.push(x,v,g)}this.setIndex(o),this.addAttribute("position",new k(a,3)),this.addAttribute("normal",new k(s,3)),this.addAttribute("uv",new k(p,2))}function rg(e,t,r,n){v.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new ya(e,t,r,n)),this.mergeVertices()}function ya(e,t,r,n){q.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1;var i=[],o=[];function a(e,t,r,n){var i,o,a=Math.pow(2,n),p=[];for(i=0;i<=a;i++){p[i]=[];var c=e.clone().lerp(r,i/a),$=t.clone().lerp(r,i/a),l=a-i;for(o=0;o<=l;o++)p[i][o]=0===o&&i===a?c:c.clone().lerp($,o/l)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var h=Math.floor(o/2);o%2==0?(s(p[i][h+1]),s(p[i+1][h]),s(p[i][h])):(s(p[i][h+1]),s(p[i+1][h+1]),s(p[i+1][h]))}}function s(e){i.push(e.x,e.y,e.z)}function p(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function c(e,t,r,n){n<0&&1===e.x&&(o[t]=e.x-1),0===r.x&&0===r.z&&(o[t]=n/2/Math.PI+.5)}function $(e){return Math.atan2(e.z,-e.x)}!function(e){for(var r=new aa,n=new aa,i=new aa,o=0;o<t.length;o+=3)p(t[o+0],r),p(t[o+1],n),p(t[o+2],i),a(r,n,i,e)}(n=n||0),function(e){for(var t=new aa,r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}(r),function(){for(var e=new aa,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var r=$(e)/2/Math.PI+.5,n=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(r,1-n)}var a;(function(){for(var e=new aa,t=new aa,r=new aa,n=new aa,a=new ba,s=new ba,p=new ba,l=0,h=0;l<i.length;l+=9,h+=6){e.set(i[l+0],i[l+1],i[l+2]),t.set(i[l+3],i[l+4],i[l+5]),r.set(i[l+6],i[l+7],i[l+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),p.set(o[h+4],o[h+5]),n.copy(e).add(t).add(r).divideScalar(3);var u=$(n);c(a,h+0,e,u),c(s,h+2,t,u),c(p,h+4,r,u)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],r=o[e+2],n=o[e+4],i=Math.max(t,r,n),a=Math.min(t,r,n);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),r<.2&&(o[e+2]+=1),n<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new k(i,3)),this.addAttribute("normal",new k(i.slice(),3)),this.addAttribute("uv",new k(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function qg(e,t){v.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ie(e,t)),this.mergeVertices()}function ie(e,t){ya.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ig(e,t){v.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ed(e,t)),this.mergeVertices()}function Ed(e,t){ya.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zf(e,t){v.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ge(e,t)),this.mergeVertices()}function ge(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];ya.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Rf(e,t){v.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ee(e,t)),this.mergeVertices()}function ee(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];ya.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Mf(e,t,r,n,i,o){v.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new ce(e,t,r,n,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function ce(e,t,r,n,i){q.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},t=t||64,r=r||1,n=n||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,p=new aa,c=new aa,$=new ba,l=new aa,h=[],u=[],V=[],d=[];function f(i){l=e.getPointAt(i/t,l);var a=o.normals[i],$=o.binormals[i];for(s=0;s<=n;s++){var V=s/n*Math.PI*2,d=Math.sin(V),f=-Math.cos(V);c.x=f*a.x+d*$.x,c.y=f*a.y+d*$.y,c.z=f*a.z+d*$.z,c.normalize(),u.push(c.x,c.y,c.z),p.x=l.x+r*c.x,p.y=l.y+r*c.y,p.z=l.z+r*c.z,h.push(p.x,p.y,p.z)}}!function(){for(a=0;a<t;a++)f(a);f(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=n;s++)$.x=a/t,$.y=s/n,V.push($.x,$.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=n;a++){var e=(n+1)*(s-1)+(a-1),r=(n+1)*s+(a-1),i=(n+1)*s+a,o=(n+1)*(s-1)+a;d.push(e,r,o),d.push(r,i,o)}}()}(),this.setIndex(d),this.addAttribute("position",new k(h,3)),this.addAttribute("normal",new k(u,3)),this.addAttribute("uv",new k(V,2))}function Hf(e,t,r,n,i,o,a){v.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new be(e,t,r,n,i,o)),this.mergeVertices()}function be(e,t,r,n,i,o){q.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},e=e||1,t=t||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,o=o||3;var a,s,p=[],c=[],$=[],l=[],h=new aa,u=new aa,V=new aa,d=new aa,f=new aa,m=new aa,x=new aa;for(a=0;a<=r;++a){var v=a/r*i*Math.PI*2;for(T(v,i,o,e,V),T(v+.01,i,o,e,d),m.subVectors(d,V),x.addVectors(d,V),f.crossVectors(m,x),x.crossVectors(f,m),f.normalize(),x.normalize(),s=0;s<=n;++s){var g=s/n*Math.PI*2,y=-t*Math.cos(g),b=t*Math.sin(g);h.x=V.x+(y*x.x+b*f.x),h.y=V.y+(y*x.y+b*f.y),h.z=V.z+(y*x.z+b*f.z),c.push(h.x,h.y,h.z),u.subVectors(h,V).normalize(),$.push(u.x,u.y,u.z),l.push(a/r),l.push(s/n)}}for(s=1;s<=r;s++)for(a=1;a<=n;a++){var _=(n+1)*(s-1)+(a-1),M=(n+1)*s+(a-1),w=(n+1)*s+a,S=(n+1)*(s-1)+a;p.push(_,M,S),p.push(M,w,S)}function T(e,t,r,n,i){var o=Math.cos(e),a=Math.sin(e),s=r/t*e,p=Math.cos(s);i.x=n*(2+p)*.5*o,i.y=n*(2+p)*a*.5,i.z=n*Math.sin(s)*.5}this.setIndex(p),this.addAttribute("position",new k(c,3)),this.addAttribute("normal",new k($,3)),this.addAttribute("uv",new k(l,2))}function Ff(e,t,r,n,i){v.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new $d(e,t,r,n,i)),this.mergeVertices()}function $d(e,t,r,n,i){q.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||1,t=t||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var o,a,s=[],p=[],c=[],$=[],l=new aa,h=new aa,u=new aa;for(o=0;o<=r;o++)for(a=0;a<=n;a++){var V=a/n*i,d=o/r*Math.PI*2;h.x=(e+t*Math.cos(d))*Math.cos(V),h.y=(e+t*Math.cos(d))*Math.sin(V),h.z=t*Math.sin(d),p.push(h.x,h.y,h.z),l.x=e*Math.cos(V),l.y=e*Math.sin(V),u.subVectors(h,l).normalize(),c.push(u.x,u.y,u.z),$.push(a/n),$.push(o/r)}for(o=1;o<=r;o++)for(a=1;a<=n;a++){var f=(n+1)*o+a-1,m=(n+1)*(o-1)+a-1,x=(n+1)*(o-1)+a,v=(n+1)*o+a;s.push(f,m,v),s.push(m,x,v)}this.setIndex(s),this.addAttribute("position",new k(p,3)),this.addAttribute("normal",new k(c,3)),this.addAttribute("uv",new k($,2))}xe.prototype.isFogExp2=!0,xe.prototype.clone=function(){return new xe(this.color,this.density)},xe.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},we.prototype.isFog=!0,we.prototype.clone=function(){return new we(this.color,this.near,this.far)},we.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},rh.prototype=Object.assign(Object.create(b.prototype),{constructor:rh,copy:function(e,t){return b.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(Wc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Wc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(qh.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(qh.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}}),yc.prototype=Object.create(u.prototype),yc.prototype.constructor=yc,yc.prototype.isSpriteMaterial=!0,yc.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},ih.prototype=Object.assign(Object.create(b.prototype),{constructor:ih,isSprite:!0,raycast:function(){var e=new aa,t=new aa,r=new aa,n=new ba,i=new ba,o=new da,a=new aa,s=new aa,p=new aa,c=new ba,$=new ba,l=new ba;function h(e,t,r,a,s,p){n.subVectors(e,r).addScalar(.5).multiply(a),void 0!==s?(i.x=p*n.x-s*n.y,i.y=s*n.x+p*n.y):i.copy(n),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(n,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),r.setFromMatrixPosition(this.modelViewMatrix);var u,V,d=this.material.rotation;0!==d&&(V=Math.cos(d),u=Math.sin(d));var f=this.center;h(a.set(-.5,-.5,0),r,f,t,u,V),h(s.set(.5,-.5,0),r,f,t,u,V),h(p.set(.5,.5,0),r,f,t,u,V),c.set(0,0),$.set(1,0),l.set(1,1);var m=n.ray.intersectTriangle(a,s,p,!1,e);if(null!==m||(h(s.set(-.5,.5,0),r,f,t,u,V),$.set(0,1),null!==(m=n.ray.intersectTriangle(a,p,s,!1,e)))){var x=n.ray.origin.distanceTo(e);x<n.near||x>n.far||i.push({distance:x,point:e.clone(),uv:ia.getUV(e,a,s,p,c,$,l,new ba),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return b.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),gh.prototype=Object.assign(Object.create(b.prototype),{constructor:gh,copy:function(e){b.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new aa;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,r)}}(),update:function(){var e=new aa,t=new aa;return function(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);n[0].object.visible=!0;for(var o=1,a=n.length;o<a&&i>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;o<a;o++)n[o].object.visible=!1}}}(),toJSON:function(e){var t=b.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var o=r[n];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(ch.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new da;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new da,t=new da;return function(){for(var r=this.bones,n=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=r.length;a<s;a++){var p=r[a]?r[a].matrixWorld:t;e.multiplyMatrices(p,n[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new ch(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}}}),Mj.prototype=Object.assign(Object.create(b.prototype),{constructor:Mj,isBone:!0}),Nj.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Nj,isSkinnedMesh:!0,initBones:function(){var e,t,r,n,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(r=0,n=this.geometry.bones.length;r<n;r++)t=this.geometry.bones[r],e=new Mj,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(r=0,n=this.geometry.bones.length;r<n;r++)-1!==(t=this.geometry.bones[r]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[r]):this.add(i[r])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var r=this.geometry.skinWeights[t];(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new fa,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)n.x=i.getX(t),n.y=i.getY(t),n.z=i.getZ(t),n.w=i.getW(t),(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0),i.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(e){Fa.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),D.prototype=Object.create(u.prototype),D.prototype.constructor=D,D.prototype.isLineBasicMaterial=!0,D.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},va.prototype=Object.assign(Object.create(b.prototype),{constructor:va,isLine:!0,computeLineDistances:function(){var e=new aa,t=new aa;return function(){var r=this.geometry;if(r.isBufferGeometry){if(null===r.index){for(var n=r.attributes.position,i=[0],o=1,a=n.count;o<a;o++)e.fromBufferAttribute(n,o-1),t.fromBufferAttribute(n,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);r.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(r.isGeometry){var s=r.vertices;(i=r.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new da,t=new Ld,r=new cb;return function(n,i){var o=n.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(s),r.radius+=o,!1!==n.ray.intersectsSphere(r)){e.getInverse(s),t.copy(n.ray).applyMatrix4(e);var p=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=p*p,$=new aa,l=new aa,h=new aa,u=new aa,V=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var d=a.index,f=a.attributes.position.array;if(null!==d)for(var m=d.array,x=0,v=m.length-1;x<v;x+=V){var g=m[x],y=m[x+1];if($.fromArray(f,3*g),l.fromArray(f,3*y),!(t.distanceSqToSegment($,l,u,h)>c))u.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(u))<n.near||M>n.far||i.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(x=0,v=f.length/3-1;x<v;x+=V){if($.fromArray(f,3*x),l.fromArray(f,3*x+3),!(t.distanceSqToSegment($,l,u,h)>c))u.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(u))<n.near||M>n.far||i.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var b=a.vertices,_=b.length;for(x=0;x<_-1;x+=V){var M;if(!(t.distanceSqToSegment(b[x],b[x+1],u,h)>c))u.applyMatrix4(this.matrixWorld),(M=n.ray.origin.distanceTo(u))<n.near||M>n.far||i.push({distance:M,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}}(),copy:function(e){return b.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}}),G.prototype=Object.assign(Object.create(va.prototype),{constructor:G,isLineSegments:!0,computeLineDistances:function(){var e=new aa,t=new aa;return function(){var r=this.geometry;if(r.isBufferGeometry){if(null===r.index){for(var n=r.attributes.position,i=[],o=0,a=n.count;o<a;o+=2)e.fromBufferAttribute(n,o),t.fromBufferAttribute(n,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);r.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(r.isGeometry){var s=r.vertices;for(i=r.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),Qj.prototype=Object.assign(Object.create(va.prototype),{constructor:Qj,isLineLoop:!0}),ob.prototype=Object.create(u.prototype),ob.prototype.constructor=ob,ob.prototype.isPointsMaterial=!0,ob.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},qe.prototype=Object.assign(Object.create(b.prototype),{constructor:qe,isPoints:!0,raycast:function(){var e=new da,t=new Ld,r=new cb;return function(n,i){var o=this,a=this.geometry,s=this.matrixWorld,p=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere),r.applyMatrix4(s),r.radius+=p,!1!==n.ray.intersectsSphere(r)){e.getInverse(s),t.copy(n.ray).applyMatrix4(e);var c=p/((this.scale.x+this.scale.y+this.scale.z)/3),$=c*c,l=new aa,h=new aa;if(a.isBufferGeometry){var u=a.index,V=a.attributes.position.array;if(null!==u)for(var d=u.array,f=0,m=d.length;f<m;f++){var x=d[f];l.fromArray(V,3*x),y(l,x)}else{f=0;for(var v=V.length/3;f<v;f++)l.fromArray(V,3*f),y(l,f)}}else{var g=a.vertices;for(f=0,v=g.length;f<v;f++)y(g[f],f)}}function y(e,r){var a=t.distanceSqToPoint(e);if(a<$){t.closestPointToPoint(e,h),h.applyMatrix4(s);var p=n.ray.origin.distanceTo(h);if(p<n.near||p>n.far)return;i.push({distance:p,distanceToRay:Math.sqrt(a),point:h.clone(),index:r,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),dn.prototype=Object.assign(Object.create(H.prototype),{constructor:dn,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),oe.prototype=Object.create(H.prototype),oe.prototype.constructor=oe,oe.prototype.isCompressedTexture=!0,Bg.prototype=Object.create(H.prototype),Bg.prototype.constructor=Bg,Bg.prototype.isCanvasTexture=!0,zg.prototype=Object.create(H.prototype),zg.prototype.constructor=zg,zg.prototype.isDepthTexture=!0,le.prototype=Object.create(q.prototype),le.prototype.constructor=le,ug.prototype=Object.create(v.prototype),ug.prototype.constructor=ug,ke.prototype=Object.create(q.prototype),ke.prototype.constructor=ke,rg.prototype=Object.create(v.prototype),rg.prototype.constructor=rg,ya.prototype=Object.create(q.prototype),ya.prototype.constructor=ya,qg.prototype=Object.create(v.prototype),qg.prototype.constructor=qg,ie.prototype=Object.create(ya.prototype),ie.prototype.constructor=ie,ig.prototype=Object.create(v.prototype),ig.prototype.constructor=ig,Ed.prototype=Object.create(ya.prototype),Ed.prototype.constructor=Ed,Zf.prototype=Object.create(v.prototype),Zf.prototype.constructor=Zf,ge.prototype=Object.create(ya.prototype),ge.prototype.constructor=ge,Rf.prototype=Object.create(v.prototype),Rf.prototype.constructor=Rf,ee.prototype=Object.create(ya.prototype),ee.prototype.constructor=ee,Mf.prototype=Object.create(v.prototype),Mf.prototype.constructor=Mf,ce.prototype=Object.create(q.prototype),ce.prototype.constructor=ce,Hf.prototype=Object.create(v.prototype),Hf.prototype.constructor=Hf,be.prototype=Object.create(q.prototype),be.prototype.constructor=be,Ff.prototype=Object.create(v.prototype),Ff.prototype.constructor=Ff,$d.prototype=Object.create(q.prototype),$d.prototype.constructor=$d;var dz={triangulate:function(e,t,r){r=r||2;var n,i,o,a,s,p,c,$=t&&t.length,l=$?t[0]*r:e.length,h=Ex(e,0,l,r,!0),u=[];if(!h)return u;if($&&(h=Yy(e,t,h,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var V=r;V<l;V+=r)(s=e[V])<n&&(n=s),(p=e[V+1])<i&&(i=p),s>o&&(o=s),p>a&&(a=p);c=0!==(c=Math.max(o-n,a-i))?1/c:0}return mh(h,u,r,n,i,c),u}};function Ex(e,t,r,n,i){var o,a;if(i===SH(e,t,r,n)>0)for(o=t;o<r;o+=n)a=ay(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=ay(o,e[o],e[o+1],a);return a&&id(a,a.next)&&(Qg(a),a=a.next),a}function th(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!id(n,n.next)&&0!==na(n.prev,n,n.next))n=n.next;else{if(Qg(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function mh(e,t,r,n,i,o,a){if(e){!a&&o&&Uy(e,n,i,o);for(var s,p,c=e;e.prev!==e.next;)if(s=e.prev,p=e.next,o?_y(e,n,i,o):az(e))t.push(s.i/r),t.push(e.i/r),t.push(p.i/r),Qg(e),e=p.next,c=p.next;else if((e=p)===c){a?1===a?mh(e=$y(e,t,r),t,r,n,i,o,2):2===a&&Zy(e,t,r,n,i,o):mh(th(e),t,r,n,i,o,1);break}}}function az(e){var t=e.prev,r=e,n=e.next;if(na(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(kk(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&na(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function _y(e,t,r,n){var i=e.prev,o=e,a=e.next;if(na(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,p=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,$=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=On(s,p,t,r,n),h=On(c,$,t,r,n),u=e.nextZ;u&&u.z<=h;){if(u!==e.prev&&u!==e.next&&kk(i.x,i.y,o.x,o.y,a.x,a.y,u.x,u.y)&&na(u.prev,u,u.next)>=0)return!1;u=u.nextZ}for(u=e.prevZ;u&&u.z>=l;){if(u!==e.prev&&u!==e.next&&kk(i.x,i.y,o.x,o.y,a.x,a.y,u.x,u.y)&&na(u.prev,u,u.next)>=0)return!1;u=u.prevZ}return!0}function $y(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!id(i,o)&&Xx(i,n,n.next,o)&&Xg(i,o)&&Xg(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),Qg(n),Qg(n.next),n=e=o),n=n.next}while(n!==e);return n}function Zy(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ry(a,s)){var p=_x(a,s);return a=th(a,a.next),p=th(p,p.next),mh(a,t,r,n,i,o),void mh(p,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function Yy(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Ex(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(Sy(a));for(s.sort(Xy),i=0;i<s.length;i++)Wy(s[i],r),r=th(r,r.next);return r}function Xy(e,t){return e.x-t.x}function Wy(e,t){if(t=Vy(e,t)){var r=_x(t,e);th(r,r.next)}}function Vy(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var p,c=r,$=r.x,l=r.y,h=1/0;for(n=r.next;n!==c;)i>=n.x&&n.x>=$&&i!==n.x&&kk(o<l?i:a,o,$,l,o<l?a:i,o,n.x,n.y)&&((p=Math.abs(o-n.y)/(i-n.x))<h||p===h&&n.x>r.x)&&Xg(n,e)&&(r=n,h=p),n=n.next;return r}function Uy(e,t,r,n){var i=e;do{null===i.z&&(i.z=On(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Ty(i)}function Ty(e){var t,r,n,i,o,a,s,p,c=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ);t++);for(p=c;s>0||p>0&&n;)0!==s&&(0===p||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,p--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(a>1);return e}function On(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Sy(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function kk(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function Ry(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Qy(e,t)&&Xg(e,t)&&Xg(t,e)&&Py(e,t)}function na(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function id(e,t){return e.x===t.x&&e.y===t.y}function Xx(e,t,r,n){return!!(id(e,t)&&id(r,n)||id(e,n)&&id(r,t))||na(e,t,r)>0!=na(e,t,n)>0&&na(r,n,e)>0!=na(r,n,t)>0}function Qy(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Xx(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Xg(e,t){return na(e.prev,e,e.next)<0?na(e,t,e.next)>=0&&na(e,e.prev,t)>=0:na(e,t,e.prev)<0||na(e,e.next,t)<0}function Py(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function _x(e,t){var r=new Yn(e.i,e.x,e.y),n=new Yn(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function ay(e,t,r,n){var i=new Yn(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Qg(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Yn(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function SH(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}var Wb={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return .5*r},isClockWise:function(e){return Wb.area(e)<0},triangulateShape:function(e,t){var r=[],n=[],i=[];fy(e),gy(r,e);var o=e.length;t.forEach(fy);for(var a=0;a<t.length;a++)n.push(o),o+=t[a].length,gy(r,t[a]);var s=dz.triangulate(r,n);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function fy(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function gy(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function Xc(e,t){v.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Bb(e,t)),this.mergeVertices()}function Bb(e,t){q.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,n=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,p=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,$=void 0!==t.bevelThickness?t.bevelThickness:6,l=void 0!==t.bevelSize?t.bevelSize:$-2,h=void 0!==t.bevelSegments?t.bevelSegments:3,u=t.extrudePath,V=void 0!==t.UVGenerator?t.UVGenerator:Ny;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),p=t.amount);var d,f,m,x,v,g,y,b,_=!1;u&&(d=u.getSpacedPoints(s),_=!0,c=!1,f=u.computeFrenetFrames(s,!1),m=new aa,x=new aa,v=new aa),c||(h=0,$=0,l=0);var M=e.extractPoints(a),w=M.shape,S=M.holes;if(!Wb.isClockWise(w))for(w=w.reverse(),y=0,b=S.length;y<b;y++)g=S[y],Wb.isClockWise(g)&&(S[y]=g.reverse());var T=Wb.triangulateShape(w,S),E=w;for(y=0,b=S.length;y<b;y++)g=S[y],w=w.concat(g);function L(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var A,C,P,B,R,G,D=w.length,I=T.length;function O(e,t,r){var n,i,o,a=e.x-t.x,s=e.y-t.y,p=r.x-e.x,c=r.y-e.y,$=a*a+s*s,l=a*c-s*p;if(Math.abs(l)>Number.EPSILON){var h=Math.sqrt($),u=Math.sqrt(p*p+c*c),V=t.x-s/h,d=t.y+a/h,f=((r.x-c/u-V)*c-(r.y+p/u-d)*p)/(a*c-s*p),m=(n=V+a*f-e.x)*n+(i=d+s*f-e.y)*i;if(m<=2)return new ba(n,i);o=Math.sqrt(m/2)}else{var x=!1;a>Number.EPSILON?p>Number.EPSILON&&(x=!0):a<-Number.EPSILON?p<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(c)&&(x=!0),x?(n=-s,i=a,o=Math.sqrt($)):(n=a,i=s,o=Math.sqrt($/2))}return new ba(n/o,i/o)}for(var F=[],U=0,N=E.length,z=N-1,H=U+1;U<N;U++,z++,H++)z===N&&(z=0),H===N&&(H=0),F[U]=O(E[U],E[z],E[H]);var k,j,W=[],q=F.concat();for(y=0,b=S.length;y<b;y++){for(g=S[y],k=[],U=0,z=(N=g.length)-1,H=U+1;U<N;U++,z++,H++)z===N&&(z=0),H===N&&(H=0),k[U]=O(g[U],g[z],g[H]);W.push(k),q=q.concat(k)}for(A=0;A<h;A++){for(P=A/h,B=$*Math.cos(P*Math.PI/2),C=l*Math.sin(P*Math.PI/2),U=0,N=E.length;U<N;U++)Y((R=L(E[U],F[U],C)).x,R.y,-B);for(y=0,b=S.length;y<b;y++)for(g=S[y],k=W[y],U=0,N=g.length;U<N;U++)Y((R=L(g[U],k[U],C)).x,R.y,-B)}for(C=l,U=0;U<D;U++)R=c?L(w[U],q[U],C):w[U],_?(x.copy(f.normals[0]).multiplyScalar(R.x),m.copy(f.binormals[0]).multiplyScalar(R.y),v.copy(d[0]).add(x).add(m),Y(v.x,v.y,v.z)):Y(R.x,R.y,0);for(j=1;j<=s;j++)for(U=0;U<D;U++)R=c?L(w[U],q[U],C):w[U],_?(x.copy(f.normals[j]).multiplyScalar(R.x),m.copy(f.binormals[j]).multiplyScalar(R.y),v.copy(d[j]).add(x).add(m),Y(v.x,v.y,v.z)):Y(R.x,R.y,p/s*j);for(A=h-1;A>=0;A--){for(P=A/h,B=$*Math.cos(P*Math.PI/2),C=l*Math.sin(P*Math.PI/2),U=0,N=E.length;U<N;U++)Y((R=L(E[U],F[U],C)).x,R.y,p+B);for(y=0,b=S.length;y<b;y++)for(g=S[y],k=W[y],U=0,N=g.length;U<N;U++)R=L(g[U],k[U],C),_?Y(R.x,R.y+d[s-1].y,d[s-1].x+B):Y(R.x,R.y,p+B)}function X(e,t){var r,n;for(U=e.length;--U>=0;){r=U,(n=U-1)<0&&(n=e.length-1);var i=0,o=s+2*h;for(i=0;i<o;i++){var a=D*i,p=D*(i+1);Z(t+r+a,t+n+a,t+n+p,t+r+p)}}}function Y(e,t,r){o.push(e),o.push(t),o.push(r)}function J(e,t,i){Q(e),Q(t),Q(i);var o=n.length/3,a=V.generateTopUV(r,n,o-3,o-2,o-1);K(a[0]),K(a[1]),K(a[2])}function Z(e,t,i,o){Q(e),Q(t),Q(o),Q(t),Q(i),Q(o);var a=n.length/3,s=V.generateSideWallUV(r,n,a-6,a-3,a-2,a-1);K(s[0]),K(s[1]),K(s[3]),K(s[1]),K(s[2]),K(s[3])}function Q(e){n.push(o[3*e+0]),n.push(o[3*e+1]),n.push(o[3*e+2])}function K(e){i.push(e.x),i.push(e.y)}!function(){var e=n.length/3;if(c){var t=0,i=D*t;for(U=0;U<I;U++)J((G=T[U])[2]+i,G[1]+i,G[0]+i);for(i=D*(t=s+2*h),U=0;U<I;U++)J((G=T[U])[0]+i,G[1]+i,G[2]+i)}else{for(U=0;U<I;U++)J((G=T[U])[2],G[1],G[0]);for(U=0;U<I;U++)J((G=T[U])[0]+D*s,G[1]+D*s,G[2]+D*s)}r.addGroup(e,n.length/3-e,0)}(),function(){var e=n.length/3,t=0;for(X(E,t),t+=E.length,y=0,b=S.length;y<b;y++)X(g=S[y],t),t+=g.length;r.addGroup(e,n.length/3-e,1)}()}this.addAttribute("position",new k(n,3)),this.addAttribute("uv",new k(i,2)),this.computeVertexNormals()}Xc.prototype=Object.create(v.prototype),Xc.prototype.constructor=Xc,Xc.prototype.toJSON=function(){var e=v.prototype.toJSON.call(this);return ky(this.parameters.shapes,this.parameters.options,e)},Bb.prototype=Object.create(q.prototype),Bb.prototype.constructor=Bb,Bb.prototype.toJSON=function(){var e=q.prototype.toJSON.call(this);return ky(this.parameters.shapes,this.parameters.options,e)};var Ny={generateTopUV:function(e,t,r,n,i){var o=t[3*r],a=t[3*r+1],s=t[3*n],p=t[3*n+1],c=t[3*i],$=t[3*i+1];return[new ba(o,a),new ba(s,p),new ba(c,$)]},generateSideWallUV:function(e,t,r,n,i,o){var a=t[3*r],s=t[3*r+1],p=t[3*r+2],c=t[3*n],$=t[3*n+1],l=t[3*n+2],h=t[3*i],u=t[3*i+1],V=t[3*i+2],d=t[3*o],f=t[3*o+1],m=t[3*o+2];return Math.abs(s-$)<.01?[new ba(a,1-p),new ba(c,1-l),new ba(h,1-V),new ba(d,1-m)]:[new ba(s,1-p),new ba($,1-l),new ba(u,1-V),new ba(f,1-m)]}};function ky(e,t,r){if(r.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];r.shapes.push(o.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}function Pg(e,t){v.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Xd(e,t)),this.mergeVertices()}function Xd(e,t){var r=(t=t||{}).font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new v;var n=r.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Bb.call(this,n,t),this.type="TextBufferGeometry"}function Uf(e,t,r,n,i,o,a){v.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Oc(e,t,r,n,i,o,a)),this.mergeVertices()}function Oc(e,t,r,n,i,o,a){q.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var s,p,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),$=0,l=[],h=new aa,u=new aa,V=[],d=[],f=[],m=[];for(p=0;p<=r;p++){var x=[],v=p/r;for(s=0;s<=t;s++){var g=s/t;h.x=-e*Math.cos(n+g*i)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(n+g*i)*Math.sin(o+v*a),d.push(h.x,h.y,h.z),u.set(h.x,h.y,h.z).normalize(),f.push(u.x,u.y,u.z),m.push(g,1-v),x.push($++)}l.push(x)}for(p=0;p<r;p++)for(s=0;s<t;s++){var y=l[p][s+1],b=l[p][s],_=l[p+1][s],M=l[p+1][s+1];(0!==p||o>0)&&V.push(y,b,M),(p!==r-1||c<Math.PI)&&V.push(b,_,M)}this.setIndex(V),this.addAttribute("position",new k(d,3)),this.addAttribute("normal",new k(f,3)),this.addAttribute("uv",new k(m,2))}function Nf(e,t,r,n,i,o){v.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Ud(e,t,r,n,i,o)),this.mergeVertices()}function Ud(e,t,r,n,i,o){q.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var a,s,p,c=[],$=[],l=[],h=[],u=e,V=(t-e)/(n=void 0!==n?Math.max(1,n):1),d=new aa,f=new ba;for(s=0;s<=n;s++){for(p=0;p<=r;p++)a=i+p/r*o,d.x=u*Math.cos(a),d.y=u*Math.sin(a),$.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,h.push(f.x,f.y);u+=V}for(s=0;s<n;s++){var m=s*(r+1);for(p=0;p<r;p++){var x=a=p+m,v=a+r+1,g=a+r+2,y=a+1;c.push(x,v,y),c.push(v,g,y)}}this.setIndex(c),this.addAttribute("position",new k($,3)),this.addAttribute("normal",new k(l,3)),this.addAttribute("uv",new k(h,2))}function Gf(e,t,r,n){v.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new Td(e,t,r,n)),this.mergeVertices()}function Td(e,t,r,n){q.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||2*Math.PI,n=ea.clamp(n,0,2*Math.PI);var i,o,a,s=[],p=[],c=[],$=1/t,l=new aa,h=new ba;for(o=0;o<=t;o++){var u=r+o*$*n,V=Math.sin(u),d=Math.cos(u);for(a=0;a<=e.length-1;a++)l.x=e[a].x*V,l.y=e[a].y,l.z=e[a].x*d,p.push(l.x,l.y,l.z),h.x=o/t,h.y=a/(e.length-1),c.push(h.x,h.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var f=i=a+o*e.length,m=i+e.length,x=i+e.length+1,v=i+1;s.push(f,m,v),s.push(m,x,v)}if(this.setIndex(s),this.addAttribute("position",new k(p,3)),this.addAttribute("uv",new k(c,2)),this.computeVertexNormals(),n===2*Math.PI){var g=this.attributes.normal.array,y=new aa,b=new aa,_=new aa;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)y.x=g[a+0],y.y=g[a+1],y.z=g[a+2],b.x=g[i+a+0],b.y=g[i+a+1],b.z=g[i+a+2],_.addVectors(y,b).normalize(),g[a+0]=g[i+a+0]=_.x,g[a+1]=g[i+a+1]=_.y,g[a+2]=g[i+a+2]=_.z}}function Cd(e,t){v.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new dd(e,t)),this.mergeVertices()}function dd(e,t){q.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var p=0;p<e.length;p++)c(e[p]),this.addGroup(a,s,p),a+=s,s=0;function c(e){var a,p,c,$=n.length/3,l=e.extractPoints(t),h=l.shape,u=l.holes;if(!1===Wb.isClockWise(h))for(h=h.reverse(),a=0,p=u.length;a<p;a++)c=u[a],!0===Wb.isClockWise(c)&&(u[a]=c.reverse());var V=Wb.triangulateShape(h,u);for(a=0,p=u.length;a<p;a++)c=u[a],h=h.concat(c);for(a=0,p=h.length;a<p;a++){var d=h[a];n.push(d.x,d.y,0),i.push(0,0,1),o.push(d.x,d.y)}for(a=0,p=V.length;a<p;a++){var f=V[a],m=f[0]+$,x=f[1]+$,v=f[2]+$;r.push(m,x,v),s+=3}}this.setIndex(r),this.addAttribute("position",new k(n,3)),this.addAttribute("normal",new k(i,3)),this.addAttribute("uv",new k(o,2))}function vy(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Sd(e,t){q.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,n,i,o,a=[],s=Math.cos(ea.DEG2RAD*t),p=[0,0],c={},$=["a","b","c"];e.isBufferGeometry?(o=new v).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var l=o.vertices,h=o.faces,u=0,V=h.length;u<V;u++)for(var d=h[u],f=0;f<3;f++)r=d[$[f]],n=d[$[(f+1)%3]],p[0]=Math.min(r,n),p[1]=Math.max(r,n),void 0===c[i=p[0]+","+p[1]]?c[i]={index1:p[0],index2:p[1],face1:u,face2:void 0}:c[i].face2=u;for(i in c){var m=c[i];if(void 0===m.face2||h[m.face1].normal.dot(h[m.face2].normal)<=s){var x=l[m.index1];a.push(x.x,x.y,x.z),x=l[m.index2],a.push(x.x,x.y,x.z)}}this.addAttribute("position",new k(a,3))}function cd(e,t,r,n,i,o,a,s){v.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Ob(e,t,r,n,i,o,a,s)),this.mergeVertices()}function Ob(e,t,r,n,i,o,a,s){q.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var p=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],$=[],l=[],h=[],u=0,V=[],d=r/2,f=0;function m(r){var i,o,V,m=new ba,x=new aa,v=0,g=!0===r?e:t,y=!0===r?1:-1;for(o=u,i=1;i<=n;i++)$.push(0,d*y,0),l.push(0,y,0),h.push(.5,.5),u++;for(V=u,i=0;i<=n;i++){var b=i/n*s+a,_=Math.cos(b),M=Math.sin(b);x.x=g*M,x.y=d*y,x.z=g*_,$.push(x.x,x.y,x.z),l.push(0,y,0),m.x=.5*_+.5,m.y=.5*M*y+.5,h.push(m.x,m.y),u++}for(i=0;i<n;i++){var w=o+i,S=V+i;!0===r?c.push(S,S+1,w):c.push(S+1,S,w),v+=3}p.addGroup(f,v,!0===r?1:2),f+=v}!function(){var o,m,x=new aa,v=new aa,g=0,y=(t-e)/r;for(m=0;m<=i;m++){var b=[],_=m/i,M=_*(t-e)+e;for(o=0;o<=n;o++){var w=o/n,S=w*s+a,T=Math.sin(S),E=Math.cos(S);v.x=M*T,v.y=-_*r+d,v.z=M*E,$.push(v.x,v.y,v.z),x.set(T,y,E).normalize(),l.push(x.x,x.y,x.z),h.push(w,1-_),b.push(u++)}V.push(b)}for(o=0;o<n;o++)for(m=0;m<i;m++){var L=V[m][o],A=V[m+1][o],C=V[m+1][o+1],P=V[m][o+1];c.push(L,A,P),c.push(A,C,P),g+=6}p.addGroup(f,g,0),f+=g}(),!1===o&&(e>0&&m(!0),t>0&&m(!1)),this.setIndex(c),this.addAttribute("position",new k($,3)),this.addAttribute("normal",new k(l,3)),this.addAttribute("uv",new k(h,2))}function jg(e,t,r,n,i,o,a){cd.call(this,0,e,t,r,n,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function Yf(e,t,r,n,i,o,a){Ob.call(this,0,e,t,r,n,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function Lf(e,t,r,n){v.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new Rd(e,t,r,n)),this.mergeVertices()}function Rd(e,t,r,n){q.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,o,a=[],s=[],p=[],c=[],$=new aa,l=new ba;for(s.push(0,0,0),p.push(0,0,1),c.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var h=r+o/t*n;$.x=e*Math.cos(h),$.y=e*Math.sin(h),s.push($.x,$.y,$.z),p.push(0,0,1),l.x=(s[i]/e+1)/2,l.y=(s[i+1]/e+1)/2,c.push(l.x,l.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new k(s,3)),this.addAttribute("normal",new k(p,3)),this.addAttribute("uv",new k(c,2))}Pg.prototype=Object.create(v.prototype),Pg.prototype.constructor=Pg,Xd.prototype=Object.create(Bb.prototype),Xd.prototype.constructor=Xd,Uf.prototype=Object.create(v.prototype),Uf.prototype.constructor=Uf,Oc.prototype=Object.create(q.prototype),Oc.prototype.constructor=Oc,Nf.prototype=Object.create(v.prototype),Nf.prototype.constructor=Nf,Ud.prototype=Object.create(q.prototype),Ud.prototype.constructor=Ud,Gf.prototype=Object.create(v.prototype),Gf.prototype.constructor=Gf,Td.prototype=Object.create(q.prototype),Td.prototype.constructor=Td,Cd.prototype=Object.create(v.prototype),Cd.prototype.constructor=Cd,Cd.prototype.toJSON=function(){var e=v.prototype.toJSON.call(this);return vy(this.parameters.shapes,e)},dd.prototype=Object.create(q.prototype),dd.prototype.constructor=dd,dd.prototype.toJSON=function(){var e=q.prototype.toJSON.call(this);return vy(this.parameters.shapes,e)},Sd.prototype=Object.create(q.prototype),Sd.prototype.constructor=Sd,cd.prototype=Object.create(v.prototype),cd.prototype.constructor=cd,Ob.prototype=Object.create(q.prototype),Ob.prototype.constructor=Ob,jg.prototype=Object.create(cd.prototype),jg.prototype.constructor=jg,Yf.prototype=Object.create(Ob.prototype),Yf.prototype.constructor=Yf,Lf.prototype=Object.create(v.prototype),Lf.prototype.constructor=Lf,Rd.prototype=Object.create(q.prototype),Rd.prototype.constructor=Rd;var Ea=Object.freeze({WireframeGeometry:le,ParametricGeometry:ug,ParametricBufferGeometry:ke,TetrahedronGeometry:qg,TetrahedronBufferGeometry:ie,OctahedronGeometry:ig,OctahedronBufferGeometry:Ed,IcosahedronGeometry:Zf,IcosahedronBufferGeometry:ge,DodecahedronGeometry:Rf,DodecahedronBufferGeometry:ee,PolyhedronGeometry:rg,PolyhedronBufferGeometry:ya,TubeGeometry:Mf,TubeBufferGeometry:ce,TorusKnotGeometry:Hf,TorusKnotBufferGeometry:be,TorusGeometry:Ff,TorusBufferGeometry:$d,TextGeometry:Pg,TextBufferGeometry:Xd,SphereGeometry:Uf,SphereBufferGeometry:Oc,RingGeometry:Nf,RingBufferGeometry:Ud,PlaneGeometry:Xf,PlaneBufferGeometry:Rc,LatheGeometry:Gf,LatheBufferGeometry:Td,ShapeGeometry:Cd,ShapeBufferGeometry:dd,ExtrudeGeometry:Xc,ExtrudeBufferGeometry:Bb,EdgesGeometry:Sd,ConeGeometry:jg,ConeBufferGeometry:Yf,CylinderGeometry:cd,CylinderBufferGeometry:Ob,CircleGeometry:Lf,CircleBufferGeometry:Rd,BoxGeometry:Me,BoxBufferGeometry:Yc});function $c(e){u.call(this),this.type="ShadowMaterial",this.color=new z(0),this.transparent=!0,this.setValues(e)}function Pd(e){Sa.call(this,e),this.type="RawShaderMaterial"}function pb(e){u.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new z(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sf,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function td(e){pb.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function kb(e){u.call(this),this.type="MeshPhongMaterial",this.color=new z(16777215),this.specular=new z(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sf,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ph,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Nc(e){kb.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function pd(e){u.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sf,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function nd(e){u.call(this),this.type="MeshLambertMaterial",this.color=new z(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new z(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ph,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Qc(e){if(u.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new z(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sf,this.normalScale=new ba(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e),null===this.matcap){var t=document.createElement("canvas");t.width=1,t.height=1;var r=t.getContext("2d");r.fillStyle="#fff",r.fillRect(0,0,1,1),this.matcap=new THREE.CanvasTexture(t)}}function bd(e){D.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}$c.prototype=Object.create(u.prototype),$c.prototype.constructor=$c,$c.prototype.isShadowMaterial=!0,$c.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this},Pd.prototype=Object.create(Sa.prototype),Pd.prototype.constructor=Pd,Pd.prototype.isRawShaderMaterial=!0,pb.prototype=Object.create(u.prototype),pb.prototype.constructor=pb,pb.prototype.isMeshStandardMaterial=!0,pb.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},td.prototype=Object.create(pb.prototype),td.prototype.constructor=td,td.prototype.isMeshPhysicalMaterial=!0,td.prototype.copy=function(e){return pb.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},kb.prototype=Object.create(u.prototype),kb.prototype.constructor=kb,kb.prototype.isMeshPhongMaterial=!0,kb.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Nc.prototype=Object.create(kb.prototype),Nc.prototype.constructor=Nc,Nc.prototype.isMeshToonMaterial=!0,Nc.prototype.copy=function(e){return kb.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},pd.prototype=Object.create(u.prototype),pd.prototype.constructor=pd,pd.prototype.isMeshNormalMaterial=!0,pd.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},nd.prototype=Object.create(u.prototype),nd.prototype.constructor=nd,nd.prototype.isMeshLambertMaterial=!0,nd.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Qc.prototype=Object.create(u.prototype),Qc.prototype.constructor=Qc,Qc.prototype.isMeshMatcapMaterial=!0,Qc.prototype.copy=function(e){return u.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},bd.prototype=Object.create(D.prototype),bd.prototype.constructor=bd,bd.prototype.isLineDashedMaterial=!0,bd.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Oy=Object.freeze({ShadowMaterial:$c,SpriteMaterial:yc,RawShaderMaterial:Pd,ShaderMaterial:Sa,PointsMaterial:ob,MeshPhysicalMaterial:td,MeshStandardMaterial:pb,MeshPhongMaterial:kb,MeshToonMaterial:Nc,MeshNormalMaterial:pd,MeshLambertMaterial:nd,MeshDepthMaterial:sc,MeshDistanceMaterial:pc,MeshBasicMaterial:Ua,MeshMatcapMaterial:Qc,LineDashedMaterial:bd,LineBasicMaterial:D,Material:u}),X={arraySlice:function(e,t,r){return X.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),n=0;n!==t;++n)r[n]=n;return r.sort(function(t,r){return e[t]-e[r]}),r},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=r[o]*t,p=0;p!==t;++p)i[a++]=e[s+p];return i},flattenJSON:function(e,t,r,n){for(var i=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[i++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[n])&&(t.push(o.time),r.push.apply(r,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[n])&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[n])&&(t.push(o.time),r.push(a)),o=e[i++]}while(void 0!==o)}}};function Oa(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function lk(e,t,r,n){Oa.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Yg(e,t,r,n){Oa.call(this,e,t,r,n)}function jk(e,t,r,n){Oa.call(this,e,t,r,n)}function U(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=X.convertArray(t,this.TimeBufferType),this.values=X.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function ik(e,t,r){U.call(this,e,t,r)}function hk(e,t,r,n){U.call(this,e,t,r,n)}function Yd(e,t,r,n){U.call(this,e,t,r,n)}function fk(e,t,r,n){Oa.call(this,e,t,r,n)}function $g(e,t,r,n){U.call(this,e,t,r,n)}function dk(e,t,r,n){U.call(this,e,t,r,n)}function Zd(e,t,r,n){U.call(this,e,t,r,n)}function Ga(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=ea.generateUUID(),this.duration<0&&this.resetDuration()}function bz(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yd;case"vector":case"vector2":case"vector3":case"vector4":return Zd;case"color":return hk;case"quaternion":return $g;case"bool":case"boolean":return ik;case"string":return dk;}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function cz(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=bz(e.type);if(void 0===e.times){var r=[],n=[];X.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Oa.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var o;r:{n:if(!(e<n)){for(var a=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===a)break;if(i=n,e<(n=t[++r]))break t}o=t.length;break r}if(e>=i)break e;var s=t[1];e<s&&(r=2,i=s);for(a=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===a)break;if(n=i,e>=(i=t[--r-1]))break t}o=r,r=0}for(;r<o;){var p=r+o>>>1;e<t[p]?o=p:r=p+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,o=0;o!==n;++o)t[o]=r[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Oa.prototype,{beforeStart_:Oa.prototype.copySampleValue_,afterEnd_:Oa.prototype.copySampleValue_}),lk.prototype=Object.assign(Object.create(Oa.prototype),{constructor:lk,DefaultSettings_:{endingStart:_c,endingEnd:_c},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,o=e+1,a=n[i],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case Zc:i=e,a=2*t-r;break;case bh:a=t+n[i=n.length-2]-n[i+1];break;default:i=e,a=r;}if(void 0===s)switch(this.getSettings_().endingEnd){case Zc:o=e,s=2*r-t;break;case bh:o=1,s=r+n[1]-n[0];break;default:o=e-1,s=t;}var p=.5*(r-t),c=this.valueSize;this._weightPrev=p/(t-a),this._weightNext=p/(s-r),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,p=s-a,c=this._offsetPrev,$=this._offsetNext,l=this._weightPrev,h=this._weightNext,u=(r-t)/(n-t),V=u*u,d=V*u,f=-l*d+2*l*V-l*u,m=(1+l)*d+(-1.5-2*l)*V+(-.5+l)*u+1,x=(-1-h)*d+(1.5+h)*V+.5*u,v=h*d-h*V,g=0;g!==a;++g)i[g]=f*o[c+g]+m*o[p+g]+x*o[s+g]+v*o[$+g];return i}}),Yg.prototype=Object.assign(Object.create(Oa.prototype),{constructor:Yg,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,p=s-a,c=(r-t)/(n-t),$=1-c,l=0;l!==a;++l)i[l]=o[p+l]*$+o[s+l]*c;return i}}),jk.prototype=Object.assign(Object.create(Oa.prototype),{constructor:jk,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(U,{toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:X.convertArray(e.times,Array),values:X.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(U.prototype,{constructor:U,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:dh,InterpolantFactoryMethodDiscrete:function(e){return new jk(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Yg(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new lk(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case eh:t=this.InterpolantFactoryMethodDiscrete;break;case dh:t=this.InterpolantFactoryMethodLinear;break;case ii:t=this.InterpolantFactoryMethodSmooth;}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return eh;case this.InterpolantFactoryMethodLinear:return dh;case this.InterpolantFactoryMethodSmooth:return ii;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,o=n-1;i!==n&&r[i]<e;)++i;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==i||o!==n){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=X.arraySlice(r,i,o),this.values=X.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=r[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==n&&X.isTypedArray(n)){a=0;for(var p=n.length;a!==p;++a){var c=n[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),n=this.getInterpolation()===ii,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,p=e[a];if(p!==e[a+1]&&(1!==a||p!==p[0]))if(n)s=!0;else for(var c=a*r,$=c-r,l=c+r,h=0;h!==r;++h){var u=t[c+h];if(u!==t[$+h]||u!==t[l+h]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var V=a*r,d=i*r;for(h=0;h!==r;++h)t[d+h]=t[V+h]}++i}}if(o>0){e[i]=e[o];for(V=o*r,d=i*r,h=0;h!==r;++h)t[d+h]=t[V+h];++i}return i!==e.length&&(this.times=X.arraySlice(e,0,i),this.values=X.arraySlice(t,0,i*r)),this}}),ik.prototype=Object.assign(Object.create(U.prototype),{constructor:ik,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:eh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),hk.prototype=Object.assign(Object.create(U.prototype),{constructor:hk,ValueTypeName:"color"}),Yd.prototype=Object.assign(Object.create(U.prototype),{constructor:Yd,ValueTypeName:"number"}),fk.prototype=Object.assign(Object.create(Oa.prototype),{constructor:fk,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,p=(r-t)/(n-t),c=s+a;s!==c;s+=4)P.slerpFlat(i,0,o,s-a,o,s,p);return i}}),$g.prototype=Object.assign(Object.create(U.prototype),{constructor:$g,ValueTypeName:"quaternion",DefaultInterpolation:dh,InterpolantFactoryMethodLinear:function(e){return new fk(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),dk.prototype=Object.assign(Object.create(U.prototype),{constructor:dk,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:eh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zd.prototype=Object.assign(Object.create(U.prototype),{constructor:Zd,ValueTypeName:"vector"}),Object.assign(Ga,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,o=r.length;i!==o;++i)t.push(cz(r[i]).scale(n));return new Ga(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=r.length;i!==o;++i)t.push(U.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],p=[];s.push((a+i-1)%i,a,(a+1)%i),p.push(0,1,0);var c=X.getKeyframeOrder(s);s=X.sortedArray(s,1,c),p=X.sortedArray(p,1,c),n||0!==s[0]||(s.push(i),p.push(p[0])),o.push(new Yd(".morphTargetInfluences["+t[a].name+"]",s,p).scale(1/r))}return new Ga(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],p=s.name.match(i);if(p&&p.length>1){var c=n[l=p[1]];c||(n[l]=c=[]),c.push(s)}}var $=[];for(var l in n)$.push(Ga.CreateFromMorphTargetSequence(l,n[l],t,r));return $},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var o=[],a=[];X.flattenJSON(r,o,a,n),0!==o.length&&i.push(new e(t,o,a))}},n=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],p=0;p<s.length;p++){var c=s[p].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var $={},l=0;l<c.length;l++)if(c[l].morphTargets)for(var h=0;h<c[l].morphTargets.length;h++)$[c[l].morphTargets[h]]=-1;for(var u in $){var V=[],d=[];for(h=0;h!==c[l].morphTargets.length;++h){var f=c[l];V.push(f.time),d.push(f.morphTarget===u?1:0)}n.push(new Yd(".morphTargetInfluence["+u+"]",V,d))}o=$.length*(a||1)}else{var m=".bones["+t[p].name+"]";r(Zd,m+".position",c,"pos",n),r($g,m+".quaternion",c,"rot",n),r(Zd,m+".scale",c,"scl",n)}}return 0===n.length?null:new Ga(i,o,n)}}),Object.assign(Ga.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});var yd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Mm(e,t,r){var n=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++,!1===i&&void 0!==n.onStart&&n.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var ta=new Mm,mb={};function bb(e){this.manager=void 0!==e?e:ta}function xw(e){this.manager=void 0!==e?e:ta}function ww(e){this.manager=void 0!==e?e:ta,this._parser=null}function Bm(e){this.manager=void 0!==e?e:ta,this._parser=null}function xf(e){this.manager=void 0!==e?e:ta}function zm(e){this.manager=void 0!==e?e:ta}function Aj(e){this.manager=void 0!==e?e:ta}function h(){this.type="Curve",this.arcLengthDivisions=200}function Pa(e,t,r,n,i,o,a,s){h.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ae(e,t,r,n,i,o){Pa.call(this,e,t,r,r,n,i,o),this.type="ArcCurve"}function um(){var e=0,t=0,r=0,n=0;function i(i,o,a,s){e=i,t=a,r=-3*i+3*o-2*a-s,n=2*i-2*o+a+s}return{initCatmullRom:function(e,t,r,n,o){i(t,r,o*(r-e),o*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,o,a,s){var p=(t-e)/o-(r-e)/(o+a)+(r-t)/a,c=(r-t)/a-(n-t)/(a+s)+(n-r)/s;i(t,r,p*=a,c*=a)},calc:function(i){var o=i*i;return e+t*i+r*o+n*(o*i)}}}Object.assign(bb.prototype,{load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===mb[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],p=!!a[2],c=a[3];c=decodeURIComponent(c),p&&(c=atob(c));try{var $,l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":for(var h=new Uint8Array(c.length),u=0;u<c.length;u++)h[u]=c.charCodeAt(u);$="blob"===l?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var V=new DOMParser;$=V.parseFromString(c,s);break;case"json":$=JSON.parse(c);break;default:$=c;}setTimeout(function(){t&&t($),i.manager.itemEnd(e)},0)}catch(m){setTimeout(function(){n&&n(m),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{mb[e]=[],mb[e].push({onLoad:t,onProgress:r,onError:n});var d=new XMLHttpRequest;for(var f in d.open("GET",e,!0),d.addEventListener("load",function(t){var r=this.response;yd.add(e,r);var n=mb[e];if(delete mb[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=n.length;o<a;o++){(s=n[o]).onLoad&&s.onLoad(r)}i.manager.itemEnd(e)}else{for(o=0,a=n.length;o<a;o++){var s;(s=n[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),d.addEventListener("progress",function(t){for(var r=mb[e],n=0,i=r.length;n<i;n++){var o=r[n];o.onProgress&&o.onProgress(t)}},!1),d.addEventListener("error",function(t){var r=mb[e];delete mb[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),d.addEventListener("abort",function(t){var r=mb[e];delete mb[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(d.responseType=this.responseType),void 0!==this.withCredentials&&(d.withCredentials=this.withCredentials),d.overrideMimeType&&d.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)d.setRequestHeader(f,this.requestHeader[f]);d.send(null)}return i.manager.itemStart(e),d}mb[e].push({onLoad:t,onProgress:r,onError:n})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(xw.prototype,{load:function(e,t,r,n){var i=this,o=new bb(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e,t){for(var r=[],n=0;n<e.length;n++){var i=Ga.parse(e[n]);r.push(i)}t(r)},setPath:function(e){return this.path=e,this}}),Object.assign(ww.prototype,{load:function(e,t,r,n){var i=this,o=[],a=new oe;a.image=o;var s=new bb(this.manager);function p(p){s.load(e[p],function(e){var r=i._parser(e,!0);o[p]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(c+=1)&&(1===r.mipmapCount&&(a.minFilter=xa),a.format=r.format,a.needsUpdate=!0,t&&t(a))},r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,$=0,l=e.length;$<l;++$)p($);else s.load(e,function(e){var r=i._parser(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){o[s]={mipmaps:[]};for(var p=0;p<r.mipmapCount;p++)o[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+p]),o[s].format=r.format,o[s].width=r.width,o[s].height=r.height}else a.image.width=r.width,a.image.height=r.height,a.mipmaps=r.mipmaps;1===r.mipmapCount&&(a.minFilter=xa),a.format=r.format,a.needsUpdate=!0,t&&t(a)},r,n);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Bm.prototype,{load:function(e,t,r,n){var i=this,o=new sd,a=new bb(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,function(e){var r=i._parser(e);r&&(void 0!==r.image?o.image=r.image:void 0!==r.data&&(o.image.width=r.width,o.image.height=r.height,o.image.data=r.data),o.wrapS=void 0!==r.wrapS?r.wrapS:La,o.wrapT=void 0!==r.wrapT?r.wrapT:La,o.magFilter=void 0!==r.magFilter?r.magFilter:xa,o.minFilter=void 0!==r.minFilter?r.minFilter:oh,o.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(o.format=r.format),void 0!==r.type&&(o.type=r.type),void 0!==r.mipmaps&&(o.mipmaps=r.mipmaps),1===r.mipmapCount&&(o.minFilter=xa),o.needsUpdate=!0,t&&t(o,r))},r,n),o},setPath:function(e){return this.path=e,this}}),Object.assign(xf.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",p,!1),yd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function p(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",p,!1),n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",p,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(zm.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=new _b,o=new xf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(r){o.load(e[r],function(e){i.images[r]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))},void 0,n)}for(var p=0;p<e.length;++p)s(p);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Aj.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=new H,o=new xf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(r){i.image=r;var n=e.search(/\.jpe?g$/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?gf:rb,i.needsUpdate=!0,void 0!==t&&t(i)},r,n),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(h.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;r<=e;r++)o+=(t=this.getPoint(r/e)).distanceTo(i),n.push(o),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,o=n.length;r=t||e*n[o-1];for(var a,s=0,p=o-1;s<=p;)if((a=n[i=Math.floor(s+(p-s)/2)]-r)<0)s=i+1;else{if(!(a>0)){p=i;break}p=i-1}if(n[i=p]===r)return i/(o-1);var c=n[i];return(i+(r-c)/(n[i+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,n,i,o=new aa,a=[],s=[],p=[],c=new aa,$=new da;for(r=0;r<=e;r++)n=r/e,a[r]=this.getTangentAt(n),a[r].normalize();s[0]=new aa,p[0]=new aa;var l=Number.MAX_VALUE,h=Math.abs(a[0].x),u=Math.abs(a[0].y),V=Math.abs(a[0].z);for(h<=l&&(l=h,o.set(1,0,0)),u<=l&&(l=u,o.set(0,1,0)),V<=l&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),p[0].crossVectors(a[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),p[r]=p[r-1].clone(),c.crossVectors(a[r-1],a[r]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(ea.clamp(a[r-1].dot(a[r]),-1,1)),s[r].applyMatrix4($.makeRotationAxis(c,i))),p[r].crossVectors(a[r],s[r]);if(!0===t)for(i=Math.acos(ea.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4($.makeRotationAxis(a[r],i*r)),p[r].crossVectors(a[r],s[r]);return{tangents:a,normals:s,binormals:p}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Pa.prototype=Object.create(h.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isEllipseCurve=!0,Pa.prototype.getPoint=function(e,t){for(var r=t||new ba,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=o?0:n),!0!==this.aClockwise||o||(i===n?i=-n:i-=n);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),p=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),$=Math.sin(this.aRotation),l=s-this.aX,h=p-this.aY;s=l*c-h*$+this.aX,p=l*$+h*c+this.aY}return r.set(s,p)},Pa.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Pa.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Pa.prototype.fromJSON=function(e){return h.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ae.prototype=Object.create(Pa.prototype),Ae.prototype.constructor=Ae,Ae.prototype.isArcCurve=!0;var zj=new aa,qm=new um,pm=new um,om=new um;function $(e,t,r,n){h.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=n||.5}function bw(e,t,r,n,i){var o=.5*(n-t),a=.5*(i-r),s=e*e;return(2*r-2*n+o+a)*(e*s)+(-3*r+3*n-2*o-a)*s+o*e+r}function yz(e,t){var r=1-e;return r*r*t}function zz(e,t){return 2*(1-e)*e*t}function Az(e,t){return e*e*t}function Af(e,t,r,n){return yz(e,t)+zz(e,r)+Az(e,n)}function Cz(e,t){var r=1-e;return r*r*r*t}function Dz(e,t){var r=1-e;return 3*r*r*e*t}function Ez(e,t){return 3*(1-e)*e*e*t}function Fz(e,t){return e*e*e*t}function Cf(e,t,r,n,i){return Cz(e,t)+Dz(e,r)+Ez(e,n)+Fz(e,i)}function jb(e,t,r,n){h.call(this),this.type="CubicBezierCurve",this.v0=e||new ba,this.v1=t||new ba,this.v2=r||new ba,this.v3=n||new ba}function wb(e,t,r,n){h.call(this),this.type="CubicBezierCurve3",this.v0=e||new aa,this.v1=t||new aa,this.v2=r||new aa,this.v3=n||new aa}function wa(e,t){h.call(this),this.type="LineCurve",this.v1=e||new ba,this.v2=t||new ba}function ib(e,t){h.call(this),this.type="LineCurve3",this.v1=e||new aa,this.v2=t||new aa}function hb(e,t,r){h.call(this),this.type="QuadraticBezierCurve",this.v0=e||new ba,this.v1=t||new ba,this.v2=r||new ba}function tb(e,t,r){h.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new aa,this.v1=t||new aa,this.v2=r||new aa}function fb(e){h.call(this),this.type="SplineCurve",this.points=e||[]}$.prototype=Object.create(h.prototype),$.prototype.constructor=$,$.prototype.isCatmullRomCurve3=!0,$.prototype.getPoint=function(e,t){var r,n,i,o,a=t||new aa,s=this.points,p=s.length,c=(p-(this.closed?0:1))*e,$=Math.floor(c),l=c-$;if(this.closed?$+=$>0?0:(Math.floor(Math.abs($)/p)+1)*p:0===l&&$===p-1&&($=p-2,l=1),this.closed||$>0?r=s[($-1)%p]:(zj.subVectors(s[0],s[1]).add(s[0]),r=zj),n=s[$%p],i=s[($+1)%p],this.closed||$+2<p?o=s[($+2)%p]:(zj.subVectors(s[p-1],s[p-2]).add(s[p-1]),o=zj),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,u=Math.pow(r.distanceToSquared(n),h),V=Math.pow(n.distanceToSquared(i),h),d=Math.pow(i.distanceToSquared(o),h);V<1e-4&&(V=1),u<1e-4&&(u=V),d<1e-4&&(d=V),qm.initNonuniformCatmullRom(r.x,n.x,i.x,o.x,u,V,d),pm.initNonuniformCatmullRom(r.y,n.y,i.y,o.y,u,V,d),om.initNonuniformCatmullRom(r.z,n.z,i.z,o.z,u,V,d)}else"catmullrom"===this.curveType&&(qm.initCatmullRom(r.x,n.x,i.x,o.x,this.tension),pm.initCatmullRom(r.y,n.y,i.y,o.y,this.tension),om.initCatmullRom(r.z,n.z,i.z,o.z,this.tension));return a.set(qm.calc(l),pm.calc(l),om.calc(l)),a},$.prototype.copy=function(e){h.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},$.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},$.prototype.fromJSON=function(e){h.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(new aa().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},jb.prototype=Object.create(h.prototype),jb.prototype.constructor=jb,jb.prototype.isCubicBezierCurve=!0,jb.prototype.getPoint=function(e,t){var r=t||new ba,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Cf(e,n.x,i.x,o.x,a.x),Cf(e,n.y,i.y,o.y,a.y)),r},jb.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},jb.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},jb.prototype.fromJSON=function(e){return h.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},wb.prototype=Object.create(h.prototype),wb.prototype.constructor=wb,wb.prototype.isCubicBezierCurve3=!0,wb.prototype.getPoint=function(e,t){var r=t||new aa,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Cf(e,n.x,i.x,o.x,a.x),Cf(e,n.y,i.y,o.y,a.y),Cf(e,n.z,i.z,o.z,a.z)),r},wb.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},wb.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},wb.prototype.fromJSON=function(e){return h.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},wa.prototype=Object.create(h.prototype),wa.prototype.constructor=wa,wa.prototype.isLineCurve=!0,wa.prototype.getPoint=function(e,t){var r=t||new ba;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},wa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},wa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},wa.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},wa.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},wa.prototype.fromJSON=function(e){return h.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ib.prototype=Object.create(h.prototype),ib.prototype.constructor=ib,ib.prototype.isLineCurve3=!0,ib.prototype.getPoint=function(e,t){var r=t||new aa;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},ib.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ib.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ib.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ib.prototype.fromJSON=function(e){return h.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},hb.prototype=Object.create(h.prototype),hb.prototype.constructor=hb,hb.prototype.isQuadraticBezierCurve=!0,hb.prototype.getPoint=function(e,t){var r=t||new ba,n=this.v0,i=this.v1,o=this.v2;return r.set(Af(e,n.x,i.x,o.x),Af(e,n.y,i.y,o.y)),r},hb.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},hb.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},hb.prototype.fromJSON=function(e){return h.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},tb.prototype=Object.create(h.prototype),tb.prototype.constructor=tb,tb.prototype.isQuadraticBezierCurve3=!0,tb.prototype.getPoint=function(e,t){var r=t||new aa,n=this.v0,i=this.v1,o=this.v2;return r.set(Af(e,n.x,i.x,o.x),Af(e,n.y,i.y,o.y),Af(e,n.z,i.z,o.z)),r},tb.prototype.copy=function(e){return h.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},tb.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},tb.prototype.fromJSON=function(e){return h.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fb.prototype=Object.create(h.prototype),fb.prototype.constructor=fb,fb.prototype.isSplineCurve=!0,fb.prototype.getPoint=function(e,t){var r=t||new ba,n=this.points,i=(n.length-1)*e,o=Math.floor(i),a=i-o,s=n[0===o?o:o-1],p=n[o],c=n[o>n.length-2?n.length-1:o+1],$=n[o>n.length-3?n.length-1:o+2];return r.set(bw(a,s.x,p.x,c.x,$.x),bw(a,s.y,p.y,c.y,$.y)),r},fb.prototype.copy=function(e){h.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this},fb.prototype.toJSON=function(){var e=h.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e},fb.prototype.fromJSON=function(e){h.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(new ba().fromArray(n))}return this};var Nv=Object.freeze({ArcCurve:Ae,CatmullRomCurve3:$,CubicBezierCurve:jb,CubicBezierCurve3:wb,EllipseCurve:Pa,LineCurve:wa,LineCurve3:ib,QuadraticBezierCurve:hb,QuadraticBezierCurve3:tb,SplineCurve:fb});function Pb(){h.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function eb(e){Pb.call(this),this.type="Path",this.currentPoint=new ba,e&&this.setFromPoints(e)}function Dc(e){eb.call(this,e),this.uuid=ea.generateUUID(),this.type="Shape",this.holes=[]}function L(e,t){b.call(this),this.type="Light",this.color=new z(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function qj(e,t,r){L.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(b.DefaultUp),this.updateMatrix(),this.groundColor=new z(t)}function od(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new ba(512,512),this.map=null,this.matrix=new da}function pj(){od.call(this,new N(50,1,.5,500))}function oj(e,t,r,n,i,o){L.call(this,e,t),this.type="SpotLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new pj}function nj(e,t,r,n){L.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new od(new N(90,1,.5,500))}function Jf(e,t,r,n,i,o){Jb.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==r?r:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function lj(){od.call(this,new Jf(-5,5,5,-5,.5,500))}function kj(e,t){L.call(this,e,t),this.type="DirectionalLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,this.shadow=new lj}function jj(e,t){L.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ij(e,t,r,n){L.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function hj(e){this.manager=void 0!==e?e:ta,this.textures={}}Pb.prototype=Object.assign(Object.create(h.prototype),{constructor:Pb,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wa(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,o=this.curves[n],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var o=i[n],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),p=0;p<s.length;p++){var c=s[p];t&&t.equals(c)||(r.push(c),t=c)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){h.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=h.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){h.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(new Nv[n.type]().fromJSON(n))}return this}}),eb.prototype=Object.assign(Object.create(Pb.prototype),{constructor:eb,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new wa(this.currentPoint.clone(),new ba(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,n){var i=new hb(this.currentPoint.clone(),new ba(e,t),new ba(r,n));this.curves.push(i),this.currentPoint.set(r,n)},bezierCurveTo:function(e,t,r,n,i,o){var a=new jb(this.currentPoint.clone(),new ba(e,t),new ba(r,n),new ba(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new fb([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,r,n,i,o)},absarc:function(e,t,r,n,i,o){this.absellipse(e,t,r,r,n,i,o)},ellipse:function(e,t,r,n,i,o,a,s){var p=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+p,t+c,r,n,i,o,a,s)},absellipse:function(e,t,r,n,i,o,a,s){var p=new Pa(e,t,r,n,i,o,a,s);if(this.curves.length>0){var c=p.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(p);var $=p.getPoint(1);this.currentPoint.copy($)},copy:function(e){return Pb.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Pb.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Pb.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Dc.prototype=Object.assign(Object.create(eb.prototype),{constructor:Dc,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){eb.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=eb.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){eb.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(new eb().fromJSON(n))}return this}}),L.prototype=Object.assign(Object.create(b.prototype),{constructor:L,isLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),qj.prototype=Object.assign(Object.create(L.prototype),{constructor:qj,isHemisphereLight:!0,copy:function(e){return L.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(od.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),pj.prototype=Object.assign(Object.create(od.prototype),{constructor:pj,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=2*ea.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&n===t.aspect&&i===t.far||(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix())}}),oj.prototype=Object.assign(Object.create(L.prototype),{constructor:oj,isSpotLight:!0,copy:function(e){return L.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),nj.prototype=Object.assign(Object.create(L.prototype),{constructor:nj,isPointLight:!0,copy:function(e){return L.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Jf.prototype=Object.assign(Object.create(Jb.prototype),{constructor:Jf,isOrthographicCamera:!0,copy:function(e,t){return Jb.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,o=r+e,a=n+t,s=n-t;if(null!==this.view&&this.view.enabled){var p=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),$=(this.right-this.left)/this.view.width,l=(this.top-this.bottom)/this.view.height;o=(i+=$*(this.view.offsetX/p))+$*(this.view.width/p),s=(a-=l*(this.view.offsetY/c))-l*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),lj.prototype=Object.assign(Object.create(od.prototype),{constructor:lj}),kj.prototype=Object.assign(Object.create(L.prototype),{constructor:kj,isDirectionalLight:!0,copy:function(e){return L.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),jj.prototype=Object.assign(Object.create(L.prototype),{constructor:jj,isAmbientLight:!0}),ij.prototype=Object.assign(Object.create(L.prototype),{constructor:ij,isRectAreaLight:!0,copy:function(e){return L.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=L.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(hj.prototype,{load:function(e,t,r,n){var i=this,o=new bb(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new Oy[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(n.uniforms[i]={},o.type){case"t":n.uniforms[i].value=r(o.value);break;case"c":n.uniforms[i].value=new z().setHex(o.value);break;case"v2":n.uniforms[i].value=new ba().fromArray(o.value);break;case"v3":n.uniforms[i].value=new aa().fromArray(o.value);break;case"v4":n.uniforms[i].value=new fa().fromArray(o.value);break;case"m4":n.uniforms[i].value=new da().fromArray(o.value);break;default:n.uniforms[i].value=o.value;}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=r(e.map)),void 0!==e.alphaMap&&(n.alphaMap=r(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),n.normalScale=new ba().fromArray(a)}return void 0!==e.displacementMap&&(n.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=r(e.specularMap)),void 0!==e.envMap&&(n.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=r(e.gradientMap)),n},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var gj={decodeText:function(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Jl(e){this.manager=void 0!==e?e:ta}Object.assign(Jl.prototype,{load:function(e,t,r,n){var i=this,o=new bb(i.manager);o.setPath(i.path),o.load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=new q,r=e.data.index;if(void 0!==r){var n=new ev[r.type](r.array);t.setIndex(new w(n,1))}var i=e.data.attributes;for(var o in i){var a=i[o];n=new ev[a.type](a.array);t.addAttribute(o,new w(n,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var p=0,c=s.length;p!==c;++p){var $=s[p];t.addGroup($.start,$.count,$.materialIndex)}var l=e.data.boundingSphere;if(void 0!==l){var h=new aa;void 0!==l.center&&h.fromArray(l.center),t.boundingSphere=new cb(h,l.radius)}return t},setPath:function(e){return this.path=e,this}});var ev={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function He(){}function dj(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:ta,this.withCredentials=!1}function El(e){this.manager=void 0!==e?e:ta,this.resourcePath=""}He.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;r<n;r+=2){var i=t[r],o=t[r+1];if(i.test(e))return o}return null}},Object.assign(He.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,r){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:function(){var e={NoBlending:sh,NormalBlending:ld,AdditiveBlending:Qh,SubtractiveBlending:Rh,MultiplyBlending:Sh,CustomBlending:Wn},t=new z,r=new Aj,n=new hj;return function(i,o,a){var s={};function p(e,t,n,i,p){var c,$=o+e,l=He.Handlers.get($);null!==l?c=l.load($):(r.setCrossOrigin(a),c=r.load($)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=fc),1!==t[1]&&(c.wrapT=fc)),void 0!==n&&c.offset.fromArray(n),void 0!==i&&("repeat"===i[0]&&(c.wrapS=fc),"mirror"===i[0]&&(c.wrapS=fd),"repeat"===i[1]&&(c.wrapT=fc),"mirror"===i[1]&&(c.wrapT=fd)),void 0!==p&&(c.anisotropy=p);var h=ea.generateUUID();return s[h]=c,h}var c={uuid:ea.generateUUID(),type:"MeshLambertMaterial"};for(var $ in i){var l=i[$];switch($){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=l;break;case"blending":c.blending=e[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",$,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(l).getHex();break;case"colorSpecular":c.specular=t.fromArray(l).getHex();break;case"colorEmissive":c.emissive=t.fromArray(l).getHex();break;case"specularCoef":c.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=p(l,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=p(l,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=p(l,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=p(l,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=p(l,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=p(l,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=l;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=p(l,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=p(l,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=p(l,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=p(l,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=ha;break;case"doubleSided":c.side=nf;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[$]=l;break;case"vertexColors":!0===l&&(c.vertexColors=md),"face"===l&&(c.vertexColors=mm);break;default:console.error("THREE.Loader.createMaterial: Unsupported",$,l);}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),n.setTextures(s),n.parse(c)}}()}),Object.assign(dj.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=this,o=void 0===this.path?gj.extractUrlBase(e):this.path,a=new bb(this.manager);a.setPath(this.path),a.setWithCredentials(this.withCredentials),a.load(e,function(r){var n=JSON.parse(r),a=n.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var p=i.parse(n,o);t(p.geometry,p.materials)},r,n)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var r=new v;return function(e,t){function r(e,t){return e&1<<t}var n,i,o,a,s,p,c,$,l,h,u,V,d,f,m,x,v,g,y,b,_,M,w,S,T,E=e.faces,L=e.vertices,A=e.normals,C=e.colors,P=e.scale,B=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&B++;for(n=0;n<B;n++)t.faceVertexUvs[n]=[]}for(a=0,s=L.length;a<s;)(g=new aa).x=L[a++]*P,g.y=L[a++]*P,g.z=L[a++]*P,t.vertices.push(g);for(a=0,s=E.length;a<s;)if(u=r(h=E[a++],0),V=r(h,1),d=r(h,3),f=r(h,4),m=r(h,5),x=r(h,6),v=r(h,7),u){if((b=new Lb).a=E[a],b.b=E[a+1],b.c=E[a+3],(_=new Lb).a=E[a+1],_.b=E[a+2],_.c=E[a+3],a+=4,V&&(l=E[a++],b.materialIndex=l,_.materialIndex=l),o=t.faces.length,d)for(n=0;n<B;n++)for(S=e.uvs[n],t.faceVertexUvs[n][o]=[],t.faceVertexUvs[n][o+1]=[],i=0;i<4;i++)T=new ba(S[2*($=E[a++])],S[2*$+1]),2!==i&&t.faceVertexUvs[n][o].push(T),0!==i&&t.faceVertexUvs[n][o+1].push(T);if(f&&(c=3*E[a++],b.normal.set(A[c++],A[c++],A[c]),_.normal.copy(b.normal)),m)for(n=0;n<4;n++)c=3*E[a++],w=new aa(A[c++],A[c++],A[c]),2!==n&&b.vertexNormals.push(w),0!==n&&_.vertexNormals.push(w);if(x&&(M=C[p=E[a++]],b.color.setHex(M),_.color.setHex(M)),v)for(n=0;n<4;n++)M=C[p=E[a++]],2!==n&&b.vertexColors.push(new z(M)),0!==n&&_.vertexColors.push(new z(M));t.faces.push(b),t.faces.push(_)}else{if((y=new Lb).a=E[a++],y.b=E[a++],y.c=E[a++],V&&(l=E[a++],y.materialIndex=l),o=t.faces.length,d)for(n=0;n<B;n++)for(S=e.uvs[n],t.faceVertexUvs[n][o]=[],i=0;i<3;i++)T=new ba(S[2*($=E[a++])],S[2*$+1]),t.faceVertexUvs[n][o].push(T);if(f&&(c=3*E[a++],y.normal.set(A[c++],A[c++],A[c])),m)for(n=0;n<3;n++)c=3*E[a++],w=new aa(A[c++],A[c++],A[c]),y.vertexNormals.push(w);if(x&&(p=E[a++],y.color.setHex(C[p])),v)for(n=0;n<3;n++)p=E[a++],y.vertexColors.push(new z(C[p]));t.faces.push(y)}}(e,r),function(e,t){var r=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,i=e.skinWeights.length;n<i;n+=r){var o=e.skinWeights[n],a=r>1?e.skinWeights[n+1]:0,s=r>2?e.skinWeights[n+2]:0,p=r>3?e.skinWeights[n+3]:0;t.skinWeights.push(new fa(o,a,s,p))}if(e.skinIndices)for(n=0,i=e.skinIndices.length;n<i;n+=r){var c=e.skinIndices[n],$=r>1?e.skinIndices[n+1]:0,l=r>2?e.skinIndices[n+2]:0,h=r>3?e.skinIndices[n+3]:0;t.skinIndices.push(new fa(c,$,l,h))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,r),function(e,t){var r=e.scale;if(void 0!==e.morphTargets)for(var n=0,i=e.morphTargets.length;n<i;n++){t.morphTargets[n]={},t.morphTargets[n].name=e.morphTargets[n].name,t.morphTargets[n].vertices=[];for(var o=t.morphTargets[n].vertices,a=e.morphTargets[n].vertices,s=0,p=a.length;s<p;s+=3){var c=new aa;c.x=a[s]*r,c.y=a[s+1]*r,c.z=a[s+2]*r,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");var $=t.faces,l=e.morphColors[0].colors;for(n=0,i=$.length;n<i;n++)$[n].color.fromArray(l,3*n)}}(e,r),function(e,t){var r=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var i=0;i<n.length;i++){var o=Ga.parseAnimation(n[i],t.bones);o&&r.push(o)}if(t.morphTargets){var a=Ga.CreateClipsFromMorphTargetSequences(t.morphTargets,10);r=r.concat(a)}r.length>0&&(t.animations=r)}(e,r),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:r}:{geometry:r,materials:He.prototype.initMaterials(e.materials,this.resourcePath||t,this.crossOrigin)}}}()}),Object.assign(El.prototype,{crossOrigin:"anonymous",load:function(e,t,r,n){var i=this,o=void 0===this.path?gj.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new bb(i.manager);a.setPath(this.path),a.load(e,function(r){var o=null;try{o=JSON.parse(r)}catch(s){return void 0!==n&&n(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},r,n)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var r=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,n,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=new Dc().fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var n=new dj,i=new Jl,o=0,a=e.length;o<a;o++){var s,p=e[o];switch(p.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ea[p.type](p.width,p.height,p.widthSegments,p.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ea[p.type](p.width,p.height,p.depth,p.widthSegments,p.heightSegments,p.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ea[p.type](p.radius,p.segments,p.thetaStart,p.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ea[p.type](p.radiusTop,p.radiusBottom,p.height,p.radialSegments,p.heightSegments,p.openEnded,p.thetaStart,p.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ea[p.type](p.radius,p.height,p.radialSegments,p.heightSegments,p.openEnded,p.thetaStart,p.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ea[p.type](p.radius,p.widthSegments,p.heightSegments,p.phiStart,p.phiLength,p.thetaStart,p.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ea[p.type](p.radius,p.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ea[p.type](p.innerRadius,p.outerRadius,p.thetaSegments,p.phiSegments,p.thetaStart,p.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ea[p.type](p.radius,p.tube,p.radialSegments,p.tubularSegments,p.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ea[p.type](p.radius,p.tube,p.tubularSegments,p.radialSegments,p.p,p.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ea[p.type](p.points,p.segments,p.phiStart,p.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ea[p.type](p.vertices,p.indices,p.radius,p.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],$=0,l=p.shapes.length;$<l;$++){var h=t[p.shapes[$]];c.push(h)}s=new Ea[p.type](c,p.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],$=0,l=p.shapes.length;$<l;$++){h=t[p.shapes[$]];c.push(h)}var u=p.options.extrudePath;void 0!==u&&(p.options.extrudePath=new Nv[u.type]().fromJSON(u)),s=new Ea[p.type](c,p.options);break;case"BufferGeometry":s=i.parse(p);break;case"Geometry":s=n.parse(p,this.resourcePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+p.type+"\"");continue;}s.uuid=p.uuid,void 0!==p.name&&(s.name=p.name),!0===s.isBufferGeometry&&void 0!==p.userData&&(s.userData=p.userData),r[p.uuid]=s}return r},parseMaterials:function(e,t){var r={},n={};if(void 0!==e){var i=new hj;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var p=[],c=0;c<s.materials.length;c++){var $=s.materials[c];void 0===r[$.uuid]&&(r[$.uuid]=i.parse($)),p.push(r[$.uuid])}n[s.uuid]=p}else n[s.uuid]=i.parse(s),r[s.uuid]=n[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=Ga.parse(n);void 0!==n.uuid&&(i.uuid=n.uuid),t.push(i)}return t},parseImages:function(e,t){var r=this,n={};function i(e){return r.manager.itemStart(e),o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e),r.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var o=new xf(new Mm(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var p=e[a],c=p.url;if(Array.isArray(c)){n[p.uuid]=[];for(var $=0,l=c.length;$<l;$++){var h=c[$],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:r.resourcePath+h;n[p.uuid].push(i(u))}}else{u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p.url)?p.url:r.resourcePath+p.url;n[p.uuid]=i(u)}}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new _b(t[s.image]):new H(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=r(s.mapping,jA)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=r(s.wrap[0],_u),a.wrapT=r(s.wrap[1],_u)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=r(s.minFilter,$u)),void 0!==s.magFilter&&(a.magFilter=r(s.magFilter,$u)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),n[s.uuid]=a}return n},parseObject:function(e,t,r){var n;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];void 0===r[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(r[o])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}switch(e.type){case"Scene":n=new rh,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new z(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new we(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new xe(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new N(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new Jf(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new jj(e.color,e.intensity);break;case"DirectionalLight":n=new kj(e.color,e.intensity);break;case"PointLight":n=new nj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new ij(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new oj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new qj(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);n=a.bones&&a.bones.length>0?new Nj(a,s):new Fa(a,s);break;case"LOD":n=new gh;break;case"Line":n=new va(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":n=new Qj(i(e.geometry),o(e.material));break;case"LineSegments":n=new G(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":n=new qe(i(e.geometry),o(e.material));break;case"Sprite":n=new ih(o(e.material));break;case"Group":n=new ye;break;default:n=new b;}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,c=0;c<p.length;c++)n.add(this.parseObject(p[c],t,r));if("LOD"===e.type)for(var $=e.levels,l=0;l<$.length;l++){var h=$[l],u=n.getObjectByProperty("uuid",h.object);void 0!==u&&n.addLevel(u,h.distance)}return n}});var av,jA={UVMapping:Xh,CubeReflectionMapping:Yh,CubeRefractionMapping:Zh,EquirectangularReflectionMapping:gm,EquirectangularRefractionMapping:$h,SphericalReflectionMapping:Dm,CubeUVReflectionMapping:_h,CubeUVRefractionMapping:ai},_u={RepeatWrapping:fc,ClampToEdgeWrapping:La,MirroredRepeatWrapping:fd},$u={NearestFilter:qa,NearestMipMapNearestFilter:ci,NearestMipMapLinearFilter:di,LinearFilter:xa,LinearMipMapNearestFilter:vn,LinearMipMapLinearFilter:oh};function Dl(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:ta,this.options=void 0}function Cl(){this.type="ShapePath",this.color=new z,this.subPaths=[],this.currentPath=null}function Bl(e){this.type="Font",this.data=e}function pA(e,t,r){for(var n=Array.from?Array.from(e):String(e).split(""),i=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,a=[],s=0,p=0,c=0;c<n.length;c++){var $=n[c];if("\n"===$)s=0,p-=o;else{var l=qA($,i,s,p,r);s+=l.offsetX,a.push(l.path)}}return a}function qA(e,t,r,n,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,p,c,$,l,h,u,V=new Cl;if(o.o)for(var d=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),f=0,m=d.length;f<m;){switch(d[f++]){case"m":a=d[f++]*t+r,s=d[f++]*t+n,V.moveTo(a,s);break;case"l":a=d[f++]*t+r,s=d[f++]*t+n,V.lineTo(a,s);break;case"q":p=d[f++]*t+r,c=d[f++]*t+n,$=d[f++]*t+r,l=d[f++]*t+n,V.quadraticCurveTo($,l,p,c);break;case"b":p=d[f++]*t+r,c=d[f++]*t+n,$=d[f++]*t+r,l=d[f++]*t+n,h=d[f++]*t+r,u=d[f++]*t+n,V.bezierCurveTo($,l,h,u,p,c);}}return{offsetX:o.ha*t,path:V}}}function Wu(e){this.manager=void 0!==e?e:ta}Dl.prototype={constructor:Dl,setOptions:function(e){return this.options=e,this},load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(r){yd.add(e,r),t&&t(r),i.manager.itemEnd(e)}).catch(function(t){n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Cl.prototype,{moveTo:function(e,t){this.currentPath=new eb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,o){this.currentPath.bezierCurveTo(e,t,r,n,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],o=new Dc;o.curves=i.curves,t.push(o)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,o=0;o<r;i=o++){var a=t[i],s=t[o],p=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],p=-p,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var $=c*(e.x-a.x)-p*(e.y-a.y);if(0===$)return!0;if($<0)continue;n=!n}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return n}var i=Wb.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return r(o);var a,s,p,c=[];if(1===o.length)return s=o[0],(p=new Dc).curves=s.curves,c.push(p),c;var $=!i(o[0].getPoints());$=e?!$:$;var l,h,u=[],V=[],d=[],f=0;V[f]=void 0,d[f]=[];for(var m=0,x=o.length;m<x;m++)a=i(l=(s=o[m]).getPoints()),(a=e?!a:a)?(!$&&V[f]&&f++,V[f]={s:new Dc,p:l},V[f].s.curves=s.curves,$&&f++,d[f]=[]):d[f].push({h:s,p:l[0]});if(!V[0])return r(o);if(V.length>1){for(var v=!1,g=[],y=0,b=V.length;y<b;y++)u[y]=[];for(y=0,b=V.length;y<b;y++)for(var _=d[y],M=0;M<_.length;M++){for(var w=_[M],S=!0,T=0;T<V.length;T++)n(w.p,V[T].p)&&(y!==T&&g.push({froms:y,tos:T,hole:M}),S?(S=!1,u[T].push(w)):v=!0);S&&u[y].push(w)}g.length>0&&(v||(d=u))}m=0;for(var E=V.length;m<E;m++){p=V[m].s,c.push(p);for(var L=0,A=(h=d[m]).length;L<A;L++)p.holes.push(h[L].h)}return c}}),Object.assign(Bl.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var r=[],n=pA(e,t,this.data),i=0,o=n.length;i<o;i++)Array.prototype.push.apply(r,n[i].toShapes());return r}}),Object.assign(Wu.prototype,{load:function(e,t,r,n){var i=this,o=new bb(this.manager);o.setPath(this.path),o.load(e,function(e){var r;try{r=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)},r,n)},parse:function(e){return new Bl(e)},setPath:function(e){return this.path=e,this}});var ul={getContext:function(){return void 0===av&&(av=new(window.AudioContext||window.webkitAudioContext)),av},setContext:function(e){av=e}};function cl(e){this.manager=void 0!==e?e:ta}function ru(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new N,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new N,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function hg(e,t,r,n){b.call(this),this.type="CubeCamera";var i=new N(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new aa(1,0,0)),this.add(i);var o=new N(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new aa(-1,0,0)),this.add(o);var a=new N(90,1,e,t);a.up.set(0,0,1),a.lookAt(new aa(0,1,0)),this.add(a);var s=new N(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new aa(0,-1,0)),this.add(s);var p=new N(90,1,e,t);p.up.set(0,-1,0),p.lookAt(new aa(0,0,1)),this.add(p);var c=new N(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new aa(0,0,-1)),this.add(c),n=n||{format:gf,magFilter:xa,minFilter:xa},this.renderTarget=new af(r,r,n),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,n=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,i,r),r.activeCubeFace=1,e.render(t,o,r),r.activeCubeFace=2,e.render(t,a,r),r.activeCubeFace=3,e.render(t,s,r),r.activeCubeFace=4,e.render(t,p,r),r.texture.generateMipmaps=n,r.activeCubeFace=5,e.render(t,c,r),e.setRenderTarget(null)},this.clear=function(e,t,r,n){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,r,n);e.setRenderTarget(null)}}function Tk(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Sk(){b.call(this),this.type="AudioListener",this.context=ul.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Pe(e){b.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Qk(e){Pe.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Pk(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Ok(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp;}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(cl.prototype,{load:function(e,t,r,n){var i=new bb(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(e){var r=e.slice(0);ul.getContext().decodeAudioData(r,function(e){t(e)})},r,n)},setPath:function(e){return this.path=e,this}}),Object.assign(ru.prototype,{update:function(){var e,t,r,n,i,o,a,s,p=new da,c=new da;return function($){if(e!==this||t!==$.focus||r!==$.fov||n!==$.aspect*this.aspect||i!==$.near||o!==$.far||a!==$.zoom||s!==this.eyeSep){e=this,t=$.focus,r=$.fov,n=$.aspect*this.aspect,i=$.near,o=$.far,a=$.zoom;var l,h,u=$.projectionMatrix.clone(),V=(s=this.eyeSep/2)*i/t,d=i*Math.tan(ea.DEG2RAD*r*.5)/a;c.elements[12]=-s,p.elements[12]=s,l=-d*n+V,h=d*n+V,u.elements[0]=2*i/(h-l),u.elements[8]=(h+l)/(h-l),this.cameraL.projectionMatrix.copy(u),l=-d*n-V,h=d*n-V,u.elements[0]=2*i/(h-l),u.elements[8]=(h+l)/(h-l),this.cameraR.projectionMatrix.copy(u)}this.cameraL.matrixWorld.copy($.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy($.matrixWorld).multiply(p)}}()}),hg.prototype=Object.create(b.prototype),hg.prototype.constructor=hg,Object.assign(Tk.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Sk.prototype=Object.assign(Object.create(b.prototype),{constructor:Sk,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new aa,t=new P,r=new aa,n=new aa,i=new Tk;return function(o){b.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),a.positionX){var p=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(e.x,p),a.positionY.linearRampToValueAtTime(e.y,p),a.positionZ.linearRampToValueAtTime(e.z,p),a.forwardX.linearRampToValueAtTime(n.x,p),a.forwardY.linearRampToValueAtTime(n.y,p),a.forwardZ.linearRampToValueAtTime(n.z,p),a.upX.linearRampToValueAtTime(s.x,p),a.upY.linearRampToValueAtTime(s.y,p),a.upZ.linearRampToValueAtTime(s.z,p)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z)}}()}),Pe.prototype=Object.assign(Object.create(b.prototype),{constructor:Pe,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Qk.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Qk,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(){var e=new aa,t=new P,r=new aa,n=new aa;return function(i){b.prototype.updateMatrixWorld.call(this,i);var o=this.panner;if(this.matrixWorld.decompose(e,t,r),n.set(0,0,1).applyQuaternion(t),o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(e.x,a),o.positionY.linearRampToValueAtTime(e.y,a),o.positionZ.linearRampToValueAtTime(e.z,a),o.orientationX.linearRampToValueAtTime(n.x,a),o.orientationY.linearRampToValueAtTime(n.y,a),o.orientationZ.linearRampToValueAtTime(n.z,a)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(n.x,n.y,n.z)}}()}),Object.assign(Pk.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(Ok.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==n;++a)r[i+a]=r[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(r,n,a,1-i,t)}for(var s=t,p=t+t;s!==p;++s)if(r[s]!==r[s+t]){o.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,o=n;i!==o;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var o=0;o!==i;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,n){P.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var o=1-n,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[r+a]*n}}});var du,DA,Nk="\\[\\]\\.:\\/";function bu(e,t,r){var n=r||_.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function _(e,t,r){this.path=t,this.parsedPath=r||_.parseTrackName(t),this.node=_.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function _t(){this.uuid=ea.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function $t(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,o=new Array(i),a={endingStart:_c,endingEnd:_c},s=0;s!==i;++s){var p=n[s].createInterpolant(null);o[s]=p,p.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Lk(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ti(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Jk(){q.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ik(e,t,r){Wc.call(this,e,t),this.meshPerAttribute=r||1}function Hk(e,t,r,n){"number"==typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),w.call(this,e,t,r),this.meshPerAttribute=n||1}function Ut(e,t,r,n){this.ray=new Ld(e,t),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Tt(e,t){return e.distance-t.distance}function Gk(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,o=0,a=i.length;o<a;o++)Gk(i[o],t,r,!0)}function Rt(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Qt(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function Fk(e,t){this.min=void 0!==e?e:new ba(1/0,1/0),this.max=void 0!==t?t:new ba(-1/0,-1/0)}function Ek(e,t){this.start=void 0!==e?e:new aa,this.end=void 0!==t?t:new aa}function lg(e){b.call(this),this.material=e,this.render=function(){}}function ng(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var p=new q,c=new k(2*a*3,3);p.addAttribute("position",c),G.call(this,p,new D({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Qe(e,t){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new q,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}r.addAttribute("position",new k(n,3));var p=new D({fog:!1});this.cone=new G(r,p),this.add(this.cone),this.update()}function Kt(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,Kt(e.children[r]));return t}function Re(e){for(var t=Kt(e),r=new q,n=[],i=[],o=new z(0,0,1),a=new z(0,1,0),s=0;s<t.length;s++){var p=t[s];p.parent&&p.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}r.addAttribute("position",new k(n,3)),r.addAttribute("color",new k(i,3));var c=new D({vertexColors:md,depthTest:!1,depthWrite:!1,transparent:!0});G.call(this,r,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Se(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var n=new Oc(t,4,2),i=new Ua({wireframe:!0,fog:!1});Fa.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Ue(e,t){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var r=new D({fog:!1}),n=new q;n.addAttribute("position",new w(new Float32Array(15),3)),this.line=new va(n,r),this.add(this.line),this.update()}function Ve(e,t,r){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new Ed(t);n.rotateY(.5*Math.PI),this.material=new Ua({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=md);var i=n.getAttribute("position"),o=new Float32Array(3*i.count);n.addAttribute("color",new w(o,3)),this.add(new Fa(n,this.material)),this.update()}function xg(e,t,r,n){e=e||10,t=t||10,r=new z(void 0!==r?r:4473924),n=new z(void 0!==n?n:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],p=[],c=0,$=0,l=-a;c<=t;c++,l+=o){s.push(-a,0,l,a,0,l),s.push(l,0,-a,l,0,a);var h=c===i?r:n;h.toArray(p,$),$+=3,h.toArray(p,$),$+=3,h.toArray(p,$),$+=3,h.toArray(p,$),$+=3}var u=new q;u.addAttribute("position",new k(s,3)),u.addAttribute("color",new k(p,3));var V=new D({vertexColors:md});G.call(this,u,V)}function Oi(e,t,r,n,i,o){e=e||10,t=t||16,r=r||8,n=n||64,i=new z(void 0!==i?i:4473924),o=new z(void 0!==o?o:8947848);var a,s,p,c,$,l,h,u=[],V=[];for(c=0;c<=t;c++)p=c/t*(2*Math.PI),a=Math.sin(p)*e,s=Math.cos(p)*e,u.push(0,0,0),u.push(a,0,s),h=1&c?i:o,V.push(h.r,h.g,h.b),V.push(h.r,h.g,h.b);for(c=0;c<=r;c++)for(h=1&c?i:o,l=e-e/r*c,$=0;$<n;$++)p=$/n*(2*Math.PI),a=Math.sin(p)*l,s=Math.cos(p)*l,u.push(a,0,s),V.push(h.r,h.g,h.b),p=($+1)/n*(2*Math.PI),a=Math.sin(p)*l,s=Math.cos(p)*l,u.push(a,0,s),V.push(h.r,h.g,h.b);var d=new q;d.addAttribute("position",new k(u,3)),d.addAttribute("color",new k(V,3));var f=new D({vertexColors:md});G.call(this,d,f)}function yg(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16776960,o=void 0!==n?n:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var p=new q,c=new k(2*a*3,3);p.addAttribute("position",c),G.call(this,p,new D({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function We(e,t,r){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var n=new q;n.addAttribute("position",new k([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new D({fog:!1});this.lightPlane=new va(n,i),this.add(this.lightPlane),(n=new q).addAttribute("position",new k([0,0,0,0,0,1],3)),this.targetLine=new va(n,i),this.add(this.targetLine),this.update()}function Ag(e){var t=new q,r=new D({color:16777215,vertexColors:mm}),n=[],i=[],o={},a=new z(16755200),s=new z(16711680),p=new z(43775),c=new z(16777215),$=new z(3355443);function l(e,t,r){h(e,r),h(t,r)}function h(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(n.length/3-1)}l("n1","n2",a),l("n2","n4",a),l("n4","n3",a),l("n3","n1",a),l("f1","f2",a),l("f2","f4",a),l("f4","f3",a),l("f3","f1",a),l("n1","f1",a),l("n2","f2",a),l("n3","f3",a),l("n4","f4",a),l("p","n1",s),l("p","n2",s),l("p","n3",s),l("p","n4",s),l("u1","u2",p),l("u2","u3",p),l("u3","u1",p),l("c","t",c),l("p","c",$),l("cn1","cn2",$),l("cn3","cn4",$),l("cf1","cf2",$),l("cf3","cf4",$),t.addAttribute("position",new k(n,3)),t.addAttribute("color",new k(i,3)),G.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Rb(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new q;i.setIndex(new w(r,1)),i.addAttribute("position",new w(n,3)),G.call(this,i,new D({color:t})),this.matrixAutoUpdate=!1,this.update()}function Cg(e,t){this.type="Box3Helper",this.box=e;var r=void 0!==t?t:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new q;i.setIndex(new w(n,1)),i.addAttribute("position",new k([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),G.call(this,i,new D({color:r})),this.geometry.computeBoundingSphere()}function Dg(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==r?r:16776960,i=new q;i.addAttribute("position",new k([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),va.call(this,i,new D({color:n}));var o=new q;o.addAttribute("position",new k([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Fa(o,new Ua({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function Qb(e,t,r,n,i,o){b.call(this),void 0===e&&(e=new THREE.Vector3(0,0,1)),void 0===t&&(t=new THREE.Vector3(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=16776960),void 0===i&&(i=.2*r),void 0===o&&(o=.2*i),void 0===du&&((du=new q).addAttribute("position",new k([0,0,0,0,1,0],3)),(DA=new Ob(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new va(du,new D({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fa(DA,new Ua({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,o)}function Gg(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new q;r.addAttribute("position",new k(t,3)),r.addAttribute("color",new k([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new D({vertexColors:md});G.call(this,r,n)}function lB(e,t,r,n,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Lb(e,t,r,i,o,a)}Object.assign(bu.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(_,{Composite:bu,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new _.Composite(e,t,r):new _(e,t,r)},sanitizeNodeName:function(){var e=new RegExp("["+Nk+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Nk+"]",t="[^"+Nk.replace("\\.","")+"]",r=/((?:WC+[\/:])*)/.source.replace("WC",e),n=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+r+n+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==s.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var o=n(i.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(_.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=_.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r];}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[n];if(void 0!==s){var p=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?p=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(p=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][p]}else{var $=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+$+"."+n+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(_.prototype,{_getValue_unbound:_.prototype.getValue,_setValue_unbound:_.prototype.setValue}),Object.assign(_t.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,p=void 0,c=0,$=arguments.length;c!==$;++c){var l=arguments[c],h=l.uuid,u=n[h];if(void 0===u){u=t++,n[h]=u,e.push(l);for(var V=0,d=s;V!==d;++V)a[V].push(new _(l,i[V],o[V]))}else if(u<r){p=e[u];var f=--r,m=e[f];n[m.uuid]=u,e[u]=m,n[h]=f,e[f]=l;for(V=0,d=s;V!==d;++V){var x=a[V],v=x[f],g=x[u];x[u]=v,void 0===g&&(g=new _(l,i[V],o[V])),x[f]=g}}else e[u]!==p&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],p=s.uuid,c=r[p];if(void 0!==c&&c>=t){var $=t++,l=e[$];r[l.uuid]=c,e[c]=l,r[p]=$,e[$]=s;for(var h=0,u=i;h!==u;++h){var V=n[h],d=V[$],f=V[c];V[c]=d,V[$]=f}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var p=arguments[a].uuid,c=n[p];if(void 0!==c)if(delete n[p],c<r){var $=--r,l=e[$],h=e[m=--t];n[l.uuid]=c,e[c]=l,n[h.uuid]=$,e[$]=h,e.pop();for(var u=0,V=o;u!==V;++u){var d=(x=i[u])[$],f=x[m];x[c]=d,x[$]=f,x.pop()}}else{var m;n[(h=e[m=--t]).uuid]=c,e[c]=h,e.pop();for(u=0,V=o;u!==V;++u){var x;(x=i[u])[c]=x[m],x.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var o=this._paths,a=this._parsedPaths,s=this._objects,p=s.length,c=this.nCachedObjects_,$=new Array(p);n=i.length,r[e]=n,o.push(e),a.push(t),i.push($);for(var l=c,h=s.length;l!==h;++l){var u=s[l];$[l]=new _(u,e,t)}return $},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=r,o[r]=s,o.pop(),i[r]=i[a],i.pop(),n[r]=n[a],n.pop()}}}),Object.assign($t.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,o=i/n,a=n/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,p=o.sampleValues;return s[0]=i,s[1]=i+r,p[0]=e/a,p[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*r;if(o<0||0===r)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var p=this._interpolants,c=this._propertyBindings,$=0,l=p.length;$!==l;++$)p[$].evaluate(a),c[$].accumulate(n,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r)t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,r=this._clip.duration,n=this.loop,i=this._loopCount,o=n===or;if(0===e)return-1===i?t:o&&1==(1&i)?r-t:t;if(n===mr){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=r||t<0){var a=Math.floor(t/r);t-=r*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var p=e<0;this._setEndings(p,!p,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=Zc,n.endingEnd=Zc):(n.endingStart=e?this.zeroSlopeAtStart?Zc:_c:bh,n.endingEnd=t?this.zeroSlopeAtEnd?Zc:_c:bh)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=r,this}}),Lk.prototype=Object.assign(Object.create(hc.prototype),{constructor:Lk,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,p=this._bindingsByRootAndName,c=p[s];void 0===c&&(c={},p[s]=c);for(var $=0;$!==i;++$){var l=n[$],h=l.name,u=c[h];if(void 0!==u)o[$]=u;else{if(void 0!==(u=o[$])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,h));continue}var V=t&&t._propertyBindings[$].binding.parsedPath;++(u=new Ok(_.create(r,h,V),l.ValueTypeName,l.getValueSize())).referenceCount,this._addInactiveBinding(u,s,h),o[$]=u}a[$].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,p=s[s.length-1],c=e._byClipCacheIndex;p._byClipCacheIndex=c,s[c]=p,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],o=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],p=e._cacheIndex;s._cacheIndex=p,t[p]=s,t.pop(),delete a[i];e:{for(var c in a)break e;delete o[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new Yg(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?Ga.findByName(r,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var p=a.actionByRoot[n];if(void 0!==p)return p;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new $t(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,n),c},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?Ga.findByName(r,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==r;++a){t[a]._update(n,e,i,o)}var s=this._bindings,p=this._nActiveBindings;for(a=0;a!==p;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var p=o[a];this._deactivateAction(p);var c=p._cacheIndex,$=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,$._cacheIndex=c,t[c]=$,t.pop(),this._removeInactiveBindingsForAction(p)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Ti.prototype.clone=function(){return new Ti(void 0===this.value.clone?this.value:this.value.clone())},Jk.prototype=Object.assign(Object.create(q.prototype),{constructor:Jk,isInstancedBufferGeometry:!0,copy:function(e){return q.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}}),Ik.prototype=Object.assign(Object.create(Wc.prototype),{constructor:Ik,isInstancedInterleavedBuffer:!0,copy:function(e){return Wc.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Hk.prototype=Object.assign(Object.create(w.prototype),{constructor:Hk,isInstancedBufferAttribute:!0,copy:function(e){return w.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Ut.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var n=r||[];return Gk(e,this,n,t),n.sort(Tt),n},intersectObjects:function(e,t,r){var n=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,o=e.length;i<o;i++)Gk(e[i],this,n,t);return n.sort(Tt),n}}),Object.assign(Rt.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ea.clamp(t/this.radius,-1,1))),this}}),Object.assign(Qt.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}}),Object.assign(Fk.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new ba;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new ba),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new ba),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new ba),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new ba),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new ba;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Ek.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new aa),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new aa),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new aa),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new aa,t=new aa;return function(r,n){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e)/i;return n&&(o=ea.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new aa),this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),lg.prototype=Object.create(b.prototype),lg.prototype.constructor=lg,lg.prototype.isImmediateRenderObject=!0,ng.prototype=Object.create(G.prototype),ng.prototype.constructor=ng,ng.prototype.update=function(){var e=new aa,t=new aa,r=new Z;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,p=a.faces,c=0,$=0,l=p.length;$<l;$++)for(var h=p[$],u=0,V=h.vertexNormals.length;u<V;u++){var d=s[h[n[u]]],f=h.vertexNormals[u];e.copy(d).applyMatrix4(i),t.copy(f).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var m=a.attributes.position,x=a.attributes.normal;for(c=0,u=0,V=m.count;u<V;u++)e.set(m.getX(u),m.getY(u),m.getZ(u)).applyMatrix4(i),t.set(x.getX(u),x.getY(u),x.getZ(u)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),Qe.prototype=Object.create(b.prototype),Qe.prototype.constructor=Qe,Qe.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Qe.prototype.update=function(){var e=new aa,t=new aa;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Re.prototype=Object.create(G.prototype),Re.prototype.constructor=Re,Re.prototype.updateMatrixWorld=function(){var e=new aa,t=new da,r=new da;return function(n){var i=this.bones,o=this.geometry,a=o.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var s=0,p=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(r,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(p,e.x,e.y,e.z),t.multiplyMatrices(r,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(p+1,e.x,e.y,e.z),p+=2)}o.getAttribute("position").needsUpdate=!0,b.prototype.updateMatrixWorld.call(this,n)}}(),Se.prototype=Object.create(Fa.prototype),Se.prototype.constructor=Se,Se.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Se.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Ue.prototype=Object.create(b.prototype),Ue.prototype.constructor=Ue,Ue.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ue.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,r=this.line.geometry.attributes.position,n=r.array;n[0]=e,n[1]=-t,n[2]=0,n[3]=e,n[4]=t,n[5]=0,n[6]=-e,n[7]=t,n[8]=0,n[9]=-e,n[10]=-t,n[11]=0,n[12]=e,n[13]=-t,n[14]=0,r.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Ve.prototype=Object.create(b.prototype),Ve.prototype.constructor=Ve,Ve.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ve.prototype.update=function(){var e=new aa,t=new z,r=new z;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=n.geometry.getAttribute("color");t.copy(this.light.color),r.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:r;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),xg.prototype=Object.create(G.prototype),xg.prototype.constructor=xg,Oi.prototype=Object.create(G.prototype),Oi.prototype.constructor=Oi,yg.prototype=Object.create(G.prototype),yg.prototype.constructor=yg,yg.prototype.update=function(){var e=new aa,t=new aa,r=new Z;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,p=0,c=0,$=s.length;c<$;c++){var l=s[c],h=l.normal;e.copy(a[l.a]).add(a[l.b]).add(a[l.c]).divideScalar(3).applyMatrix4(n),t.copy(h).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),i.setXYZ(p,e.x,e.y,e.z),p+=1,i.setXYZ(p,t.x,t.y,t.z),p+=1}i.needsUpdate=!0}}(),We.prototype=Object.create(b.prototype),We.prototype.constructor=We,We.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},We.prototype.update=function(){var e=new aa,t=new aa,r=new aa;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r),this.targetLine.scale.z=r.length()}}(),Ag.prototype=Object.create(G.prototype),Ag.prototype.constructor=Ag,Ag.prototype.update=function(){var e,t,r=new aa,n=new Jb;function i(i,o,a,s){r.set(o,a,s).unproject(n);var p=t[i];if(void 0!==p)for(var c=e.getAttribute("position"),$=0,l=p.length;$<l;$++)c.setXYZ(p[$],r.x,r.y,r.z)}return function(){e=this.geometry,t=this.pointMap;n.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Rb.prototype=Object.create(G.prototype),Rb.prototype.constructor=Rb,Rb.prototype.update=function(){var e=new ic;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,n=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=r.x,o[4]=n.y,o[5]=n.z,o[6]=r.x,o[7]=r.y,o[8]=n.z,o[9]=n.x,o[10]=r.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=r.z,o[15]=r.x,o[16]=n.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=n.x,o[22]=r.y,o[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Rb.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Rb.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.object=e.object,this},Rb.prototype.clone=function(){return new this.constructor().copy(this)},Cg.prototype=Object.create(G.prototype),Cg.prototype.constructor=Cg,Cg.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),b.prototype.updateMatrixWorld.call(this,e))},Dg.prototype=Object.create(va.prototype),Dg.prototype.constructor=Dg,Dg.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?ha:of,this.lookAt(this.plane.normal),b.prototype.updateMatrixWorld.call(this,e)},Qb.prototype=Object.create(b.prototype),Qb.prototype.constructor=Qb,Qb.prototype.setDirection=function(){var e,t=new aa;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),Qb.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},Qb.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Qb.prototype.copy=function(e){return b.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Qb.prototype.clone=function(){return new this.constructor().copy(this)},Gg.prototype=Object.create(G.prototype),Gg.prototype.constructor=Gg;var mB=0,nB=1;function oB(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function pB(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function qB(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new qe(e,t)}function rB(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ih(e)}function sB(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new qe(e,t)}function tB(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ob(e)}function uB(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ob(e)}function vB(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ob(e)}function wB(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new aa(e,t,r)}function xB(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new w(e,t).setDynamic(!0)}function yB(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new eg(e,t)}function zB(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new dg(e,t)}function AB(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new cg(e,t)}function BB(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new bg(e,t)}function CB(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new hd(e,t)}function DB(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ag(e,t)}function EB(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new gd(e,t)}function FB(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new k(e,t)}function GB(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new $f(e,t)}function vt(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),$.call(this,e),this.type="catmullrom",this.closed=!0}function ut(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),$.call(this,e),this.type="catmullrom"}function Vn(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),$.call(this,e),this.type="catmullrom"}function KB(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Gg(e)}function LB(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Rb(e,t)}function MB(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new G(new Sd(e.geometry),new D({color:void 0!==t?t:16777215}))}function NB(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new G(new le(e.geometry),new D({color:void 0!==t?t:16777215}))}function OB(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new bb(e)}function PB(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Bm(e)}h.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(h.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Pb.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new v,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new aa(i.x,i.y,i.z||0))}return t}}),Object.assign(eb.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),vt.prototype=Object.create($.prototype),ut.prototype=Object.create($.prototype),Vn.prototype=Object.create($.prototype),Object.assign(Vn.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),xg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Re.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(He.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gj.extractUrlBase(e)}}),Object.assign(dj.prototype,{setTexturePath:function(e){return console.warn("THREE.JSONLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(El.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Fk.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ic.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Ek.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(ea,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ea.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ea.ceilPowerOfTwo(e)}}),Object.assign(Z.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(da.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new aa),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,o)}}),Db.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},P.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ld.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ia.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ia,{barycoordFromPoint:function(e,t,r,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ia.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ia.getNormal(e,t,r,n)}}),Object.assign(Dc.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Xc(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Cd(this,e)}}),Object.assign(ba.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(aa.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(fa.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(v.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(b.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(b.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(gh.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ch.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(h.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),N.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(L.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(w.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(q.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(q.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Bb.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ti.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(u.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new z}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===$l}}}),Object.defineProperties(kb.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Sa.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Nm.prototype,{clearTarget:function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Nm.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cw.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(wd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Ow.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Pe.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return new cl().load(e,function(e){t.setBuffer(e)}),this},Pk.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},hg.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var QB={merge:function(e,t,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function RB(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function SB(){console.error("THREE.CanvasRenderer has been removed")}Fc.crossOrigin=void 0,Fc.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Aj;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},Fc.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new zm;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},Fc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Fc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var TB={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function UB(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}UB,TB,SB,RB,QB,PB,OB,NB,MB,LB,KB,Vn,ut,vt,GB,FB,EB,DB,CB,BB,AB,zB,yB,xB,wB,vB,uB,tB,sB,rB,qB,pB,oB,nB,mB,lB,Me,Jr,sf,Hr,Gr,Fr,Er,Dr,UE,Br,Il,zr,ah,xr,wr,xl,bh,Zc,_c,ii,dh,eh,or,nr,mr,lr,kr,jr,ir,hr,gr,fr,er,dr,cr,br,ar,_q,$q,Zq,dl,Zk,Uk,Rk,Kk,Bk,Ak,xk,Qq,ff,ad,VE,Mq,Lq,rb,gf,Iq,lh,Gq,Fq,Eq,fi,kf,Qn,Aq,nh,yq,xq,ei,oh,vn,xa,di,ci,qa,fd,La,fc,ai,_h,Dm,$h,gm,Zh,Yh,Xh,eq,dq,cq,Vl,Wh,_p,$p,ph,Yp,Xp,Wp,Vp,Vh,Tp,Sp,Rp,Qp,Pp,Op,Np,Mp,Nl,rl,Jp,Ip,Hp,Gp,Uh,Th,Dp,Cp,kd,Wn,Sh,Rh,Qh,ld,sh,md,mm,dm,WE,$l,nf,ha,of,mp,hl,YE,ZE,$E,_E,gp,Fn,ep,aF,cp,fb,tb,hb,ib,wa,Pa,wb,jb,$,Ae,w,eg,dg,cg,bg,hd,ag,gd,k,$f,u,D,bd,Qc,Ua,pc,sc,nd,pd,Nc,kb,pb,td,ob,Sa,Pd,yc,$c,Yc,Me,Rd,Lf,Ob,cd,Yf,jg,Sd,Bb,Xc,dd,Cd,Td,Gf,Rc,Xf,Ud,Nf,Oc,Uf,Xd,Pg,$d,Ff,be,Hf,ce,Mf,ya,rg,ee,Rf,ge,Zf,Ed,ig,ie,qg,ke,ug,le,Fw,Wb,Fc,h,Pb,Bl,Cl,eb,Dc,Gg,Qb,Dg,Cg,Rb,Ag,We,yg,Oi,xg,Ve,Ue,Se,Re,Qe,ng,lg,z,P,ba,aa,fa,qd,Ek,Fk,ic,Z,da,Ld,cb,ti,Db,Qt,Rt,ea,ia,Oa,lk,jk,Yg,fk,Tk,hc,bl,Ut,b,Lb,Hk,Wc,Ik,qh,v,q,Jk,Ti,Ga,Lk,_t,X,U,_,Ok,ik,hk,Yd,$g,dk,Zd,Pe,Pk,ul,Qk,Sk,Jb,yh,hg,Jf,N,ru,L,od,jj,kj,lj,qj,ij,nj,oj,pj,cl,yd,gj,He,bb,Wu,Dl,xf,dj,Mm,ta,Jl,hj,El,Aj,zm,Bm,ww,xw,H,zg,Bg,_b,oe,Ge,sd,dn,ye,qe,va,Qj,G,Fa,Mj,ch,Nj,gh,ih,rh,we,xe,B,ga,ca,Cb,Nm,wd,af;function VB(){return(VB=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var $ in e)Object.prototype.hasOwnProperty.call(e,$)&&(r[$]=e[$])}return r}).apply(this,arguments)}var Qa=VB;var Ii={},YB=Object.prototype.hasOwnProperty;function qt(r,t){return r===t?0!==r||0!==t||1/r==1/t:r!=r&&t!=t}function $B(r,t){if(qt(r,t))return!0;if("object"!=typeof r||null===r||"object"!=typeof t||null===t)return!1;var $=Object.keys(r),e=Object.keys(t);if($.length!==e.length)return!1;for(var l=0;l<$.length;l++)if(!YB.call(t,$[l])||!qt(r[$[l]],t[$[l]]))return!1;return!0}Ii=$B;function Va(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o}function ot(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=n&&this.setState(n)}function nt(n){this.setState(function(t){var e=this.constructor.getDerivedStateFromProps(n,t);return null!=e?e:null}.bind(this))}function mt(n,t){try{var e=this.props,o=this.state;this.props=n,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(e,o)}finally{this.props=e,this.state=o}}function Ln(n){var t=n.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof n.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return n;var e=null,o=null,l=null;if("function"==typeof t.componentWillMount?e="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(e="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?l="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(l="UNSAFE_componentWillUpdate"),null!==e||null!==o||null!==l){var p=n.displayName||n.name,i="function"==typeof n.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+p+" uses "+i+" but also contains the following legacy lifecycles:"+(null!==e?"\n  "+e:"")+(null!==o?"\n  "+o:"")+(null!==l?"\n  "+l:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof n.getDerivedStateFromProps&&(t.componentWillMount=ot,t.componentWillReceiveProps=nt),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=mt;var r=t.componentDidUpdate;t.componentDidUpdate=function(n,t,e){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:e;r.call(this,n,t,o)}}return n}ot.__suppressDeprecationWarning=!0,nt.__suppressDeprecationWarning=!0,mt.__suppressDeprecationWarning=!0,Ln;function eC(e,t){if(null==e)return{};var r,$,a={},f=Object.keys(e);for($=0;$<f.length;$++)r=f[$],t.indexOf(r)>=0||(a[r]=e[r]);return a}var fC={},gC={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hC={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},iC=Object.defineProperty,jC=Object.getOwnPropertyNames,kt=Object.getOwnPropertySymbols,lC=Object.getOwnPropertyDescriptor,Kn=Object.getPrototypeOf,it=Kn&&Kn(Object);function ht(t,r,e){if("string"!=typeof r){if(it){var $=Kn(r);$&&$!==it&&ht(t,$,e)}var o=jC(r);kt&&(o=o.concat(kt(r)));for(var a=0;a<o.length;++a){var l=o[a];if(!(gC[l]||hC[l]||e&&e[l])){var p=lC(r,l);try{iC(t,l,p)}catch(y){}}}return t}return t}fC=ht;var Jn,ft={};Object.defineProperty(ft,"__esModule",{value:!0});var QQ=(Jn=function(){var e=[],t=e;function r(){t===e&&(t=e.slice())}return{listen:function(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var n=!0;return r(),t.push(e),function(){if(n){n=!1,r();var i=t.indexOf(e);t.splice(i,1)}}},emit:function(){for(var r=e=t,n=0;n<r.length;n++)r[n].apply(r,arguments)}}},ft.createChangeEmitter=Jn);function sC(e){var o,r=e.Symbol;return"function"==typeof r?r.observable?o=r.observable:(o=r("observable"),r.observable=o):o="@@observable",o}var In=function(){var e,l={exports:this};this.__esModule=!0,e="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof Sb?Sb:void 0!==l?l:Function("return this")();var o=sC(e);return this.default=o,l.exports}.call({});zb();var Hn=function(t,r){return function(e){return e[t]=r,e}},vC=function(t){return Hn("displayName",t)},Gn=function(t){return"string"==typeof t?t:t?t.displayName||t.name||"Component":void 0},xC=function(t,r){return r+"("+Gn(t)+")"},Gi=function(t){return function(r){var e=m.createFactory(r),o=function(r){return e(t(r))};return o}},zC=function(t){var r=Gi(function(r){return Qa({},r,"function"==typeof t?t(r):t)});return r},Lg=function(t,r){for(var e={},o=0;o<r.length;o++){var n=r[o];t.hasOwnProperty(n)&&(e[n]=t[n])}return e},BC=function(t,r){return function(e){var o=m.createFactory(e),n="function"==typeof t?t:function(r,e){var $lyLi$$interop$default=ma(Ii);return!$lyLi$$interop$default.d(Lg(r,t),Lg(e,t))},$=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),$=0;$<o;$++)n[$]=arguments[$];return(e=t.call.apply(t,[this].concat(n))||this).state={computedProps:r(e.props),prevProps:e.props},e}return Va(e,t),e.getDerivedStateFromProps=function(t,e){return n(e.prevProps,t)?{computedProps:r(t),prevProps:t}:{prevProps:t}},e.prototype.render=function(){return o(Qa({},this.props,this.state.computedProps))},e}(m.Component);return Ln($),$}},_s=function(t,r){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=r(t[o],o));return e},DC=function(t){return function(r){var e=m.createFactory(r),o=function(r){function o(){for(var e,o=arguments.length,n=new Array(o),$=0;$<o;$++)n[$]=arguments[$];return(e=r.call.apply(r,[this].concat(n))||this).handlers=_s("function"==typeof t?t(e.props):t,function(t){return function(){var r=t(e.props);return r.apply(void 0,arguments)}}),e}return Va(o,r),o.prototype.render=function(){return e(Qa({},this.props,this.handlers))},o}(m.Component);return o}},EC=function(t){return function(r){var e=m.createFactory(r),o=function(t){return e(t)};return o.defaultProps=t,o}},Bn=function(t,r){for(var e=Qa({},t),o=0;o<r.length;o++){var n=r[o];e.hasOwnProperty(n)&&delete e[n]}return e},GC=function(t,r){var e=Gi(function(e){var o;return Qa({},Bn(e,[t]),((o={})[r]=e[t],o))});return e},zn=Object.keys,IC=function(t,r){return zn(t).reduce(function(e,o){var n=t[o];return e[r(n,o)]=n,e},{})},JC=function(t){var r=Gi(function(r){return Qa({},Bn(r,zn(t)),IC(Lg(r,zn(t)),function(r,e){return t[e]}))});return r},KC=function(t){return function(r){var e=m.createFactory(r),o=function(r){return e(Qa({},r,r[t]))};return o}},LC=function(t,r,e){return function(o){var n=m.createFactory(o),$=function(o){function $(){for(var t,r=arguments.length,n=new Array(r),$=0;$<r;$++)n[$]=arguments[$];return(t=o.call.apply(o,[this].concat(n))||this).state={stateValue:"function"==typeof e?e(t.props):e},t.updateStateValue=function(r,e){return t.setState(function(t){var e=t.stateValue;return{stateValue:"function"==typeof r?r(e):r}},e)},t}return Va($,o),$.prototype.render=function(){var e;return n(Qa({},this.props,((e={})[t]=this.state.stateValue,e[r]=this.updateStateValue,e)))},$}(m.Component);return $}},MC=function(t,r){return function(e){var o=m.createFactory(e),n=function(e){function n(){for(var o,n=arguments.length,$=new Array(n),p=0;p<n;p++)$[p]=arguments[p];return(o=e.call.apply(e,[this].concat($))||this).state="function"==typeof t?t(o.props):t,o.stateUpdaters=_s(r,function(t){return function(r){for(var e=arguments.length,n=new Array(e>1?e-1:0),$=1;$<e;$++)n[$-1]=arguments[$];r&&"function"==typeof r.persist&&r.persist(),o.setState(function(e,o){return t(e,o).apply(void 0,[r].concat(n))})}}),o}return Va(n,e),n.prototype.render=function(){return o(Qa({},this.props,this.state,this.stateUpdaters))},n}(m.Component);return n}},NC=function(){},OC=function(t,r,e,o){return function(n){var $=m.createFactory(n),p=function(n){function p(){for(var t,r=arguments.length,o=new Array(r),$=0;$<r;$++)o[$]=arguments[$];return(t=n.call.apply(n,[this].concat(o))||this).state={stateValue:t.initializeStateValue()},t.dispatch=function(r,o){return void 0===o&&(o=NC),t.setState(function(t){var o=t.stateValue;return{stateValue:e(o,r)}},function(){return o(t.state.stateValue)})},t}Va(p,n);var i=p.prototype;return i.initializeStateValue=function(){return void 0!==o?"function"==typeof o?o(this.props):o:e(void 0,{type:"@@recompose/INIT"})},i.render=function(){var e;return $(Qa({},this.props,((e={})[t]=this.state.stateValue,e[r]=this.dispatch,e)))},p}(m.Component);return p}},PC=function(t){return t},QC=function(t,r,e){return void 0===e&&(e=PC),function(o){var n,$,p=function(p){return t(p)?(n=n||m.createFactory(r(o)))(p):($=$||m.createFactory(e(o)))(p)};return p}},RC=function(t){return function(r){var e=m.createFactory(t),o=function(t){return e(t)};return o}},SC=function(t){function r(){return t.apply(this,arguments)||this}return Va(r,t),r.prototype.render=function(){return null},r}(m.Component),TC=function(t){return SC},xn=function(t){return function(r){var e=m.createFactory(r),o=function(r){function o(){return r.apply(this,arguments)||this}Va(o,r);var n=o.prototype;return n.shouldComponentUpdate=function(r){return t(this.props,r)},n.render=function(){return e(this.props)},o}(m.Component);return o}},VC=function(t){var r=xn(function(t,r){var $lyLi$$interop$default=ma(Ii);return!$lyLi$$interop$default.d(t,r)});return r(t)},Xs=function(t){var r=xn(function(r,e){var $lyLi$$interop$default=ma(Ii);return!$lyLi$$interop$default.d(Lg(e,t),Lg(r,t))});return r},XC=function(t){var r=t.propTypes;var e=Object.keys(r||{}),o=Xs(e)(t);return o},YC=function(t,r){return function(e){var o=m.createFactory(e),n=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),$=0;$<o;$++)n[$]=arguments[$];return(e=t.call.apply(t,[this].concat(n))||this).getChildContext=function(){return r(e.props)},e}return Va(e,t),e.prototype.render=function(){return o(this.props)},e}(m.Component);return n.childContextTypes=t,n}},ZC=function(t){return function(r){var e=m.createFactory(r),o=function(t,r){return e(Qa({},t,r))};return o.contextTypes=t,o}},$C=function(t){return function(r){var e=m.createFactory(r);var o=function(t){function r(){return t.apply(this,arguments)||this}return Va(r,t),r.prototype.render=function(){return e(Qa({},this.props,this.state))},r}(m.Component);return Object.keys(t).forEach(function(r){return o.prototype[r]=t[r]}),o}},Ws=function(t){return Boolean(t&&t.prototype&&"function"==typeof t.prototype.render)},aD=function(t){var r,e;return Ws(t)?t:(e=r=function(r){function e(){return r.apply(this,arguments)||this}return Va(e,r),e.prototype.render=function(){var $h8ka$$interop$default=ma(m);return"string"==typeof t?$h8ka$$interop$default.d.createElement(t,this.props):t(this.props,this.context)},e}(m.Component),r.displayName=Gn(t),r.propTypes=t.propTypes,r.contextTypes=t.contextTypes,r.defaultProps=t.defaultProps,e)};function bD(t){return t(function(t){return t.children(t)})}var cD=function(t,r,e){return void 0===e&&(e="children"),function(o){var $h8ka$$interop$default=ma(m);var n=$h8ka$$interop$default.d.createFactory(o),$=$h8ka$$interop$default.d.createFactory(t),p=function(t){var o;return $(((o={})[e]=function(){return n(Qa({},t,r.apply(void 0,arguments)))},o))};return p}},dD=function(t){return Hn("propTypes",t)},Mg=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return r.reduce(function(t,r){return function(){return t(r.apply(void 0,arguments))}},function(t){return t})},fD=function(t){var r=function(r){function e(){for(var t,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(t=r.call.apply(r,[this].concat(o))||this).state={},t}return Va(e,r),e.getDerivedStateFromProps=function(r){return t(r),null},e.prototype.render=function(){return null},e}(m.Component);return Ln(r),r},gD=function(t){var r=function(r){return m.createElement(r[t],Bn(r,[t]))};return r.displayName="componentFromProp("+t+")",r},hD=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=r.map(m.createFactory),n=function(t){var r=t.children,e=eC(t,["children"]);return o.reduceRight(function(t,r){return r(e,t)},r)};return n},iD=function(t,r){return function(e){var o=t(e);var $El$$interop$default=ma(fC);return $El$$interop$default.d(o,e,r),o}},Ei={fromESObservable:null,toESObservable:null},kD=function(t){Ei=t},on={fromESObservable:function(t){return"function"==typeof Ei.fromESObservable?Ei.fromESObservable(t):t},toESObservable:function(t){return"function"==typeof Ei.toESObservable?Ei.toESObservable(t):t}},nn=function(t){return function(r){return function(e){function o(){for(var o,n,$=arguments.length,p=new Array($),i=0;i<$;i++)p[i]=arguments[i];var $LkZ7$$interop$default=ma(In);return(n=e.call.apply(e,[this].concat(p))||this).state={vdom:null},n.propsEmitter=Jn(),n.props$=t.fromESObservable(((o={subscribe:function(t){return{unsubscribe:n.propsEmitter.listen(function(r){r?t.next(r):t.complete()})}}})[$LkZ7$$interop$default.d]=function(){return this},o)),n.vdom$=t.toESObservable(r(n.props$)),n}Va(o,e);var n=o.prototype;return n.componentWillMount=function(){var t=this;this.subscription=this.vdom$.subscribe({next:function(r){t.setState({vdom:r})}}),this.propsEmitter.emit(this.props)},n.componentWillReceiveProps=function(t){this.propsEmitter.emit(t)},n.shouldComponentUpdate=function(t,r){return r.vdom!==this.state.vdom},n.componentWillUnmount=function(){this.propsEmitter.emit(),this.subscription.unsubscribe()},n.render=function(){return this.state.vdom},o}(m.Component)}},nD=function(t){return nn(on)(t)},Rs=function(t){return t},Qs=function(t){var r=nn({fromESObservable:Rs,toESObservable:Rs});return function(e){return function(o){var n=m.createFactory(o),$=t.fromESObservable,p=t.toESObservable;return r(function(t){var r;var $LkZ7$$interop$default=ma(In);return(r={subscribe:function(r){var o=p(e($(t))).subscribe({next:function(t){return r.next(n(t))}});return{unsubscribe:function(){return o.unsubscribe()}}}})[$LkZ7$$interop$default.d]=function(){return this},r})}}},qD=function(t){var r=Qs(on)(t);return r},Ps=function(t){return function(){var $LkZ7$$interop$default=ma(In);var r,e=Jn(),o=t.fromESObservable(((r={subscribe:function(t){return{unsubscribe:e.listen(function(r){return t.next(r)})}}})[$LkZ7$$interop$default.d]=function(){return this},r));return{handler:e.emit,stream:o}}},sD=Ps(on);var tD=ma(Ii);kD,Ps,sD,Qs,qD,nn,nD,iD,hD,gD,fD,Ws,tD.d,xC,Gn,Mg,vC,dD,Hn,cD,bD,aD,$C,ZC,YC,XC,Xs,VC,xn,TC,RC,QC,OC,MC,LC,KC,JC,GC,EC,DC,BC,zC,Gi;zb();var Os={external:[["Width","width","m",3,5.4,.6],["# Bays","bayCount",!1,1,8,1],["Length","length","m"],["Footprint","floorArea","m2"],["Cladding area","claddingArea","m2"]],internal:[["Width","internalWidth","m"],["Length","internalLength","m"],["Wall area","internalWallArea","m2"],["Flooring area","internalFlooringArea","m2"],["Insulation volume","insulationVolume","m3"]],roof:[["Ridge height","ridgeHeight","m",1.2,5.4,.1],["Ridge offset","ridgeOffset","m",-5,5,.1],["Roofing area","roofingArea","m2"]],walls:[["Left wall height","leftWallHeight","m",2,5,.2],["Right wall height","rightWallHeight","m",2,5,.2],["Thickness","wallThickness","m",.3,.6,.02]]},vD=Mg(xd("project"),xb)(function(e){var t=e.project;t.toJSON();return React.createElement("table",{id:"info"},React.createElement("tbody",null,Object.keys(Os).map(function(e){return React.createElement(m.Fragment,{key:e},React.createElement("tr",null,React.createElement("th",{colSpan:2,className:"category"},e)),Os[e].map(function(e){return React.createElement("tr",{key:e[1]},React.createElement("th",null,e[0]," ",React.createElement("span",{className:"unit"},e[2])),React.createElement("td",null,e[2]?t.hanger[e[1]].toFixed(2):t.hanger[e[1]]),e[3]&&React.createElement("td",null,React.createElement("input",{type:"range",min:e[3],max:e[4],step:e[5],value:t.hanger[e[1]],onChange:function(a){var r=e[6]?e[6]:Number;t.hanger.adjust(e[1],r(a.target.value))}})))}))}),React.createElement("tr",null,React.createElement("td",{colSpan:2},React.createElement("button",{onClick:t.updateSpreadSheet,disabled:"updating"===t.state},t.buttonText)))))});var kn={};function Ms(r){for(;r;){var e=r,o=e.closed,t=e.destination,$=e.isStopped;if(o||$)return!1;r=t&&t instanceof pa?t:null}return!0}var yD=function(t,e){return(yD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function I(t,e){function r(){this.constructor=t}yD(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var hn=function(){return hn=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},hn,hn.apply(this,arguments)};function BD(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&(r[o[n]]=t[o[n]])}return r}function CD(t,e,r,o){var n,a=arguments.length,$=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)$=Reflect.decorate(t,e,r,o);else for(var x=t.length-1;x>=0;x--)(n=t[x])&&($=(a<3?n($):a>3?n(e,r,$):n(e,r))||$);return a>3&&$&&Object.defineProperty(e,r,$),$}function DD(t,e){return function(r,o){e(r,o,t)}}function ED(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function FD(t,e,r,o){return new(r||(r=Promise))(function(n,a){function $(t){try{i(o.next(t))}catch(e){a(e)}}function x(t){try{i(o.throw(t))}catch(e){a(e)}}function i(t){t.done?n(t.value):new r(function(e){e(t.value)}).then($,x)}i((o=o.apply(t,e||[])).next())})}function GD(t,e){var r,o,n,a,$={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function x(a){return function(x){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;$;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return $.label++,{value:a[1],done:!1};case 5:$.label++,o=a[1],a=[0];continue;case 7:a=$.ops.pop(),$.trys.pop();continue;default:if(!(n=(n=$.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){$=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){$.label=a[1];break}if(6===a[0]&&$.label<n[1]){$.label=n[1],n=a;break}if(n&&$.label<n[2]){$.label=n[2],$.ops.push(a);break}n[2]&&$.ops.pop(),$.trys.pop();continue;}a=e.call(t,$)}catch(x){a=[6,x],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,x])}}}function HD(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function gn(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function Is(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,a=r.call(t),$=[];try{for(;(void 0===e||e-->0)&&!(o=a.next()).done;)$.push(o.value)}catch(x){n={error:x}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return $}function KD(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Is(arguments[e]));return t}function Ng(t){return this instanceof Ng?(this.v=t,this):new Ng(t)}function MD(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=r.apply(t,e||[]),a=[];return o={},$("next"),$("throw"),$("return"),o[Symbol.asyncIterator]=function(){return this},o;function $(t){n[t]&&(o[t]=function(e){return new Promise(function(r,o){a.push([t,e,r,o])>1||x(t,e)})})}function x(t,e){try{(r=n[t](e)).value instanceof Ng?Promise.resolve(r.value.v).then(i,c):_(a[0][2],r)}catch(o){_(a[0][3],o)}var r}function i(t){x("next",t)}function c(t){x("throw",t)}function _(t,e){t(e),a.shift(),a.length&&x(a[0][0],a[0][1])}}function ND(t){var e,r;return e={},o("next"),o("throw",function(t){throw t}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(o,n){e[o]=t[o]?function(e){return(r=!r)?{value:Ng(t[o](e)),done:"return"===o}:n?n(e):e}:n}}function OD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof gn?gn(t):t[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(r){e[r]=t[r]&&function(e){return new Promise(function(o,n){(function(t,e,r,o){Promise.resolve(o).then(function(e){t({value:e,done:r})},e)})(o,n,(e=t[r](e)).done,e.value)})}}}function PD(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function QD(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function RD(t){return t&&t.__esModule?t:{default:t}}hn,BD,CD,DD,ED,FD,GD,HD,gn,Is,KD,Ng,MD,ND,OD,PD,QD,RD;function Og(n){return"function"==typeof n}var TD=!1,db={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&new Error().stack;TD=e},get useDeprecatedSynchronousErrorHandling(){return TD}};function Ze(r){setTimeout(function(){throw r})}var zi={closed:!0,next:function(r){},error:function(r){if(db.useDeprecatedSynchronousErrorHandling)throw r;Ze(r)},complete:function(){}};var Cs=Array.isArray||function(r){return r&&"number"==typeof r.length};function Bs(t){return null!=t&&"object"==typeof t}var ZD;function $D(){try{return ZD.apply(this,arguments)}catch(t){return Jc.e=t,Jc}}function Xm(t){return ZD=t,$D}var Jc={e:{}};Xm;function ys(r){return Error.call(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map(function(r,o){return o+1+") "+r.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r,this}ys.prototype=Object.create(Error.prototype);var xi=ys;var Wa=function(){function r(r){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,r&&(this._unsubscribe=r)}var t;return r.prototype.unsubscribe=function(){var r,t=!1;if(!this.closed){var i=this._parent,e=this._parents,s=this._unsubscribe,n=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var o=-1,c=e?e.length:0;i;)i.remove(this),i=++o<c&&e[o]||null;if(Og(s))Xm(s).call(this)===Jc&&(t=!0,r=r||(Jc.e instanceof xi?vs(Jc.e.errors):[Jc.e]));if(Cs(n))for(o=-1,c=n.length;++o<c;){var u=n[o];if(Bs(u))if(Xm(u.unsubscribe).call(u)===Jc){t=!0,r=r||[];var $=Jc.e;$ instanceof xi?r=r.concat(vs($.errors)):r.push($)}}if(t)throw new xi(r)}},r.prototype.add=function(t){if(!t||t===r.EMPTY)return r.EMPTY;if(t===this)return this;var i=t;switch(typeof t){case"function":i=new r(t);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var e=i;(i=new r)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.");}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},r.prototype.remove=function(r){var t=this._subscriptions;if(t){var i=t.indexOf(r);-1!==i&&t.splice(i,1)}},r.prototype._addParent=function(r){var t=this._parent,i=this._parents;t&&t!==r?i?-1===i.indexOf(r)&&i.push(r):this._parents=[r]:this._parent=r},r.EMPTY=((t=new r).closed=!0,t),r}();function vs(r){return r.reduce(function(r,t){return r.concat(t instanceof xi?t.errors:t)},[])}var vi="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();var pa=function(r){function t(e,i,o){var s=r.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,s._parentSubscription=null,arguments.length){case 0:s.destination=zi;break;case 1:if(!e){s.destination=zi;break}if("object"==typeof e){e instanceof t?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(s)):(s.syncErrorThrowable=!0,s.destination=new ss(s,e));break}default:s.syncErrorThrowable=!0,s.destination=new ss(s,e,i,o);}return s}return I(t,r),t.prototype[vi]=function(){return this},t.create=function(r,e,i){var o=new t(r,e,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var r=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=r,this._parents=t,this._parentSubscription=null,this},t}(Wa);var ss=function(r){function t(t,e,i,o){var s,n=r.call(this)||this;n._parentSubscriber=t;var c=n;return Og(e)?s=e:e&&(s=e.next,i=e.error,o=e.complete,e!==zi&&(c=Object.create(e),Og(c.unsubscribe)&&n.add(c.unsubscribe.bind(c)),c.unsubscribe=n.unsubscribe.bind(n))),n._context=c,n._next=s,n._error=i,n._complete=o,n}return I(t,r),t.prototype.next=function(r){if(!this.isStopped&&this._next){var t=this._parentSubscriber;db.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,r)&&this.unsubscribe():this.__tryOrUnsub(this._next,r)}},t.prototype.error=function(r){if(!this.isStopped){var t=this._parentSubscriber,e=db.useDeprecatedSynchronousErrorHandling;if(this._error)e&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,r),this.unsubscribe()):(this.__tryOrUnsub(this._error,r),this.unsubscribe());else if(t.syncErrorThrowable)e?(t.syncErrorValue=r,t.syncErrorThrown=!0):Ze(r),this.unsubscribe();else{if(this.unsubscribe(),e)throw r;Ze(r)}}},t.prototype.complete=function(){var r=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var e=function(){return r._complete.call(r._context)};db.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(r,t){try{r.call(this._context,t)}catch(e){if(this.unsubscribe(),db.useDeprecatedSynchronousErrorHandling)throw e;Ze(e)}},t.prototype.__tryOrSetError=function(r,t,e){if(!db.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,e)}catch(i){return db.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=i,r.syncErrorThrown=!0,!0):(Ze(i),!0)}return!1},t.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},t}(pa);Ms;function rs(r,e,$){if(r){if(r instanceof pa)return r;if(r[vi])return r[vi]()}return r||e||$?new pa(r,e,$):new pa(zi)}rs;var Rg="function"==typeof Symbol&&Symbol.observable||"@@observable";function kE(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Gm(r)}function Gm(r){return r?1===r.length?r[0]:function(e){return r.reduce(function(r,e){return e(r)},e)}:bc}function bc(){}kE,Gm;var ja=function(){function r(r){this._isScalar=!1,r&&(this._subscribe=r)}return r.prototype.lift=function(e){var o=new r;return o.source=this,o.operator=e,o},r.prototype.subscribe=function(r,e,o){var t=this.operator,n=rs(r,e,o);if(t?t.call(n,this.source):n.add(this.source||db.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),db.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},r.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(e){db.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=e),Ms(r)?r.error(e):console.warn(e)}},r.prototype.forEach=function(r,e){var o=this;return new(e=ms(e))(function(e,t){var n;n=o.subscribe(function(e){try{r(e)}catch(o){t(o),n&&n.unsubscribe()}},t,e)})},r.prototype._subscribe=function(r){var e=this.source;return e&&e.subscribe(r)},r.prototype[Rg]=function(){return this},r.prototype.pipe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return 0===r.length?this:Gm(r)(this)},r.prototype.toPromise=function(r){var e=this;return new(r=ms(r))(function(r,o){var t;e.subscribe(function(r){return t=r},function(r){return o(r)},function(){return r(t)})})},r.create=function(e){return new r(e)},r}();function ms(r){if(r||(r=db.Promise||Promise),!r)throw new Error("no Promise impl found");return r}function ls(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}ls.prototype=Object.create(Error.prototype);var Ug=ls;var rE=function(t){function e(e,i){var r=t.call(this)||this;return r.subject=e,r.subscriber=i,r.closed=!1,r}return I(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(Wa);var js=function(r){function t(t){var e=r.call(this,t)||this;return e.destination=t,e}return I(t,r),t}(pa);var is=function(r){function t(){var t=r.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return I(t,r),t.prototype[vi]=function(){return new js(this)},t.prototype.lift=function(r){var t=new hs(this,this);return t.operator=r,t},t.prototype.next=function(r){if(this.closed)throw new Ug;if(!this.isStopped)for(var t=this.observers,e=t.length,o=t.slice(),i=0;i<e;i++)o[i].next(r)},t.prototype.error=function(r){if(this.closed)throw new Ug;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var t=this.observers,e=t.length,o=t.slice(),i=0;i<e;i++)o[i].error(r);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Ug;this.isStopped=!0;for(var r=this.observers,t=r.length,e=r.slice(),o=0;o<t;o++)e[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new Ug;return r.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(r){if(this.closed)throw new Ug;return this.hasError?(r.error(this.thrownError),Wa.EMPTY):this.isStopped?(r.complete(),Wa.EMPTY):(this.observers.push(r),new rE(this,r))},t.prototype.asObservable=function(){var r=new ja;return r.source=this,r},t.create=function(r,t){return new hs(r,t)},t}(ja);var hs=function(r){function t(t,e){var o=r.call(this)||this;return o.destination=t,o.source=e,o}return I(t,r),t.prototype.next=function(r){var t=this.destination;t&&t.next&&t.next(r)},t.prototype.error=function(r){var t=this.destination;t&&t.error&&this.destination.error(r)},t.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},t.prototype._subscribe=function(r){return this.source?this.source.subscribe(r):Wa.EMPTY},t}(is);function Am(){return function(n){return n.lift(new wE(n))}}Am;var wE=function(){function n(n){this.connectable=n}return n.prototype.call=function(n,e){var t=this.connectable;t._refCount++;var o=new xE(n,t),r=e.subscribe(o);return o.closed||(o.connection=t.connect()),r},n}(),xE=function(n){function e(e,t){var o=n.call(this,e)||this;return o.connectable=t,o}return I(e,n),e.prototype._unsubscribe=function(){var n=this.connectable;if(n){this.connectable=null;var e=n._refCount;if(e<=0)this.connection=null;else if(n._refCount=e-1,e>1)this.connection=null;else{var t=this.connection,o=n._connection;this.connection=null,!o||t&&o!==t||o.unsubscribe()}}else this.connection=null},e}(pa);var yE=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return I(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Wa).add(this.source.subscribe(new BE(this.getSubject(),this))),e.closed?(this._connection=null,e=Wa.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return Am()(this)},t}(ja);var Vg=yE.prototype,AE={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Vg._subscribe},_isComplete:{value:Vg._isComplete,writable:!0},getSubject:{value:Vg.getSubject},connect:{value:Vg.connect},refCount:{value:Vg.refCount}};var BE=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return I(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(js),PQ=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new DE(e,n),o=t.subscribe(r);return r.closed||(r.connection=n.connect()),o},e}(),DE=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return I(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(pa);var EE=function(r){function t(t,i){return r.call(this)||this}return I(t,r),t.prototype.schedule=function(r,t){return void 0===t&&(t=0),this},t}(Wa);var es=function(t){function i(i,e){var n=t.call(this,i,e)||this;return n.scheduler=i,n.work=e,n.pending=!1,n}return I(i,t),i.prototype.schedule=function(t,i){if(void 0===i&&(i=0),this.closed)return this;this.state=t;var e=this.id,n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(n,this.id,i),this},i.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),setInterval(t.flush.bind(t,this),e)},i.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!==e&&this.delay===e&&!1===this.pending)return i;clearInterval(i)},i.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(t,i){var e=!1,n=void 0;try{this.work(t)}catch(s){e=!0,n=!!s&&s||new Error(s)}if(e)return this.unsubscribe(),n},i.prototype._unsubscribe=function(){var t=this.id,i=this.scheduler,e=i.actions,n=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&e.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null},i}(EE);var ds=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}();var cs=function(e){function t(r,i){void 0===i&&(i=ds.now);var h=e.call(this,r,function(){return t.delegate&&t.delegate!==h?t.delegate.now():i()})||this;return h.actions=[],h.active=!1,h.scheduled=void 0,h}return I(t,e),t.prototype.schedule=function(r,i,h){return void 0===i&&(i=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,i,h):e.prototype.schedule.call(this,r,i,h)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(ds);function IE(e){return e&&"function"==typeof e.schedule}function rm(r,e){return e?new ja(function($){var o=new Wa,t=0;return o.add(e.schedule(function(){t!==r.length?($.next(r[t++]),$.closed||o.add(this.schedule())):$.complete()})),o}):new ja(as(r))}var as=function(r){return function(e){for(var o=0,s=r.length;o<s&&!e.closed;o++)e.next(r[o]);e.closed||e.complete()}};rm;var LE=new cs(es);var ME=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return I(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(es);var NE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,i=this.actions,r=-1,o=i.length;e=e||i.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<o&&(e=i.shift()));if(this.active=!1,t){for(;++r<o&&(e=i.shift());)e.unsubscribe();throw t}},t}(cs);var OE=new NE(ME);function PE(t){return t}function Wg(r,t){return function(e){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new RE(r,t))}}Wg;var RE=function(){function r(r,t){this.project=r,this.thisArg=t}return r.prototype.call=function(r,t){return t.subscribe(new SE(r,this.project,this.thisArg))},r}();var SE=function(r){function t(t,e,o){var i=r.call(this,t)||this;return i.project=e,i.count=0,i.thisArg=o||i,i}return I(t,r),t.prototype._next=function(r){var t;try{t=this.project.call(this.thisArg,r,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(pa);var oi=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return I(r,t),r.prototype.notifyNext=function(t,r,e,i,o){this.destination.next(r)},r.prototype.notifyError=function(t,r){this.destination.error(t)},r.prototype.notifyComplete=function(t){this.destination.complete()},r}(pa);function _g(r,e,$,s,b){if(void 0===b&&(b=new Nq(r,$,s)),!b.closed)return ap(e)(b)}var Nq=function(r){function t(t,e,i){var n=r.call(this)||this;return n.parent=t,n.outerValue=e,n.outerIndex=i,n.index=0,n}return I(t,r),t.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},t.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(pa);var rp=function(r){return function(e){return r.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Ze),e}};function XE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Kh=XE();var jp=function(r){return function(e){for(var t=r[Kh]();;){var o=t.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}};var ip=function(e){return function(r){var b=e[Rg]();if("function"!=typeof b.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return b.subscribe(r)}};var hp=function(r){return r&&"number"==typeof r.length&&"function"!=typeof r};function dp(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var ap=function(r){if(r instanceof ja)return function(e){return r._isScalar?(e.next(r.value),void e.complete()):r.subscribe(e)};if(r&&"function"==typeof r[Rg])return ip(r);if(hp(r))return as(r);if(dp(r))return rp(r);if(r&&"function"==typeof r[Kh])return jp(r);var e=Bs(r)?"an invalid object":"'"+r+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};_g;function _o(r,e){if(!e)return r instanceof ja?r:new ja(ap(r));if(null!=r){if($o(r))return Mo(r,e);if(dp(r))return To(r,e);if(hp(r))return rm(r,e);if(Yo(r)||"string"==typeof r)return So(r,e)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}function $o(e){return e&&"function"==typeof e[Rg]}$o;function Yo(r){return r&&"function"==typeof r[Kh]}Yo;function To(r,e){return e?new ja(function(i){var o=new Wa;return o.add(e.schedule(function(){return r.then(function(r){o.add(e.schedule(function(){i.next(r),o.add(e.schedule(function(){return i.complete()}))}))},function(r){o.add(e.schedule(function(){return i.error(r)}))})})),o}):new ja(rp(r))}To;function So(e,r){if(!e)throw new Error("Iterable cannot be null");return r?new ja(function(n){var t,o=new Wa;return o.add(function(){t&&"function"==typeof t.return&&t.return()}),o.add(r.schedule(function(){t=e[Kh](),o.add(r.schedule(function(){if(!n.closed){var e,r;try{var o=t.next();e=o.value,r=o.done}catch($){return void n.error($)}r?n.complete():(n.next(e),this.schedule())}}))})),o}):new ja(jp(e))}So;function Mo(e,r){return r?new ja(function(o){var $=new Wa;return $.add(r.schedule(function(){var b=e[Rg]();$.add(b.subscribe({next:function(e){$.add(r.schedule(function(){return o.next(e)}))},error:function(e){$.add(r.schedule(function(){return o.error(e)}))},complete:function(){$.add(r.schedule(function(){return o.complete()}))}}))})),$}):new ja(ip(e))}Mo;_o;function Gh(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Zm(PE,e)}function Zm(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(Zm(function(r,n){return _o(e(r,n)).pipe(Wg(function(e,i){return t(r,e,n,i)}))},r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new kF(e,r))})}Zm;var kF=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new lF(e,this.project,this.concurrent))},e}();var lF=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return I(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=new Nq(this,void 0,void 0);this.destination.add(n),_g(this,e,t,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(oi);Gh;var OQ=Object.prototype.toString;function qf(e,t,r,n){return Og(r)&&(n=r,r=void 0),n?qf(e,t,r).pipe(Wg(function(e){return Cs(e)?n.apply(void 0,e):n(e)})):new ja(function(n){Cy(e,t,function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)},n,r)})}function Cy(e,t,r,n,i){var o;if(rF(e)){var $=e;e.addEventListener(t,r,i),o=function(){return $.removeEventListener(t,r,i)}}else if(qF(e)){var Z=e;e.on(t,r),o=function(){return Z.off(t,r)}}else if(pF(e)){var u=e;e.addListener(t,r),o=function(){return u.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var v=0,a=e.length;v<a;v++)Cy(e[v],t,r,n,i)}n.add(o)}function pF(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function qF(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}function rF(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}function wy(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var $=Number.POSITIVE_INFINITY,i=null,g=e[e.length-1];return IE(g)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&($=e.pop())):"number"==typeof g&&($=e.pop()),null===i&&1===e.length&&e[0]instanceof ja?e[0]:Gh($)(rm(e,i))}wy;function Sl(r,t){return function(i){return i.lift(new uF(r,t))}}Sl;var uF=function(){function r(r,t){this.predicate=r,this.thisArg=t}return r.prototype.call=function(r,t){return t.subscribe(new vF(r,this.predicate,this.thisArg))},r}(),vF=function(r){function t(t,i,e){var n=r.call(this,t)||this;return n.predicate=i,n.thisArg=e,n.count=0,n}return I(t,r),t.prototype._next=function(r){var t;try{t=this.predicate.call(this.thisArg,r,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(r)},t}(pa);function Yl(t,r,o){return function(e){return e.lift(new xF(t,r,o))}}Yl;var xF=function(){function t(t,r,o){this.nextOrObserver=t,this.error=r,this.complete=o}return t.prototype.call=function(t,r){return r.subscribe(new yF(t,this.nextOrObserver,this.error,this.complete))},t}(),yF=function(t){function r(r,o,e,i){var n=t.call(this,r)||this;return n._tapNext=bc,n._tapError=bc,n._tapComplete=bc,n._tapError=e||bc,n._tapComplete=i||bc,Og(o)?(n._context=n,n._tapNext=o):o&&(n._context=o,n._tapNext=o.next||bc,n._tapError=o.error||bc,n._tapComplete=o.complete||bc),n}return I(r,t),r.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(r){return void this.destination.error(r)}this.destination.next(t)},r.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},r.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},r}(pa);function hy(t,e){var r=!1;return arguments.length>=2&&(r=!0),function(i){return i.lift(new AF(t,e,r))}}hy;var AF=function(){function t(t,e,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=e,this.hasSeed=r}return t.prototype.call=function(t,e){return e.subscribe(new BF(t,this.accumulator,this.seed,this.hasSeed))},t}(),BF=function(t){function e(e,r,i,n){var s=t.call(this,e)||this;return s.accumulator=r,s._seed=i,s.hasSeed=n,s.index=0,s}return I(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.accumulator(this.seed,t,r)}catch(i){this.destination.error(i)}this.seed=e,this.destination.next(e)},e}(pa);function cy(t,r){return function(e){var o;if(o="function"==typeof t?t:function(){return t},"function"==typeof r)return e.lift(new DF(o,r));var c=Object.create(e,AE);return c.source=e,c.subjectFactory=o,c}}cy;var DF=function(){function t(t,r){this.subjectFactory=t,this.selector=r}return t.prototype.call=function(t,r){var e=this.selector,o=this.subjectFactory(),c=e(o).subscribe(t);return c.add(r.subscribe(o)),c},t}();function EF(){return new is}function Nh(){return function(r){return Am()(cy(EF)(r))}}Nh;function $x(e){return function(t){return t.lift(new HF(e))}}$x;var HF=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var r=new IF(e),i=_g(r,this.notifier);return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r},e}(),IF=function(e){function t(t){var r=e.call(this,t)||this;return r.seenValue=!1,r}return I(t,e),t.prototype.notifyNext=function(e,t,r,i,n){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(oi);var Sm={leading:!0,trailing:!1};function KF(t,o){return void 0===o&&(o=Sm),function(r){return r.lift(new LF(t,o.leading,o.trailing))}}Sm,KF;var LF=function(){function t(t,o,r){this.durationSelector=t,this.leading=o,this.trailing=r}return t.prototype.call=function(t,o){return o.subscribe(new MF(t,this.durationSelector,this.leading,this.trailing))},t}(),MF=function(t){function o(o,r,e,i){var n=t.call(this,o)||this;return n.destination=o,n.durationSelector=r,n._leading=e,n._trailing=i,n._hasValue=!1,n}return I(o,t),o.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},o.prototype.send=function(){var t=this._hasValue,o=this._sendValue;t&&(this.destination.next(o),this.throttle(o)),this._hasValue=!1,this._sendValue=null},o.prototype.throttle=function(t){var o=this.tryDurationSelector(t);o&&this.add(this._throttled=_g(this,o))},o.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(o){return this.destination.error(o),null}},o.prototype.throttlingDone=function(){var t=this._throttled,o=this._trailing;t&&t.unsubscribe(),this._throttled=null,o&&this.send()},o.prototype.notifyNext=function(t,o,r,e,i){this.throttlingDone()},o.prototype.notifyComplete=function(){this.throttlingDone()},o}(oi);function Yx(t,i,e){return void 0===i&&(i=LE),void 0===e&&(e=Sm),function(r){return r.lift(new OF(t,i,e.leading,e.trailing))}}Yx;var OF=function(){function t(t,i,e,r){this.duration=t,this.scheduler=i,this.leading=e,this.trailing=r}return t.prototype.call=function(t,i){return i.subscribe(new PF(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),PF=function(t){function i(i,e,r,n,l){var s=t.call(this,i)||this;return s.duration=e,s.scheduler=r,s.leading=n,s.trailing=l,s._hasTrailingValue=!1,s._trailingValue=null,s}return I(i,t),i.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(QF,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},i.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},i.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},i}(pa);function QF(t){t.subscriber.clearThrottle()}function ko(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){var e;"function"==typeof t[t.length-1]&&(e=t.pop());var o=t;return r.lift(new SF(o,e))}}ko;var SF=function(){function t(t,r){this.observables=t,this.project=r}return t.prototype.call=function(t,r){return r.subscribe(new TF(t,this.observables,this.project))},t}(),TF=function(t){function r(r,e,o){var i=t.call(this,r)||this;i.observables=e,i.project=o,i.toRespond=[];var s=e.length;i.values=new Array(s);for(var n=0;n<s;n++)i.toRespond.push(n);for(n=0;n<s;n++){var a=e[n];i.add(_g(i,a,a,n))}return i}return I(r,t),r.prototype.notifyNext=function(t,r,e,o,i){this.values[e]=r;var s=this.toRespond;if(s.length>0){var n=s.indexOf(e);-1!==n&&s.splice(n,1)}},r.prototype.notifyComplete=function(){},r.prototype._next=function(t){if(0===this.toRespond.length){var r=[t].concat(this.values);this.project?this._tryProject(r):this.destination.next(r)}},r.prototype._tryProject=function(t){var r;try{r=this.project.apply(this,t)}catch(e){return void this.destination.error(e)}this.destination.next(r)},r}(oi);var F={};F=THREE;function Rx(e,r){var a=new F.OrbitControls(e,r);return a.dampingFactor=.25,a.enableDamping=!0,a.enableKeys=!1,a.enableZoom=!0,a.maxDistance=20,a.maxPolarAngle=Math.PI/2-.15,a.minDistance=10,a.minPolarAngle=.1,a.panSpeed=.2,a.rotateSpeed=.4,a}THREE.OrbitControls=function(e,t){var n,o,a,i,r;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),d=u.NONE},this.update=(n=new THREE.Vector3,o=new THREE.Quaternion().setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),a=o.clone().inverse(),i=new THREE.Vector3,r=new THREE.Quaternion,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(o),h.setFromVector3(n),s.autoRotate&&d===u.NONE&&M(2*Math.PI/60/60*s.autoRotateSpeed),h.theta+=E.theta,h.phi+=E.phi,h.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,h.theta)),h.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=b,h.radius=Math.max(s.minDistance,Math.min(s.maxDistance,h.radius)),s.target.add(g),n.setFromSpherical(h),n.applyQuaternion(a),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(E.theta*=1-s.dampingFactor,E.phi*=1-s.dampingFactor,g.multiplyScalar(1-s.dampingFactor)):(E.set(0,0,0),g.set(0,0,0)),b=1,!!(f||i.distanceToSquared(s.object.position)>p||8*(1-r.dot(s.object.quaternion))>p)&&(s.dispatchEvent(c),i.copy(s.object.position),r.copy(s.object.quaternion),f=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",_,!1),s.domElement.removeEventListener("mousedown",U,!1),s.domElement.removeEventListener("wheel",z,!1),s.domElement.removeEventListener("touchstart",I,!1),s.domElement.removeEventListener("touchend",K,!1),s.domElement.removeEventListener("touchmove",X,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Z,!1),window.removeEventListener("keydown",F,!1)};var s=this,c={type:"change"},l={type:"start"},m={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=u.NONE,p=1e-6,h=new THREE.Spherical,E=new THREE.Spherical,b=1,g=new THREE.Vector3,f=!1,T=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,R=new THREE.Vector2,O=new THREE.Vector2,H=new THREE.Vector2,w=new THREE.Vector2,P=new THREE.Vector2,j=new THREE.Vector2;function L(){return Math.pow(.95,s.zoomSpeed)}function M(e){E.theta-=e}function C(e){E.phi-=e}var N,S=(N=new THREE.Vector3,function(e,t){N.setFromMatrixColumn(t,0),N.multiplyScalar(-e),g.add(N)}),A=function(){var e=new THREE.Vector3;return function(t,n){!0===s.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),D=function(){var e=new THREE.Vector3;return function(t,n){var o=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var a=s.object.position;e.copy(a).sub(s.target);var i=e.length();i*=Math.tan(s.object.fov/2*Math.PI/180),S(2*t*i/o.clientHeight,s.object.matrix),A(2*n*i/o.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(S(t*(s.object.right-s.object.left)/s.object.zoom/o.clientWidth,s.object.matrix),A(n*(s.object.top-s.object.bottom)/s.object.zoom/o.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function x(e){s.object.isPerspectiveCamera?b/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function k(e){s.object.isPerspectiveCamera?b*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function V(e){R.set(e.clientX,e.clientY)}function U(e){if(!1!==s.enabled){switch(e.preventDefault(),e.button){case s.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;V(e),d=u.PAN}else{if(!1===s.enableRotate)return;!function(e){T.set(e.clientX,e.clientY)}(e),d=u.ROTATE}break;case s.mouseButtons.MIDDLE:if(!1===s.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),d=u.DOLLY;break;case s.mouseButtons.RIGHT:if(!1===s.enablePan)return;V(e),d=u.PAN;}d!==u.NONE&&(document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",Z,!1),s.dispatchEvent(l))}}function Y(e){if(!1!==s.enabled)switch(e.preventDefault(),d){case u.ROTATE:if(!1===s.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,T).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*y.x/t.clientHeight),C(2*Math.PI*y.y/t.clientHeight),T.copy(v),s.update()}(e);break;case u.DOLLY:if(!1===s.enableZoom)return;!function(e){P.set(e.clientX,e.clientY),j.subVectors(P,w),j.y>0?x(L()):j.y<0&&k(L()),w.copy(P),s.update()}(e);break;case u.PAN:if(!1===s.enablePan)return;!function(e){O.set(e.clientX,e.clientY),H.subVectors(O,R).multiplyScalar(s.panSpeed),D(H.x,H.y),R.copy(O),s.update()}(e);}}function Z(e){!1!==s.enabled&&(document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Z,!1),s.dispatchEvent(m),d=u.NONE)}function z(e){!1===s.enabled||!1===s.enableZoom||d!==u.NONE&&d!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(l),function(e){e.deltaY<0?k(L()):e.deltaY>0&&x(L()),s.update()}(e),s.dispatchEvent(m))}function F(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){switch(e.keyCode){case s.keys.UP:D(0,s.keyPanSpeed),s.update();break;case s.keys.BOTTOM:D(0,-s.keyPanSpeed),s.update();break;case s.keys.LEFT:D(s.keyPanSpeed,0),s.update();break;case s.keys.RIGHT:D(-s.keyPanSpeed,0),s.update();}}(e)}function I(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===s.enableRotate)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=u.TOUCH_ROTATE;break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);w.set(0,o)}if(s.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);R.set(a,i)}}(e),d=u.TOUCH_DOLLY_PAN;break;default:d=u.NONE;}d!==u.NONE&&s.dispatchEvent(l)}}function X(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===s.enableRotate)return;if(d!==u.TOUCH_ROTATE)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY),y.subVectors(v,T).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;M(2*Math.PI*y.x/t.clientHeight),C(2*Math.PI*y.y/t.clientHeight),T.copy(v),s.update()}(e);break;case 2:if(!1===s.enableZoom&&!1===s.enablePan)return;if(d!==u.TOUCH_DOLLY_PAN)return;!function(e){if(s.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);P.set(0,o),j.set(0,Math.pow(P.y/w.y,s.zoomSpeed)),x(j.y),w.copy(P)}if(s.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);O.set(a,i),H.subVectors(O,R).multiplyScalar(s.panSpeed),D(H.x,H.y),R.copy(O)}s.update()}(e);break;default:d=u.NONE;}}function K(e){!1!==s.enabled&&(s.dispatchEvent(m),d=u.NONE)}function _(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",_,!1),s.domElement.addEventListener("mousedown",U,!1),s.domElement.addEventListener("wheel",z,!1),s.domElement.addEventListener("touchstart",I,!1),s.domElement.addEventListener("touchend",K,!1),s.domElement.addEventListener("touchmove",X,!1),window.addEventListener("keydown",F,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});Rx;function Lx(e){void 0===e&&(e=!0);var r=new F.PlaneGeometry(3,3,1,1),i=new F.MeshBasicMaterial({color:"red",side:F.DoubleSide}),$=new F.Mesh(r,i);return $.userData.pts=function(){return $.updateMatrixWorld(!0),[$.position,$.localToWorld(new F.Vector3(0,0,1)),$.localToWorld(new F.Vector3(0,1,0))]},$.visible=e,$}Lx;function Kx(e){var r=e.size;return React.createElement(Hx,{thing:function(e,$){var o=new F.GridHelper(r*e.gridSize,r,new F.Color(14540253),new F.Color(14540253));return o.position.y=-.005,o}})}var En={};zb();var ZF=En&&En.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$F=function(t){function e(e){var r=t.call(this,e)||this;return r.thing=e.thing(r.props.project,r.props.scene),r}return ZF(e,t),e.prototype.componentDidMount=function(){this.props.scene.add(this.thing)},e.prototype.componentWillUnmount=function(){this.props.scene.remove(this.thing)},e.prototype.render=function(){return null},e}(m.Component),Hx=Mg(xd("project","scene"),xb)($F);En.default=Hx;zb(),Kx;var Nn={};var Bx="object"==typeof Sb&&Sb&&Sb.Object===Object&&Sb;var cG="object"==typeof self&&self&&self.Object===Object&&self,Kb=Bx||cG||Function("return this")();var Mc=Kb.Symbol;var yx=Object.prototype,gG=yx.hasOwnProperty,hG=yx.toString,jh=Mc?Mc.toStringTag:void 0;function jG($){var r=gG.call($,jh),t=$[jh];try{$[jh]=void 0;var n=!0}catch(o){}var a=hG.call($);return n&&(r?$[jh]=t:delete $[jh]),a}var kG=Object.prototype,lG=kG.toString;function mG(t){return lG.call(t)}var nG="[object Null]",oG="[object Undefined]",wx=Mc?Mc.toStringTag:void 0;function jf($){return null==$?void 0===$?oG:nG:wx&&wx in Object($)?jG($):mG($)}function hf(t){return null!=t&&"object"==typeof t}var sG="[object Symbol]";function oo($){return"symbol"==typeof $||hf($)&&jf($)==sG}function uG(e,r){for(var t=-1,$=null==e?0:e.length,a=Array($);++t<$;)a[t]=r(e[t],t,e);return a}var Ab=Array.isArray;var wG=1/0,rx=Mc?Mc.prototype:void 0,qx=rx?rx.toString:void 0;function px($){if("string"==typeof $)return $;if(Ab($))return uG($,px)+"";if(oo($))return qx?qx.call($):"";var r=$+"";return"0"==r&&1/$==-wG?"-0":r}function fl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function BG(r){return r}function wc(t,e){var $=WG(t,e);return VG($)?$:void 0}var DG="[object AsyncFunction]",EG="[object Function]",FG="[object GeneratorFunction]",GG="[object Proxy]";function mx($){if(!fl($))return!1;var t=jf($);return t==EG||t==FG||t==DG||t==GG}var ll=Kb["__core-js_shared__"];var kx=function(){var $=/[^.]+$/.exec(ll&&ll.keys&&ll.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}();function KG($){return!!kx&&kx in $}var LG=Function.prototype,MG=LG.toString;function Id(t){if(null!=t){try{return MG.call(t)}catch(r){}try{return t+""}catch(r){}}return""}var OG=/[\\^$.*+?()[\]{}|]/g,PG=/^\[object .+?Constructor\]$/,QG=Function.prototype,RG=Object.prototype,SG=QG.toString,TG=RG.hasOwnProperty,UG=RegExp("^"+SG.call(TG).replace(OG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function VG($){return!(!fl($)||KG($))&&(mx($)?UG:PG).test(Id($))}function WG($,t){return null==$?void 0:$[t]}wc;var Fl=wc(Kb,"WeakMap");var hx=function(){try{var t=wc(Object,"defineProperty");return t({},"",{}),t}catch(r){}}();var ZG=9007199254740991,$G=/^(?:0|[1-9]\d*)$/;function ex($,o){var r=typeof $;return!!(o=null==o?ZG:o)&&("number"==r||"symbol"!=r&&$G.test($))&&$>-1&&$%1==0&&$<o}function cx(e,r,$){"__proto__"==r&&hx?hx(e,r,{configurable:!0,enumerable:!0,value:$,writable:!0}):e[r]=$}cx;function ax($,t){return $===t||$!=$&&t!=t}function Ul($){return null!=$&&Cm($.length)&&!mx($)}var dH=9007199254740991;function Cm($){return"number"==typeof $&&$>-1&&$%1==0&&$<=dH}Ul;var fH=Object.prototype;function gH(t){var o=t&&t.constructor;return t===("function"==typeof o&&o.prototype||fH)}function ui(r){return Ul(r)?YH(r):bI(r)}function iH(r,$){for(var t=-1,e=Array(r);++t<r;)e[t]=$(t);return e}var jH="[object Arguments]";function Qw(e){return hf(e)&&jf(e)==jH}var Ew=Object.prototype,mH=Ew.hasOwnProperty,nH=Ew.propertyIsEnumerable,Bw=Qw(function(){return arguments}())?Qw:function(r){return hf(r)&&mH.call(r,"callee")&&!nH.call(r,"callee")};function pH(){return!1}var Aw=function(){var t={exports:this};this.__esModule=!0;var e="object"==typeof this&&this&&!this.nodeType&&this,r=e&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===e?Kb.Buffer:void 0,s=(o?o.isBuffer:void 0)||pH;return this.default=s,t.exports}.call({});var rH="[object Arguments]",sH="[object Array]",tH="[object Boolean]",uH="[object Date]",vH="[object Error]",wH="[object Function]",xH="[object Map]",yH="[object Number]",zH="[object Object]",AH="[object RegExp]",BH="[object Set]",CH="[object String]",DH="[object WeakMap]",EH="[object ArrayBuffer]",FH="[object DataView]",GH="[object Float32Array]",HH="[object Float64Array]",IH="[object Int8Array]",JH="[object Int16Array]",KH="[object Int32Array]",LH="[object Uint8Array]",MH="[object Uint8ClampedArray]",NH="[object Uint16Array]",OH="[object Uint32Array]",e={};function tw($){return hf($)&&Cm($.length)&&!!e[jf($)]}e[GH]=e[HH]=e[IH]=e[JH]=e[KH]=e[LH]=e[MH]=e[NH]=e[OH]=!0,e[rH]=e[sH]=e[EH]=e[tH]=e[FH]=e[uH]=e[vH]=e[wH]=e[xH]=e[yH]=e[zH]=e[AH]=e[BH]=e[CH]=e[DH]=!1,tw;function RH(t){return function($){return t($)}}var My=function(){var e={exports:this};this.__esModule=!0;var t="object"==typeof this&&this&&!this.nodeType&&this,r=t&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===t&&Bx.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();return this.default=i,e.exports}.call({});var sw=ma(My);var iw=sw.d&&sw.d.isTypedArray,hw=iw?RH(iw):tw;var WH=Object.prototype,XH=WH.hasOwnProperty;function YH(r,e){var $wmt$$interop$default=ma(Aw);var $=Ab(r),a=!$&&Bw(r),t=!$&&!a&&$wmt$$interop$default.d(r),s=!$&&!a&&!t&&hw(r),i=$||a||t||s,x=i?iH(r.length,String):[],A=x.length;for(var p in r)!e&&!XH.call(r,p)||i&&("length"==p||t&&("offset"==p||"parent"==p)||s&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||ex(p,A))||x.push(p);return x}function ZH(t,u){return function($){return t(u($))}}var $H=ZH(Object.keys,Object);var _H=Object.prototype,aI=_H.hasOwnProperty;function bI(r){if(!gH(r))return $H(r);var $=[];for(var t in Object(r))aI.call(r,t)&&"constructor"!=t&&$.push(t);return $}ui;function fw(e,$,r){var t=null==e?void 0:Zn(e,$);return void 0===t?r:t}function Zn(e,$){for(var t=0,r=($=go($,e)).length;null!=e&&t<r;)e=e[$i($[t++])];return t&&t==r?e:void 0}function go(r,$){return Ab(r)?r:ho(r,$)?[r]:TI(Eu(r))}var fI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gI=/^\w*$/;function ho(r,$){if(Ab(r))return!1;var e=typeof r;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=r&&!oo(r))||gI.test(r)||!fI.test(r)||null!=$&&r in Object($)}function Ib(e){var $=-1,t=null==e?0:e.length;for(this.clear();++$<t;){var a=e[$];this.set(a[0],a[1])}}function Rv(){this.size=0,this.__data__={hash:new lc,map:new(mg||qb),string:new lc}}function lc(t){var e=-1,$=null==t?0:t.length;for(this.clear();++e<$;){var r=t[e];this.set(r[0],r[1])}}function Ov(){this.__data__=wg?wg(null):{},this.size=0}var wg=wc(Object,"create");Ov;function nI(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var oI="__lodash_hash_undefined__",pI=Object.prototype,qI=pI.hasOwnProperty;function rI(r){var $=this.__data__;if(wg){var e=$[r];return e===oI?void 0:e}return qI.call($,r)?$[r]:void 0}var sI=Object.prototype,tI=sI.hasOwnProperty;function uI(r){var $=this.__data__;return wg?void 0!==$[r]:tI.call($,r)}var vI="__lodash_hash_undefined__";function wI($,e){var i=this.__data__;return this.size+=this.has($)?0:1,i[$]=wg&&void 0===e?vI:e,this}lc.prototype.clear=Ov,lc.prototype.delete=nI,lc.prototype.get=rI,lc.prototype.has=uI,lc.prototype.set=wI,lc;function qb(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var l=e[t];this.set(l[0],l[1])}}function yI(){this.__data__=[],this.size=0}function pg(e,r){for(var $=e.length;$--;)if(ax(e[$][0],r))return $;return-1}pg;var AI=Array.prototype,BI=AI.splice;function CI($){var r=this.__data__,a=pg(r,$);return!(a<0)&&(a==r.length-1?r.pop():BI.call(r,a,1),--this.size,!0)}function wv($){var e=this.__data__,r=pg(e,$);return r<0?void 0:e[r][1]}wv;function rv($){return pg(this.__data__,$)>-1}rv;function qv($,e){var t=this.__data__,r=pg(t,$);return r<0?(++this.size,t.push([$,e])):t[r][1]=e,this}qv;qb.prototype.clear=yI,qb.prototype.delete=CI,qb.prototype.get=wv,qb.prototype.has=rv,qb.prototype.set=qv,qb;var mg=wc(Kb,"Map");Rv;function Yu(e){var t=kg(this,e).delete(e);return this.size-=t?1:0,t}function kg(e,$){var r=e.__data__;return JI($)?r["string"==typeof $?"string":"hash"]:r.map}function JI(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}kg;Yu;function Pu(t){return kg(this,t).get(t)}Pu;function Mu(t){return kg(this,t).has(t)}Mu;function Hu(t,e){var $=kg(this,t),a=$.size;return $.set(t,e),this.size+=$.size==a?0:1,this}Hu;Ib.prototype.clear=Rv,Ib.prototype.delete=Yu,Ib.prototype.get=Pu,Ib.prototype.has=Mu,Ib.prototype.set=Hu,Ib;var NI="Expected a function";function Bh(e,$){if("function"!=typeof e||null!=$&&"function"!=typeof $)throw new TypeError(NI);var t=function(){var a=arguments,r=$?$.apply(this,a):a[0],p=t.cache;if(p.has(r))return p.get(r);var c=e.apply(this,a);return t.cache=p.set(r,c)||p,c};return t.cache=new(Bh.Cache||Ib),t}Bh.Cache=Ib,Bh;var PI=500;function QI($){var e=Bh($,function($){return r.size===PI&&r.clear(),$}),r=e.cache;return e}var RI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,SI=/\\(\\)?/g,TI=QI(function(e){var $=[];return 46===e.charCodeAt(0)&&$.push(""),e.replace(RI,function(e,r,a,p){$.push(a?p.replace(SI,"$1"):r||e)}),$});function Eu($){return null==$?"":px($)}Eu;go;var VI=1/0;function $i($){if("string"==typeof $||oo($))return $;var r=$+"";return"0"==r&&1/$==-VI?"-0":r}Zn;fw;function XI(t,e){for(var $=-1,r=e.length,o=t.length;++$<r;)t[o+$]=e[$];return t}function Gb(e){var t=this.__data__=new qb(e);this.size=t.size}function yu(){this.__data__=new qb,this.size=0}yu;function $I(t){var e=this.__data__,$=e.delete(t);return this.size=e.size,$}function _I(t){return this.__data__.get(t)}function aJ(t){return this.__data__.has(t)}var bJ=200;function cJ(p,$){var e=this.__data__;if(e instanceof qb){var a=e.__data__;if(!mg||a.length<bJ-1)return a.push([p,$]),this.size=++e.size,this;e=this.__data__=new Ib(a)}return e.set(p,$),this.size=e.size,this}Gb.prototype.clear=yu,Gb.prototype.delete=$I,Gb.prototype.get=_I,Gb.prototype.has=aJ,Gb.prototype.set=cJ,Gb;function dJ(r,t){for(var u=-1,$=null==r?0:r.length,e=0,d=[];++u<$;){var a=r[u];t(a,u,r)&&(d[e++]=a)}return d}function eJ(){return[]}var fJ=Object.prototype,gJ=fJ.propertyIsEnumerable,uu=Object.getOwnPropertySymbols,iJ=uu?function(r){return null==r?[]:(r=Object(r),dJ(uu(r),function($){return gJ.call(r,$)}))}:eJ;function ol(e){return ou(e,ui,iJ)}function ou(r,$,e){var a=$(r);return Ab(r)?a:XI(a,e(r))}ou;ol;var ql=wc(Kb,"DataView");var tl=wc(Kb,"Promise");var vl=wc(Kb,"Set");var fu="[object Map]",pJ="[object Object]",cu="[object Promise]",au="[object Set]",Zt="[object WeakMap]",Xt="[object DataView]",uJ=Id(ql),vJ=Id(mg),wJ=Id(tl),xJ=Id(vl),yJ=Id(Fl),Je=jf;(ql&&Je(new ql(new ArrayBuffer(1)))!=Xt||mg&&Je(new mg)!=fu||tl&&Je(tl.resolve())!=cu||vl&&Je(new vl)!=au||Fl&&Je(new Fl)!=Zt)&&(Je=function($){var r=jf($),a=r==pJ?$.constructor:void 0,e=a?Id(a):"";if(e)switch(e){case uJ:return Xt;case vJ:return fu;case wJ:return cu;case xJ:return au;case yJ:return Zt;}return r});var Jt=Je;var Gt=Kb.Uint8Array;function lt(e){return"function"==typeof e?e:null==e?BG:"object"==typeof e?Ab(e)?AK(e[0],e[1]):jt(e):Xr(e)}function jt(t){var e=us(t);return 1==e.length&&e[0][2]?ns(e[0][0],e[0][1]):function(r){return r===t||rK(r,t,e)}}function Cj(e,$,k,r,t){return e===$||(null==e||null==$||!hf(e)&&!hf($)?e!=e&&$!=$:oK(e,$,k,r,Cj,t))}function zh(r){var e=-1,$=null==r?0:r.length;for(this.__data__=new Ib;++e<$;)this.add(r[e])}var GJ="__lodash_hash_undefined__";function HJ($){return this.__data__.set($,GJ),this}function IJ(a){return this.__data__.has(a)}zh.prototype.add=zh.prototype.push=HJ,zh.prototype.has=IJ,zh;function JJ(r,t){for(var e=-1,$=null==r?0:r.length;++e<$;)if(t(r[e],e,r))return!0;return!1}function KJ(t,$){return t.has($)}var LJ=1,MJ=2;function Us(e,r,$,a,u,t){var d=$&LJ,i=e.length,y=r.length;if(i!=y&&!(d&&y>i))return!1;var U=t.get(e);if(U&&t.get(r))return U==r;var f=-1,o=!0,n=$&MJ?new zh:void 0;for(t.set(e,r),t.set(r,e);++f<i;){var v=e[f],c=r[f];if(a)var A=d?a(c,v,f,r,e,t):a(v,c,f,e,r,t);if(void 0!==A){if(A)continue;o=!1;break}if(n){if(!JJ(r,function(e,r){if(!KJ(n,r)&&(v===e||u(v,e,$,a,t)))return n.push(r)})){o=!1;break}}else if(v!==c&&!u(v,c,$,a,t)){o=!1;break}}return t.delete(e),t.delete(r),o}function OJ(r){var t=-1,$=Array(r.size);return r.forEach(function(r,e){$[++t]=[e,r]}),$}function PJ(r){var t=-1,$=Array(r.size);return r.forEach(function(r){$[++t]=r}),$}var QJ=1,RJ=2,SJ="[object Boolean]",TJ="[object Date]",UJ="[object Error]",VJ="[object Map]",WJ="[object Number]",XJ="[object RegExp]",YJ="[object Set]",ZJ="[object String]",$J="[object Symbol]",_J="[object ArrayBuffer]",aK="[object DataView]",Ss=Mc?Mc.prototype:void 0,Pm=Ss?Ss.valueOf:void 0;function dK($,r,a,e,t,j,o){switch(a){case aK:if($.byteLength!=r.byteLength||$.byteOffset!=r.byteOffset)return!1;$=$.buffer,r=r.buffer;case _J:return!($.byteLength!=r.byteLength||!j(new Gt($),new Gt(r)));case SJ:case TJ:case WJ:return ax(+$,+r);case UJ:return $.name==r.name&&$.message==r.message;case XJ:case ZJ:return $==r+"";case VJ:var I=OJ;case YJ:var Y=e&QJ;if(I||(I=PJ),$.size!=r.size&&!Y)return!1;var s=o.get($);if(s)return s==r;e|=RJ,o.set($,r);var v=Us(I($),I(r),e,t,j,o);return o.delete($),v;case $J:if(Pm)return Pm.call($)==Pm.call(r);}return!1}var eK=1,fK=Object.prototype,gK=fK.hasOwnProperty;function hK(r,t,e,o,$,s){var a=e&eK,n=ol(r),c=n.length;if(c!=ol(t).length&&!a)return!1;for(var f=c;f--;){var i=n[f];if(!(a?i in t:gK.call(t,i)))return!1}var v=s.get(r);if(v&&s.get(t))return v==t;var x=!0;s.set(r,t),s.set(t,r);for(var l=a;++f<c;){var u=r[i=n[f]],p=t[i];if(o)var B=a?o(p,u,i,t,r,s):o(u,p,i,r,t,s);if(!(void 0===B?u===p||$(u,p,e,o,s):B)){x=!1;break}l||(l="constructor"==i)}if(x&&!l){var U=r.constructor,A=t.constructor;U!=A&&"constructor"in r&&"constructor"in t&&!("function"==typeof U&&U instanceof U&&"function"==typeof A&&A instanceof A)&&(x=!1)}return s.delete(r),s.delete(t),x}var iK=1,Fs="[object Arguments]",Ds="[object Array]",Kj="[object Object]",mK=Object.prototype,ws=mK.hasOwnProperty;function oK($,r,a,i,e,t){var S=Ab($),F=Ab(r),o=S?Ds:Jt($),p=F?Ds:Jt(r),s=(o=o==Fs?Kj:o)==Kj,c=(p=p==Fs?Kj:p)==Kj,u=o==p;var $wmt$$interop$default=ma(Aw);if(u&&$wmt$$interop$default.d($)){if(!$wmt$$interop$default.d(r))return!1;S=!0,s=!1}if(u&&!s)return t||(t=new Gb),S||hw($)?Us($,r,a,i,e,t):dK($,r,o,a,i,e,t);if(!(a&iK)){var v=s&&ws.call($,"__wrapped__"),g=c&&ws.call(r,"__wrapped__");if(v||g){var l=v?$.value():$,j=g?r.value():r;return t||(t=new Gb),e(l,j,a,i,t)}}return!!u&&(t||(t=new Gb),hK($,r,a,i,e,t))}Cj;var pK=1,qK=2;function rK(r,a,$,e){var t=$.length,i=t,u=!e;if(null==r)return!i;for(r=Object(r);t--;){var T=$[t];if(u&&T[2]?T[1]!==r[T[0]]:!(T[0]in r))return!1}for(;++t<i;){var v=(T=$[t])[0],f=r[v],n=T[1];if(u&&T[2]){if(void 0===f&&!(v in r))return!1}else{var A=new Gb;if(e)var l=e(f,n,v,r,a,A);if(!(void 0===l?Cj(n,f,pK|qK,e,A):l))return!1}}return!0}function us(r){for(var $=ui(r),e=$.length;e--;){var t=$[e],a=r[t];$[e]=[t,a,Wm(a)]}return $}function Wm($){return $==$&&!fl($)}Wm;us;function ns(t,o){return function(e){return null!=e&&e[t]===o&&(void 0!==o||t in Object(e))}}jt;function ks($,e){return null!=$&&Zr($,e,wK)}function wK(t,$){return null!=t&&$ in Object(t)}function Zr(r,$,i){for(var e=-1,t=($=go($,r)).length,s=!1;++e<t;){var a=$i($[e]);if(!(s=null!=r&&i(r,a)))break;r=r[a]}return s||++e!=t?s:!!(t=null==r?0:r.length)&&Cm(t)&&ex(a,t)&&(Ab(r)||Bw(r))}Zr;ks;var yK=1,zK=2;function AK($,r){return ho($)&&Wm(r)?ns($i($),r):function(e){var a=fw(e,$);return void 0===a&&a===r?ks(e,$):Cj(r,a,yK|zK)}}function Xr(e){return ho(e)?CK($i(e)):Vr(e)}function CK(t){return function($){return null==$?void 0:$[t]}}function Vr(e){return function($){return Zn($,e)}}Vr;Xr;lt;function Ur(r,e){return function($,a){var t=Ab($)?FK:Tr,o=e?e():{};return t($,r,lt(a,2),o)}}function FK(r,t,$,e){for(var v=-1,a=null==r?0:r.length;++v<a;){var l=r[v];t(e,l,$(l),r)}return e}function Tr(a,$,e,r){return LK(a,function(a,t,o){$(r,a,e(a),o)}),r}function Pr($,e){return $&&JK($,e,ui)}function IK(r){return function(t,e,o){for(var $=-1,z=Object(t),a=o(t),f=a.length;f--;){var n=a[r?f:++$];if(!1===e(z[n],n,z))break}return t}}var JK=IK();Pr;function Mr(r,e){return function(n,t){if(null==n)return n;if(!Ul(n))return r(n,t);for(var $=n.length,u=e?$:-1,i=Object(n);(e?u--:++u<$)&&!1!==t(i[u],u,i););return n}}Mr;var LK=Mr(Pr);Tr;Ur;var MK=Object.prototype,NK=MK.hasOwnProperty,OK=Ur(function(r,$,e){NK.call(r,e)?r[e].push($):cx(r,e,[$])});var PK=function(){function e(e,t,i){var r=this;this.hanger=e,this.faces=t,this.vertices=i,this.faces.forEach(function(e){e.surface=r}),this.resetOriginalVertices=this.resetOriginalVertices.bind(this),this.addVector=this.addVector.bind(this),this.resetOriginalVertices()}return e.prototype.resetOriginalVertices=function(){this.originalVertices=this.vertices.map(function(e){return e.clone()})},e.prototype.addVector=function(e){var t=this;this.vertices.forEach(function(i,r){i.copy(t.originalVertices[r].clone().add(e))}),this.hanger.geometry.verticesNeedUpdate=!0,this.hanger.geometry.computeBoundingSphere(),this.hanger.geometry.computeBoundingBox(),this.hanger.geometry.computeFlatVertexNormals(),this.hanger.geometry.mergeVertices(),this.hanger.bbox.setFromObject(this.hanger.mesh);this.hanger.bbox.max.x,this.hanger.bbox.min.x,this.hanger.bbox.max.y,this.hanger.bbox.min.y,this.hanger.bbox.max.z,this.hanger.bbox.min.z},e.prototype.pushPull=function(e){},e.prototype.focus=function(){this.faces.forEach(function(e){e.color.set(65280)})},e.prototype.blur=function(){},e}();zb();var QK=Nn&&Nn.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),RK=new F.LineBasicMaterial({color:0,linewidth:1,transparent:!1}),SK=function(e){function r(r){var t=e.call(this,r)||this;t.bbox=new F.Box3,t.surfaces=[],t.material=new F.MeshBasicMaterial({opacity:.7,transparent:!0,color:16777215,side:F.DoubleSide});var o,n,$=r.project.hanger,a=($.width3d,$.height3d,$.length,$.profile,function(){var e={depth:r.project.hanger.length,steps:1,bevelEnabled:!1};o=new F.Shape(r.project.hanger.profile.map(function(e){var r=e[0],t=e[1];return new F.Vector2(r,t)})),t.geometry?(t.geometry.dispose(),t.mesh.remove(n)):t.mesh=new F.Mesh(t.geometry,t.material),t.geometry=new F.ExtrudeBufferGeometry(o,e),t.geometry.translate(0,0,-r.project.hanger.length/2),t.mesh.geometry=t.geometry;var $=new F.EdgesGeometry(t.geometry,1);n=new F.LineSegments($,RK),t.mesh.add(n)});Ui(function(){return r.project.hanger.profile},a,{fireImmediately:!0,delay:100}),Ui(function(){return r.project.hanger.bayCount},a,{delay:100});var i=OK(t.geometry.faces,"materialIndex");return Object.keys(i).forEach(function(e){var r=i[e],o=r.reduce(function(e,r){return e.add(t.geometry.vertices[r.a]),e.add(t.geometry.vertices[r.b]),e.add(t.geometry.vertices[r.c]),e},new Set);t.surfaces.push(new PK(t,r,Array.from(o)))}),t}return QK(r,e),r.prototype.componentDidMount=function(){this.props.scene.add(this.mesh)},r.prototype.componentWillUnmount=function(){this.props.scene.remove(this.mesh)},r.prototype.render=function(){return null},r}(m.Component),yr=Mg(xd("scene","project"),xb)(SK);Nn.default=yr;zb();var UK=kn&&kn.__extends||function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r])})(e,r)};return function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),VK=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.plane=new F.Plane,e.planeIntersection=new F.Vector3,e.raycaster=new F.Raycaster,e.renderer=new F.WebGLRenderer({antialias:!0}),e.height=500,e.width=500,e.animate=function(){e.renderer.render(e.props.scene,e.camera)},e.handleResize=function(n){void 0===n&&(n=null);var r=e.container,t=r.clientWidth,o=r.clientHeight;e.renderer.setSize(t,o),e.camera.aspect=t/o,e.camera.updateProjectionMatrix(),requestAnimationFrame(e.animate)},e}return UK(e,n),e.prototype.componentDidMount=function(){var n=this,e=this.renderer.domElement;this.renderer.setClearColor(15658734),this.camera=new F.PerspectiveCamera(75,1,.1,1e3),this.camera.position.set(-8,12,8),this.camera.lookAt(0,0,0),this.container.appendChild(e),this.orbitControls=Rx(this.camera,e),this.debugPlane=Lx(!1),this.props.scene.add(this.debugPlane);var r=Yx(0,OE),t=qf(document,"mousemove").pipe(r,Nh());e.dispatchEvent(new Event("mousemove"));var o=qf(e,"wheel").pipe(r),i=qf(e,"mousedown"),a=qf(document,"mouseup").pipe(Nh()),$=qf(e,"click");a.subscribe(function(){n.orbitControls.enabled=!0}),wy(t,o).subscribe(function(){requestAnimationFrame(n.animate)});var p=t.pipe(hy(function(e,r){return e.x=r.layerX/n.width*2-1,e.y=r.layerY/n.height*-2+1,e},{x:0,y:0})).pipe(Wg(function(e){return n.raycaster.setFromCamera(e,n.camera),[]}),Nh());p.subscribe(function(n){n.length}),$.pipe(ko(p),Sl(function(n){n[0];return n[1].length>0}),Gh()).subscribe(function(){}),i.pipe(ko(p),Sl(function(n){n[0];return n[1].length>0}),Yl(function(e){e[0];var r=e[1];n.orbitControls.enabled=!1,n.intersection=r[0],n.normal=n.intersection.face.normal.clone().normalize(),n.normal.x+n.normal.y+n.normal.z<0&&n.normal.negate(),n.debugPlane.position.copy(n.intersection.point),n.debugPlane.lookAt(n.intersection.point.clone().add(n.intersection.face.normal));var t=n.debugPlane.userData.pts(),o=t[0],i=t[1],a=t[2];n.plane.setFromCoplanarPoints(o,i,a)}),Wg(function(){return t.pipe(Yl(function(){n.raycaster.ray.intersectPlane(n.plane,n.planeIntersection);var e=new F.Vector3().multiplyVectors(n.normal,n.planeIntersection.clone().sub(n.intersection.point)),r=n.props.project,t=r.gridSizeWidth,o=r.gridSizeHeight,i=r.gridSizeLength;e.x=Math.round(e.x/t)*t,e.y=Math.round(e.y/o)*o,e.z=Math.round(e.z/i)*i,n.intersection.face.surface.addVector(e)}),$x(a))}),Gh()).subscribe(function(){}),this.handleResize()},e.prototype.render=function(){var n=this;return React.createElement("div",{ref:function(e){return n.container=e},style:{width:"100%",height:"100vh"}},React.createElement(Kx,{size:100}),React.createElement(yr,null))},e}(m.Component),vr=Mg(xd("project","scene"),xb)(VK);kn.default=vr;var qn={};var YK={};var qr,$K=false;function pr(){if($K)return;$K=true;qr={};qr=function(r,n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return r.apply(n,t)}}}var aL,bL=false;function Yq(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}function dL(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&Yq(r.slice(0,0))}function eL(){if(bL)return;bL=true;aL={};aL=function(r){return null!=r&&(Yq(r)||dL(r)||!!r._isBuffer)}}var $a,gL,hL,fe,jL=false;function Tq(r){return"[object Array]"===fe.call(r)}function lL(r){return"[object ArrayBuffer]"===fe.call(r)}function mL(r){return"undefined"!=typeof FormData&&r instanceof FormData}function nL(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer&&r.buffer instanceof ArrayBuffer}function oL(r){return"string"==typeof r}function pL(r){return"number"==typeof r}function qL(r){return void 0===r}function Pq(r){return null!==r&&"object"==typeof r}function sL(r){return"[object Date]"===fe.call(r)}function tL(r){return"[object File]"===fe.call(r)}function uL(r){return"[object Blob]"===fe.call(r)}function Cq(r){return"[object Function]"===fe.call(r)}function wL(r){return Pq(r)&&Cq(r.pipe)}function xL(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}function yL(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function zL(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document}function yn(r,$){if(null!=r)if("object"!=typeof r&&(r=[r]),Tq(r))for(var e=0,f=r.length;e<f;e++)$.call(null,r[e],e,r);else for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&$.call(null,r[a],a,r)}function rq(){var r={};function $($,e){"object"==typeof r[e]&&"object"==typeof $?r[e]=rq(r[e],$):r[e]=$}for(var e=0,f=arguments.length;e<f;e++)yn(arguments[e],$);return r}function CL(r,$,e){return yn($,function($,f){r[f]=e&&"function"==typeof $?gL($,e):$}),r}function Ya(){if(jL)return;jL=true;$a={};gL=(pr(),qr);hL=(eL(),aL);fe=Object.prototype.toString;$a={isArray:Tq,isArrayBuffer:lL,isBuffer:hL,isFormData:mL,isArrayBufferView:nL,isString:oL,isNumber:pL,isObject:Pq,isUndefined:qL,isDate:sL,isFile:tL,isBlob:uL,isFunction:Cq,isStream:wL,isURLSearchParams:xL,isStandardBrowserEnv:zL,forEach:yn,merge:rq,extend:CL,trim:yL}}var EL={},FL=(Ya(),$a);EL=function(e,$){FL.forEach(e,function(r,l){l!==$&&l.toUpperCase()===$.toUpperCase()&&(e[$]=r,delete e[l])})};var GL,HL=false;function IL(){if(HL)return;HL=true;GL={};GL=function(e,r,s,o,n){return e.config=r,s&&(e.code=s),e.request=o,e.response=n,e}}var Lp,KL,LL=false;function yp(){if(LL)return;LL=true;Lp={};KL=(IL(),GL);Lp=function(r,e,$,n,a){var i=new Error(r);return KL(i,e,$,n,a)}}var NL,OL,PL=false;function QL(){if(PL)return;PL=true;NL={};OL=(yp(),Lp);NL=function(r,a,t){var e=t.config.validateStatus;t.status&&e&&!e(t.status)?a(OL("Request failed with status code "+t.status,t.config,null,t.request,t)):r(t)}}var RL,Vd,TL=false;function No(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VL(){if(TL)return;TL=true;RL={};Vd=(Ya(),$a);RL=function(r,e,$){if(!e)return r;var i;if($)i=$(e);else if(Vd.isURLSearchParams(e))i=e.toString();else{var o=[];Vd.forEach(e,function(r,e){null!=r&&(Vd.isArray(r)?e+="[]":r=[r],Vd.forEach(r,function(r){Vd.isDate(r)?r=r.toISOString():Vd.isObject(r)&&(r=JSON.stringify(r)),o.push(No(e)+"="+No(r))}))}),i=o.join("&")}return i&&(r+=(-1===r.indexOf("?")?"?":"&")+i),r}}var WL,ro,YL,ZL=false;function $L(){if(ZL)return;ZL=true;WL={};ro=(Ya(),$a);YL=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];WL=function(e){var r,t,i,o={};return e?(ro.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),r=ro.trim(e.substr(0,i)).toLowerCase(),t=ro.trim(e.substr(i+1)),r){if(o[r]&&YL.indexOf(r)>=0)return;o[r]="set-cookie"===r?(o[r]?o[r]:[]).concat([t]):o[r]?o[r]+", "+t:t}}),o):o}}var _L,jw,bM=false;function cM(){if(bM)return;bM=true;_L={};jw=(Ya(),$a);_L=jw.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function a(t){var a=t;return r&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=a(window.location.href),function(r){var e=jw.isString(r)?a(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0}}var dM,eM,fM=false;function Vj(){this.message="String contains an invalid character"}function hM(r){for(var $,a,m=String(r),t="",o=0,e=eM;m.charAt(0|o)||(e="=",o%1);t+=e.charAt(63&$>>8-o%1*8)){if((a=m.charCodeAt(o+=.75))>255)throw new Vj;$=$<<8|a}return t}function iM(){if(fM)return;fM=true;dM={};eM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Vj.prototype=new Error,Vj.prototype.code=5,Vj.prototype.name="InvalidCharacterError",dM=hM}var jM,Uj,lM=false;function mM(){if(lM)return;lM=true;jM={};Uj=(Ya(),$a);jM=Uj.isStandardBrowserEnv()?{write:function(n,e,r,t,i,o){var u=[];u.push(n+"="+encodeURIComponent(e)),Uj.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),Uj.isString(t)&&u.push("path="+t),Uj.isString(i)&&u.push("domain="+i),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}var pu,qo,pM,qM,rM,Dt,xt,uM,vM=false;function wt(){if(vM)return;vM=true;pu={};qo=(Ya(),$a);pM=(QL(),NL);qM=(VL(),RL);rM=($L(),WL);Dt=(cM(),_L);xt=(yp(),Lp);uM="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||(iM(),dM);pu=function(e){return new Promise(function(r,t){var o=e.data,a=e.headers;qo.isFormData(o)&&delete a["Content-Type"];var s=new XMLHttpRequest,n="onreadystatechange",u=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in s||Dt(e.url)||(s=new window.XDomainRequest,n="onload",u=!0,s.onprogress=function(){},s.ontimeout=function(){}),e.auth){var i=e.auth.username||"",$=e.auth.password||"";a.Authorization="Basic "+uM(i+":"+$)}if(s.open(e.method.toUpperCase(),qM(e.url,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,s[n]=function(){if(s&&(4===s.readyState||u)&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in s?rM(s.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?s.response:s.responseText,status:1223===s.status?204:s.status,statusText:1223===s.status?"No Content":s.statusText,headers:o,config:e,request:s};pM(r,t,a),s=null}},s.onerror=function(){t(xt("Network Error",e,null,s)),s=null},s.ontimeout=function(){t(xt("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",s)),s=null},qo.isStandardBrowserEnv()){var l=(mM(),jM),d=(e.withCredentials||Dt(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;d&&(a[e.xsrfHeaderName]=d)}if("setRequestHeader"in s&&qo.forEach(a,function(e,r){void 0===o&&"content-type"===r.toLowerCase()?delete a[r]:s.setRequestHeader(r,e)}),e.withCredentials&&(s.withCredentials=!0),e.responseType)try{s.responseType=e.responseType}catch(p){if("json"!==e.responseType)throw p}"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){s&&(s.abort(),t(e),s=null)}),void 0===o&&(o=null),s.send(o)})}}var GL,HL=false;function IL(){if(HL)return;HL=true;GL={};GL=function(e,r,s,o,n){return e.config=r,s&&(e.code=s),e.request=o,e.response=n,e}}var Lp,KL,LL=false;function yp(){if(LL)return;LL=true;Lp={};KL=(IL(),GL);Lp=function(r,e,$,n,a){var i=new Error(r);return KL(i,e,$,n,a)}}var NL,OL,PL=false;function QL(){if(PL)return;PL=true;NL={};OL=(yp(),Lp);NL=function(r,a,t){var e=t.config.validateStatus;t.status&&e&&!e(t.status)?a(OL("Request failed with status code "+t.status,t.config,null,t.request,t)):r(t)}}var RL,Vd,TL=false;function No(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VL(){if(TL)return;TL=true;RL={};Vd=(Ya(),$a);RL=function(r,e,$){if(!e)return r;var i;if($)i=$(e);else if(Vd.isURLSearchParams(e))i=e.toString();else{var o=[];Vd.forEach(e,function(r,e){null!=r&&(Vd.isArray(r)?e+="[]":r=[r],Vd.forEach(r,function(r){Vd.isDate(r)?r=r.toISOString():Vd.isObject(r)&&(r=JSON.stringify(r)),o.push(No(e)+"="+No(r))}))}),i=o.join("&")}return i&&(r+=(-1===r.indexOf("?")?"?":"&")+i),r}}var WL,ro,YL,ZL=false;function $L(){if(ZL)return;ZL=true;WL={};ro=(Ya(),$a);YL=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];WL=function(e){var r,t,i,o={};return e?(ro.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),r=ro.trim(e.substr(0,i)).toLowerCase(),t=ro.trim(e.substr(i+1)),r){if(o[r]&&YL.indexOf(r)>=0)return;o[r]="set-cookie"===r?(o[r]?o[r]:[]).concat([t]):o[r]?o[r]+", "+t:t}}),o):o}}var _L,jw,bM=false;function cM(){if(bM)return;bM=true;_L={};jw=(Ya(),$a);_L=jw.isStandardBrowserEnv()?function(){var t,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function a(t){var a=t;return r&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return t=a(window.location.href),function(r){var e=jw.isString(r)?a(r):r;return e.protocol===t.protocol&&e.host===t.host}}():function(){return!0}}var dM,eM,fM=false;function Vj(){this.message="String contains an invalid character"}function hM(r){for(var $,a,m=String(r),t="",o=0,e=eM;m.charAt(0|o)||(e="=",o%1);t+=e.charAt(63&$>>8-o%1*8)){if((a=m.charCodeAt(o+=.75))>255)throw new Vj;$=$<<8|a}return t}function iM(){if(fM)return;fM=true;dM={};eM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Vj.prototype=new Error,Vj.prototype.code=5,Vj.prototype.name="InvalidCharacterError",dM=hM}var jM,Uj,lM=false;function mM(){if(lM)return;lM=true;jM={};Uj=(Ya(),$a);jM=Uj.isStandardBrowserEnv()?{write:function(n,e,r,t,i,o){var u=[];u.push(n+"="+encodeURIComponent(e)),Uj.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),Uj.isString(t)&&u.push("path="+t),Uj.isString(i)&&u.push("domain="+i),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}var pu,qo,pM,qM,rM,Dt,xt,uM,vM=false;function wt(){if(vM)return;vM=true;pu={};qo=(Ya(),$a);pM=(QL(),NL);qM=(VL(),RL);rM=($L(),WL);Dt=(cM(),_L);xt=(yp(),Lp);uM="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||(iM(),dM);pu=function(e){return new Promise(function(r,t){var o=e.data,a=e.headers;qo.isFormData(o)&&delete a["Content-Type"];var s=new XMLHttpRequest,n="onreadystatechange",u=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in s||Dt(e.url)||(s=new window.XDomainRequest,n="onload",u=!0,s.onprogress=function(){},s.ontimeout=function(){}),e.auth){var i=e.auth.username||"",$=e.auth.password||"";a.Authorization="Basic "+uM(i+":"+$)}if(s.open(e.method.toUpperCase(),qM(e.url,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,s[n]=function(){if(s&&(4===s.readyState||u)&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in s?rM(s.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?s.response:s.responseText,status:1223===s.status?204:s.status,statusText:1223===s.status?"No Content":s.statusText,headers:o,config:e,request:s};pM(r,t,a),s=null}},s.onerror=function(){t(xt("Network Error",e,null,s)),s=null},s.ontimeout=function(){t(xt("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",s)),s=null},qo.isStandardBrowserEnv()){var l=(mM(),jM),d=(e.withCredentials||Dt(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;d&&(a[e.xsrfHeaderName]=d)}if("setRequestHeader"in s&&qo.forEach(a,function(e,r){void 0===o&&"content-type"===r.toLowerCase()?delete a[r]:s.setRequestHeader(r,e)}),e.withCredentials&&(s.withCredentials=!0),e.responseType)try{s.responseType=e.responseType}catch(p){if("json"!==e.responseType)throw p}"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){s&&(s.abort(),t(e),s=null)}),void 0===o&&(o=null),s.send(o)})}}var Ci={},Aa=(Ya(),$a),zM={"Content-Type":"application/x-www-form-urlencoded"};function rt(e,r){!Aa.isUndefined(e)&&Aa.isUndefined(e["Content-Type"])&&(e["Content-Type"]=r)}function BM(){var e;return"undefined"!=typeof XMLHttpRequest?e=(wt(),pu):void 0!==vk&&(e=(wt(),pu)),e}var an={adapter:BM(),transformRequest:[function(e,r){return EL(r,"Content-Type"),Aa.isFormData(e)||Aa.isArrayBuffer(e)||Aa.isBuffer(e)||Aa.isStream(e)||Aa.isFile(e)||Aa.isBlob(e)?e:Aa.isArrayBufferView(e)?e.buffer:Aa.isURLSearchParams(e)?(rt(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Aa.isObject(e)?(rt(r,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(r){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Aa.forEach(["delete","get","head"],function(e){an.headers[e]={}}),Aa.forEach(["post","put","patch"],function(e){an.headers[e]=Aa.merge(zM)}),Ci=an;var at={},EM=(Ya(),$a);function ji(){this.handlers=[]}ji.prototype.use=function(r,e){return this.handlers.push({fulfilled:r,rejected:e}),this.handlers.length-1},ji.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)},ji.prototype.forEach=function(r){EM.forEach(this.handlers,function(e){null!==e&&r(e)})},at=ji;var gl={},HM=(Ya(),$a);gl=function(t,$,r){return HM.forEach(r,function(r){t=r(t,$)}),t};var ps={};ps=function(r){return!(!r||!r.__CANCEL__)};var JM={};JM=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)};var KM={};KM=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e};var LM={},Yr=(Ya(),$a);function _m(e){e.cancelToken&&e.cancelToken.throwIfRequested()}LM=function(e){return _m(e),e.baseURL&&!JM(e.url)&&(e.url=KM(e.baseURL,e.url)),e.headers=e.headers||{},e.data=gl(e.data,e.headers,e.transformRequest),e.headers=Yr.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),Yr.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]}),(e.adapter||Ci.adapter)(e).then(function(a){return _m(e),a.data=gl(a.data,a.headers,e.transformResponse),a},function(a){return ps(a)||(_m(e),a&&a.response&&(a.response.data=gl(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})};var Zi={},rf=(Ya(),$a);function Fh(e){this.defaults=e,this.interceptors={request:new at,response:new at}}Fh.prototype.request=function(e){"string"==typeof e&&(e=rf.merge({url:arguments[0]},arguments[1])),(e=rf.merge(Ci,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var r=[LM,void 0],t=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){r.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){r.push(e.fulfilled,e.rejected)});r.length;)t=t.then(r.shift(),r.shift());return t},rf.forEach(["delete","get","head","options"],function(e){Fh.prototype[e]=function(r,t){return this.request(rf.merge(t||{},{method:e,url:r}))}}),rf.forEach(["post","put","patch"],function(e){Fh.prototype[e]=function(r,t,$){return this.request(rf.merge($||{},{method:e,url:r,data:t}))}}),Zi=Fh;var RM={},Pl=(Ya(),$a),TM=(pr(),qr);function Uq($){var i=new Zi($),r=TM(Zi.prototype.request,i);return Pl.extend(r,Zi.prototype,i),Pl.extend(r,i),r}var jc=Uq(Ci);var vq={};function Vm(e){this.message=e}Vm.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Vm.prototype.__CANCEL__=!0,vq=Vm;var YM={};function hi(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(e){n=e});var t=this;e(function(e){t.reason||(t.reason=new vq(e),n(t.reason))})}hi.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},hi.source=function(){var e;return{token:new hi(function(n){e=n}),cancel:e}},YM=hi;var $M={};$M=function(n){return function(r){return n.apply(null,r)}};jc.Axios=Zi,jc.create=function($){return Uq(Pl.merge(Ci,$))},jc.Cancel=vq,jc.CancelToken=YM,jc.isCancel=ps,jc.all=function($){return Promise.all($)},jc.spread=$M,(RM=jc).default=jc;YK=RM;var _M=function(e,t){return(_M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function S(e,t){function r(){this.constructor=e}_M(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var ml=function(){return(ml=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var $ in t=arguments[r])Object.prototype.hasOwnProperty.call(t,$)&&(e[$]=t[$]);return e}).apply(this,arguments)};function cN(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var $=0;for(n=Object.getOwnPropertySymbols(e);$<n.length;$++)t.indexOf(n[$])<0&&(r[n[$]]=e[n[$]])}return r}function Bc(e,t,r,n){var $,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var i=e.length-1;i>=0;i--)($=e[i])&&(o=(a<3?$(o):a>3?$(t,r,o):$(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function df(e){return f(e).type}function fN(e,t){return f(e).getChildType(t)}function np(e,t){return f(e).onPatch(t)}function hN(e,t){return f(e).onSnapshot(t)}function li(e,t){f(e).applyPatches(lu(t))}function jN(e){var t=null;function r(){t||(t=np(e,function(e,t){n.rawPatches.push([e,t])}))}var n={rawPatches:[],get patches(){return this.rawPatches.map(function(e){return e[0]})},get inversePatches(){return this.rawPatches.map(function(e){e[0];return e[1]})},stop:function(){t&&t(),t=null},resume:r,replay:function(t){li(t||e,n.patches)},undo:function(t){li(t||e,n.inversePatches.slice().reverse())}};return r(),n}function kN(e){var t=f(e);t.isRoot||d("`protect` can only be invoked on root nodes"),t.isProtectionEnabled=!0}function lN(e){var t=f(e);t.isRoot||d("`unprotect` can only be invoked on root nodes"),t.isProtectionEnabled=!1}function mN(e){return f(e).isProtected}function yy(e,t){return f(e).applySnapshot(t)}function oN(e,t){void 0===t&&(t=!0);var r=f(e);return t?r.snapshot:Df(r.type.getSnapshot(r,!1))}function pN(e,t){void 0===t&&(t=1);for(var r=f(e).parent;r;){if(0==--t)return!0;r=r.parent}return!1}function vx(e,t){void 0===t&&(t=1);for(var r=t,n=f(e).parent;n;){if(0==--r)return n.storedValue;n=n.parent}return d("Failed to find the parent of "+f(e)+" at depth "+t)}function rN(e,t){for(var r=f(e).parent;r;){if(t.is(r.storedValue))return!0;r=r.parent}return!1}function sN(e,t){for(var r=f(e).parent;r;){if(t.is(r.storedValue))return r.storedValue;r=r.parent}return d("Failed to find the parent of "+f(e)+" of a given type")}function Hw(e){return f(e).root.storedValue}function uN(e){return f(e).path}function vN(e){return he(f(e).path)}function wN(e){return f(e).isRoot}function xN(e,t){var r=sp(f(e),t);return r?r.value:void 0}function yN(e,t,r){var n=f(t).root.identifierCache.resolve(e,""+r);return n?n.value:void 0}function zN(e){return f(e).identifier}function rw(e,t){var r=sp(f(e),t,!1);if(void 0!==r)try{return r.value}catch(n){return}}function BN(e,t){return wp(f(e),f(t))}function CN(e,t){void 0===t&&(t=!0);var r=f(e);return r.type.create(r.snapshot,!0===t?r.root._environment:!1===t?void 0:t)}function DN(e){return f(e).detach(),e}function EN(e){var t=f(e);t.isRoot?t.die():t.parent.removeChild(t.subpath)}function FN(e){return f(e).isAlive}function GN(e,t){return f(e).addDisposer(t),t}function HN(e){var t=f(e).root._environment;return t||Ke}function Pv(e,t){var r=f(e);r.getChildren().forEach(function(e){E(e.storedValue)&&Pv(e.storedValue,t)}),t(r.storedValue)}function Lv(e){var t;return{name:(t=E(e)?df(e):e).name,properties:ml({},t.properties)}}function KN(e){var t=f(e).type,r=ml({},Lv(t),{actions:[],volatile:[],views:[]});return Object.getOwnPropertyNames(e).forEach(function(t){if(!(t in r.properties)){var n=Object.getOwnPropertyDescriptor(e,t);n.get?zk(e,t)?r.views.push(t):r.volatile.push(t):!0===n.value._isMSTAction?r.actions.push(t):Dv(e,t)?r.volatile.push(t):r.views.push(t)}}),r}function LN(e){return e}function MN(e){return e}function NN(e){return e}var jm=function(){function e(e,t,r,n,$){this.parent=null,this.subpath="",this.state=T.INITIALIZING,this._environment=void 0,this._initialSnapshot=$,this.type=e,this.parent=t,this.subpath=r;var a=!0;try{this.storedValue=e.createNewInstance(this,{},$),this.state=T.CREATED,a=!1}finally{a&&(this.state=T.DEAD)}}return Object.defineProperty(e.prototype,"path",{get:function(){return this.parent?this.parent.path+"/"+$b(this.subpath):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.parent?this.parent.root:d("This scalar node is not part of a tree")},enumerable:!0,configurable:!0}),e.prototype.setParent=function(e,t){if(void 0===t&&(t=null),this.parent!==e||this.subpath!==t)if(this.parent&&!e)this.die();else{var r=null===t?"":t;this.subpath!==r&&(this.subpath=r),e&&e!==this.parent&&(this.parent=e)}},Object.defineProperty(e.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){return Df(this.getSnapshot())},enumerable:!0,configurable:!0}),e.prototype.getSnapshot=function(){return this.type.getSnapshot(this)},Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==T.DEAD},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.type.name+"@"+(this.path||"<root>")+(this.isAlive?"":"[dead]")},e.prototype.die=function(){this.state=T.DEAD},e}(),PN=1,QN="warn";function RN(e){QN=e}var x,TN={onError:function(e){throw e}},Tg=function(){function e(e,t,r,n,$){if(this.nodeId=++PN,this.subpathAtom=Oj("path"),this.subpath="",this.parent=null,this.state=T.INITIALIZING,this.isProtectionEnabled=!0,this.middlewares=null,this._autoUnbox=!0,this._environment=void 0,this._isRunningAction=!1,this._hasSnapshotReaction=!1,this._disposers=null,this._patchSubscribers=null,this._snapshotSubscribers=null,this._observableInstanceCreated=!1,this._cachedInitialSnapshot=null,this._environment=n,this._initialSnapshot=Df($),this.type=e,this.parent=t,this.subpath=r,this.escapedSubpath=$b(this.subpath),this.identifierAttribute=e.identifierAttribute,t||(this.identifierCache=new BO),this._childNodes=e.initializeChildNodes(this,this._initialSnapshot),this.identifier=null,this.unnormalizedIdentifier=null,this.identifierAttribute&&this._initialSnapshot){var a=this._initialSnapshot[this.identifierAttribute];if(void 0===a){var o=this._childNodes[this.identifierAttribute];o&&(a=o.value)}"string"!=typeof a&&"number"!=typeof a&&d("Instance identifier '"+this.identifierAttribute+"' for type '"+this.type.name+"' must be a string or a number"),this.identifier=""+a,this.unnormalizedIdentifier=a}t?t.root.identifierCache.addNodeToCache(this):this.identifierCache.addNodeToCache(this)}return e.prototype.applyPatches=function(e){this._observableInstanceCreated||this._createObservableInstance(),this.applyPatches(e)},e.prototype.applySnapshot=function(e){this._observableInstanceCreated||this._createObservableInstance(),this.applySnapshot(e)},e.prototype._createObservableInstance=function(){var e=this.type;this.storedValue=e.createNewInstance(this,this._childNodes,this._initialSnapshot),this.preboot();var t=!0;this._observableInstanceCreated=!0;try{this._isRunningAction=!0,e.finalizeNewInstance(this,this.storedValue),this._isRunningAction=!1,this.fireHook("afterCreate"),this.state=T.CREATED,t=!1}finally{t&&(this.state=T.DEAD)}hP(this,"snapshot"),this.isRoot&&this._addSnapshotReaction(),this.finalizeCreation(),this._childNodes=Ke},Object.defineProperty(e.prototype,"path",{get:function(){return this.subpathAtom.reportObserved(),this.parent?this.parent.path+"/"+this.escapedSubpath:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=this.parent;return e?e.root:this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!0,configurable:!0}),e.prototype.setParent=function(e,t){if(void 0===t&&(t=null),this.parent!==e||this.subpath!==t)if(this.parent&&!e)this.die();else{var r=null===t?"":t;this.subpath!==r&&(this.subpath=r,this.escapedSubpath=$b(this.subpath),this.subpathAtom.reportChanged()),e&&e!==this.parent&&(e.root.identifierCache.mergeCache(this),this.parent=e,this.subpathAtom.reportChanged(),this.fireHook("afterAttach"))}},e.prototype.fireHook=function(e){var t=this,r=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[e];"function"==typeof r&&(km?km(function(){r.apply(t.storedValue)}):r.apply(this.storedValue))},e.prototype.createObservableInstanceIfNeeded=function(){this._observableInstanceCreated||this._createObservableInstance()},Object.defineProperty(e.prototype,"isObservableInstanceCreated",{get:function(){return this._observableInstanceCreated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){if(this.createObservableInstanceIfNeeded(),this.isAlive)return this.type.getValue(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){if(this.isAlive)return Df(this.getSnapshot())},enumerable:!0,configurable:!0}),e.prototype.getSnapshot=function(){if(this.isAlive)return this._observableInstanceCreated?this._getActualSnapshot():this._getInitialSnapshot()},e.prototype._getActualSnapshot=function(){return this.type.getSnapshot(this)},e.prototype._getInitialSnapshot=function(){if(this.isAlive){if(!this._initialSnapshot)return this._initialSnapshot;if(this._cachedInitialSnapshot)return this._cachedInitialSnapshot;var e=this.type,t=this._childNodes,r=this._initialSnapshot;return this._cachedInitialSnapshot=e.processInitialSnapshot(t,r),this._cachedInitialSnapshot}},e.prototype.isRunningAction=function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()},Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==T.DEAD},enumerable:!0,configurable:!0}),e.prototype.assertAlive=function(){if(!this.isAlive){var e="[mobx-state-tree][error] You are trying to read or write to an object that is no longer part of a state tree. (Object type was '"+this.type.name+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree.";switch(QN){case"error":throw new Error(e);case"warn":console.warn(e+" Use setLivelynessChecking(\"error\") to simplify debugging this error.");}}},e.prototype.getChildNode=function(e){this.assertAlive(),this._autoUnbox=!1;try{return this._observableInstanceCreated?this.type.getChildNode(this,e):this._childNodes[e]}finally{this._autoUnbox=!0}},e.prototype.getChildren=function(){this.assertAlive(),this._autoUnbox=!1;try{return this._observableInstanceCreated?this.type.getChildren(this):Fx(this._childNodes)}finally{this._autoUnbox=!0}},e.prototype.getChildType=function(e){return this.type.getChildType(e)},Object.defineProperty(e.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!0,configurable:!0}),e.prototype.assertWritable=function(){this.assertAlive(),!this.isRunningAction()&&this.isProtected&&d("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")},e.prototype.removeChild=function(e){this.type.removeChild(this,e)},e.prototype.unbox=function(e){return e&&e.parent&&e.parent.assertAlive(),e&&e.parent&&e.parent._autoUnbox?e.value:e},e.prototype.toString=function(){var e=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+(this.path||"<root>")+e+(this.isAlive?"":"[dead]")},e.prototype.finalizeCreation=function(){if(this.state===T.CREATED){if(this.parent){if(this.parent.state!==T.FINALIZED)return;this.fireHook("afterAttach")}this.state=T.FINALIZED;for(var t=0,r=this.getChildren();t<r.length;t++){var n=r[t];n instanceof e&&n.finalizeCreation()}}},e.prototype.detach=function(){this.isAlive||d("Error while detaching, node is not alive."),this.isRoot||(this.fireHook("beforeDetach"),this._environment=this.root._environment,this.state=T.DETACHING,this.identifierCache=this.root.identifierCache.splitCache(this),this.parent.removeChild(this.subpath),this.parent=null,this.subpath=this.escapedSubpath="",this.subpathAtom.reportChanged(),this.state=T.FINALIZED)},e.prototype.preboot=function(){var e=this;this.applyPatches=kl(this.storedValue,"@APPLY_PATCHES",function(t){t.forEach(function(t){var r=he(t.path);Wx(e,r.slice(0,-1)).applyPatchLocally(r[r.length-1],t)})}),this.applySnapshot=kl(this.storedValue,"@APPLY_SNAPSHOT",function(t){if(t!==e.snapshot)return e.type.applySnapshot(e,t)}),Bf(this.storedValue,"$treenode",this),Bf(this.storedValue,"toJSON",HO)},e.prototype.die=function(){this.state!==T.DETACHING&&E(this.storedValue)&&(this.aboutToDie(),this.finalizeDeath())},e.prototype.aboutToDie=function(){this.getChildren().forEach(function(t){t instanceof e&&t.aboutToDie()}),this.fireHook("beforeDestroy"),this._disposers&&(this._disposers.forEach(function(e){return e()}),this._disposers=null)},e.prototype.finalizeDeath=function(){this.getChildren().forEach(function(t){t instanceof e&&t.finalizeDeath()}),this.root.identifierCache.notifyDied(this),dP(this,"snapshot",this.snapshot),this._patchSubscribers&&(this._patchSubscribers=null),this._snapshotSubscribers&&(this._snapshotSubscribers=null),this.state=T.DEAD,this.subpath=this.escapedSubpath="",this.parent=null,this.subpathAtom.reportChanged()},e.prototype.onSnapshot=function(e){return this._addSnapshotReaction(),this._snapshotSubscribers||(this._snapshotSubscribers=[]),gs(this._snapshotSubscribers,e)},e.prototype.emitSnapshot=function(e){this._snapshotSubscribers&&this._snapshotSubscribers.forEach(function(t){return t(e)})},e.prototype.onPatch=function(e){return this._patchSubscribers||(this._patchSubscribers=[]),gs(this._patchSubscribers,e)},e.prototype.emitPatch=function(e,t){var r=this._patchSubscribers;if(r&&r.length){var n=lP(XO({},e,{path:t.path.substr(this.path.length)+"/"+e.path})),$=n[0],a=n[1];r.forEach(function(e){return e($,a)})}this.parent&&this.parent.emitPatch(e,t)},e.prototype.hasDisposer=function(e){return!!this._disposers&&this._disposers.indexOf(e)>=0},e.prototype.addDisposer=function(e){this._disposers?this.hasDisposer(e)?d("cannot add a disposer when it is already registered for execution"):this._disposers.unshift(e):this._disposers=[e]},e.prototype.removeDisposer=function(e){var t="cannot remove a disposer which was never registered for execution";if(!this._disposers)return d(t);var r=this._disposers.indexOf(e);if(r<0)return d(t);this._disposers.splice(r,1)},e.prototype.removeMiddleware=function(e){this.middlewares&&(this.middlewares=this.middlewares.filter(function(t){return t.handler!==e}))},e.prototype.addMiddleWare=function(e,t){var r=this;return void 0===t&&(t=!0),this.middlewares?this.middlewares.push({handler:e,includeHooks:t}):this.middlewares=[{handler:e,includeHooks:t}],function(){r.removeMiddleware(e)}},e.prototype.applyPatchLocally=function(e,t){this.assertWritable(),this._observableInstanceCreated||this._createObservableInstance(),this.type.applyPatchLocally(this,e,t)},e.prototype._addSnapshotReaction=function(){var e=this;if(!this._hasSnapshotReaction){var t=Ui(function(){return e.snapshot},function(t){return e.emitSnapshot(t)},TN);this.addDisposer(t),this._hasSnapshotReaction=!0}},Bc([Q],e.prototype,"_createObservableInstance",null),Bc([Bj],e.prototype,"snapshot",null),Bc([Q],e.prototype,"detach",null),Bc([Q],e.prototype,"die",null),e}();!function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined",e[e.Integer=131072]="Integer"}(x||(x={}));var Li=function(){function e(e){this.isType=!0,this.name=e}return e.prototype.create=function(e,t){return void 0===e&&(e=this.getDefaultSnapshot()),Xb(this,e),this.instantiate(null,"",t,e).value},e.prototype.initializeChildNodes=function(e,t){return Ke},e.prototype.createNewInstance=function(e,t,r){return r},e.prototype.finalizeNewInstance=function(e,t){},e.prototype.processInitialSnapshot=function(e,t){return t},e.prototype.isAssignableFrom=function(e){return e===this},e.prototype.validate=function(e,t){return E(e)?df(e)===this||this.isAssignableFrom(df(e))?ua():Na(t,e):this.isValidSnapshot(e,t)},e.prototype.is=function(e){return 0===this.validate(e,[{path:"",type:this}]).length},e.prototype.reconcile=function(e,t){if(e.snapshot===t)return e;if(E(t)&&f(t)===e)return e;if(e.type===this&&Lt(t)&&!E(t)&&(!e.identifierAttribute||e.identifier===""+t[e.identifierAttribute]))return e.applySnapshot(t),e;var r=e.parent,n=e.subpath;if(e.die(),E(t)&&this.isAssignableFrom(df(t))){var $=f(t);return $.setParent(r,n),$}return this.instantiate(r,n,e._environment,t)},Object.defineProperty(e.prototype,"Type",{get:function(){return d("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SnapshotType",{get:function(){return d("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CreationType",{get:function(){return d("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!0,configurable:!0}),Bc([Q],e.prototype,"create",null),e}(),ub=function(e){function t(t){return e.call(this,t)||this}return S(t,e),t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.getDefaultSnapshot=function(){},t.prototype.applySnapshot=function(e,t){d("Immutable types do not support applying snapshots")},t.prototype.applyPatchLocally=function(e,t,r){d("Immutable types do not support applying patches")},t.prototype.getChildren=function(e){return Ec},t.prototype.getChildNode=function(e,t){return d("No child '"+t+"' available in type: "+this.name)},t.prototype.getChildType=function(e){return d("No child '"+e+"' available in type: "+this.name)},t.prototype.reconcile=function(e,t){if(e.type===this&&e.storedValue===t)return e;var r=this.instantiate(e.parent,e.subpath,e._environment,t);return e.die(),r},t.prototype.removeChild=function(e,t){return d("No child '"+t+"' available in type: "+this.name)},t}(Li);function ra(e){return"object"==typeof e&&e&&!0===e.isType}var yb=new Map;function ZN(e){return function(t,r,n){switch(t.type){case"action":if(e.filter&&!0!==e.filter(t))return r(t);var $=e.onStart(t);e.onResume(t,$),yb.set(t.id,{call:t,context:$,async:!1});try{var a=r(t);return e.onSuspend(t,$),!1===yb.get(t.id).async&&(yb.delete(t.id),e.onSuccess(t,$,a)),a}catch(i){throw yb.delete(t.id),e.onFail(t,$,i),i}case"flow_spawn":return(o=yb.get(t.rootId)).async=!0,r(t);case"flow_resume":case"flow_resume_error":var o=yb.get(t.rootId);e.onResume(t,o.context);try{return r(t)}finally{e.onSuspend(t,o.context)}case"flow_throw":o=yb.get(t.rootId);return yb.delete(t.rootId),e.onFail(t,o.context,t.args[0]),r(t);case"flow_return":o=yb.get(t.rootId);return yb.delete(t.rootId),e.onSuccess(t,o.context,t.args[0]),r(t);}}}function $N(e,t,r,n){if(n instanceof Date)return{$MST_DATE:n.getTime()};if(Be(n))return n;if(E(n))return Wi("[MSTNode: "+df(n).name+"]");if("function"==typeof n)return Wi("[function]");if("object"==typeof n&&!Vc(n)&&!Hl(n))return Wi("[object "+(n&&n.constructor&&n.constructor.name||"Complex Object")+"]");try{return JSON.stringify(n),n}catch($){return Wi(""+$)}}function _N(e,t){return t&&"object"==typeof t&&"$MST_DATE"in t?new Date(t.$MST_DATE):t}function Wi(e){return{$MST_UNSERIALIZABLE:!0,type:e}}function xs(e,t){Lu(function(){lu(t).forEach(function(t){return cO(e,t)})})}function cO(e,t){var r=rw(e,t.path||"");if(!r)return d("Invalid action path: "+(t.path||""));var n=f(r);return"@APPLY_PATCHES"===t.name?li.call(null,r,t.args[0]):"@APPLY_SNAPSHOT"===t.name?yy.call(null,r,t.args[0]):("function"!=typeof r[t.name]&&d("Action '"+t.name+"' does not exist in '"+n.path+"'"),r[t.name].apply(r,t.args?t.args.map(function(e){return _N(n,e)}):[]))}function dO(e){var t={actions:[],stop:function(){return r()},replay:function(e){xs(e,t.actions)}},r=fs(e,t.actions.push.bind(t.actions));return t}function fs(e,t,r){return void 0===r&&(r=!1),tq(e,function(n,$){if("action"===n.type&&n.id===n.rootId){var a=f(n.context),o={name:n.name,path:wp(f(e),a),args:n.args.map(function(e,t){return $N(a,n.name,t,e)})};if(r){var i=$(n);return t(o),i}return t(o),$(n)}return $(n)})}var fO=1,Ub=null;function Lr(){return fO++}function el(e,t){var r=f(e.context),n=r._isRunningAction,$=Ub;"action"===e.type&&r.assertAlive(),r._isRunningAction=!0,Ub=e;try{return oO(r,e,t)}finally{Ub=$,r._isRunningAction=n}}function jO(){return Ub||d("Not running an action!")}function kl(e,t,r){var n=function(){var n=Lr();return el({type:"action",name:t,id:n,args:_r(arguments),context:e,tree:Hw(e),rootId:Ub?Ub.rootId:n,parentId:Ub?Ub.id:0,allParentIds:Ub?Ub.allParentIds.concat([Ub.id]):[]},r)};return n._isMSTAction=!0,n}function tq(e,t,r){void 0===r&&(r=!0);var n=f(e);return n.addMiddleWare(t,r)}function mO(e,t){var r={handler:e,includeHooks:!0};return t.$mst_middleware&&t.$mst_middleware.push(r),t.$mst_middleware=[r],t}function nO(e,t,r){for(var n=r.$mst_middleware||Ec,$=e;$;)$.middlewares&&(n=n.concat($.middlewares)),$=$.parent;return n}function oO(e,t,r){var n=nO(e,t,r);if(!n.length)return Q(r).apply(null,t.args);var $=0,a=null;return function e(t){var o=n[$++],i=o&&o.handler;function s(t,r){a=r?r(e(t)||a):e(t)}function p(e){a=e}var u=function(){return i(t,s,p),a};return i&&o.includeHooks?u():i&&!o.includeHooks?ok[t.name]?e(t):u():Q(r).apply(null,t.args)}(t)}function pO(e){try{return JSON.stringify(e)}catch(t){return"<Unserializable: "+t+">"}}function qq(e){return"function"==typeof e?"<function"+(e.name?" "+e.name:"")+">":E(e)?"<"+e+">":"`"+pO(e)+"`"}function rO(e){return e.length<280?e:e.substring(0,272)+"......"+e.substring(e.length-8)}function sO(e){var t=e.value,r=e.context[e.context.length-1].type,n=e.context.map(function(e){return e.path}).filter(function(e){return e.length>0}).join("/"),$=n.length>0?"at path \"/"+n+"\" ":"",a=E(t)?"value of type "+f(t).type.name+":":Be(t)?"value":"snapshot",o=r&&E(t)&&r.is(f(t).snapshot);return""+$+a+" "+qq(t)+" is not assignable "+(r?"to type: `"+r.name+"`":"")+(e.message?" ("+e.message+")":"")+(r?jx(r)||Be(t)?".":", expected an instance of `"+r.name+"` or a snapshot like `"+r.describe()+"` instead."+(o?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function pl(e,t,r){return e.concat([{path:t,type:r}])}function ua(){return Ec}function Na(e,t,r){return[{context:e,value:t,message:r}]}function bj(e){return e.reduce(function(e,t){return e.concat(t)},[])}function Xb(e,t){}function yO(e,t){var r=e.validate(t,[{path:"",type:e}]);r.length>0&&d("Error while converting "+rO(qq(t))+" to `"+e.name+"`:\n\n    "+r.map(sO).join("\n    "))}var T,AO=0,BO=function(){function e(){this.cacheId=AO++,this.cache=V.map(),this.lastCacheModificationPerId=V.map()}return e.prototype.updateLastCacheModificationPerId=function(e){var t=this.lastCacheModificationPerId.get(e);this.lastCacheModificationPerId.set(e,void 0===t?1:t+1)},e.prototype.getLastCacheModificationPerId=function(e){var t=this.lastCacheModificationPerId.get(e)||0;return this.cacheId+"-"+t},e.prototype.addNodeToCache=function(e,t){if(void 0===t&&(t=!0),e.identifierAttribute){var r=e.identifier;this.cache.has(r)||this.cache.set(r,V.array([],cj));var n=this.cache.get(r);-1!==n.indexOf(e)&&d("Already registered"),n.push(e),t&&this.updateLastCacheModificationPerId(r)}},e.prototype.mergeCache=function(e){var t=this;yk(e.identifierCache.cache).forEach(function(e){return e.forEach(function(e){t.addNodeToCache(e)})})},e.prototype.notifyDied=function(e){if(e.identifierAttribute){var t=e.identifier,r=this.cache.get(t);r&&(r.remove(e),r.length||this.cache.delete(t),this.updateLastCacheModificationPerId(e.identifier))}},e.prototype.splitCache=function(t){var r=this,n=new e,$=t.path;return Jv(this.cache).forEach(function(e){for(var t=e[0],a=e[1],o=!1,i=a.length-1;i>=0;i--)0===a[i].path.indexOf($)&&(n.addNodeToCache(a[i],!1),a.splice(i,1),o=!0);o&&r.updateLastCacheModificationPerId(t)}),n},e.prototype.resolve=function(e,t){var r=this.cache.get(""+t);if(!r)return null;var n=r.filter(function(t){return e.isAssignableFrom(t.type)});switch(n.length){case 0:return null;case 1:var $=n[0];if($){for(var a=[],o=$.parent;o&&!o.isObservableInstanceCreated;)a.unshift(o),o=o.parent;for(var i=0,s=a;i<s.length;i++){s[i].createObservableInstanceIfNeeded()}}return $;default:return d("Cannot resolve a reference to type '"+e.name+"' with id: '"+t+"' unambigously, there are multiple candidates: "+n.map(function(e){return e.path}).join(", "));}},e}();function sb(e,t,r,n,$){var a=GO($);if(a){if(a.isRoot)return a.setParent(t,r),a;d("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+r+"', but it lives already at '"+a.path+"'")}return new(e.shouldAttachNode?Tg:jm)(e,t,r,n,$)}function DO(e){return e instanceof jm||e instanceof Tg}function E(e){return!(!e||!e.$treenode)}function f(e){return E(e)?e.$treenode:d("Value "+e+" is no MST Node")}function GO(e){return e&&e.$treenode||null}function HO(){return f(this).snapshot}!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"}(T||(T={}));var IO=function(e){return".."};function wp(e,t){e.root!==t.root&&d("Cannot calculate relative path: objects '"+e+"' and '"+t+"' are not part of the same object tree");for(var r=he(e.path),n=he(t.path),$=0;$<r.length&&r[$]===n[$];$++);return r.slice($).map(IO).join("/")+Ij(n.slice($))}function sp(e,t,r){return void 0===r&&(r=!0),Wx(e,he(t),r)}function Wx(e,t,r){void 0===r&&(r=!0);for(var n=e,$=0;$<t.length;$++){var a=t[$];if(""!==a){if(".."===a){if(n=n.parent)continue}else{if("."===a||""===a)continue;if(n){if(n instanceof jm)try{var o=n.value;E(o)&&(n=f(o))}catch(i){if(!r)return;throw i}if(n instanceof Tg)if(n.getChildType(a)&&(n=n.getChildNode(a)))continue}}return r?d("Could not resolve '"+a+"' in path '"+(Ij(t.slice(0,$))||"/")+"' while resolving '"+Ij(t)+"'"):void 0}n=n.root}return n}function Fx(e){if(!e)return Ec;var t=Object.keys(e);if(!t.length)return Ec;var r=new Array(t.length);return t.forEach(function(t,n){r[n]=e[t]}),r}var NO="See https://github.com/mobxjs/mobx-state-tree/issues/399 for more information. Note that the middleware event types starting with `process` now start with `flow`.";function OO(e){return Kr("process","`process()` has been renamed to `flow()`. "+NO),xm(e)}var Ec=Object.freeze([]),Ke=Object.freeze({}),cj="string"==typeof s?{deep:!1}:{deep:!1,proxy:!1};function d(e){throw void 0===e&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function TO(e){return e}Object.freeze(cj);var UO=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Hl(e){return!(!Array.isArray(e)&&!ka(e))}function lu(e){return e?Hl(e)?e:[e]:Ec}function XO(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++){var $=t[n];for(var a in $)e[a]=$[a]}return e}function Vc(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function Lt(e){return!(null===e||"object"!=typeof e||e instanceof Date||e instanceof RegExp)}function Be(e){return null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||e instanceof Date}function Df(e){return e}function aP(e){return e}function bP(e){return"function"!=typeof e}function Bf(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function dP(e,t,r){Object.defineProperty(e,t,{enumerable:!0,writable:!1,configurable:!0,value:r})}function eP(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}function gs(e,t){return e.push(t),function(){eP(e,t)}}function _r(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}function hP(e,t){Ka(e,t).trackAndCompute()}var Kr=function(e,t){};function xm(e){return kP(e.name,e)}function kP(e,t){var r=function(){var n=Lr(),$=jO(),a=arguments;function o(t,a,o){t.$mst_middleware=r.$mst_middleware,el({name:e,type:a,id:n,args:[o],tree:$.tree,context:$.context,parentId:$.id,allParentIds:$.allParentIds.concat([$.id]),rootId:$.rootId},t)}return new Promise(function(i,s){var p,u=function(){p=t.apply(null,arguments),c(void 0)};function c(e){var t;try{o(function(e){t=p.next(e)},"flow_resume",e)}catch(r){return void setImmediate(function(){o(function(e){s(r)},"flow_throw",r)})}h(t)}function l(e){var t;try{o(function(e){t=p.throw(e)},"flow_resume_error",e)}catch(r){return void setImmediate(function(){o(function(e){s(r)},"flow_throw",r)})}h(t)}function h(e){if(!e.done)return e.value&&"function"==typeof e.value.then||d("Only promises can be yielded to `async`, got: "+e),e.value.then(c,l);setImmediate(function(){o(function(e){i(e)},"flow_return",e.value)})}u.$mst_middleware=r.$mst_middleware,el({name:e,type:"flow_spawn",id:n,args:_r(a),tree:$.tree,context:$.context,parentId:$.id,allParentIds:$.allParentIds.concat([$.id]),rootId:$.rootId},u)})};return r}function lP(e){return"oldValue"in e||d("Patches without `oldValue` field cannot be inversed"),[mP(e),nP(e)]}function mP(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value};}}function nP(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue};}}function oP(e){return"number"==typeof e}function $b(e){return!0===oP(e)?""+e:e.replace(/~/g,"~1").replace(/\//g,"~0")}function zx(e){return e.replace(/~0/g,"/").replace(/~1/g,"~")}function Ij(e){return 0===e.length?"":"/"+e.map($b).join("/")}function he(e){var t=e.split("/").map(zx);return""===t[0]?t.slice(1):t}Kr.ids={};var qc,Zu="Map.put can only be used to store complex values that have an identifier type attribute";function bk(e,t){if(e instanceof _n)t.push(e);else if(e instanceof yt){if(!bk(e.type,t))return!1}else if(e instanceof gw)for(var r=0;r<e.types.length;r++){if(!bk(e.types[r],t))return!1}else if(e instanceof Au){var n=e.getSubType(!1);if(!n)return!1;bk(n,t)}return!0}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"}(qc||(qc={}));var wP=function(e){function t(t){return e.call(this,t,V.ref.enhancer)||this}return S(t,e),t.prototype.get=function(t){return e.prototype.get.call(this,""+t)},t.prototype.has=function(t){return e.prototype.has.call(this,""+t)},t.prototype.delete=function(t){return e.prototype.delete.call(this,""+t)},t.prototype.set=function(t,r){return e.prototype.set.call(this,""+t,r)},t.prototype.put=function(e){if(e||d("Map.put cannot be used to set empty values"),E(e)){var t=f(e);0;var r=t.identifier;return this.set(r,t.value),t.value}if(Lt(e)){r=void 0;var n=f(this).type;return n.identifierMode===qc.NO?d(Zu):n.identifierMode===qc.YES?(r=""+e[n.mapIdentifierAttribute],this.set(r,e),this.get(r)):d(Zu)}return d("Map.put can only be used to store complex values")},t}(wi),Yt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.shouldAttachNode=!0,n.identifierMode=qc.UNKNOWN,n.mapIdentifierAttribute=void 0,n.flags=x.Map,n.subType=r,n._determineIdentifierMode(),n}return S(t,e),t.prototype.instantiate=function(e,t,r,n){return this.identifierMode===qc.UNKNOWN&&this._determineIdentifierMode(),sb(this,e,t,r,n)},t.prototype._determineIdentifierMode=function(){var e=[];if(bk(this.subType,e)){var t=void 0;e.forEach(function(e){e.identifierAttribute&&(t&&t!==e.identifierAttribute&&d("The objects in a map should all have the same identifier attribute, expected '"+t+"', but child of type '"+e.name+"' declared attribute '"+e.identifierAttribute+"' as identifier"),t=e.identifierAttribute)}),t?(this.identifierMode=qc.YES,this.mapIdentifierAttribute=t):this.identifierMode=qc.NO}},t.prototype.initializeChildNodes=function(e,t){void 0===t&&(t={});var r=e.type.subType,n=e._environment,$={};return Object.keys(t).forEach(function(a){$[a]=r.instantiate(e,a,n,t[a])}),$},t.prototype.createNewInstance=function(e,t,r){return new wP(t)},t.prototype.finalizeNewInstance=function(e,t){Ck(t,e.unbox),Si(t,this.willChange),Pi(t,this.didChange)},t.prototype.describe=function(){return"Map<string, "+this.subType.describe()+">"},t.prototype.getChildren=function(e){return yk(e.storedValue)},t.prototype.getChildNode=function(e,t){var r=e.storedValue.get(""+t);return r||d("Not a child "+t),r},t.prototype.willChange=function(e){var t=f(e.object),r=e.name;t.assertWritable();var n=t.type,$=n.subType;switch(e.type){case"update":var a=e.newValue;if(a===e.object.get(r))return null;Xb($,a),e.newValue=$.reconcile(t.getChildNode(r),e.newValue),n.processIdentifier(r,e.newValue);break;case"add":Xb($,e.newValue),e.newValue=$.instantiate(t,r,void 0,e.newValue),n.processIdentifier(r,e.newValue);}return e},t.prototype.processIdentifier=function(e,t){if(this.identifierMode===qc.YES&&t instanceof Tg){var r=t.identifier;r!==e&&d("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+r+"', but expected: '"+e+"'")}},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){var t={};return e.getChildren().forEach(function(e){t[e.subpath]=e.snapshot}),t},t.prototype.processInitialSnapshot=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t].getSnapshot()}),r},t.prototype.didChange=function(e){var t=f(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:$b(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:$b(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":var r=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:$b(e.name),oldValue:r},t);}},t.prototype.applyPatchLocally=function(e,t,r){var n=e.storedValue;switch(r.op){case"add":case"replace":n.set(t,r.value);break;case"remove":n.delete(t);}},t.prototype.applySnapshot=function(e,t){Xb(this,t);var r=e.storedValue,n={};for(var $ in Array.from(r.keys()).forEach(function(e){n[e]=!1}),t)r.set($,t[$]),n[""+$]=!0;Object.keys(n).forEach(function(e){!1===n[e]&&r.delete(e)})},t.prototype.getChildType=function(e){return this.subType},t.prototype.isValidSnapshot=function(e,t){var r=this;return Vc(e)?bj(Object.keys(e).map(function(n){return r.subType.validate(e[n],pl(t,n,r.subType))})):Na(t,e,"Value is not a plain object")},t.prototype.getDefaultSnapshot=function(){return Ke},t.prototype.removeChild=function(e,t){e.storedValue.delete(t)},Bc([Q],t.prototype,"applySnapshot",null),t}(Li);function yP(e){return new Yt("map<string, "+e.name+">",e)}function zP(e){return ra(e)&&(e.flags&x.Map)>0}var St=function(e){function t(t,r){var n=e.call(this,t)||this;return n.shouldAttachNode=!0,n.flags=x.Array,n.subType=r,n}return S(t,e),t.prototype.instantiate=function(e,t,r,n){return sb(this,e,t,r,n)},t.prototype.initializeChildNodes=function(e,t){void 0===t&&(t=[]);var r=e.type.subType,n=e._environment,$={};return t.forEach(function(t,a){var o=""+a;$[o]=r.instantiate(e,o,n,t)}),$},t.prototype.createNewInstance=function(e,t,r){return V.array(Fx(t),cj)},t.prototype.finalizeNewInstance=function(e,t){Ma(t).dehancer=e.unbox,Si(t,this.willChange),Pi(t,this.didChange)},t.prototype.describe=function(){return this.subType.describe()+"[]"},t.prototype.getChildren=function(e){return e.storedValue.slice()},t.prototype.getChildNode=function(e,t){var r=parseInt(t,10);return r<e.storedValue.length?e.storedValue[r]:d("Not a child: "+t)},t.prototype.willChange=function(e){var t=f(e.object);t.assertWritable();var r=t.type.subType,n=t.getChildren(),$=null;switch(e.type){case"update":if(e.newValue===e.object[e.index])return null;if(!($=Ft(t,r,[n[e.index]],[e.newValue],[e.index])))return null;e.newValue=$[0];break;case"splice":var a=e.index,o=e.removedCount,i=e.added;if(!($=Ft(t,r,n.slice(a,a+o),i,i.map(function(e,t){return a+t}))))return null;e.added=$;for(var s=a+o;s<n.length;s++)n[s].setParent(t,""+(s+i.length-o));}return e},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e){return e.getChildren().map(function(e){return e.snapshot})},t.prototype.processInitialSnapshot=function(e,t){var r=[];return Object.keys(e).forEach(function(t){r.push(e[t].getSnapshot())}),r},t.prototype.didChange=function(e){var t=f(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(var r=e.removedCount-1;r>=0;r--)t.emitPatch({op:"remove",path:""+(e.index+r),oldValue:e.removed[r].snapshot},t);for(r=0;r<e.addedCount;r++)t.emitPatch({op:"add",path:""+(e.index+r),value:t.getChildNode(""+(e.index+r)).snapshot,oldValue:void 0},t);return;}},t.prototype.applyPatchLocally=function(e,t,r){var n=e.storedValue,$="-"===t?n.length:parseInt(t);switch(r.op){case"replace":n[$]=r.value;break;case"add":n.splice($,0,r.value);break;case"remove":n.splice($,1);}},t.prototype.applySnapshot=function(e,t){Xb(this,t),e.storedValue.replace(t)},t.prototype.getChildType=function(e){return this.subType},t.prototype.isValidSnapshot=function(e,t){var r=this;return Hl(e)?bj(e.map(function(e,n){return r.subType.validate(e,pl(t,""+n,r.subType))})):Na(t,e,"Value is not an array")},t.prototype.getDefaultSnapshot=function(){return Ec},t.prototype.removeChild=function(e,t){e.storedValue.splice(parseInt(t,10),1)},Bc([Q],t.prototype,"applySnapshot",null),t}(Li);function BP(e){return new St(e.name+"[]",e)}function Ft(e,t,r,n,$){for(var a,o,i=!1,s=void 0,p=!0,u=0;i=u<=n.length-1,a=r[u],DO(o=i?n[u]:void 0)&&(o=o.storedValue),a||i;u++)if(i){if(a){if(ct(a,o))r[u]=Mn(t,e,""+$[u],o,a);else{s=void 0;for(var c=u;c<r.length;c++)if(ct(r[c],o)){s=r.splice(c,1)[0];break}r.splice(u,0,Mn(t,e,""+$[u],o,s)),p=!1}}else E(o)&&f(o).parent===e&&d("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+$[u]+"', but it lives already at '"+f(o).path+"'"),r.splice(u,0,Mn(t,e,""+$[u],o)),p=!1;}else a.die(),r.splice(u,1),u--,p=!1;return p?null:r}function Mn(e,t,r,n,$){var a;if((Xb(e,n),E(n))&&((a=f(n)).assertAlive(),null!==a.parent&&a.parent===t))return a.setParent(t,r),$&&$!==a&&$.die(),a;return $?((a=e.reconcile($,n)).setParent(t,r),a):e.instantiate(t,r,t._environment,n)}function ct(e,t){return E(t)?f(t)===e:e.snapshot===t||!!(e instanceof Tg&&null!==e.identifier&&e.identifierAttribute&&Vc(t)&&e.identifier===""+t[e.identifierAttribute]&&e.type.is(t))}function FP(e){return ra(e)&&(e.flags&x.Array)>0}var ok,ts="preProcessSnapshot",sr="postProcessSnapshot";function JP(){return f(this).toString()}!function(e){e.afterCreate="afterCreate",e.afterAttach="afterAttach",e.beforeDetach="beforeDetach",e.beforeDestroy="beforeDestroy"}(ok||(ok={}));var $n={name:"AnonymousModel",properties:{},initializers:Ec};function LP(e){return Object.keys(e).reduce(function(e,t){var r,n,$;if(t in ok)return d("Hook '"+t+"' was defined as property. Hooks should be defined as part of the actions");var a=Object.getOwnPropertyDescriptor(e,t);"get"in a&&d("Getters are not supported as properties. Please use views instead");var o=a.value;if(null==o)d("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");else{if(Be(o))return Object.assign({},e,((r={})[t]=Hd(ZP(o),o),r));if(o instanceof Yt)return Object.assign({},e,((n={})[t]=Hd(o,{}),n));if(o instanceof St)return Object.assign({},e,(($={})[t]=Hd(o,[]),$));if(ra(o))return e;d("Invalid type definition for property '"+t+"', cannot infer a type from a value like '"+o+"' ("+typeof o+")")}},e)}var _n=function(e){function t(t){var r=e.call(this,t.name||$n.name)||this;r.flags=x.Object,r.shouldAttachNode=!0;var n=t.name||$n.name;return /^\w[\w\d_]*$/.test(n)||d("Typename should be a valid identifier: "+n),Object.assign(r,$n,t),r.properties=LP(r.properties),Df(r.properties),r.propertyNames=Object.keys(r.properties),r.identifierAttribute=r._getIdentifierAttribute(),r}return S(t,e),t.prototype._getIdentifierAttribute=function(){var e=void 0;return this.forAllProps(function(t,r){r.flags&x.Identifier&&(e&&d("Cannot define property '"+t+"' as object identifier, property '"+e+"' is already defined as identifier property"),e=t)}),e},t.prototype.cloneAndEnhance=function(e){return new t({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor,postProcessor:e.postProcessor||this.postProcessor})},t.prototype.actions=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){return t.instantiateActions(r,e(r)),r}]})},t.prototype.instantiateActions=function(e,t){Vc(t)||d("actions initializer should return a plain object containing actions"),Object.keys(t).forEach(function(r){r===ts&&d("Cannot define action '"+ts+"', it should be defined using 'type.preProcessSnapshot(fn)' instead"),r===sr&&d("Cannot define action '"+sr+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var n=t[r],$=e[r];if(r in ok&&$){var a=n;n=function(){$.apply(null,arguments),a.apply(null,arguments)}}var o=n.$mst_middleware,i=n.bind(t);i.$mst_middleware=o;var s=kl(e,r,i);t[r]=s,Bf(e,r,s)})},t.prototype.named=function(e){return this.cloneAndEnhance({name:e})},t.prototype.props=function(e){return this.cloneAndEnhance({properties:e})},t.prototype.volatile=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){return t.instantiateVolatileState(r,e(r)),r}]})},t.prototype.instantiateVolatileState=function(e,t){Vc(t)||d("volatile state initializer should return a plain object containing state"),Qi(e,t)},t.prototype.extend=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){var n=e(r),$=n.actions,a=n.views,o=n.state,i=cN(n,["actions","views","state"]);for(var s in i)d("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+s+"'");return o&&t.instantiateVolatileState(r,o),a&&t.instantiateViews(r,a),$&&t.instantiateActions(r,$),r}]})},t.prototype.views=function(e){var t=this;return this.cloneAndEnhance({initializers:[function(r){return t.instantiateViews(r,e(r)),r}]})},t.prototype.instantiateViews=function(e,t){Vc(t)||d("views initializer should return a plain object containing views"),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r),$=n.value;if("get"in n){if(zk(e,r)){var a=Ma(e,r);a.derivation=n.get,a.scope=e,n.set&&(a.setter=Q(a.name+"-setter",n.set))}else Bj(e,r,n,!0);}else"function"==typeof $?Bf(e,r,$):d("A view member should either be a function or getter based property")})},t.prototype.preProcessSnapshot=function(e){var t=this.preProcessor;return t?this.cloneAndEnhance({preProcessor:function(r){return t(e(r))}}):this.cloneAndEnhance({preProcessor:e})},t.prototype.postProcessSnapshot=function(e){var t=this.postProcessor;return t?this.cloneAndEnhance({postProcessor:function(r){return e(t(r))}}):this.cloneAndEnhance({postProcessor:e})},t.prototype.instantiate=function(e,t,r,n){return sb(this,e,t,r,E(n)?n:this.applySnapshotPreProcessor(n))},t.prototype.initializeChildNodes=function(e,t){void 0===t&&(t={});var r=e.type,n={};return r.forAllProps(function(r,$){n[r]=$.instantiate(e,r,e._environment,t[r])}),n},t.prototype.createNewInstance=function(e,t,r){return V.object(t,Ke,cj)},t.prototype.finalizeNewInstance=function(e,t){Bf(t,"toString",JP),this.forAllProps(function(r){Ck(t,r,e.unbox)}),this.initializers.reduce(function(e,t){return t(e)},t),Si(t,this.willChange),Pi(t,this.didChange)},t.prototype.willChange=function(e){var t=f(e.object);t.assertWritable();var r=t.type.properties[e.name];return r&&(Xb(r,e.newValue),e.newValue=r.reconcile(t.getChildNode(e.name),e.newValue)),e},t.prototype.didChange=function(e){var t=f(e.object);if(t.type.properties[e.name]){var r=e.oldValue?e.oldValue.snapshot:void 0;t.emitPatch({op:"replace",path:$b(e.name),value:e.newValue.snapshot,oldValue:r},t)}},t.prototype.getChildren=function(e){var t=this,r=[];return this.forAllProps(function(n,$){r.push(t.getChildNode(e,n))}),r},t.prototype.getChildNode=function(e,t){if(!(t in this.properties))return d("Not a value property: "+t);var r=Ma(e.storedValue,t).value;return r||d("Node not available for property "+t)},t.prototype.getValue=function(e){return e.storedValue},t.prototype.getSnapshot=function(e,t){var r=this;void 0===t&&(t=!0);var n={};return this.forAllProps(function(t,$){Ka(e.storedValue,t).reportObserved(),n[t]=r.getChildNode(e,t).snapshot}),t?this.applySnapshotPostProcessor(n):n},t.prototype.processInitialSnapshot=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t].getSnapshot()}),this.applySnapshotPostProcessor(this.applyOptionalValuesToSnapshot(r))},t.prototype.applyPatchLocally=function(e,t,r){"replace"!==r.op&&"add"!==r.op&&d("object does not support operation "+r.op),e.storedValue[t]=r.value},t.prototype.applySnapshot=function(e,t){var r=this.applySnapshotPreProcessor(t);Xb(this,r),this.forAllProps(function(t,n){e.storedValue[t]=r[t]})},t.prototype.applySnapshotPreProcessor=function(e){var t=this.preProcessor;return t?t.call(null,e):e},t.prototype.applyOptionalValuesToSnapshot=function(e){return e&&(e=Object.assign({},e),this.forAllProps(function(t,r){if(!(t in e)){var n=ao(r);n&&(e[t]=n.getDefaultValueSnapshot())}})),e},t.prototype.applySnapshotPostProcessor=function(e){var t=this.postProcessor;return t?t.call(null,e):e},t.prototype.getChildType=function(e){return this.properties[e]},t.prototype.isValidSnapshot=function(e,t){var r=this,n=this.applySnapshotPreProcessor(e);return Vc(n)?bj(this.propertyNames.map(function(e){return r.properties[e].validate(n[e],pl(t,e,r.properties[e]))})):Na(t,n,"Value is not a plain object")},t.prototype.forAllProps=function(e){var t=this;this.propertyNames.forEach(function(r){return e(r,t.properties[r])})},t.prototype.describe=function(){var e=this;return"{ "+this.propertyNames.map(function(t){return t+": "+e.properties[t].describe()}).join("; ")+" }"},t.prototype.getDefaultSnapshot=function(){return Ke},t.prototype.removeChild=function(e,t){e.storedValue[t]=void 0},Bc([Q],t.prototype,"applySnapshot",null),t}(Li);function NP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():"AnonymousModel",n=e.shift()||{};return new _n({name:r,properties:n})}function OP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():"AnonymousModel";return e.reduce(function(e,t){return e.cloneAndEnhance({name:e.name+"_"+t.name,properties:t.properties,initializers:t.initializers,preProcessor:function(r){return t.applySnapshotPreProcessor(e.applySnapshotPreProcessor(r))},postProcessor:function(r){return t.applySnapshotPostProcessor(e.applySnapshotPostProcessor(r))}})}).named(r)}function PP(e){return ra(e)&&(e.flags&x.Object)>0}function ao(e){if(e)return e.flags&x.Union&&e.types?e.types.find(ao):e.flags&x.Late&&e.getSubType&&e.getSubType(!1)?ao(e.subType):e.flags&x.Optional?e:void 0}var Sc=function(e){function t(t,r,n,$){void 0===$&&($=TO);var a=e.call(this,t)||this;return a.shouldAttachNode=!1,a.flags=r,a.checker=n,a.initializer=$,a}return S(t,e),t.prototype.describe=function(){return this.name},t.prototype.instantiate=function(e,t,r,n){return sb(this,e,t,r,n)},t.prototype.createNewInstance=function(e,t,r){return this.initializer(r)},t.prototype.isValidSnapshot=function(e,t){return Be(e)&&this.checker(e)?ua():Na(t,e,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))},t}(ub),aq=new Sc("string",x.String,function(e){return"string"==typeof e}),Up=new Sc("number",x.Number,function(e){return"number"==typeof e}),UP=new Sc("integer",x.Integer,function(e){return UO(e)}),zp=new Sc("boolean",x.Boolean,function(e){return"boolean"==typeof e}),xp=new Sc("null",x.Null,function(e){return null===e}),Zx=new Sc("undefined",x.Undefined,function(e){return void 0===e}),bo=new Sc("Date",x.Date,function(e){return"number"==typeof e||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});function ZP(e){switch(typeof e){case"string":return aq;case"number":return Up;case"boolean":return zp;case"object":if(e instanceof Date)return bo;}return d("Cannot determine primitive type from value "+e)}function jx(e){return ra(e)&&(e.flags&(x.String|x.Number|x.Integer|x.Boolean|x.Date))>0}bo.getSnapshot=function(e){return e.storedValue.getTime()};var _P=function(e){function t(t){var r=e.call(this,JSON.stringify(t))||this;return r.shouldAttachNode=!1,r.flags=x.Literal,r.value=t,r}return S(t,e),t.prototype.instantiate=function(e,t,r,n){return sb(this,e,t,r,n)},t.prototype.describe=function(){return JSON.stringify(this.value)},t.prototype.isValidSnapshot=function(e,t){return Be(e)&&e===this.value?ua():Na(t,e,"Value is not a literal "+JSON.stringify(this.value))},t}(ub);function Sw(e){return new _P(e)}function bQ(e){return ra(e)&&(e.flags&x.Literal)>0}var cQ=function(e){function t(t,r,n,$){var a=e.call(this,t)||this;return a.type=r,a.predicate=n,a.message=$,a}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this.type.flags|x.Refinement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.type.shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.describe=function(){return this.name},t.prototype.instantiate=function(e,t,r,n){return this.type.instantiate(e,t,r,n)},t.prototype.isAssignableFrom=function(e){return this.type.isAssignableFrom(e)},t.prototype.isValidSnapshot=function(e,t){var r=this.type.validate(e,t);if(r.length>0)return r;var n=E(e)?f(e).snapshot:e;return this.predicate(n)?ua():Na(t,e,this.message(e))},t}(ub);function dQ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():ra(e[0])?e[0].name:null,n=e[0],$=e[1],a=e[2]?e[2]:function(e){return"Value does not respect the refinement predicate"};return new cQ(r,n,$,a)}function eQ(e){return(e.flags&x.Refinement)>0}function fQ(e,t){var r="string"==typeof e?t:e;var n=pk.apply(void 0,r.map(function(e){return Sw(""+e)}));return"string"==typeof e&&(n.name=e),n}var gw=function(e){function t(t,r,n){var $=e.call(this,t)||this;return $.eager=!0,n=ml({eager:!0,dispatcher:void 0},n),$.dispatcher=n.dispatcher,n.eager||($.eager=!1),$.types=r,$}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){var e=x.Union;return this.types.forEach(function(t){e|=t.flags}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.types.some(function(e){return e.shouldAttachNode})},enumerable:!0,configurable:!0}),t.prototype.isAssignableFrom=function(e){return this.types.some(function(t){return t.isAssignableFrom(e)})},t.prototype.describe=function(){return"("+this.types.map(function(e){return e.describe()}).join(" | ")+")"},t.prototype.instantiate=function(e,t,r,n){var $=this.determineType(n,void 0);return $?$.instantiate(e,t,r,n):d("No matching type for union "+this.describe())},t.prototype.reconcile=function(e,t){var r=this.determineType(t,e.type);return r?r.reconcile(e,t):d("No matching type for union "+this.describe())},t.prototype.determineType=function(e,t){return this.dispatcher?this.dispatcher(e):t?t.is(e)?t:this.types.filter(function(e){return e!==t}).find(function(t){return t.is(e)}):this.types.find(function(t){return t.is(e)})},t.prototype.isValidSnapshot=function(e,t){if(this.dispatcher)return this.dispatcher(e).validate(e,t);for(var r=[],n=0,$=0;$<this.types.length;$++){var a=this.types[$].validate(e,t);if(0===a.length){if(this.eager)return ua();n++}else r.push(a)}return 1===n?ua():Na(t,e,"No type is applicable for the union").concat(bj(r))},t}(ub);function pk(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=ra(e)?void 0:e,$=ra(e)?[e].concat(t):t,a="("+$.map(function(e){return e.name}).join(" | ")+")";return new gw(a,$,n)}function iQ(e){return(e.flags&x.Union)>0}var yt=function(e){function t(t,r){var n=e.call(this,t.name)||this;return n.type=t,n.defaultValue=r,n}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this.type.flags|x.Optional},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.type.shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.describe=function(){return this.type.describe()+"?"},t.prototype.instantiate=function(e,t,r,n){if(void 0===n){var $=this.getDefaultInstanceOrSnapshot();return this.type.instantiate(e,t,r,$)}return this.type.instantiate(e,t,r,n)},t.prototype.reconcile=function(e,t){return this.type.reconcile(e,this.type.is(t)&&void 0!==t?t:this.getDefaultInstanceOrSnapshot())},t.prototype.getDefaultInstanceOrSnapshot=function(){var e="function"==typeof this.defaultValue?this.defaultValue():this.defaultValue;return"function"==typeof this.defaultValue&&Xb(this,e),e},t.prototype.getDefaultValueSnapshot=function(){var e=this.getDefaultInstanceOrSnapshot();return E(e)?f(e).snapshot:e},t.prototype.isValidSnapshot=function(e,t){return void 0===e?ua():this.type.validate(e,t)},t.prototype.isAssignableFrom=function(e){return this.type.isAssignableFrom(e)},t}(ub);function Hd(e,t){return"function"!=typeof t&&E(t)&&d("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead"),new yt(e,t)}function lQ(e){return ra(e)&&(e.flags&x.Optional)>0}var mQ=Hd(Zx,void 0),nQ=Hd(xp,null);function oQ(e){return pk(e,mQ)}function pQ(e){return pk(e,nQ)}var Au=function(e){function t(t,r){var n=e.call(this,t)||this;return n._subType=null,n.definition=r,n}return S(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|x.Late},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAttachNode",{get:function(){return this.getSubType(!0).shouldAttachNode},enumerable:!0,configurable:!0}),t.prototype.getSubType=function(e){if(null===this._subType){var t=void 0;try{t=this.definition()}catch(r){if(!(r instanceof ReferenceError))throw r;t=void 0}if(e&&void 0===t&&d("Late type seems to be used too early, the definition (still) returns undefined"),t)return this._subType=t,t}return this._subType},t.prototype.instantiate=function(e,t,r,n){return this.getSubType(!0).instantiate(e,t,r,n)},t.prototype.reconcile=function(e,t){return this.getSubType(!0).reconcile(e,t)},t.prototype.describe=function(){var e=this.getSubType(!1);return e?e.name:"<uknown late type>"},t.prototype.isValidSnapshot=function(e,t){var r=this.getSubType(!1);return r?r.validate(e,t):ua()},t.prototype.isAssignableFrom=function(e){var t=this.getSubType(!1);return!!t&&t.isAssignableFrom(e)},t}(ub);function rQ(e,t){var r="string"==typeof e?e:"late("+e.toString()+")",n="string"==typeof e?t:e;return new Au(r,n)}function sQ(e){return ra(e)&&(e.flags&x.Late)>0}var Es=function(e){function t(t){var r=e.call(this,t?"frozen("+t.name+")":"frozen")||this;return r.subType=t,r.shouldAttachNode=!1,r.flags=x.Frozen,r}return S(t,e),t.prototype.describe=function(){return"<any immutable value>"},t.prototype.instantiate=function(e,t,r,n){return sb(this,e,t,r,aP(n))},t.prototype.isValidSnapshot=function(e,t){return bP(e)?this.subType?this.subType.validate(e,t):ua():Na(t,e,"Value is not serializable and cannot be frozen")},t}(ub),zs=new Es;function vQ(e){return 0===arguments.length?zs:ra(e)?new Es(e):Hd(zs,e)}function wQ(e){return ra(e)&&(e.flags&x.Frozen)>0}var _K=function(){function e(e,t){if(this.targetType=t,"string"==typeof e||"number"==typeof e)this.identifier=e;else{if(!E(e))return d("Can only store references to tree nodes or identifiers, got: '"+e+"'");var r=f(e);if(!r.identifierAttribute)return d("Can only store references with a defined identifier attribute.");var n=r.unnormalizedIdentifier;if(null==n)return d("Can only store references to tree nodes with a defined identifier.");this.identifier=n}}return e.prototype.updateResolvedReference=function(){var e=""+this.identifier,t=this.node,r=t.root.identifierCache.getLastCacheModificationPerId(e);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==r){var n=this.targetType,$=t.root.identifierCache.resolve(n,e);$||d("Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")"),this.resolvedReference={node:$,lastCacheModification:r}}},Object.defineProperty(e.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(),this.resolvedReference.node.value},enumerable:!0,configurable:!0}),e}(),Sq=function(e){function t(t){var r=e.call(this,"reference("+t.name+")")||this;return r.targetType=t,r.shouldAttachNode=!1,r.flags=x.Reference,r}return S(t,e),t.prototype.describe=function(){return this.name},t.prototype.isAssignableFrom=function(e){return this.targetType.isAssignableFrom(e)},t.prototype.isValidSnapshot=function(e,t){return"string"==typeof e||"number"==typeof e?ua():Na(t,e,"Value is not a valid identifier, which is a string or a number")},t}(ub),YG=function(e){function t(t){return e.call(this,t)||this}return S(t,e),t.prototype.getValue=function(e){if(e.isAlive)return e.storedValue.resolvedValue},t.prototype.getSnapshot=function(e){return e.storedValue.identifier},t.prototype.instantiate=function(e,t,r,n){var $,a=sb(this,e,t,r,$=new _K(n,this.targetType));return $.node=a,a},t.prototype.reconcile=function(e,t){if(e.type===this){var r=E(t),n=e.storedValue;if(!r&&n.identifier===t)return e;if(r&&n.resolvedValue===t)return e}var $=this.instantiate(e.parent,e.subpath,e._environment,t);return e.die(),$},t}(Sq),XG=function(e){function t(t,r){var n=e.call(this,t)||this;return n.options=r,n}return S(t,e),t.prototype.getValue=function(e){if(e.isAlive)return this.options.get(e.storedValue,e.parent?e.parent.storedValue:null)},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.instantiate=function(e,t,r,n){return sb(this,e,t,r,E(n)?this.options.set(n,e?e.storedValue:null):n)},t.prototype.reconcile=function(e,t){var r=E(t)?this.options.set(t,e?e.storedValue:null):t;if(e.type===this&&e.storedValue===r)return e;var n=this.instantiate(e.parent,e.subpath,e._environment,r);return e.die(),n},t}(Sq);function NG(e,t){return t?new XG(e,t):new YG(e)}function JG(e){return(e.flags&x.Reference)>0}var Kq=function(e){function t(){var t=e.call(this,"identifier")||this;return t.shouldAttachNode=!1,t.flags=x.Identifier,t}return S(t,e),t.prototype.instantiate=function(e,t,r,n){return e&&e.type instanceof _n||d("Identifier types can only be instantiated as direct child of a model type"),sb(this,e,t,r,n)},t.prototype.reconcile=function(e,t){return e.storedValue!==t?d("Tried to change identifier from '"+e.storedValue+"' to '"+t+"'. Changing identifiers is not allowed."):e},t.prototype.describe=function(){return"identifier"},t.prototype.isValidSnapshot=function(e,t){return"string"!=typeof e?Na(t,e,"Value is not a valid identifier, expected a string"):ua()},t}(ub),HG=function(e){function t(){var t=e.call(this)||this;return t.name="identifierNumber",t}return S(t,e),t.prototype.instantiate=function(t,r,n,$){return e.prototype.instantiate.call(this,t,r,n,$)},t.prototype.isValidSnapshot=function(e,t){return"number"==typeof e?ua():Na(t,e,"Value is not a valid identifierNumber, expected a number")},t.prototype.reconcile=function(t,r){return e.prototype.reconcile.call(this,t,r)},t.prototype.getSnapshot=function(e){return e.storedValue},t.prototype.describe=function(){return"identifierNumber"},t}(Kq),CG=new Kq,AG=new HG;function zG(e){return ra(e)&&(e.flags&x.Identifier)>0}function yG(e){return new xG(e)}var xG=function(e){function t(t){var r=e.call(this,t.name)||this;return r.options=t,r.flags=x.Reference,r.shouldAttachNode=!1,r}return S(t,e),t.prototype.describe=function(){return this.name},t.prototype.isAssignableFrom=function(e){return e===this},t.prototype.isValidSnapshot=function(e,t){if(this.options.isTargetType(e))return ua();var r=this.options.getValidationMessage(e);return r?Na(t,e,"Invalid value for type '"+this.name+"': "+r):ua()},t.prototype.getValue=function(e){if(e.isAlive)return e.storedValue},t.prototype.getSnapshot=function(e){return this.options.toSnapshot(e.storedValue)},t.prototype.instantiate=function(e,t,r,n){return sb(this,e,t,r,this.options.isTargetType(n)?n:this.options.fromSnapshot(n))},t.prototype.reconcile=function(e,t){var r=!this.options.isTargetType(t);if(e.type===this&&(r?t===e.snapshot:t===e.storedValue))return e;var n=r?this.options.fromSnapshot(t):t,$=this.instantiate(e.parent,e.subpath,e._environment,n);return e.die(),$},t}(ub),Ja={enumeration:fQ,model:NP,compose:OP,custom:yG,reference:NG,union:pk,optional:Hd,literal:Sw,maybe:oQ,maybeNull:pQ,refinement:dQ,string:aq,boolean:zp,number:Up,integer:UP,Date:bo,map:yP,array:BP,frozen:vQ,identifier:CG,identifierNumber:AG,late:rQ,undefined:Zx,null:xp};iQ,eQ,JG,jx,lQ,PP,zP,bQ,sQ,zG,wQ,FP,ra,NN,MN,LN,Lv,KN,Pv,HN,GN,FN,EN,DN,CN,BN,rw,zN,yN,xN,wN,vN,uN,Hw,sN,rN,vx,pN,oN,yy,mN,lN,kN,jN,li,hN,np,fN,df,RN,ZN,dO,fs,xs,xm,E,OO,tq,mO,he,Ij,zx,$b,yO,Ja;function mo($){return tg.Clipper.Area($)}function Kv($,r){var e=new tg.Path,t=new tg.ClipperOffset(2,.25);return t.AddPath($,tg.JoinType.jtMiter,tg.EndType.etClosedPolygon),t.Execute(e,r),e[0]}var tg={},g={version:"6.4.2.2",use_lines:!0,use_xyz:!1},gq=function(t,e){var i;if(void 0===Object.getOwnPropertyNames){for(i in e.prototype)void 0!==t.prototype[i]&&t.prototype[i]!==Object.prototype[i]||(t.prototype[i]=e.prototype[i]);for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}else{for(var r=Object.getOwnPropertyNames(e.prototype),l=0;l<r.length;l++)void 0===Object.getOwnPropertyDescriptor(t.prototype,r[l])&&Object.defineProperty(t.prototype,r[l],Object.getOwnPropertyDescriptor(e.prototype,r[l]));for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}};g.Path=function(){return[]},g.Path.prototype.push=Array.prototype.push,g.Paths=function(){return[]},g.Paths.prototype.push=Array.prototype.push,g.PolyNode=function(){this.m_Parent=null,this.m_polygon=new g.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},g.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},g.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},g.PolyNode.prototype.Contour=function(){return this.m_polygon},g.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},g.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},g.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},g.PolyNode.prototype.Childs=function(){return this.m_Childs},g.PolyNode.prototype.Parent=function(){return this.m_Parent},g.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},g.PolyTree=function(){this.m_AllPolys=[],g.PolyNode.call(this)},g.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},g.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},g.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return t>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&t--,t},gq(g.PolyTree,g.PolyNode),g.Clear=function(t){t.length=0},g.PI=3.141592653589793,g.PI2=6.283185307179586,g.FPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,g.use_xyz){if(this.Z=0,3===e)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2===e)this.X=t[0],this.Y=t[1],this.Z=0;else if(1===e){if(t[0]instanceof g.FPoint){var i=t[0];this.X=i.X,this.Y=i.Y,this.Z=0}else{void 0===(r=t[0]).Z&&(r.Z=0),this.X=r.X,this.Y=r.Y,this.Z=r.Z}}else this.X=0,this.Y=0,this.Z=0;}else if(2===e)this.X=t[0],this.Y=t[1];else if(1===e){if(t[0]instanceof g.FPoint){i=t[0];this.X=i.X,this.Y=i.Y}else{var r=t[0];this.X=r.X,this.Y=r.Y}}else this.X=0,this.Y=0},g.FPoint.op_Equality=function(t,e){return t.X===e.X&&t.Y===e.Y},g.FPoint.op_Inequality=function(t,e){return t.X!==e.X||t.Y!==e.Y},g.FPoint0=function(){this.X=0,this.Y=0,g.use_xyz&&(this.Z=0)},g.FPoint0.prototype=g.FPoint.prototype,g.FPoint1=function(t){this.X=t.X,this.Y=t.Y,g.use_xyz&&(void 0===t.Z?this.Z=0:this.Z=t.Z)},g.FPoint1.prototype=g.FPoint.prototype,g.FPoint1dp=function(t){this.X=t.X,this.Y=t.Y,g.use_xyz&&(this.Z=0)},g.FPoint1dp.prototype=g.FPoint.prototype,g.FPoint2=function(t,e,i){this.X=t,this.Y=e,g.use_xyz&&(this.Z=void 0===i?0:i)},g.FPoint2.prototype=g.FPoint.prototype,g.FRect=function(){var t=arguments,e=t.length;if(4===e)this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3];else if(1===e){var i=t[0];this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},g.FRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},g.FRect0.prototype=g.FRect.prototype,g.FRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},g.FRect1.prototype=g.FRect.prototype,g.FRect4=function(t,e,i,r){this.left=t,this.top=e,this.right=i,this.bottom=r},g.FRect4.prototype=g.FRect.prototype,g.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},g.PolyType={ptSubject:0,ptClip:1},g.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},g.JoinType={jtSquare:0,jtRound:1,jtMiter:2},g.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},g.EdgeSide={esLeft:0,esRight:1},g.Direction={dRightToLeft:0,dLeftToRight:1},g.TEdge=function(){this.Bot=new g.FPoint0,this.Curr=new g.FPoint0,this.Top=new g.FPoint0,this.Delta=new g.FPoint0,this.Dx=0,this.PolyTyp=g.PolyType.ptSubject,this.Side=g.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},g.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new g.FPoint0},g.MyIntersectNodeSort=function(){},g.MyIntersectNodeSort.Compare=function(t,e){var i=e.Pt.Y-t.Pt.Y;return i>0?1:i<0?-1:0},g.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},g.Scanbeam=function(){this.Y=0,this.Next=null},g.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},g.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},g.OutPt=function(){this.Idx=0,this.Pt=new g.FPoint0,this.Next=null,this.Prev=null},g.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new g.FPoint0},g.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},g.ClipperBase.horizontal=-3.4e38,g.ClipperBase.Skip=-2,g.ClipperBase.Unassigned=-1,g.ClipperBase.tolerance=1e-20,g.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE),g.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE),g.ClipperBase.near_zero=function(t){return t>-g.ClipperBase.tolerance&&t<g.ClipperBase.tolerance},g.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},g.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(g.FPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!==e);return!1},g.ClipperBase.prototype.PointOnLineSegment=function(t,e,i){return t.X===e.X&&t.Y===e.Y||t.X===i.X&&t.Y===i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},g.ClipperBase.prototype.PointOnPolygon=function(t,e){for(var i=e;;){if(this.PointOnLineSegment(t,i.Pt,i.Next.Pt))return!0;if((i=i.Next)===e)break}return!1},g.ClipperBase.prototype.SlopesEqual=g.ClipperBase.SlopesEqual=function(){var t,e,i,r,l,o,p=arguments,n=p.length;return 2===n?(t=p[0],e=p[1],t.Delta.Y*e.Delta.X==t.Delta.X*e.Delta.Y):3===n?(i=p[0],r=p[1],l=p[2],(i.Y-r.Y)*(r.X-l.X)-(i.X-r.X)*(r.Y-l.Y)==0):(i=p[0],r=p[1],l=p[2],o=p[3],(i.Y-r.Y)*(l.X-o.X)-(i.X-r.X)*(l.Y-o.Y)==0)},g.ClipperBase.SlopesEqual3=function(t,e){return t.Delta.Y*e.Delta.X==t.Delta.X*e.Delta.Y},g.ClipperBase.SlopesEqual4=function(t,e,i){return(t.Y-e.Y)*(e.X-i.X)-(t.X-e.X)*(e.Y-i.Y)==0},g.ClipperBase.SlopesEqual5=function(t,e,i,r){return(t.Y-e.Y)*(i.X-r.X)-(t.X-e.X)*(i.Y-r.Y)==0},g.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var i=0,r=this.m_edges[t].length;i<r;++i)this.m_edges[t][i]=null;g.Clear(this.m_edges[t])}g.Clear(this.m_edges),this.m_HasOpenPaths=!1},g.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},g.ClipperBase.prototype.RangeTest=function(t){(t.X>g.ClipperBase.maxValue||t.X<-g.ClipperBase.maxValue||t.Y>g.ClipperBase.maxValue||t.Y<-g.ClipperBase.maxValue||t.X>0&&t.X<g.ClipperBase.minValue||t.Y>0&&t.Y<g.ClipperBase.minValue||t.X<0&&t.X>-g.ClipperBase.minValue||t.Y<0&&t.Y>-g.ClipperBase.minValue)&&g.Error("Coordinate outside allowed range in RangeTest().")},g.ClipperBase.prototype.InitEdge=function(t,e,i,r){t.Next=e,t.Prev=i,t.Curr.X=r.X,t.Curr.Y=r.Y,g.use_xyz&&(t.Curr.Z=r.Z),t.OutIdx=-1},g.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,g.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,g.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,g.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,g.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=e},g.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;g.FPoint.op_Inequality(t.Bot,t.Prev.Bot)||g.FPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!==g.ClipperBase.horizontal&&t.Prev.Dx!==g.ClipperBase.horizontal)break;for(;t.Prev.Dx===g.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx===g.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!==t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},g.ClipperBase.prototype.ProcessBound=function(t,e){var i,r,l=t;if(l.OutIdx===g.ClipperBase.Skip){if(t=l,e){for(;t.Top.Y===t.Next.Bot.Y;)t=t.Next;for(;t!==l&&t.Dx===g.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y===t.Prev.Bot.Y;)t=t.Prev;for(;t!==l&&t.Dx===g.ClipperBase.horizontal;)t=t.Next}if(t===l)l=e?t.Next:t.Prev;else{t=e?l.Next:l.Prev;var o=new g.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,t.WindDelta=0,l=this.ProcessBound(t,e),this.InsertLocalMinima(o)}return l}if(t.Dx===g.ClipperBase.horizontal&&((i=e?t.Prev:t.Next).Dx===g.ClipperBase.horizontal?i.Bot.X!==t.Bot.X&&i.Top.X!==t.Bot.X&&this.ReverseHorizontal(t):i.Bot.X!==t.Bot.X&&this.ReverseHorizontal(t)),i=t,e){for(;l.Top.Y===l.Next.Bot.Y&&l.Next.OutIdx!==g.ClipperBase.Skip;)l=l.Next;if(l.Dx===g.ClipperBase.horizontal&&l.Next.OutIdx!==g.ClipperBase.Skip){for(r=l;r.Prev.Dx===g.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X>l.Next.Top.X&&(l=r.Prev)}for(;t!==l;)t.NextInLML=t.Next,t.Dx===g.ClipperBase.horizontal&&t!==i&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx===g.ClipperBase.horizontal&&t!==i&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),l=l.Next}else{for(;l.Top.Y===l.Prev.Bot.Y&&l.Prev.OutIdx!==g.ClipperBase.Skip;)l=l.Prev;if(l.Dx===g.ClipperBase.horizontal&&l.Prev.OutIdx!==g.ClipperBase.Skip){for(r=l;r.Next.Dx===g.ClipperBase.horizontal;)r=r.Next;(r.Next.Top.X===l.Prev.Top.X||r.Next.Top.X>l.Prev.Top.X)&&(l=r.Next)}for(;t!==l;)t.NextInLML=t.Prev,t.Dx===g.ClipperBase.horizontal&&t!==i&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx===g.ClipperBase.horizontal&&t!==i&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),l=l.Prev}return l},g.ClipperBase.prototype.AddPath=function(t,e,i){g.use_lines?i||e!==g.PolyType.ptClip||g.Error("AddPath: Open paths must be subject."):i||g.Error("AddPath: Open paths have been disabled.");var r=t.length-1;if(i)for(;r>0&&g.FPoint.op_Equality(t[r],t[0]);)--r;for(;r>0&&g.FPoint.op_Equality(t[r],t[r-1]);)--r;if(i&&r<2||!i&&r<1)return!1;for(var l=new Array,o=0;o<=r;o++)l.push(new g.TEdge);var p=!0;l[1].Curr.X=t[1].X,l[1].Curr.Y=t[1].Y,g.use_xyz&&(l[1].Curr.Z=t[1].Z),this.RangeTest(t[0]),this.RangeTest(t[r]),this.InitEdge(l[0],l[1],l[r],t[0]),this.InitEdge(l[r],l[0],l[r-1],t[r]);for(o=r-1;o>=1;--o)this.RangeTest(t[o]),this.InitEdge(l[o],l[o+1],l[o-1],t[o]);for(var n,s=l[0],$=s,C=s;;)if($.Curr!==$.Next.Curr||!i&&$.Next===s){if($.Prev===$.Next)break;if(!i||!g.ClipperBase.SlopesEqual4($.Prev.Curr,$.Curr,$.Next.Curr)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3($.Prev.Curr,$.Curr,$.Next.Curr)){if(($=$.Next)===C||!i&&$.Next===s)break}else $===s&&(s=$.Next),C=$=($=this.RemoveEdge($)).Prev}else{if($===$.Next)break;$===s&&(s=$.Next),C=$=this.RemoveEdge($)}if(!i&&$===$.Next||i&&$.Prev===$.Next)return!1;i||(this.m_HasOpenPaths=!0,s.Prev.OutIdx=g.ClipperBase.Skip),$=s;do{this.InitEdge2($,e),$=$.Next,p&&$.Curr.Y!==s.Curr.Y&&(p=!1)}while($!==s);if(p){if(i)return!1;for($.Prev.OutIdx=g.ClipperBase.Skip,(u=new g.LocalMinima).Next=null,u.Y=$.Bot.Y,u.LeftBound=null,u.RightBound=$,u.RightBound.Side=g.EdgeSide.esRight,u.RightBound.WindDelta=0;$.Bot.X!==$.Prev.Top.X&&this.ReverseHorizontal($),$.Next.OutIdx!==g.ClipperBase.Skip;)$.NextInLML=$.Next,$=$.Next;return this.InsertLocalMinima(u),this.m_edges.push(l),!0}this.m_edges.push(l);var a=null;for(g.FPoint.op_Equality($.Prev.Bot,$.Prev.Top)&&($=$.Next);($=this.FindNextLocMin($))!==a;){var u;null===a&&(a=$),(u=new g.LocalMinima).Next=null,u.Y=$.Bot.Y,$.Dx<$.Prev.Dx?(u.LeftBound=$.Prev,u.RightBound=$,n=!1):(u.LeftBound=$,u.RightBound=$.Prev,n=!0),u.LeftBound.Side=g.EdgeSide.esLeft,u.RightBound.Side=g.EdgeSide.esRight,i?u.LeftBound.Next===u.RightBound?u.LeftBound.WindDelta=-1:u.LeftBound.WindDelta=1:u.LeftBound.WindDelta=0,u.RightBound.WindDelta=-u.LeftBound.WindDelta,($=this.ProcessBound(u.LeftBound,n)).OutIdx===g.ClipperBase.Skip&&($=this.ProcessBound($,n));var v=this.ProcessBound(u.RightBound,!n);v.OutIdx===g.ClipperBase.Skip&&(v=this.ProcessBound(v,!n)),u.LeftBound.OutIdx===g.ClipperBase.Skip?u.LeftBound=null:u.RightBound.OutIdx===g.ClipperBase.Skip&&(u.RightBound=null),this.InsertLocalMinima(u),n||($=v)}return!0},g.ClipperBase.prototype.AddPaths=function(t,e,i){for(var r=!1,l=0,o=t.length;l<o;++l)this.AddPath(t[l],e,i)&&(r=!0);return r},g.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return!(g.FPoint.op_Equality(t,i)||g.FPoint.op_Equality(t,e)||g.FPoint.op_Equality(i,e))&&(t.X!==i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y)},g.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},g.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=g.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},g.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},g.ClipperBase.prototype.PopLocalMinima=function(t,e){return e.v=this.m_CurrentLM,null!==this.m_CurrentLM&&this.m_CurrentLM.Y===t&&(this.m_CurrentLM=this.m_CurrentLM.Next,!0)},g.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,g.use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},g.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!==this.m_CurrentLM){this.m_Scanbeam=null;for(var t=this.m_MinimaList;null!==t;){this.InsertScanbeam(t.Y);var e=t.LeftBound;null!==e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,g.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=g.ClipperBase.Unassigned),null!==(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,g.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=g.ClipperBase.Unassigned),t=t.Next}this.m_ActiveEdges=null}},g.ClipperBase.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new g.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new g.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var i=this.m_Scanbeam;null!==i.Next&&t<=i.Next.Y;)i=i.Next;if(t===i.Y)return;var r=new g.Scanbeam;r.Y=t,r.Next=i.Next,i.Next=r}},g.ClipperBase.prototype.PopScanbeam=function(t){return null===this.m_Scanbeam?(t.v=0,!1):(t.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},g.ClipperBase.prototype.LocalMinimaPending=function(){return null!==this.m_CurrentLM},g.ClipperBase.prototype.CreateOutRec=function(){var t=new g.OutRec;return t.Idx=g.ClipperBase.Unassigned,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},g.ClipperBase.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];e.Pts=null,e=null,this.m_PolyOuts[t]=null},g.ClipperBase.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&g.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,g.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},g.ClipperBase.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!==t.PrevInAEL&&e.NextInAEL!==e.PrevInAEL){if(t.NextInAEL===e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var r=t.PrevInAEL;null!==r&&(r.NextInAEL=e),e.PrevInAEL=r,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else if(e.NextInAEL===t){var l=t.NextInAEL;null!==l&&(l.PrevInAEL=e);var o=e.PrevInAEL;null!==o&&(o.NextInAEL=t),t.PrevInAEL=o,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=l}else{var p=t.NextInAEL,n=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=p,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},g.ClipperBase.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!==this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},g.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=g.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=g.PolyFillType.pftEvenOdd,this.m_SubjFillType=g.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,g.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=g.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t),g.use_xyz&&(this.ZFillFunction=null)},g.Clipper.ioReverseSolution=1,g.Clipper.ioStrictlySimple=2,g.Clipper.ioPreserveCollinear=4,g.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),g.ClipperBase.prototype.Clear.call(this))},g.Clipper.prototype.InsertMaxima=function(t){var e=new g.Maxima;if(e.X=t,null===this.m_Maxima)this.m_Maxima=e,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(t<this.m_Maxima.X)e.Next=this.m_Maxima,e.Prev=null,this.m_Maxima=e;else{for(var i=this.m_Maxima;null!==i.Next&&t>=i.Next.X;)i=i.Next;if(t===i.X)return;e.Next=i.Next,e.Prev=i,null!==i.Next&&(i.Next.Prev=e),i.Next=e}},g.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,i=t[1]instanceof g.PolyTree;if(4===e&&!i){var r=t[0],l=t[1],o=t[2],p=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&g.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,g.Clear(l),this.m_SubjFillType=o,this.m_ClipFillType=p,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{(s=this.ExecuteInternal())&&this.BuildResult(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}if(4===e&&i){r=t[0];var n=t[1];o=t[2],p=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=p,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var s;(s=this.ExecuteInternal())&&this.BuildResult2(n)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}if(2===e&&!i){r=t[0],l=t[1];return this.Execute(r,l,g.PolyFillType.pftEvenOdd,g.PolyFillType.pftEvenOdd)}if(2===e&&i){r=t[0],n=t[1];return this.Execute(r,n,g.PolyFillType.pftEvenOdd,g.PolyFillType.pftEvenOdd)}},g.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole===t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole===t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},g.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var t,e,i,r={},l={};if(!this.PopScanbeam(r))return!1;for(this.InsertLocalMinimaIntoAEL(r.v);this.PopScanbeam(l)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(l.v))return!1;this.ProcessEdgesAtTopOfScanbeam(l.v),r.v=l.v,this.InsertLocalMinimaIntoAEL(r.v)}for(e=0,i=this.m_PolyOuts.length;e<i;e++)null===(t=this.m_PolyOuts[e]).Pts||t.IsOpen||(t.IsHole^this.ReverseSolution)==this.Area$1(t)>0&&this.ReversePolyPtLinks(t.Pts);for(this.JoinCommonEdges(),e=0,i=this.m_PolyOuts.length;e<i;e++)null!==(t=this.m_PolyOuts[e]).Pts&&(t.IsOpen?this.FixupOutPolyline(t):this.FixupOutPolygon(t));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},g.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);g.Clear(this.m_PolyOuts)},g.Clipper.prototype.AddJoin=function(t,e,i){var r=new g.Join;r.OutPt1=t,r.OutPt2=e,r.OffPt.X=i.X,r.OffPt.Y=i.Y,g.use_xyz&&(r.OffPt.Z=i.Z),this.m_Joins.push(r)},g.Clipper.prototype.AddGhostJoin=function(t,e){var i=new g.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,g.use_xyz&&(i.OffPt.Z=e.Z),this.m_GhostJoins.push(i)},g.Clipper.prototype.SetZ=function(t,e,i){if(null!==this.ZFillFunction){if(0!==t.Z||null===this.ZFillFunction)return;g.FPoint.op_Equality(t,e.Bot)?t.Z=e.Bot.Z:g.FPoint.op_Equality(t,e.Top)?t.Z=e.Top.Z:g.FPoint.op_Equality(t,i.Bot)?t.Z=i.Bot.Z:g.FPoint.op_Equality(t,i.Top)?t.Z=i.Top.Z:this.ZFillFunction(e.Bot,e.Top,i.Bot,i.Top,t)}},g.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var e,i,r={};this.PopLocalMinima(t,r);){e=r.v.LeftBound,i=r.v.RightBound;var l=null;if(null===e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(l=this.AddOutPt(i,i.Bot))):null===i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(l=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(i,e),this.SetWindingCount(e),i.WindCnt=e.WindCnt,i.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(l=this.AddLocalMinPoly(e,i,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!==i&&(g.ClipperBase.IsHorizontal(i)?(null!==i.NextInLML&&this.InsertScanbeam(i.NextInLML.Top.Y),this.AddEdgeToSEL(i)):this.InsertScanbeam(i.Top.Y)),null!==e&&null!==i){if(null!==l&&g.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&0!==i.WindDelta)for(var o=0,p=this.m_GhostJoins.length;o<p;o++){var n=this.m_GhostJoins[o];this.HorzSegmentsOverlap(n.OutPt1.Pt.X,n.OffPt.X,i.Bot.X,i.Top.X)&&this.AddJoin(n.OutPt1,l,n.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X===e.Bot.X&&e.PrevInAEL.OutIdx>=0&&g.ClipperBase.SlopesEqual5(e.PrevInAEL.Curr,e.PrevInAEL.Top,e.Curr,e.Top)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var s=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(l,s,e.Top)}if(e.NextInAEL!==i){if(i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&g.ClipperBase.SlopesEqual5(i.PrevInAEL.Curr,i.PrevInAEL.Top,i.Curr,i.Top)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){s=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(l,s,i.Top)}var $=e.NextInAEL;if(null!==$)for(;$!==i;)this.IntersectEdges(i,$,e.Curr),$=$.NextInAEL}}}},g.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},g.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X===t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<g.Clipper.TopX(t,e.Top.Y):t.Top.X>g.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},g.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp===g.PolyType.ptSubject?this.m_SubjFillType===g.PolyFillType.pftEvenOdd:this.m_ClipFillType===g.PolyFillType.pftEvenOdd},g.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp===g.PolyType.ptSubject?this.m_ClipFillType===g.PolyFillType.pftEvenOdd:this.m_SubjFillType===g.PolyFillType.pftEvenOdd},g.Clipper.prototype.IsContributing=function(t){var e,i;switch(t.PolyTyp===g.PolyType.ptSubject?(e=this.m_SubjFillType,i=this.m_ClipFillType):(e=this.m_ClipFillType,i=this.m_SubjFillType),e){case g.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!==t.WindCnt)return!1;break;case g.PolyFillType.pftNonZero:if(1!==Math.abs(t.WindCnt))return!1;break;case g.PolyFillType.pftPositive:if(1!==t.WindCnt)return!1;break;default:if(-1!==t.WindCnt)return!1;}switch(this.m_ClipType){case g.ClipType.ctIntersection:switch(i){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case g.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0;}case g.ClipType.ctUnion:switch(i){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return 0===t.WindCnt2;case g.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0;}case g.ClipType.ctDifference:if(t.PolyTyp===g.PolyType.ptSubject)switch(i){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return 0===t.WindCnt2;case g.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0;}else switch(i){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case g.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0;}case g.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(i){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return 0===t.WindCnt2;case g.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0;}}return!0},g.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!==t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e){var i=t.PolyTyp===g.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;0===t.WindDelta?t.WindCnt=i===g.PolyFillType.pftNegative?-1:1:t.WindCnt=t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges}else if(0===t.WindDelta&&this.m_ClipType!==g.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var r=!0,l=e.PrevInAEL;null!==l;)l.PolyTyp===e.PolyTyp&&0!==l.WindDelta&&(r=!r),l=l.PrevInAEL;t.WindCnt=r?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!==t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!==t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},g.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},g.Clipper.prototype.PopEdgeFromSEL=function(t){if(t.v=this.m_SortedEdges,null===t.v)return!1;var e=t.v;return this.m_SortedEdges=t.v.NextInSEL,null!==this.m_SortedEdges&&(this.m_SortedEdges.PrevInSEL=null),e.NextInSEL=null,e.PrevInSEL=null,!0},g.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},g.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL===e)null!==(i=e.NextInSEL)&&(i.PrevInSEL=t),null!==(r=t.PrevInSEL)&&(r.NextInSEL=e),e.PrevInSEL=r,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i;else if(e.NextInSEL===t){null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(r=e.PrevInSEL)&&(r.NextInSEL=t),t.PrevInSEL=r,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,r=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=r,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},g.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0===e.WindDelta&&this.AddOutPt(e,i),t.OutIdx===e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},g.Clipper.prototype.AddLocalMinPoly=function(t,e,i){var r,l,o;if(g.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(r=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,t.Side=g.EdgeSide.esLeft,e.Side=g.EdgeSide.esRight,o=(l=t).PrevInAEL===e?e.PrevInAEL:l.PrevInAEL):(r=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=g.EdgeSide.esRight,e.Side=g.EdgeSide.esLeft,o=(l=e).PrevInAEL===t?t.PrevInAEL:l.PrevInAEL),null!==o&&o.OutIdx>=0&&o.Top.Y<i.Y&&l.Top.Y<i.Y){var p=g.Clipper.TopX(o,i.Y),n=g.Clipper.TopX(l,i.Y);if(p===n&&0!==l.WindDelta&&0!==o.WindDelta&&g.ClipperBase.SlopesEqual5(new g.FPoint2(p,i.Y),o.Top,new g.FPoint2(n,i.Y),l.Top)){var s=this.AddOutPt(o,i);this.AddJoin(r,s,l.Top)}}return r},g.Clipper.prototype.AddOutPt=function(t,e){if(t.OutIdx<0){(r=this.CreateOutRec()).IsOpen=0===t.WindDelta;var i=new g.OutPt;return r.Pts=i,i.Idx=r.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,g.use_xyz&&(i.Pt.Z=e.Z),i.Next=i,i.Prev=i,r.IsOpen||this.SetHoleState(t,r),t.OutIdx=r.Idx,i}var r,l=(r=this.m_PolyOuts[t.OutIdx]).Pts,o=t.Side===g.EdgeSide.esLeft;return o&&g.FPoint.op_Equality(e,l.Pt)?l:!o&&g.FPoint.op_Equality(e,l.Prev.Pt)?l.Prev:((i=new g.OutPt).Idx=r.Idx,i.Pt.X=e.X,i.Pt.Y=e.Y,g.use_xyz&&(i.Pt.Z=e.Z),i.Next=l,i.Prev=l.Prev,i.Prev.Next=i,l.Prev=i,o&&(r.Pts=i),i)},g.Clipper.prototype.GetLastOutPt=function(t){var e=this.m_PolyOuts[t.OutIdx];return t.Side===g.EdgeSide.esLeft?e.Pts:e.Pts.Prev},g.Clipper.prototype.SwapPoints=function(t,e){var i=new g.FPoint1(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,g.use_xyz&&(t.Value.Z=e.Value.Z),e.Value.X=i.X,e.Value.Y=i.Y,g.use_xyz&&(e.Value.Z=i.Z)},g.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,r){var l;return t>e&&(l=t,t=e,e=l),i>r&&(l=i,i=r,r=l),t<r&&i<e},g.Clipper.prototype.SetHoleState=function(t,e){for(var i=t.PrevInAEL,r=null;null!==i;)i.OutIdx>=0&&0!==i.WindDelta&&(null===r?r=i:r.OutIdx===i.OutIdx&&(r=null)),i=i.PrevInAEL;null===r?(e.FirstLeft=null,e.IsHole=!1):(e.FirstLeft=this.m_PolyOuts[r.OutIdx],e.IsHole=!e.FirstLeft.IsHole)},g.Clipper.prototype.GetDx=function(t,e){return t.Y===e.Y?g.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},g.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;g.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Prev;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;g.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Next;var l=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;g.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Prev;var o=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;g.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Next;var p=Math.abs(this.GetDx(e.Pt,i.Pt));return Math.max(r,l)===Math.max(o,p)&&Math.min(r,l)===Math.min(o,p)?this.Area(t)>0:r>=o&&r>=p||l>=o&&l>=p},g.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!==t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y===t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!==t&&i.Prev!==t&&(e=i)),i=i.Next;if(null!==e)for(;e!==i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;g.FPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},g.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,r=e.BottomPt;return i.Pt.Y>r.Pt.Y?t:i.Pt.Y<r.Pt.Y?e:i.Pt.X<r.Pt.X?t:i.Pt.X>r.Pt.X?e:i.Next===i?e:r.Next===r?t:this.FirstIsBottomPt(i,r)?t:e},g.Clipper.prototype.OutRec1RightOfOutRec2=function(t,e){do{if((t=t.FirstLeft)===e)return!0}while(null!==t);return!1},g.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!==this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},g.Clipper.prototype.AppendPolygon=function(t,e){var i,r=this.m_PolyOuts[t.OutIdx],l=this.m_PolyOuts[e.OutIdx];i=this.OutRec1RightOfOutRec2(r,l)?l:this.OutRec1RightOfOutRec2(l,r)?r:this.GetLowermostRec(r,l);var o=r.Pts,p=o.Prev,n=l.Pts,s=n.Prev;t.Side===g.EdgeSide.esLeft?e.Side===g.EdgeSide.esLeft?(this.ReversePolyPtLinks(n),n.Next=o,o.Prev=n,p.Next=s,s.Prev=p,r.Pts=s):(s.Next=o,o.Prev=s,n.Prev=p,p.Next=n,r.Pts=n):e.Side===g.EdgeSide.esRight?(this.ReversePolyPtLinks(n),p.Next=s,s.Prev=p,n.Next=o,o.Prev=n):(p.Next=n,n.Prev=p,o.Prev=s,s.Next=o),r.BottomPt=null,i===l&&(l.FirstLeft!==r&&(r.FirstLeft=l.FirstLeft),r.IsHole=l.IsHole),l.Pts=null,l.BottomPt=null,l.FirstLeft=r;var $=t.OutIdx,C=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var a=this.m_ActiveEdges;null!==a;){if(a.OutIdx===C){a.OutIdx=$,a.Side=t.Side;break}a=a.NextInAEL}l.Idx=r.Idx},g.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do{i=e.Next,e.Next=e.Prev,e.Prev=i,e=i}while(e!==t)}},g.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},g.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},g.Clipper.prototype.IntersectEdges=function(t,e,i){var r=t.OutIdx>=0,l=e.OutIdx>=0;if(g.use_xyz&&this.SetZ(i,t,e),!g.use_lines||0!==t.WindDelta&&0!==e.WindDelta){if(t.PolyTyp===e.PolyTyp){if(this.IsEvenOddFillType(t)){var o=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=o}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta==0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;}else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var p,n,s,$,C,a;switch(t.PolyTyp===g.PolyType.ptSubject?(p=this.m_SubjFillType,s=this.m_ClipFillType):(p=this.m_ClipFillType,s=this.m_SubjFillType),e.PolyTyp===g.PolyType.ptSubject?(n=this.m_SubjFillType,$=this.m_ClipFillType):(n=this.m_ClipFillType,$=this.m_SubjFillType),p){case g.PolyFillType.pftPositive:C=t.WindCnt;break;case g.PolyFillType.pftNegative:C=-t.WindCnt;break;default:C=Math.abs(t.WindCnt);}switch(n){case g.PolyFillType.pftPositive:a=e.WindCnt;break;case g.PolyFillType.pftNegative:a=-e.WindCnt;break;default:a=Math.abs(e.WindCnt);}if(r&&l)0!==C&&1!==C||0!==a&&1!==a||t.PolyTyp!==e.PolyTyp&&this.m_ClipType!==g.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),g.Clipper.SwapSides(t,e),g.Clipper.SwapPolyIndexes(t,e));else if(r)0!==a&&1!==a||(this.AddOutPt(t,i),g.Clipper.SwapSides(t,e),g.Clipper.SwapPolyIndexes(t,e));else if(l)0!==C&&1!==C||(this.AddOutPt(e,i),g.Clipper.SwapSides(t,e),g.Clipper.SwapPolyIndexes(t,e));else if(!(0!==C&&1!==C||0!==a&&1!==a)){var u,v;switch(s){case g.PolyFillType.pftPositive:u=t.WindCnt2;break;case g.PolyFillType.pftNegative:u=-t.WindCnt2;break;default:u=Math.abs(t.WindCnt2);}switch($){case g.PolyFillType.pftPositive:v=e.WindCnt2;break;case g.PolyFillType.pftNegative:v=-e.WindCnt2;break;default:v=Math.abs(e.WindCnt2);}if(t.PolyTyp!==e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1===C&&1===a)switch(this.m_ClipType){case g.ClipType.ctIntersection:u>0&&v>0&&this.AddLocalMinPoly(t,e,i);break;case g.ClipType.ctUnion:u<=0&&v<=0&&this.AddLocalMinPoly(t,e,i);break;case g.ClipType.ctDifference:(t.PolyTyp===g.PolyType.ptClip&&u>0&&v>0||t.PolyTyp===g.PolyType.ptSubject&&u<=0&&v<=0)&&this.AddLocalMinPoly(t,e,i);break;case g.ClipType.ctXor:this.AddLocalMinPoly(t,e,i);}else g.Clipper.SwapSides(t,e)}}else{if(0===t.WindDelta&&0===e.WindDelta)return;t.PolyTyp===e.PolyTyp&&t.WindDelta!==e.WindDelta&&this.m_ClipType===g.ClipType.ctUnion?0===t.WindDelta?l&&(this.AddOutPt(t,i),r&&(t.OutIdx=-1)):r&&(this.AddOutPt(e,i),l&&(e.OutIdx=-1)):t.PolyTyp!==e.PolyTyp&&(0!==t.WindDelta||1!==Math.abs(e.WindCnt)||this.m_ClipType===g.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!==Math.abs(t.WindCnt)||this.m_ClipType===g.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,i),l&&(e.OutIdx=-1)):(this.AddOutPt(t,i),r&&(t.OutIdx=-1)))}},g.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!==this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},g.Clipper.prototype.ProcessHorizontals=function(){for(var t={};this.PopEdgeFromSEL(t);)this.ProcessHorizontal(t.v)},g.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=g.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=g.Direction.dRightToLeft)},g.Clipper.prototype.ProcessHorizontal=function(t){var e={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,e);for(var i=e.Dir,r=e.Left,l=e.Right,o=0===t.WindDelta,p=t,n=null;null!==p.NextInLML&&g.ClipperBase.IsHorizontal(p.NextInLML);)p=p.NextInLML;null===p.NextInLML&&(n=this.GetMaximaPair(p));var s=this.m_Maxima;if(null!==s)if(i===g.Direction.dLeftToRight){for(;null!==s&&s.X<=t.Bot.X;)s=s.Next;null!==s&&s.X>=p.Top.X&&(s=null)}else{for(;null!==s.Next&&s.Next.X<t.Bot.X;)s=s.Next;s.X<=p.Top.X&&(s=null)}for(var $=null;;){for(var C=t===p,a=this.GetNextInAEL(t,i);null!==a;){if(null!==s)if(i===g.Direction.dLeftToRight)for(;null!==s&&s.X<a.Curr.X;)t.OutIdx>=0&&!o&&this.AddOutPt(t,new g.FPoint2(s.X,t.Bot.Y)),s=s.Next;else for(;null!==s&&s.X>a.Curr.X;)t.OutIdx>=0&&!o&&this.AddOutPt(t,new g.FPoint2(s.X,t.Bot.Y)),s=s.Prev;if(i===g.Direction.dLeftToRight&&a.Curr.X>l||i===g.Direction.dRightToLeft&&a.Curr.X<r)break;if(a.Curr.X===t.Top.X&&null!==t.NextInLML&&a.Dx<t.NextInLML.Dx)break;if(t.OutIdx>=0&&!o){g.use_xyz&&(i===g.Direction.dLeftToRight?this.SetZ(a.Curr,t,a):this.SetZ(a.Curr,a,t)),$=this.AddOutPt(t,a.Curr);for(var u=this.m_SortedEdges;null!==u;){if(u.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,u.Bot.X,u.Top.X)){var v=this.GetLastOutPt(u);this.AddJoin(v,$,u.Top)}u=u.NextInSEL}this.AddGhostJoin($,t.Bot)}if(a===n&&C)return t.OutIdx>=0&&this.AddLocalMaxPoly(t,n,t.Top),this.DeleteFromAEL(t),void this.DeleteFromAEL(n);if(i===g.Direction.dLeftToRight){var h=new g.FPoint2(a.Curr.X,t.Curr.Y);this.IntersectEdges(t,a,h)}else{h=new g.FPoint2(a.Curr.X,t.Curr.Y);this.IntersectEdges(a,t,h)}var P=this.GetNextInAEL(a,i);this.SwapPositionsInAEL(t,a),a=P}if(null===t.NextInLML||!g.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot),e={Dir:i,Left:r,Right:l},this.GetHorzDirection(t,e),i=e.Dir,r=e.Left,l=e.Right}if(t.OutIdx>=0&&null===$){$=this.GetLastOutPt(t);for(u=this.m_SortedEdges;null!==u;){if(u.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,u.Bot.X,u.Top.X)){v=this.GetLastOutPt(u);this.AddJoin(v,$,u.Top)}u=u.NextInSEL}this.AddGhostJoin($,t.Top)}if(null!==t.NextInLML){if(t.OutIdx>=0){if($=this.AddOutPt(t,t.Top),0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var L=t.PrevInAEL;P=t.NextInAEL;if(null!==L&&L.Curr.X===t.Bot.X&&L.Curr.Y===t.Bot.Y&&0===L.WindDelta&&L.OutIdx>=0&&L.Curr.Y>L.Top.Y&&g.ClipperBase.SlopesEqual3(t,L)){v=this.AddOutPt(L,t.Bot);this.AddJoin($,v,t.Top)}else if(null!==P&&P.Curr.X===t.Bot.X&&P.Curr.Y===t.Bot.Y&&0!==P.WindDelta&&P.OutIdx>=0&&P.Curr.Y>P.Top.Y&&g.ClipperBase.SlopesEqual3(t,P)){v=this.AddOutPt(P,t.Bot);this.AddJoin($,v,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);}else t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},g.Clipper.prototype.GetNextInAEL=function(t,e){return e===g.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},g.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!==t&&t.Next.NextInLML!==t},g.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y===e&&null===t.NextInLML},g.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y===e&&null!==t.NextInLML},g.Clipper.prototype.GetMaximaPair=function(t){return g.FPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?t.Next:g.FPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML?t.Prev:null},g.Clipper.prototype.GetMaximaPairEx=function(t){var e=this.GetMaximaPair(t);return null===e||e.OutIdx===g.ClipperBase.Skip||e.NextInAEL===e.PrevInAEL&&!g.ClipperBase.IsHorizontal(e)?null:e},g.Clipper.prototype.ProcessIntersections=function(t){if(null===this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0===this.m_IntersectList.length)return!0;if(1!==this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(e){this.m_SortedEdges=null,this.m_IntersectList.length=0,g.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},g.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=g.Clipper.TopX(e,t),e=e.NextInAEL;for(var i=!0;i&&null!==this.m_SortedEdges;){for(i=!1,e=this.m_SortedEdges;null!==e.NextInSEL;){var r=e.NextInSEL,l=new g.FPoint0;if(e.Curr.X>r.Curr.X){this.IntersectPoint(e,r,l),l.Y<t&&(l=new g.FPoint2(g.Clipper.TopX(e,t),t));var o=new g.IntersectNode;o.Edge1=e,o.Edge2=r,o.Pt.X=l.X,o.Pt.Y=l.Y,g.use_xyz&&(o.Pt.Z=l.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(e,r),i=!0}else e=r}if(null===e.PrevInSEL)break;e.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},g.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL===t.Edge2||t.Edge1.PrevInSEL===t.Edge2},g.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},g.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i===t)return!1;var r=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=r}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},g.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0},g.Clipper.TopX=function(t,e){return e===t.Top.Y?t.Top.X:t.Bot.X+t.Dx*(e-t.Bot.Y)},g.Clipper.prototype.IntersectPoint=function(t,e,i){var r,l;if(i.X=0,i.Y=0,t.Dx===e.Dx)return i.Y=t.Curr.Y,void(i.X=g.Clipper.TopX(t,i.Y));if(0===t.Delta.X)i.X=t.Bot.X,g.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(l=e.Bot.Y-e.Bot.X/e.Dx,i.Y=i.X/e.Dx+l);else if(0===e.Delta.X)i.X=e.Bot.X,g.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,i.Y=i.X/t.Dx+r);else{r=t.Bot.X-t.Bot.Y*t.Dx;var o=((l=e.Bot.X-e.Bot.Y*e.Dx)-r)/(t.Dx-e.Dx);i.Y=o,Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=t.Dx*o+r:i.X=e.Dx*o+l}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=g.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=g.Clipper.TopX(t,i.Y):i.X=g.Clipper.TopX(e,i.Y)}i.Y>t.Curr.Y&&(i.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(e.Dx)?i.X=g.Clipper.TopX(e,i.Y):i.X=g.Clipper.TopX(t,i.Y))},g.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var i=this.IsMaxima(e,t);if(i){var r=this.GetMaximaPairEx(e);i=null===r||!g.ClipperBase.IsHorizontal(r)}if(i){this.StrictlySimple&&this.InsertMaxima(e.Top.X);var l=e.PrevInAEL;this.DoMaxima(e),e=null===l?this.m_ActiveEdges:l.NextInAEL}else{if(this.IsIntermediate(e,t)&&g.ClipperBase.IsHorizontal(e.NextInLML)?((e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=g.Clipper.TopX(e,t),e.Curr.Y=t),g.use_xyz&&(e.Top.Y===t?e.Curr.Z=e.Top.Z:e.Bot.Y===t?e.Curr.Z=e.Bot.Z:e.Curr.Z=0),this.StrictlySimple){l=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==l&&l.OutIdx>=0&&l.Curr.X===e.Curr.X&&0!==l.WindDelta){var o=new g.FPoint1(e.Curr);g.use_xyz&&this.SetZ(o,l,e);var p=this.AddOutPt(l,o),n=this.AddOutPt(e,o);this.AddJoin(p,n,o)}}e=e.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){p=null;e.OutIdx>=0&&(p=this.AddOutPt(e,e.Top));l=(e=this.UpdateEdgeIntoAEL(e)).PrevInAEL;var s=e.NextInAEL;if(null!==l&&l.Curr.X===e.Bot.X&&l.Curr.Y===e.Bot.Y&&null!==p&&l.OutIdx>=0&&l.Curr.Y===l.Top.Y&&g.ClipperBase.SlopesEqual5(e.Curr,e.Top,l.Curr,l.Top)&&0!==e.WindDelta&&0!==l.WindDelta){n=this.AddOutPt(ePrev2,e.Bot);this.AddJoin(p,n,e.Top)}else if(null!==s&&s.Curr.X===e.Bot.X&&s.Curr.Y===e.Bot.Y&&null!==p&&s.OutIdx>=0&&s.Curr.Y===s.Top.Y&&g.ClipperBase.SlopesEqual5(e.Curr,e.Top,s.Curr,s.Top)&&0!==e.WindDelta&&0!==s.WindDelta){n=this.AddOutPt(s,e.Bot);this.AddJoin(p,n,e.Top)}}e=e.NextInAEL}},g.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPairEx(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var i=t.NextInAEL;null!==i&&i!==e;)this.IntersectEdges(t,i,t.Top),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1===t.OutIdx&&-1===e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?(t.OutIdx>=0&&this.AddLocalMaxPoly(t,e,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(e)):g.use_lines&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=g.ClipperBase.Unassigned),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=g.ClipperBase.Unassigned),this.DeleteFromAEL(e)):g.Error("DoMaxima error")},g.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},g.Clipper.Orientation=function(t){return g.Clipper.Area(t)>=0},g.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do{e++,i=i.Next}while(i!==t);return e},g.Clipper.prototype.BuildResult=function(t){g.Clear(t);for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var r=this.m_PolyOuts[e];if(null!==r.Pts){var l=r.Pts.Prev,o=this.PointCount(l);if(!(o<2)){for(var p=new Array(o),n=0;n<o;n++)p[n]=l.Pt,l=l.Prev;t.push(p)}}}},g.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var r=this.m_PolyOuts[e],l=this.PointCount(r.Pts);if(!(r.IsOpen&&l<2||!r.IsOpen&&l<3)){this.FixHoleLinkage(r);var o=new g.PolyNode;t.m_AllPolys.push(o),r.PolyNode=o,o.m_polygon.length=l;for(var p=r.Pts.Prev,n=0;n<l;n++)o.m_polygon[n]=p.Pt,p=p.Prev}}for(e=0,i=this.m_PolyOuts.length;e<i;e++){null!==(r=this.m_PolyOuts[e]).PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!==r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},g.Clipper.prototype.FixupOutPolyline=function(t){for(var e=t.Pts,i=e.Prev;e!==i;)if(e=e.Next,g.FPoint.op_Equality(e.Pt,e.Prev.Pt)){e===i&&(i=e.Prev);var r=e.Prev;r.Next=e.Next,e.Next.Prev=r,e=r}e===e.Prev&&(t.Pts=null)},g.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts,r=this.PreserveCollinear||this.StrictlySimple;;){if(i.Prev===i||i.Prev===i.Next)return void(t.Pts=null);if(g.FPoint.op_Equality(i.Pt,i.Next.Pt)||g.FPoint.op_Equality(i.Pt,i.Prev.Pt)||g.ClipperBase.SlopesEqual4(i.Prev.Pt,i.Pt,i.Next.Pt)&&(!r||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt)))e=null,i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev;else{if(i===e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},g.Clipper.prototype.DupOutPt=function(t,e){var i=new g.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,g.use_xyz&&(i.Pt.Z=t.Pt.Z),i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},g.Clipper.prototype.GetOverlap=function(t,e,i,r,l){return t<e?i<r?(l.Left=Math.max(t,i),l.Right=Math.min(e,r)):(l.Left=Math.max(t,r),l.Right=Math.min(e,i)):i<r?(l.Left=Math.max(e,i),l.Right=Math.min(t,r)):(l.Left=Math.max(e,r),l.Right=Math.min(t,i)),l.Left<l.Right},g.Clipper.prototype.JoinHorz=function(t,e,i,r,l,o){var p=t.Pt.X>e.Pt.X?g.Direction.dRightToLeft:g.Direction.dLeftToRight,n=i.Pt.X>r.Pt.X?g.Direction.dRightToLeft:g.Direction.dLeftToRight;if(p===n)return!1;if(p===g.Direction.dLeftToRight){for(;t.Next.Pt.X<=l.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y===l.Y;)t=t.Next;o&&t.Pt.X!==l.X&&(t=t.Next),e=this.DupOutPt(t,!o),g.FPoint.op_Inequality(e.Pt,l)&&((t=e).Pt.X=l.X,t.Pt.Y=l.Y,g.use_xyz&&(t.Pt.Z=l.Z),e=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=l.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y===l.Y;)t=t.Next;o||t.Pt.X===l.X||(t=t.Next),e=this.DupOutPt(t,o),g.FPoint.op_Inequality(e.Pt,l)&&((t=e).Pt.X=l.X,t.Pt.Y=l.Y,g.use_xyz&&(t.Pt.Z=l.Z),e=this.DupOutPt(t,o))}if(n===g.Direction.dLeftToRight){for(;i.Next.Pt.X<=l.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===l.Y;)i=i.Next;o&&i.Pt.X!==l.X&&(i=i.Next),r=this.DupOutPt(i,!o),g.FPoint.op_Inequality(r.Pt,l)&&((i=r).Pt.X=l.X,i.Pt.Y=l.Y,g.use_xyz&&(i.Pt.Z=l.Z),r=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=l.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===l.Y;)i=i.Next;o||i.Pt.X===l.X||(i=i.Next),r=this.DupOutPt(i,o),g.FPoint.op_Inequality(r.Pt,l)&&((i=r).Pt.X=l.X,i.Pt.Y=l.Y,g.use_xyz&&(i.Pt.Z=l.Z),r=this.DupOutPt(i,o))}return p===g.Direction.dLeftToRight===o?(t.Prev=i,i.Next=t,e.Next=r,r.Prev=e):(t.Next=i,i.Prev=t,e.Prev=r,r.Next=e),!0},g.Clipper.prototype.JoinPoints=function(t,e,i){var r=t.OutPt1,l=new g.OutPt,o=t.OutPt2,p=new g.OutPt,n=t.OutPt1.Pt.Y===t.OffPt.Y;if(n&&g.FPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&g.FPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(e!==i)return!1;for(l=t.OutPt1.Next;l!==r&&g.FPoint.op_Equality(l.Pt,t.OffPt);)l=l.Next;var s=l.Pt.Y>t.OffPt.Y;for(p=t.OutPt2.Next;p!==o&&g.FPoint.op_Equality(p.Pt,t.OffPt);)p=p.Next;return s!==p.Pt.Y>t.OffPt.Y&&(s?(l=this.DupOutPt(r,!1),p=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,l.Next=p,p.Prev=l,t.OutPt1=r,t.OutPt2=l,!0):(l=this.DupOutPt(r,!0),p=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,l.Prev=p,p.Next=l,t.OutPt1=r,t.OutPt2=l,!0))}if(n){for(l=r;r.Prev.Pt.Y===r.Pt.Y&&r.Prev!==l&&r.Prev!==o;)r=r.Prev;for(;l.Next.Pt.Y===l.Pt.Y&&l.Next!==r&&l.Next!==o;)l=l.Next;if(l.Next===r||l.Next===o)return!1;for(p=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==p&&o.Prev!==l;)o=o.Prev;for(;p.Next.Pt.Y===p.Pt.Y&&p.Next!==o&&p.Next!==r;)p=p.Next;if(p.Next===o||p.Next===r)return!1;var $={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,l.Pt.X,o.Pt.X,p.Pt.X,$))return!1;var C,a=$.Left,u=$.Right,v=new g.FPoint0;return r.Pt.X>=a&&r.Pt.X<=u?(v.X=r.Pt.X,v.Y=r.Pt.Y,g.use_xyz&&(v.Z=r.Pt.Z),C=r.Pt.X>l.Pt.X):o.Pt.X>=a&&o.Pt.X<=u?(v.X=o.Pt.X,v.Y=o.Pt.Y,g.use_xyz&&(v.Z=o.Pt.Z),C=o.Pt.X>p.Pt.X):l.Pt.X>=a&&l.Pt.X<=u?(v.X=l.Pt.X,v.Y=l.Pt.Y,g.use_xyz&&(v.Z=l.Pt.Z),C=l.Pt.X>r.Pt.X):(v.X=p.Pt.X,v.Y=p.Pt.Y,g.use_xyz&&(v.Z=p.Pt.Z),C=p.Pt.X>o.Pt.X),t.OutPt1=r,t.OutPt2=o,this.JoinHorz(r,l,o,p,v,C)}for(l=r.Next;g.FPoint.op_Equality(l.Pt,r.Pt)&&l!==r;)l=l.Next;var h=l.Pt.Y>r.Pt.Y||!g.ClipperBase.SlopesEqual4(r.Pt,l.Pt,t.OffPt);if(h){for(l=r.Prev;g.FPoint.op_Equality(l.Pt,r.Pt)&&l!==r;)l=l.Prev;if(l.Pt.Y>r.Pt.Y||!g.ClipperBase.SlopesEqual4(r.Pt,l.Pt,t.OffPt))return!1}for(p=o.Next;g.FPoint.op_Equality(p.Pt,o.Pt)&&p!==o;)p=p.Next;var P=p.Pt.Y>o.Pt.Y||!g.ClipperBase.SlopesEqual4(o.Pt,p.Pt,t.OffPt);if(P){for(p=o.Prev;g.FPoint.op_Equality(p.Pt,o.Pt)&&p!==o;)p=p.Prev;if(p.Pt.Y>o.Pt.Y||!g.ClipperBase.SlopesEqual4(o.Pt,p.Pt,t.OffPt))return!1}return l!==r&&p!==o&&l!==p&&(e!==i||h!==P)&&(h?(l=this.DupOutPt(r,!1),p=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,l.Next=p,p.Prev=l,t.OutPt1=r,t.OutPt2=l,!0):(l=this.DupOutPt(r,!0),p=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,l.Prev=p,p.Next=l,t.OutPt1=r,t.OutPt2=l,!0))},g.Clipper.GetBounds=function(t){for(var e=0,i=t.length;e<i&&0===t[e].length;)e++;if(e===i)return new g.FRect(0,0,0,0);var r=new g.FRect;for(r.left=t[e][0].X,r.right=r.left,r.top=t[e][0].Y,r.bottom=r.top;e<i;e++)for(var l=0,o=t[e].length;l<o;l++)t[e][l].X<r.left?r.left=t[e][l].X:t[e][l].X>r.right&&(r.right=t[e][l].X),t[e][l].Y<r.top?r.top=t[e][l].Y:t[e][l].Y>r.bottom&&(r.bottom=t[e][l].Y);return r},g.Clipper.prototype.GetBounds2=function(t){var e=t,i=new g.FRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!==e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},g.Clipper.PointInPolygon=function(t,e){var i=0,r=e.length;if(r<3)return 0;for(var l=e[0],o=1;o<=r;++o){var p=o===r?e[0]:e[o];if(p.Y===t.Y&&(p.X===t.X||l.Y===t.Y&&p.X>t.X==l.X<t.X))return-1;if(l.Y<t.Y!=p.Y<t.Y)if(l.X>=t.X){if(p.X>t.X)i=1-i;else{if(0===(n=(l.X-t.X)*(p.Y-t.Y)-(p.X-t.X)*(l.Y-t.Y)))return-1;n>0==p.Y>l.Y&&(i=1-i)}}else if(p.X>t.X){var n;if(0===(n=(l.X-t.X)*(p.Y-t.Y)-(p.X-t.X)*(l.Y-t.Y)))return-1;n>0==p.Y>l.Y&&(i=1-i)}l=p}return i},g.Clipper.prototype.PointInPolygon=function(t,e){var i=0,r=e,l=t.X,o=t.Y,p=e.Pt.X,n=e.Pt.Y;do{var s=(e=e.Next).Pt.X,$=e.Pt.Y;if($===o&&(s===l||n===o&&s>l==p<l))return-1;if(n<o!=$<o)if(p>=l){if(s>l)i=1-i;else{if(0===(C=(p-l)*($-o)-(s-l)*(n-o)))return-1;C>0==$>n&&(i=1-i)}}else if(s>l){var C;if(0===(C=(p-l)*($-o)-(s-l)*(n-o)))return-1;C>0==$>n&&(i=1-i)}p=s,n=$}while(r!==e);return i},g.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var r=this.PointInPolygon(i.Pt,e);if(r>=0)return r>0;i=i.Next}while(i!==t);return!0},g.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i,r,l=0,o=this.m_PolyOuts.length;l<o;l++)i=this.m_PolyOuts[l],r=g.Clipper.ParseFirstLeft(i.FirstLeft),null!==i.Pts&&r===t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)},g.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i,r,l=e.FirstLeft,o=0,p=this.m_PolyOuts.length;o<p;o++)null!==(i=this.m_PolyOuts[o]).Pts&&i!==e&&i!==t&&((r=g.Clipper.ParseFirstLeft(i.FirstLeft))!==l&&r!==t&&r!==e||(this.Poly2ContainsPoly1(i.Pts,t.Pts)?i.FirstLeft=t:this.Poly2ContainsPoly1(i.Pts,e.Pts)?i.FirstLeft=e:i.FirstLeft!==t&&i.FirstLeft!==e||(i.FirstLeft=l)))},g.Clipper.prototype.FixupFirstLefts3=function(t,e){for(var i,r,l=0,o=this.m_PolyOuts.length;l<o;l++)i=this.m_PolyOuts[l],r=g.Clipper.ParseFirstLeft(i.FirstLeft),null!==i.Pts&&r===t&&(i.FirstLeft=e)},g.Clipper.ParseFirstLeft=function(t){for(;null!==t&&null===t.Pts;)t=t.FirstLeft;return t},g.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i,r=this.m_Joins[t],l=this.GetOutRec(r.OutPt1.Idx),o=this.GetOutRec(r.OutPt2.Idx);if(null!==l.Pts&&null!==o.Pts)if(!l.IsOpen&&!o.IsOpen)i=l===o?l:this.OutRec1RightOfOutRec2(l,o)?o:this.OutRec1RightOfOutRec2(o,l)?l:this.GetLowermostRec(l,o),this.JoinPoints(r,l,o)&&(l===o?(l.Pts=r.OutPt1,l.BottomPt=null,(o=this.CreateOutRec()).Pts=r.OutPt2,this.UpdateOutPtIdxs(o),this.Poly2ContainsPoly1(o.Pts,l.Pts)?(o.IsHole=!l.IsHole,o.FirstLeft=l,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,l),(o.IsHole^this.ReverseSolution)==this.Area$1(o)>0&&this.ReversePolyPtLinks(o.Pts)):this.Poly2ContainsPoly1(l.Pts,o.Pts)?(o.IsHole=l.IsHole,l.IsHole=!o.IsHole,o.FirstLeft=l.FirstLeft,l.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(l,o),(l.IsHole^this.ReverseSolution)==this.Area$1(l)>0&&this.ReversePolyPtLinks(l.Pts)):(o.IsHole=l.IsHole,o.FirstLeft=l.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(l,o))):(o.Pts=null,o.BottomPt=null,o.Idx=l.Idx,l.IsHole=i.IsHole,i===o&&(l.FirstLeft=o.FirstLeft),o.FirstLeft=l,this.m_UsingPolyTree&&this.FixupFirstLefts3(o,l)))}},g.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!==t.Pts)},g.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i&&!e.IsOpen)do{for(var r=i.Next;r!==e.Pts;){if(g.FPoint.op_Equality(i.Pt,r.Pt)&&r.Next!==i&&r.Prev!==i){var l=i.Prev,o=r.Prev;i.Prev=o,o.Next=i,r.Prev=l,l.Next=r,e.Pts=i;var p=this.CreateOutRec();p.Pts=r,this.UpdateOutPtIdxs(p),this.Poly2ContainsPoly1(p.Pts,e.Pts)?(p.IsHole=!e.IsHole,p.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(p,e)):this.Poly2ContainsPoly1(e.Pts,p.Pts)?(p.IsHole=e.IsHole,e.IsHole=!p.IsHole,p.FirstLeft=e.FirstLeft,e.FirstLeft=p,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,p)):(p.IsHole=e.IsHole,p.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,p)),r=i}r=r.Next}i=i.Next}while(i!==e.Pts)}},g.Clipper.Area=function(t){if(!Array.isArray(t))return 0;var e=t.length;if(e<3)return 0;for(var i=0,r=0,l=e-1;r<e;++r)i+=(t[l].X+t[r].X)*(t[l].Y-t[r].Y),l=r;return .5*-i},g.Clipper.prototype.Area=function(t){var e=t;if(null===t)return 0;var i=0;do{i+=(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next}while(t!==e);return .5*i},g.Clipper.prototype.Area$1=function(t){return this.Area(t.Pts)},g.Clipper.SimplifyPolygon=function(t,e){var i=new Array,r=new g.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,g.PolyType.ptSubject,!0),r.Execute(g.ClipType.ctUnion,i,e,e),i},g.Clipper.SimplifyPolygons=function(t,e){void 0===e&&(e=g.PolyFillType.pftEvenOdd);var i=new Array,r=new g.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,g.PolyType.ptSubject,!0),r.Execute(g.ClipType.ctUnion,i,e,e),i},g.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,r=t.Y-e.Y;return i*i+r*r},g.Clipper.DistanceFromLineSqrd=function(t,e,i){var r=e.Y-i.Y,l=i.X-e.X,o=r*e.X+l*e.Y;return(o=r*t.X+l*t.Y-o)*o/(r*r+l*l)},g.Clipper.SlopesNearCollinear=function(t,e,i,r){return Math.abs(t.X-e.X)>Math.abs(t.Y-e.Y)?t.X>e.X==t.X<i.X?g.Clipper.DistanceFromLineSqrd(t,e,i)<r:e.X>t.X==e.X<i.X?g.Clipper.DistanceFromLineSqrd(e,t,i)<r:g.Clipper.DistanceFromLineSqrd(i,t,e)<r:t.Y>e.Y==t.Y<i.Y?g.Clipper.DistanceFromLineSqrd(t,e,i)<r:e.Y>t.Y==e.Y<i.Y?g.Clipper.DistanceFromLineSqrd(e,t,i)<r:g.Clipper.DistanceFromLineSqrd(i,t,e)<r},g.Clipper.PointsAreClose=function(t,e,i){var r=t.X-e.X,l=t.Y-e.Y;return r*r+l*l<=i},g.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},g.Clipper.CleanPolygon=function(t,e){void 0===e&&(e=1.415);var i=t.length;if(0===i)return new Array;for(var r=new Array(i),l=0;l<i;++l)r[l]=new g.OutPt;for(l=0;l<i;++l)r[l].Pt=t[l],r[l].Next=r[(l+1)%i],r[l].Next.Prev=r[l],r[l].Idx=0;for(var o=e*e,p=r[0];0===p.Idx&&p.Next!==p.Prev;)g.Clipper.PointsAreClose(p.Pt,p.Prev.Pt,o)?(p=g.Clipper.ExcludeOp(p),i--):g.Clipper.PointsAreClose(p.Prev.Pt,p.Next.Pt,o)?(g.Clipper.ExcludeOp(p.Next),p=g.Clipper.ExcludeOp(p),i-=2):g.Clipper.SlopesNearCollinear(p.Prev.Pt,p.Pt,p.Next.Pt,o)?(p=g.Clipper.ExcludeOp(p),i--):(p.Idx=1,p=p.Next);i<3&&(i=0);var n=new Array(i);for(l=0;l<i;++l)n[l]=new g.FPoint1(p.Pt),p=p.Next;return r=null,n},g.Clipper.CleanPolygons=function(t,e){for(var i=new Array(t.length),r=0,l=t.length;r<l;r++)i[r]=g.Clipper.CleanPolygon(t[r],e);return i},g.Clipper.Minkowski=function(t,e,i,r){var l=r?1:0,o=t.length,p=e.length,n=new Array;if(i)for(var s=0;s<p;s++){for(var $=new Array(o),C=0,a=t.length,u=t[C];C<a;u=t[++C])$[C]=new g.FPoint2(e[s].X+u.X,e[s].Y+u.Y);n.push($)}else for(s=0;s<p;s++){for($=new Array(o),C=0,a=t.length,u=t[C];C<a;u=t[++C])$[C]=new g.FPoint2(e[s].X-u.X,e[s].Y-u.Y);n.push($)}var v=new Array;for(s=0;s<p-1+l;s++)for(C=0;C<o;C++){var h=new Array;h.push(n[s%p][C%o]),h.push(n[(s+1)%p][C%o]),h.push(n[(s+1)%p][(C+1)%o]),h.push(n[s%p][(C+1)%o]),g.Clipper.Orientation(h)||h.reverse(),v.push(h)}return v},g.Clipper.MinkowskiSum=function(t,e,i){if(e[0]instanceof Array){s=e;for(var r=new g.Paths,l=(p=new g.Clipper,0);l<s.length;++l){var o=g.Clipper.Minkowski(t,s[l],!0,i);if(p.AddPaths(o,g.PolyType.ptSubject,!0),i){n=g.Clipper.TranslatePath(s[l],t[0]);p.AddPath(n,g.PolyType.ptClip,!0)}}return p.Execute(g.ClipType.ctUnion,r,g.PolyFillType.pftNonZero,g.PolyFillType.pftNonZero),r}var p,n=e,s=g.Clipper.Minkowski(t,n,!0,i);return(p=new g.Clipper).AddPaths(s,g.PolyType.ptSubject,!0),p.Execute(g.ClipType.ctUnion,s,g.PolyFillType.pftNonZero,g.PolyFillType.pftNonZero),s},g.Clipper.TranslatePath=function(t,e){for(var i=new g.Path,r=0;r<t.length;r++)i.push(new g.FPoint2(t[r].X+e.X,t[r].Y+e.Y));return i},g.Clipper.MinkowskiDiff=function(t,e){var i=g.Clipper.Minkowski(t,e,!1,!0),r=new g.Clipper;return r.AddPaths(i,g.PolyType.ptSubject,!0),r.Execute(g.ClipType.ctUnion,i,g.PolyFillType.pftNonZero,g.PolyFillType.pftNonZero),i},g.Clipper.PolyTreeToPaths=function(t){var e=new Array;return g.Clipper.AddPolyNodeToPaths(t,g.Clipper.NodeType.ntAny,e),e},g.Clipper.AddPolyNodeToPaths=function(t,e,i){var r=!0;switch(e){case g.Clipper.NodeType.ntOpen:return;case g.Clipper.NodeType.ntClosed:r=!t.IsOpen;}t.m_polygon.length>0&&r&&i.push(t.m_polygon);for(var l=0,o=t.Childs(),p=o.length,n=o[l];l<p;n=o[++l])g.Clipper.AddPolyNodeToPaths(n,e,i)},g.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new g.Paths,i=0,r=t.ChildCount();i<r;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},g.Clipper.ClosedPathsFromPolyTree=function(t){var e=new g.Paths;return g.Clipper.AddPolyNodeToPaths(t,g.Clipper.NodeType.ntClosed,e),e},gq(g.Clipper,g.ClipperBase),g.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},g.ClipperOffset=function(t,e){void 0===t&&(t=2),void 0===e&&(e=g.ClipperOffset.def_arc_tolerance),this.m_destPolys=new g.Paths,this.m_srcPoly=new g.Path,this.m_destPoly=new g.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new g.FPoint0,this.m_polyNodes=new g.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},g.ClipperOffset.two_pi=6.28318530717959,g.ClipperOffset.def_arc_tolerance=.25,g.ClipperOffset.prototype.Clear=function(){g.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},g.ClipperOffset.prototype.AddPath=function(t,e,i){var r=t.length-1;if(!(r<0)){var l=new g.PolyNode;if(l.m_jointype=e,l.m_endtype=i,i===g.EndType.etClosedLine||i===g.EndType.etClosedPolygon)for(;r>0&&g.FPoint.op_Equality(t[0],t[r]);)r--;l.m_polygon.push(t[0]);for(var o=0,p=0,n=1;n<=r;n++)g.FPoint.op_Inequality(l.m_polygon[o],t[n])&&(o++,l.m_polygon.push(t[n]),(t[n].Y>l.m_polygon[p].Y||t[n].Y===l.m_polygon[p].Y&&t[n].X<l.m_polygon[p].X)&&(p=o));if(!(i===g.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(l),i===g.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new g.FPoint2(this.m_polyNodes.ChildCount()-1,p);else{var s=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(l.m_polygon[p].Y>s.Y||l.m_polygon[p].Y===s.Y&&l.m_polygon[p].X<s.X)&&(this.m_lowest=new g.FPoint2(this.m_polyNodes.ChildCount()-1,p))}}},g.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var r=0,l=t.length;r<l;r++)this.AddPath(t[r],e,i)},g.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!g.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){((e=this.m_polyNodes.Childs()[t]).m_endtype===g.EndType.etClosedPolygon||e.m_endtype===g.EndType.etClosedLine&&g.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++){var e;(e=this.m_polyNodes.Childs()[t]).m_endtype!==g.EndType.etClosedLine||g.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},g.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,r=e.Y-t.Y;if(0===i&&0===r)return new g.FPoint2(0,0);var l=1/Math.sqrt(i*i+r*r);return i*=l,r*=l,new g.FPoint2(r,-i)},g.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,g.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){(l=this.m_polyNodes.Childs()[e]).m_endtype===g.EndType.etClosedPolygon&&this.m_destPolys.push(l.m_polygon)}else{var i;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,i=this.ArcTolerance<=0?g.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*g.ClipperOffset.def_arc_tolerance?Math.abs(t)*g.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var r=3.14159265358979/Math.acos(1-i/Math.abs(t));this.m_sin=Math.sin(g.ClipperOffset.two_pi/r),this.m_cos=Math.cos(g.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/g.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(e=0;e<this.m_polyNodes.ChildCount();e++){var l=this.m_polyNodes.Childs()[e];this.m_srcPoly=l.m_polygon;var o=this.m_srcPoly.length;if(!(0===o||t<=0&&(o<3||l.m_endtype!==g.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!==o){this.m_normals.length=0;for(a=0;a<o-1;a++)this.m_normals.push(g.ClipperOffset.GetUnitNormal(this.m_srcPoly[a],this.m_srcPoly[a+1]));if(l.m_endtype===g.EndType.etClosedLine||l.m_endtype===g.EndType.etClosedPolygon?this.m_normals.push(g.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new g.FPoint1(this.m_normals[o-2])),l.m_endtype===g.EndType.etClosedPolygon){var p=o-1;for(a=0;a<o;a++)p=this.OffsetPoint(a,p,l.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(l.m_endtype===g.EndType.etClosedLine){for(p=o-1,a=0;a<o;a++)p=this.OffsetPoint(a,p,l.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var n=this.m_normals[o-1];for(a=o-1;a>0;a--)this.m_normals[a]=new g.FPoint2(-this.m_normals[a-1].X,-this.m_normals[a-1].Y);this.m_normals[0]=new g.FPoint2(-n.X,-n.Y),p=0;for(a=o-1;a>=0;a--)p=this.OffsetPoint(a,p,l.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var s;for(p=0,a=1;a<o-1;++a)p=this.OffsetPoint(a,p,l.m_jointype);if(l.m_endtype===g.EndType.etOpenButt){a=o-1;s=new g.FPoint2(this.m_srcPoly[a].X+this.m_normals[a].X*t,this.m_srcPoly[a].Y+this.m_normals[a].Y*t),this.m_destPoly.push(s),s=new g.FPoint2(this.m_srcPoly[a].X-this.m_normals[a].X*t,this.m_srcPoly[a].Y-this.m_normals[a].Y*t),this.m_destPoly.push(s)}else{a=o-1;p=o-2,this.m_sinA=0,this.m_normals[a]=new g.FPoint2(-this.m_normals[a].X,-this.m_normals[a].Y),l.m_endtype===g.EndType.etOpenSquare?this.DoSquare(a,p):this.DoRound(a,p)}for(a=o-1;a>0;a--)this.m_normals[a]=new g.FPoint2(-this.m_normals[a-1].X,-this.m_normals[a-1].Y);this.m_normals[0]=new g.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y);for(a=(p=o-1)-1;a>0;--a)p=this.OffsetPoint(a,p,l.m_jointype);l.m_endtype===g.EndType.etOpenButt?(s=new g.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*t,this.m_srcPoly[0].Y-this.m_normals[0].Y*t),this.m_destPoly.push(s),s=new g.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*t,this.m_srcPoly[0].Y+this.m_normals[0].Y*t),this.m_destPoly.push(s)):(p=1,this.m_sinA=0,l.m_endtype===g.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(l.m_jointype===g.JoinType.jtRound)for(var $=1,C=0,a=1;a<=r;a++){this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[0].X+$*t,this.m_srcPoly[0].Y+C*t));var u=$;$=$*this.m_cos-this.m_sin*C,C=u*this.m_sin+C*this.m_cos}else{$=-1,C=-1;for(var a=0;a<4;++a)this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[0].X+$*t,this.m_srcPoly[0].Y+C*t)),$<0?$=1:C<0?C=1:$=-1}this.m_destPolys.push(this.m_destPoly)}}}},g.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof g.PolyTree){l=t[0],o=t[1];if(l.Clear(),this.FixOrientations(),this.DoOffset(o),(r=new g.Clipper(0)).AddPaths(this.m_destPolys,g.PolyType.ptSubject,!0),o>0)r.Execute(g.ClipType.ctUnion,l,g.PolyFillType.pftPositive,g.PolyFillType.pftPositive);else{n=g.Clipper.GetBounds(this.m_destPolys);if((p=new g.Path).push(new g.FPoint2(n.left-10,n.bottom+10)),p.push(new g.FPoint2(n.right+10,n.bottom+10)),p.push(new g.FPoint2(n.right+10,n.top-10)),p.push(new g.FPoint2(n.left-10,n.top-10)),r.AddPath(p,g.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(g.ClipType.ctUnion,l,g.PolyFillType.pftNegative,g.PolyFillType.pftNegative),1===l.ChildCount()&&l.Childs()[0].ChildCount()>0){var e=l.Childs()[0];l.Childs()[0]=e.Childs()[0],l.Childs()[0].m_Parent=l;for(var i=1;i<e.ChildCount();i++)l.AddChild(e.Childs()[i])}else l.Clear()}}else{var r,l=t[0],o=t[1];if(g.Clear(l),this.FixOrientations(),this.DoOffset(o),(r=new g.Clipper(0)).AddPaths(this.m_destPolys,g.PolyType.ptSubject,!0),o>0)r.Execute(g.ClipType.ctUnion,l,g.PolyFillType.pftPositive,g.PolyFillType.pftPositive);else{var p,n=g.Clipper.GetBounds(this.m_destPolys);(p=new g.Path).push(new g.FPoint2(n.left-10,n.bottom+10)),p.push(new g.FPoint2(n.right+10,n.bottom+10)),p.push(new g.FPoint2(n.right+10,n.top-10)),p.push(new g.FPoint2(n.left-10,n.top-10)),r.AddPath(p,g.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(g.ClipType.ctUnion,l,g.PolyFillType.pftNegative,g.PolyFillType.pftNegative),l.length>0&&l.splice(0,1)}}},g.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,0===this.m_sinA)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta)),this.m_destPoly.push(new g.FPoint1(this.m_srcPoly[t])),this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta));else switch(i){case g.JoinType.jtMiter:var r=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1;r>=this.m_miterLim?this.DoMiter(t,e,r):this.DoSquare(t,e);break;case g.JoinType.jtSquare:this.DoSquare(t,e);break;case g.JoinType.jtRound:this.DoRound(t,e);}return e=t},g.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i),this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i))),this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i),this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i)))},g.ClipperOffset.prototype.DoMiter=function(t,e,i){var r=this.m_delta/i;this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*r,this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*r))},g.ClipperOffset.prototype.DoRound=function(t,e){for(var i,r=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),l=Math.max(Math.round(this.m_StepsPerRad*Math.abs(r)),1),o=this.m_normals[e].X,p=this.m_normals[e].Y,n=0;n<l;++n)this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[t].X+o*this.m_delta,this.m_srcPoly[t].Y+p*this.m_delta)),i=o,o=o*this.m_cos-this.m_sin*p,p=i*this.m_sin+p*this.m_cos;this.m_destPoly.push(new g.FPoint2(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta))},g.Error=function(t){try{throw new Error(t)}catch(e){alert(e.message)}},g.JS={},g.JS.AreaOfPolygon=function(t){return g.Clipper.Area(t)},g.JS.AreaOfPolygons=function(t){for(var e=0,i=0;i<t.length;i++)e+=g.Clipper.Area(t[i]);return e},g.JS.BoundsOfPath=function(t){return g.JS.BoundsOfPaths([t])},g.JS.BoundsOfPaths=function(t){return g.Clipper.GetBounds(t)},g.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array;t=g.JS.Clone(t);if("number"!=typeof e||null===e)return g.Error("Delta is not a number in Clean()."),t;if(0===t.length||1===t.length&&0===t[0].length||e<0)return t;i||(t=[t]);for(var r,l,o,p,n,s,$,C=t.length,a=[],u=0;u<C;u++)if(0!==(r=(l=t[u]).length))if(r<3)o=l,a.push(o);else{for(o=l,p=e*e,n=l[0],s=1,$=1;$<r;$++)(l[$].X-n.X)*(l[$].X-n.X)+(l[$].Y-n.Y)*(l[$].Y-n.Y)<=p||(o[s]=l[$],n=l[$],s++);n=l[s-1],(l[0].X-n.X)*(l[0].X-n.X)+(l[0].Y-n.Y)*(l[0].Y-n.Y)<=p&&s--,s<r&&o.splice(s,r-s),o.length&&a.push(o)}return!i&&a.length?a=a[0]:i||0!==a.length?i&&0===a.length&&(a=[[]]):a=[],a},g.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1===t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,r,l,o,p=t.length,n=new Array(p);for(r=0;r<p;r++){for(i=t[r].length,o=new Array(i),l=0;l<i;l++)o[l]={X:t[r][l].X,Y:t[r][l].Y};n[r]=o}return e||(n=n[0]),n},g.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return g.Error("Tolerance is not a number in Lighten()."),g.JS.Clone(t);if(0===t.length||1===t.length&&0===t[0].length||e<0)return g.JS.Clone(t);var i,r,l,o,p,n,s,$,C,a,u,v,h,P,L,d,f=t[0]instanceof Array;f||(t=[t]);var y=t.length,b=e*e,m=[];for(i=0;i<y;i++)if(0!==(n=(l=t[i]).length)){for(o=0;o<1e6;o++){for(p=[],l[(n=l.length)-1].X!==l[0].X||l[n-1].Y!==l[0].Y?(u=1,l.push({X:l[0].X,Y:l[0].Y}),n=l.length):u=0,a=[],r=0;r<n-2;r++)s=l[r],C=l[r+1],$=l[r+2],L=s.X,d=s.Y,v=$.X-L,h=$.Y-d,0===v&&0===h||((P=((C.X-L)*v+(C.Y-d)*h)/(v*v+h*h))>1?(L=$.X,d=$.Y):P>0&&(L+=v*P,d+=h*P)),(v=C.X-L)*v+(h=C.Y-d)*h<=b&&(a[r+1]=1,r++);for(p.push({X:l[0].X,Y:l[0].Y}),r=1;r<n-1;r++)a[r]||p.push({X:l[r].X,Y:l[r].Y});if(p.push({X:l[n-1].X,Y:l[n-1].Y}),u&&l.pop(),!a.length)break;l=p}p[(n=p.length)-1].X===p[0].X&&p[n-1].Y===p[0].Y&&p.pop(),p.length>2&&m.push(p)}return f||(m=m[0]),void 0===m&&(m=[]),m},g.JS.PerimeterOfPath=function(t,e){if(void 0===t)return 0;var i,r,l=Math.sqrt,o=0,p=0,n=0,s=0,$=0,C=t.length;if(C<2)return 0;for(e&&(t[C]=t[0],C++);--C;)p=(i=t[C]).X,n=i.Y,o+=l((p-(s=(r=t[C-1]).X))*(p-s)+(n-($=r.Y))*(n-$));return e&&t.pop(),o},g.JS.PerimeterOfPaths=function(t,e){for(var i=0,r=0;r<t.length;r++)i+=g.JS.PerimeterOfPath(t[r],e);return i},g.ExPolygons=function(){return[]},g.ExPolygon=function(){this.outer=null,this.holes=null},g.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new g.ExPolygon;i.outer=t.Contour();var r,l,o,p,n,s,$=t.Childs(),C=$.length;for(i.holes=new Array(C),o=0;o<C;o++)for(r=$[o],i.holes[o]=r.Contour(),p=0,s=(n=r.Childs()).length;p<s;p++)l=n[p],g.JS.AddOuterPolyNodeToExPolygons(l,e);e.push(i)},g.JS.ExPolygonsToPaths=function(t){var e,i,r,l,o=new g.Paths;for(e=0,r=t.length;e<r;e++)for(o.push(t[e].outer),i=0,l=t[e].holes.length;i<l;i++)o.push(t[e].holes[i]);return o},g.JS.PolyTreeToExPolygons=function(t){var e,i,r,l,o=new g.ExPolygons;for(i=0,l=(r=t.Childs()).length;i<l;i++)e=r[i],g.JS.AddOuterPolyNodeToExPolygons(e,o);return o},tg=g;mo,Kv;var iG=function($){return[$.X,$.Y]};var uo=function($){return{X:$[0],Y:$[1]}};Math.getDistance=function(e,t){var r=e[0],i=e[1],n=t[0]-r,a=t[1]-i;return n*=n,a*=a,Math.sqrt(n+a)};var eG=Ja.model("Hanger",{left:Ja.number,right:Ja.number,front:Ja.number,back:Ja.number,height:Ja.number,leftWallHeight:3.1,rightWallHeight:3.1,ridgeOffset:0,wallThickness:.4,ridgeHeight:3.7,bayCount:2,width:4.2}).views(function(e){return{get profile(){var t=e.width/2;return[[-t,0],[t,0],[t,e.rightWallHeight],[e.ridgeOffset,e.ridgeHeight],[-t,e.leftWallHeight]]},get profileArea(){return mo(e.profile.map(uo))},get innerProfile(){return Kv(e.profile.map(uo),-e.wallThickness).map(iG)},get innerProfileArea(){return mo(e.innerProfile.map(uo))},get project(){return vx(e)},get length(){return e.bayCount*e.project.gridSizeLength},get floorArea(){return e.width*e.length},get claddingArea(){return e.length*e.leftWallHeight+2*e.profileArea+e.length*e.rightWallHeight},get roofingArea(){var t=e.profile.filter(function(e){e[0];return e[1]>0});return(Math.getDistance(t[0],t[1])+Math.getDistance(t[1],t[2]))*e.length},get internalWidth(){return e.width-2*e.wallThickness},get internalLength(){return e.length-2*e.wallThickness},get internalHeight(){return e.ridgeHeight-2*e.wallThickness},get internalFlooringArea(){return e.internalWidth*e.internalLength},get internalWallArea(){return(e.leftWallHeight-2*e.wallThickness)*e.internalLength+(e.rightWallHeight-2*e.wallThickness)*e.internalLength},get insulationVolume(){return e.profileArea*e.length-e.innerProfileArea*e.internalLength}}}).actions(function(e){return{adjust:function(t,r){e[t]=r}}});var dG=qn&&qn.__generator||function(e,r){var t,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function p(i){return function(p){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue;}i=r.call(e,o)}catch(p){i=[6,p],n=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,p])}}},Ys=Ja.model("Project",{id:Ja.identifier,name:Ja.string,description:Ja.string,defaultCurrency:"EUR",hanger:eG,state:Ja.optional(Ja.enumeration("State",["updating","done","error"]),"done")}).views(function(e){return{get gridSize(){return .3},get gridSizeWidth(){return e.gridSize},get gridSizeHeight(){return e.gridSize},get gridSizeLength(){return 4*e.gridSize},get buttonText(){switch(e.state){case"updating":return"Updating engine...";case"done":return"Save to engine \u2192";case"error":return"There was an error";}}}}).actions(function(e){return{updateSpreadSheet:xm(function(){var r;return dG(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e.state="updating",[4,YK.post("https://patternweb-google-sheets.herokuapp.com/update",{range:"Dashboard!C6:D47",values:[["12345"],["H4.0 Demo"],["From presentation"],["Alastair Parvin"],["Open Systems Lab"],["\u20AC EURO"],["United Kingdom"],["London"],["217 Mare Street"],["E8 3QE"],[],[e.hanger.width],[e.hanger.length],[],[e.hanger.leftWallHeight],[e.hanger.rightWallHeight],[e.hanger.height],[e.hanger.ridgeOffset],[1],[],[],[],[e.hanger.wallThickness],[e.hanger.wallThickness],[e.hanger.wallThickness],[],[],[1],[1],[],[],[],[],[void 0,e.hanger.insulationVolume],[],[void 0,e.hanger.claddingArea],[void 0,e.hanger.roofingArea],[],[void 0,e.hanger.internalWallArea],[void 0,e.hanger.internalWallArea],[],[]]})];case 1:return t.sent(),e.state="done",[3,3];case 2:return r=t.sent(),e.state="error",console.error(r),[3,3];case 3:return[2];}})})}});qn.default=Ys;zb();var CE=new rh,rC=Ys.create({id:"1",name:"Pionierswoning WHAlm",description:"Tiny House",defaultCurrency:"EUR",hanger:{left:-3,right:3,front:1,back:-1,height:4}});function xQ(){return React.createElement(wh,{project:rC,scene:CE},React.createElement(m.Fragment,null,React.createElement(vD,null),React.createElement(vr,null)))}zb(),fh.render(React.createElement(xQ,null),document.getElementById("app"));})();